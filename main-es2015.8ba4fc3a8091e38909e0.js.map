{"version":3,"sources":["webpack:///node_modules/@igo2/core/locale sync ^\\.\\/.*\\.json$","webpack:///node_modules/moment/locale sync ^\\.\\/.*$","webpack:///src/$_lazy_route_resource lazy namespace object","webpack:///src/environments/environment.ts","webpack:///src/app/pages/portal/map-overlay/map-overlay.module.ts","webpack:///src/app/pages/portal/expansion-panel/expansion-panel.module.ts","webpack:///src/app/pages/portal/toast-panel/toast-panel.module.ts","webpack:///src/app/pages/portal/sidenav/sidenav.module.ts","webpack:///src/app/pages/portal/toast-panel-for-expansion/toast-panel-for-expansion.module.ts","webpack:///src/app/pages/portal/welcome-window/welcome-window.module.ts","webpack:///src/app/pages/portal/portal.module.ts","webpack:///src/app/pages/portal/welcome-window/welcome-window.service.ts","webpack:///src/app/pages/portal/welcome-window/welcome-window.component.html","webpack:///src/app/pages/portal/welcome-window/welcome-window.component.ts","webpack:///src/app/pages/portal/sidenav/sidenav.component.html","webpack:///src/app/pages/portal/sidenav/sidenav.component.ts","webpack:///src/app/pages/portal/map-overlay/map-overlay.component.html","webpack:///src/app/pages/portal/map-overlay/map-overlay.component.ts","webpack:///src/app/pages/portal/toast-panel-for-expansion/toast-panel-for-expansion.component.ts","webpack:///src/app/pages/portal/expansion-panel/expansion-panel-header.component.html","webpack:///src/app/pages/portal/toast-panel-for-expansion/toast-panel-for-expansion.component.html","webpack:///src/app/pages/portal/toast-panel-for-expansion/toast-panel-for-expansion.animations.ts","webpack:///src/app/pages/portal/expansion-panel/expansion-panel-header.component.ts","webpack:///src/app/pages/portal/expansion-panel/expansion-panel.component.ts","webpack:///src/app/pages/portal/expansion-panel/expansion-panel.component.html","webpack:///src/app/pages/portal/expansion-panel/expansion-panel.animations.ts","webpack:///src/app/pages/portal/toast-panel/toast-panel.component.html","webpack:///src/app/pages/portal/toast-panel/toast-panel.component.ts","webpack:///src/app/pages/portal/portal.component.html","webpack:///src/app/pages/portal/portal.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/pages/portal/portal.animation.ts","webpack:///src/app/app.component.ts","webpack:///src/app/app.module.ts","webpack:///src/main.ts"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","webpackEmptyAsyncContext","Promise","then","environment","production","igo","app","forceCoordsNA","catalog","sources","title","url","showLegend","depot","importExport","language","prefix","interactiveTour","tourInMobile","pathToConfigFile","searchSources","nominatim","available","storedqueries","icherche","searchUrl","order","params","limit","coordinatesreverse","showInPointerSummary","icherchereverse","enabled","ilayer","cadastre","projections","alias","def","extent","searchOverlayStyle","base","markerColor","markerOpacity","markerOutlineColor","fillColor","fillOpacity","strokeColor","strokeOpacity","strokeWidth","focus","selection","queryOverlayStyle","MapOverlayModule","AppExpansionPanelModule","AppToastPanelModule","AppSidenavModule","AppToastPanelForExpansionModule","IgoWelcomeWindowModule","PortalModule","I","forRoot","configService","storageService","igoVersionDifferentFromStorage","this","isVersionDifferentFromStorage","setStorageConfig","nbVisit","Number","get","set","getConfig","remove","dialogConfig","disableClose","autoFocus","maxWidth","showAgain","dialog","welcomeWindowService","languageService","discoverTitleInLocale$","of","html$","BehaviorSubject","undefined","computeHtml","closeAll","deltaDay","isDateParsable","releaseDate","Date","releaseDateAppConfig","releaseDateApp","isNaN","getDate","console","log","releaseDateString","day","month","getMonth","year","getFullYear","title$$","translate","pipe","instant","description","version","subscribe","r","next","unsubscribe","toolState","catalogState","title$","openedChange","toolChange","_map","value","_opened","emit","toolbox","activeTool$$","activeTool$","tool","sidenavTitle","name","catalogStore","all","state","selected","layer","layers","options","active","activatePreviousTool","deactivateTool","MapOverlayComponent","contextService","mediaService","mapOverlay","context$$","context$","context","handleContextChange","media$$","media$","media","overlay","getMedia","includes","push","opened","withHeader","duration","delay","easing","opacity","display","expandedChange","_expanded","expanded","onToggleClick","maximized","_backdropShown","backdropShown","onBackdropClick","storageState","queryState","hasFeatureEmphasisOnSelection","_zoomAuto","_fullExtent","fullExtent$","fullExtent","isHtmlDisplay","iconResizeWindows","icon","actionStore","actionbarMode","Overlay","multiple$","isResultSelected$","isSelectedResultOutOfView$","initialized","format","focusedResult$","withZoomButton","zoomAuto$","fullExtentEvent","windowHtmlDisplayEvent","resultSelected$","zoomAuto","setResizeWindowIcon","_store","store","entities$","_entities","unselectResult","SESSION","results","length","selectResult","event","clear","getValue","localOlFeature","readFeature","data","dataProjection","projection","featureProjection","Default","isSelectedResultOutOfView$$","combineLatest","viewController","state$","debounceTime","bunch","selectedResult","selectedOlFeature","selectedOlFeatureExtent","latestResult","trigger","monitorResultOutOfView","resultOrResolution$$","tap","res","resolution$","buildResultEmphasis","storageChange$$","storageChange$","skipWhile","storageChange","key","change","currentValue","load","tooltip","handler","Zoom","availability","multiple","olFeatures","result","checkbox","checkCondition","v","isDesktop","clearFeatureEmphasis","olGeometry","getGeometry","getExtent","x","y","feature1","geometry","abstractFocusedOrSelectedResult","meta","style","assign","feature","queryOverlayStyleSelection","queryOverlayStyleFocus","setZIndex","queryResultsOverlay","addFeature","None","removeFeature","force","focused","update","properties","target","setHtmlDisplay","features","removeFeatures","addFeatures","setFeatures","Mobile","preventDefault","keyCode","previousResult","nextResult","i","indexOf","action","SWIPE_ACTION","RIGHT","LEFT","UP","DOWN","className","args","reduceWindow","enlargeWindows","route","workspaceState","authService","layerService","dataSourceService","cdRef","capabilitiesService","contextState","mapState","searchState","searchSourceService","importService","http","messageService","dialogWindow","queryService","minSearchTermLength","hasExpansionPanel","hasGeolocateButton","showRotationButtonIfNoRotation","workspaceNotAvailableMessage","workspaceEntitySortChange$","paginatorOptions","pageSize","pageSizeOptions","workspaceMenuClass","workspaceMaximize$$","workspaceMaximize$","sidenavOpened","searchBarTerm","onSettingsChange$","termDefinedInUrl","termSplitter","termDefinedInUrlTriggered","addedLayers$$","contextMenuStore","contextLoaded","toastPanelForExpansionOpened","showToastPanelForExpansionToggle","selectedWorkspace$","menuButtonReverseColor","toastPanelHtmlDisplay","_toastPanelOpened","igoSearchPointerSummaryEnabled","detectChanges","Tablet","getOrientation","Landscape","Portrait","isMobile","isTablet","isPortrait","workspacePanelExpanded","expansionPanelExpanded","searchResultsGeometryEnabled$","content","workspace","hasWidget","workspace$","window","searchTermSplitter$","initWelcomeWindow","authenticate$","authenticated","onChangeContext","searchCoordinate","contextMenuCoord","openGoogleMaps","openGoogleStreetView","queryStore","count$","pairwise","prevCnt","currentCnt","padding","toastPanelOpened","ol","once","readQueryParams","setSearchSettingsChange","selectedResult$","closeSidenav","workspaceEnabled$","empty$","workspaceEmpty","updateMapBrowserClass","workspaceMaximize","activeWks","activeWidget$$","activeWorkspaceWidget$","widget","openToastPanelForExpansion","closeToastPanelForExpansion","openSidenav$$","openSidenav$","openSidenav","wks","inResolutionRange$","entityStore","visible","matPaginator","workspacePaginator","baseQuerySearchSource","getQuerySearchSource","querySearchSourceArray","added","getProperties","_featureStore","featureStoreLayer","getAllowedFieldsAndAlias","getQueryTitle","querySearchSource","find","s","sourceTitle","request","reverse","source","queryResults","f","forEach","sub","toggleSidenav","term","routeParams","search","deactivateCustomFilterTermStrategy","setSearchTerm","replace","trim","onClearSearch","onBeforeSearch","isReverseSearch","research","enabledSources","getEnabledSources","filter","newResults","searchStore","concat","updateMany","setSearchResultsGeometryStatus","searchBar","nativeElement","getElementsByTagName","cancelOngoingAddLayer","queryParams","qParams","uri","readLayersQueryParams","contextManager","getTool","toolToOpen","toolToOpenOnContextChange","toolOrderToOpen","toolName","activateTool","handleExpansionAndToastOnMobile","searchResultsOverlay","setSelectedResult","getSources","searchSource","getClickCoordinate","contextmenuPoint","boundingMapBrowser","mapBrowser","getBoundingClientRect","top","scrollY","pageYOffset","left","scrollX","pageXOffset","pixel","coord","getCoordinateFromPixel","proj","open","getGoogleMapsCoordLink","getGoogleStreetViewLink","c","toFixed","join","header","classList","add","status","readToolParams","readSearchParams","readFocusFirst","setTimeout","resultItem","document","item","click","entities$$","stateView","all$","entities","take","computeFocusFirst","activateCustomFilterTermStrategy","searchResultsOlFeatures","entity","dataType","totalExtent","zoomToExtent","readLayersQueryParamsByType","readVectorQueryParams","type","nameParamLayersKey","urlsKey","layersByService","split","urls","cnt","extractLayersByService","layerFromUrl","layerOptions","removeUndefined","LAYERS","visibility","computeLayerVisibilityFromUrl","addLayerFromURL","parseInt","lastIndex","lastIndexOf","fileName","slice","responseType","file","File","lastModified","now","import","onFileImportSuccess","error","onFileImportError","outLayersByService","startsWith","substr","endsWith","zIndex","commonSourceOptions","optionsFromCapabilities","optionsFromApi","crossOrigin","arcgisClause","sourceOptions","queryable","queryFormat","createAsyncLayer","l","addLayer","currentLayerid","visibleOnLayersParams","visibleOffLayersParams","visiblelayers","invisiblelayers","toString","auth","logged$","logged","createWelcomeWindow","hasWelcomeWindow","welcomWindowConfig","afterClosed","afterClosedWelcomeWindow","onToggleSidenavClick","onSearchTermChange","onPointerSummaryStatusChange","onSearchResultsGeometryStatusChange","onSearch","onSearchSettingsChange","toolChanged","onMapQuery","onContextMenuOpen","bottom","analyticsService","analyticsListenerService","renderer","titleService","metaService","themeClass","authConfig","readTitleConfig","readThemeConfig","readDescriptionConfig","listen","detectOldBrowser","setTitle","addTag","theme","addClass","body","satisfies","ie","chrome","firefox","message$","zip","message","rep","alert","timeOut","AppModule","default","path","catch","err"],"mappings":"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","file":"x","sourcesContent":["var map = {\n\t\"./en.auth.json\": \"4FNE\",\n\t\"./en.common.json\": \"MoB1\",\n\t\"./en.context.json\": \"N2Ms\",\n\t\"./en.core.json\": \"mPxz\",\n\t\"./en.geo.json\": \"/7uZ\",\n\t\"./en.integration.json\": \"TSY2\",\n\t\"./en.json\": \"Oh3F\",\n\t\"./fr.auth.json\": \"qcjx\",\n\t\"./fr.common.json\": \"O94P\",\n\t\"./fr.context.json\": \"Z1WX\",\n\t\"./fr.core.json\": \"wpjW\",\n\t\"./fr.geo.json\": \"8ktl\",\n\t\"./fr.integration.json\": \"Tzk/\",\n\t\"./fr.json\": \"+etH\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"I74T\";","var map = {\n\t\"./af\": \"K/tc\",\n\t\"./af.js\": \"K/tc\",\n\t\"./ar\": \"jnO4\",\n\t\"./ar-dz\": \"o1bE\",\n\t\"./ar-dz.js\": \"o1bE\",\n\t\"./ar-kw\": \"Qj4J\",\n\t\"./ar-kw.js\": \"Qj4J\",\n\t\"./ar-ly\": \"HP3h\",\n\t\"./ar-ly.js\": \"HP3h\",\n\t\"./ar-ma\": \"CoRJ\",\n\t\"./ar-ma.js\": \"CoRJ\",\n\t\"./ar-sa\": \"gjCT\",\n\t\"./ar-sa.js\": \"gjCT\",\n\t\"./ar-tn\": \"bYM6\",\n\t\"./ar-tn.js\": \"bYM6\",\n\t\"./ar.js\": \"jnO4\",\n\t\"./az\": \"SFxW\",\n\t\"./az.js\": \"SFxW\",\n\t\"./be\": \"H8ED\",\n\t\"./be.js\": \"H8ED\",\n\t\"./bg\": \"hKrs\",\n\t\"./bg.js\": \"hKrs\",\n\t\"./bm\": \"p/rL\",\n\t\"./bm.js\": \"p/rL\",\n\t\"./bn\": \"kEOa\",\n\t\"./bn.js\": \"kEOa\",\n\t\"./bo\": \"0mo+\",\n\t\"./bo.js\": \"0mo+\",\n\t\"./br\": \"aIdf\",\n\t\"./br.js\": \"aIdf\",\n\t\"./bs\": \"JVSJ\",\n\t\"./bs.js\": \"JVSJ\",\n\t\"./ca\": \"1xZ4\",\n\t\"./ca.js\": \"1xZ4\",\n\t\"./cs\": \"PA2r\",\n\t\"./cs.js\": \"PA2r\",\n\t\"./cv\": \"A+xa\",\n\t\"./cv.js\": \"A+xa\",\n\t\"./cy\": \"l5ep\",\n\t\"./cy.js\": \"l5ep\",\n\t\"./da\": \"DxQv\",\n\t\"./da.js\": \"DxQv\",\n\t\"./de\": \"tGlX\",\n\t\"./de-at\": \"s+uk\",\n\t\"./de-at.js\": \"s+uk\",\n\t\"./de-ch\": \"u3GI\",\n\t\"./de-ch.js\": \"u3GI\",\n\t\"./de.js\": \"tGlX\",\n\t\"./dv\": \"WYrj\",\n\t\"./dv.js\": \"WYrj\",\n\t\"./el\": \"jUeY\",\n\t\"./el.js\": \"jUeY\",\n\t\"./en-au\": \"Dmvi\",\n\t\"./en-au.js\": \"Dmvi\",\n\t\"./en-ca\": \"OIYi\",\n\t\"./en-ca.js\": \"OIYi\",\n\t\"./en-gb\": \"Oaa7\",\n\t\"./en-gb.js\": \"Oaa7\",\n\t\"./en-ie\": \"4dOw\",\n\t\"./en-ie.js\": \"4dOw\",\n\t\"./en-il\": \"czMo\",\n\t\"./en-il.js\": \"czMo\",\n\t\"./en-in\": \"7C5Q\",\n\t\"./en-in.js\": \"7C5Q\",\n\t\"./en-nz\": \"b1Dy\",\n\t\"./en-nz.js\": \"b1Dy\",\n\t\"./en-sg\": \"t+mt\",\n\t\"./en-sg.js\": \"t+mt\",\n\t\"./eo\": \"Zduo\",\n\t\"./eo.js\": \"Zduo\",\n\t\"./es\": \"iYuL\",\n\t\"./es-do\": \"CjzT\",\n\t\"./es-do.js\": \"CjzT\",\n\t\"./es-us\": \"Vclq\",\n\t\"./es-us.js\": \"Vclq\",\n\t\"./es.js\": \"iYuL\",\n\t\"./et\": \"7BjC\",\n\t\"./et.js\": \"7BjC\",\n\t\"./eu\": \"D/JM\",\n\t\"./eu.js\": \"D/JM\",\n\t\"./fa\": \"jfSC\",\n\t\"./fa.js\": \"jfSC\",\n\t\"./fi\": \"gekB\",\n\t\"./fi.js\": \"gekB\",\n\t\"./fil\": \"1ppg\",\n\t\"./fil.js\": \"1ppg\",\n\t\"./fo\": \"ByF4\",\n\t\"./fo.js\": \"ByF4\",\n\t\"./fr\": \"nyYc\",\n\t\"./fr-ca\": \"2fjn\",\n\t\"./fr-ca.js\": \"2fjn\",\n\t\"./fr-ch\": \"Dkky\",\n\t\"./fr-ch.js\": \"Dkky\",\n\t\"./fr.js\": \"nyYc\",\n\t\"./fy\": \"cRix\",\n\t\"./fy.js\": \"cRix\",\n\t\"./ga\": \"USCx\",\n\t\"./ga.js\": \"USCx\",\n\t\"./gd\": \"9rRi\",\n\t\"./gd.js\": \"9rRi\",\n\t\"./gl\": \"iEDd\",\n\t\"./gl.js\": \"iEDd\",\n\t\"./gom-deva\": \"qvJo\",\n\t\"./gom-deva.js\": \"qvJo\",\n\t\"./gom-latn\": \"DKr+\",\n\t\"./gom-latn.js\": \"DKr+\",\n\t\"./gu\": \"4MV3\",\n\t\"./gu.js\": \"4MV3\",\n\t\"./he\": \"x6pH\",\n\t\"./he.js\": \"x6pH\",\n\t\"./hi\": \"3E1r\",\n\t\"./hi.js\": \"3E1r\",\n\t\"./hr\": \"S6ln\",\n\t\"./hr.js\": \"S6ln\",\n\t\"./hu\": \"WxRl\",\n\t\"./hu.js\": \"WxRl\",\n\t\"./hy-am\": \"1rYy\",\n\t\"./hy-am.js\": \"1rYy\",\n\t\"./id\": \"UDhR\",\n\t\"./id.js\": \"UDhR\",\n\t\"./is\": \"BVg3\",\n\t\"./is.js\": \"BVg3\",\n\t\"./it\": \"bpih\",\n\t\"./it-ch\": \"bxKX\",\n\t\"./it-ch.js\": \"bxKX\",\n\t\"./it.js\": \"bpih\",\n\t\"./ja\": \"B55N\",\n\t\"./ja.js\": \"B55N\",\n\t\"./jv\": \"tUCv\",\n\t\"./jv.js\": \"tUCv\",\n\t\"./ka\": \"IBtZ\",\n\t\"./ka.js\": \"IBtZ\",\n\t\"./kk\": \"bXm7\",\n\t\"./kk.js\": \"bXm7\",\n\t\"./km\": \"6B0Y\",\n\t\"./km.js\": \"6B0Y\",\n\t\"./kn\": \"PpIw\",\n\t\"./kn.js\": \"PpIw\",\n\t\"./ko\": \"Ivi+\",\n\t\"./ko.js\": \"Ivi+\",\n\t\"./ku\": \"JCF/\",\n\t\"./ku.js\": \"JCF/\",\n\t\"./ky\": \"lgnt\",\n\t\"./ky.js\": \"lgnt\",\n\t\"./lb\": \"RAwQ\",\n\t\"./lb.js\": \"RAwQ\",\n\t\"./lo\": \"sp3z\",\n\t\"./lo.js\": \"sp3z\",\n\t\"./lt\": \"JvlW\",\n\t\"./lt.js\": \"JvlW\",\n\t\"./lv\": \"uXwI\",\n\t\"./lv.js\": \"uXwI\",\n\t\"./me\": \"KTz0\",\n\t\"./me.js\": \"KTz0\",\n\t\"./mi\": \"aIsn\",\n\t\"./mi.js\": \"aIsn\",\n\t\"./mk\": \"aQkU\",\n\t\"./mk.js\": \"aQkU\",\n\t\"./ml\": \"AvvY\",\n\t\"./ml.js\": \"AvvY\",\n\t\"./mn\": \"lYtQ\",\n\t\"./mn.js\": \"lYtQ\",\n\t\"./mr\": \"Ob0Z\",\n\t\"./mr.js\": \"Ob0Z\",\n\t\"./ms\": \"6+QB\",\n\t\"./ms-my\": \"ZAMP\",\n\t\"./ms-my.js\": \"ZAMP\",\n\t\"./ms.js\": \"6+QB\",\n\t\"./mt\": \"G0Uy\",\n\t\"./mt.js\": \"G0Uy\",\n\t\"./my\": \"honF\",\n\t\"./my.js\": \"honF\",\n\t\"./nb\": \"bOMt\",\n\t\"./nb.js\": \"bOMt\",\n\t\"./ne\": \"OjkT\",\n\t\"./ne.js\": \"OjkT\",\n\t\"./nl\": \"+s0g\",\n\t\"./nl-be\": \"2ykv\",\n\t\"./nl-be.js\": \"2ykv\",\n\t\"./nl.js\": \"+s0g\",\n\t\"./nn\": \"uEye\",\n\t\"./nn.js\": \"uEye\",\n\t\"./oc-lnc\": \"Fnuy\",\n\t\"./oc-lnc.js\": \"Fnuy\",\n\t\"./pa-in\": \"8/+R\",\n\t\"./pa-in.js\": \"8/+R\",\n\t\"./pl\": \"jVdC\",\n\t\"./pl.js\": \"jVdC\",\n\t\"./pt\": \"8mBD\",\n\t\"./pt-br\": \"0tRk\",\n\t\"./pt-br.js\": \"0tRk\",\n\t\"./pt.js\": \"8mBD\",\n\t\"./ro\": \"lyxo\",\n\t\"./ro.js\": \"lyxo\",\n\t\"./ru\": \"lXzo\",\n\t\"./ru.js\": \"lXzo\",\n\t\"./sd\": \"Z4QM\",\n\t\"./sd.js\": \"Z4QM\",\n\t\"./se\": \"//9w\",\n\t\"./se.js\": \"//9w\",\n\t\"./si\": \"7aV9\",\n\t\"./si.js\": \"7aV9\",\n\t\"./sk\": \"e+ae\",\n\t\"./sk.js\": \"e+ae\",\n\t\"./sl\": \"gVVK\",\n\t\"./sl.js\": \"gVVK\",\n\t\"./sq\": \"yPMs\",\n\t\"./sq.js\": \"yPMs\",\n\t\"./sr\": \"zx6S\",\n\t\"./sr-cyrl\": \"E+lV\",\n\t\"./sr-cyrl.js\": \"E+lV\",\n\t\"./sr.js\": \"zx6S\",\n\t\"./ss\": \"Ur1D\",\n\t\"./ss.js\": \"Ur1D\",\n\t\"./sv\": \"X709\",\n\t\"./sv.js\": \"X709\",\n\t\"./sw\": \"dNwA\",\n\t\"./sw.js\": \"dNwA\",\n\t\"./ta\": \"PeUW\",\n\t\"./ta.js\": \"PeUW\",\n\t\"./te\": \"XLvN\",\n\t\"./te.js\": \"XLvN\",\n\t\"./tet\": \"V2x9\",\n\t\"./tet.js\": \"V2x9\",\n\t\"./tg\": \"Oxv6\",\n\t\"./tg.js\": \"Oxv6\",\n\t\"./th\": \"EOgW\",\n\t\"./th.js\": \"EOgW\",\n\t\"./tk\": \"Wv91\",\n\t\"./tk.js\": \"Wv91\",\n\t\"./tl-ph\": \"Dzi0\",\n\t\"./tl-ph.js\": \"Dzi0\",\n\t\"./tlh\": \"z3Vd\",\n\t\"./tlh.js\": \"z3Vd\",\n\t\"./tr\": \"DoHr\",\n\t\"./tr.js\": \"DoHr\",\n\t\"./tzl\": \"z1FC\",\n\t\"./tzl.js\": \"z1FC\",\n\t\"./tzm\": \"wQk9\",\n\t\"./tzm-latn\": \"tT3J\",\n\t\"./tzm-latn.js\": \"tT3J\",\n\t\"./tzm.js\": \"wQk9\",\n\t\"./ug-cn\": \"YRex\",\n\t\"./ug-cn.js\": \"YRex\",\n\t\"./uk\": \"raLr\",\n\t\"./uk.js\": \"raLr\",\n\t\"./ur\": \"UpQW\",\n\t\"./ur.js\": \"UpQW\",\n\t\"./uz\": \"Loxo\",\n\t\"./uz-latn\": \"AQ68\",\n\t\"./uz-latn.js\": \"AQ68\",\n\t\"./uz.js\": \"Loxo\",\n\t\"./vi\": \"KSF8\",\n\t\"./vi.js\": \"KSF8\",\n\t\"./x-pseudo\": \"/X5v\",\n\t\"./x-pseudo.js\": \"/X5v\",\n\t\"./yo\": \"fzPg\",\n\t\"./yo.js\": \"fzPg\",\n\t\"./zh-cn\": \"XDpg\",\n\t\"./zh-cn.js\": \"XDpg\",\n\t\"./zh-hk\": \"SatO\",\n\t\"./zh-hk.js\": \"SatO\",\n\t\"./zh-mo\": \"OmwH\",\n\t\"./zh-mo.js\": \"OmwH\",\n\t\"./zh-tw\": \"kOpN\",\n\t\"./zh-tw.js\": \"kOpN\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"RnhZ\";","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"crnd\";","import { LanguageOptions } from '@igo2/core';\nimport {\n  SearchSourceOptions,\n  ImportExportServiceOptions,\n  CatalogServiceOptions,\n  Projection,\n  CommonVectorStyleOptions\n} from '@igo2/geo';\n\ninterface Environment {\n  production: boolean;\n  igo: {\n    app: {\n      forceCoordsNA: boolean;\n    };\n    catalog?: CatalogServiceOptions;\n    importExport?: ImportExportServiceOptions;\n    language?: LanguageOptions;\n    searchSources?: { [key: string]: SearchSourceOptions };\n    projections?: Projection[];\n    interactiveTour?: { tourInMobile: boolean; pathToConfigFile: string };\n    depot?: { url: string; trainingGuides?: string[]; };\n    queryOverlayStyle?: {\n      base?: CommonVectorStyleOptions,\n      selection?: CommonVectorStyleOptions,\n      focus?: CommonVectorStyleOptions\n    };\n    searchOverlayStyle?: {\n      base?: CommonVectorStyleOptions,\n      selection?: CommonVectorStyleOptions,\n      focus?: CommonVectorStyleOptions\n    };\n  };\n}\n\nexport const environment: Environment = {\n  production: true,\n  igo: {\n    app: {\n      forceCoordsNA: false\n    },\n    catalog: {\n      sources: [\n        {\n          id: 'Gououvert',\n          title: 'Gouvouvert',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi'\n        },\n        {\n          id: 'glace',\n          title: 'Carte de glace',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/radarsat.fcgi',\n          showLegend: true\n        }\n      ]\n    },\n    depot: {\n      url: '/apis/depot'\n    },\n    importExport: {\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/ogre'\n    },\n    language: {\n      prefix: './locale/'\n    },\n    interactiveTour: {\n      tourInMobile: true,\n      pathToConfigFile: './config/interactiveTour.json'\n    },\n    searchSources: {\n      nominatim: {\n        available: false\n      },\n      storedqueries: {\n        available: false\n      },\n      icherche: {\n        searchUrl: 'https://geoegl.msp.gouv.qc.ca/apis/icherche',\n        order: 2,\n        params: {\n          limit: '8'\n        }\n      },\n      coordinatesreverse: {\n        showInPointerSummary: true\n      },\n      icherchereverse: {\n        showInPointerSummary: true,\n        searchUrl: 'https://geoegl.msp.gouv.qc.ca/apis/terrapi',\n        order: 3,\n        enabled: true\n      },\n      ilayer: {\n        searchUrl: 'https://geoegl.msp.gouv.qc.ca/apis/icherche/layers',\n        order: 4,\n        params: {\n          limit: '5'\n        }\n      },\n      cadastre: {\n        enabled: false\n      }\n    },\n    projections: [\n      {\n        code: 'EPSG:32198',\n        alias: 'Quebec Lambert',\n        def:\n          '+proj=lcc +lat_1=60 +lat_2=46 +lat_0=44 +lon_0=-68.5 +x_0=0 +y_0=0 \\\n          +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs',\n        extent: [-799574, 45802, 891595.4, 1849567.5]\n      },\n      {\n        code: 'EPSG:3798',\n        alias: 'MTQ Lambert',\n        def:\n          '+proj=lcc +lat_1=50 +lat_2=46 +lat_0=44 +lon_0=-70 +x_0=800000 +y_0=0 \\\n          +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs',\n        extent: [31796.5834, 158846.2231, 1813323.4284, 2141241.0978]\n      }\n    ],\n    searchOverlayStyle: {\n      base: {\n        markerColor: '#5ed0fb',          // marker fill\n        markerOpacity: 0.8,              // marker opacity not applied if a rgba markerColor is provided\n        markerOutlineColor: '#a7e7ff',   // marker contour\n        fillColor: '#5ed0fb',            // poly\n        fillOpacity: 0.2,                // poly fill opacity not applied if a rgba fillColor is provided\n        strokeColor: '#5ed0fb',          // line and poly\n        strokeOpacity: 0.7,              // line and poly not applied if a rgba strokeColor is provided\n        strokeWidth: 2                   // line and poly\n      },\n      focus: {\n        markerColor: '#5ed0fb',          // marker fill\n        markerOpacity: 1,                // marker opacity not applied if a rgba markerColor is provided\n        markerOutlineColor: '#DFF7FF',   // marker contour\n        fillColor: '#5ed0fb',            // poly\n        fillOpacity: 0.3,                // poly fill opacity not applied if a rgba fillColor is provided\n        strokeColor: '#DFF7FF',          // line and poly\n        strokeOpacity: 1,                // line and poly not applied if a rgba strokeColor is provided\n        strokeWidth: 2                   // line and poly\n      },\n      selection: {\n        markerColor: '#00a1de',           // marker fill\n        markerOpacity: 1,                 // marker opacity not applied if a rgba markerColor is provided\n        markerOutlineColor: '#ffffff',    // marker contour\n        fillColor: '#00a1de',             // poly\n        fillOpacity: 0.3,                 // poly fill opacity not applied if a rgba fillColor is provided\n        strokeColor: '#00A1DE',           // line and poly\n        strokeOpacity: 1,                 // line and poly not applied if a rgba strokeColor is provided\n        strokeWidth: 2                    // line and poly\n      }\n    },\n    queryOverlayStyle: {\n      base: {\n        markerColor: '#5ed0fb',          // marker fill\n        markerOpacity: 0.8,              // marker opacity not applied if a rgba markerColor is provided\n        markerOutlineColor: '#a7e7ff',   // marker contour\n        fillColor: '#5ed0fb',            // poly\n        fillOpacity: 0.2,                // poly fill opacity not applied if a rgba fillColor is provided\n        strokeColor: '#5ed0fb',          // line and poly\n        strokeOpacity: 0.7,              // line and poly not applied if a rgba strokeColor is provided\n        strokeWidth: 2                   // line and poly\n      },\n      focus: {\n        markerColor: '#5ed0fb',          // marker fill\n        markerOpacity: 1,                // marker opacity not applied if a rgba markerColor is provided\n        markerOutlineColor: '#DFF7FF',   // marker contour\n        fillColor: '#5ed0fb',            // poly\n        fillOpacity: 0.3,                // poly fill opacity not applied if a rgba fillColor is provided\n        strokeColor: '#DFF7FF',          // line and poly\n        strokeOpacity: 1,                // line and poly not applied if a rgba strokeColor is provided\n        strokeWidth: 2                   // line and poly\n      },\n      selection: {\n        markerColor: '#00a1de',           // marker fill\n        markerOpacity: 1,                 // marker opacity not applied if a rgba markerColor is provided\n        markerOutlineColor: '#ffffff',    // marker contour\n        fillColor: '#00a1de',             // poly\n        fillOpacity: 0.3,                 // poly fill opacity not applied if a rgba fillColor is provided\n        strokeColor: '#00A1DE',           // line and poly\n        strokeOpacity: 1,                 // line and poly not applied if a rgba strokeColor is provided\n        strokeWidth: 2                    // line and poly\n      }\n    }\n  }\n};\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\n\nimport { MapOverlayComponent } from './map-overlay.component';\n\n@NgModule({\n  imports: [\n    CommonModule\n  ],\n  exports: [MapOverlayComponent],\n  declarations: [MapOverlayComponent]\n})\nexport class MapOverlayModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatListModule } from '@angular/material/list';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatSelectModule } from '@angular/material/select';\n\nimport { IgoLanguageModule } from '@igo2/core';\nimport { IgoBackdropModule } from '@igo2/common';\n\nimport { ExpansionPanelComponent } from './expansion-panel.component';\nimport { ExpansionPanelHeaderComponent } from './expansion-panel-header.component';\nimport { MatTooltipModule } from '@angular/material/tooltip';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    MatButtonModule,\n    MatIconModule,\n    MatMenuModule,\n    MatListModule,\n    MatSelectModule,\n    MatTooltipModule,\n    IgoLanguageModule,\n    IgoBackdropModule\n  ],\n  exports: [ExpansionPanelComponent],\n  declarations: [ExpansionPanelComponent, ExpansionPanelHeaderComponent]\n})\nexport class AppExpansionPanelModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatTooltipModule } from '@angular/material/tooltip';\n\nimport { IgoPanelModule, IgoStopPropagationModule, IgoActionModule } from '@igo2/common';\nimport { IgoLanguageModule } from '@igo2/core';\nimport { IgoFeatureModule, IgoSearchResultsModule } from '@igo2/geo';\n\nimport { ToastPanelComponent } from './toast-panel.component';\nimport { MatBadgeModule } from '@angular/material/badge';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    MatBadgeModule,\n    MatIconModule,\n    MatButtonModule,\n    MatTooltipModule,\n    MatMenuModule,\n    IgoLanguageModule,\n    IgoPanelModule,\n    IgoStopPropagationModule,\n    IgoActionModule,\n    IgoFeatureModule,\n    IgoSearchResultsModule\n  ],\n  exports: [ToastPanelComponent],\n  declarations: [ToastPanelComponent]\n})\nexport class AppToastPanelModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatSidenavModule } from '@angular/material/sidenav';\nimport { MatTooltipModule } from '@angular/material/tooltip';\n\nimport { IgoLanguageModule } from '@igo2/core';\nimport {\n  IgoPanelModule,\n  IgoFlexibleModule,\n  IgoToolModule,\n  IgoInteractiveTourModule\n} from '@igo2/common';\nimport { IgoFeatureModule } from '@igo2/geo';\nimport { IgoContextManagerModule } from '@igo2/context';\n\nimport { SidenavComponent } from './sidenav.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    MatIconModule,\n    MatButtonModule,\n    MatSidenavModule,\n    MatTooltipModule,\n    IgoLanguageModule,\n    IgoPanelModule,\n    IgoFlexibleModule,\n    IgoContextManagerModule,\n    IgoToolModule,\n    IgoFeatureModule,\n    IgoInteractiveTourModule\n  ],\n  exports: [SidenavComponent],\n  declarations: [SidenavComponent]\n})\nexport class AppSidenavModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\n\nimport { IgoPanelModule, IgoStopPropagationModule } from '@igo2/common';\nimport { IgoLanguageModule } from '@igo2/core';\n\nimport { ToastPanelForExpansionComponent } from './toast-panel-for-expansion.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    MatIconModule,\n    MatButtonModule,\n    IgoLanguageModule,\n    IgoPanelModule,\n    IgoStopPropagationModule\n  ],\n  exports: [ToastPanelForExpansionComponent],\n  declarations: [ToastPanelForExpansionComponent]\n})\nexport class AppToastPanelForExpansionModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { MatDialogModule } from '@angular/material/dialog';\n\nimport { WelcomeWindowComponent } from './welcome-window.component';\nimport { IgoLanguageModule } from '@igo2/core';\nimport { IgoInteractiveTourModule, IgoCustomHtmlModule } from '@igo2/common';\n\n@NgModule({\n  imports: [\n    IgoLanguageModule,\n    CommonModule,\n    FormsModule,\n    MatDialogModule,\n    IgoInteractiveTourModule,\n    IgoCustomHtmlModule,\n    MatButtonModule,\n    MatTooltipModule,\n    MatIconModule,\n    MatToolbarModule\n  ],\n  declarations: [WelcomeWindowComponent],\n  exports: [WelcomeWindowComponent]\n})\nexport class IgoWelcomeWindowModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatSidenavModule } from '@angular/material/sidenav';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { MatDialogModule } from '@angular/material/dialog';\n\nimport { IgoCoreModule } from '@igo2/core';\nimport {\n  IgoActionModule,\n  IgoWorkspaceModule,\n  IgoEntityModule,\n  IgoPanelModule,\n  IgoBackdropModule,\n  IgoFlexibleModule,\n  IgoContextMenuModule,\n  IgoToolModule,\n  IgoEntityTableModule,\n  IgoEntityTablePaginatorModule,\n  IgoInteractiveTourModule\n} from '@igo2/common';\n\nimport {\n  IgoGeoWorkspaceModule,\n  IgoFeatureModule,\n  IgoImportExportModule,\n  IgoMapModule,\n  IgoQueryModule,\n  IgoSearchModule\n} from '@igo2/geo';\nimport {\n  IgoContextManagerModule,\n  IgoContextMapButtonModule\n} from '@igo2/context';\n\nimport { IgoIntegrationModule } from '@igo2/integration';\n\nimport { MapOverlayModule } from './map-overlay/map-overlay.module';\nimport { AppExpansionPanelModule } from './expansion-panel/expansion-panel.module';\nimport { AppToastPanelModule } from './toast-panel/toast-panel.module';\nimport { AppSidenavModule } from './sidenav/sidenav.module';\n\nimport { PortalComponent } from './portal.component';\nimport { AppToastPanelForExpansionModule } from './toast-panel-for-expansion/toast-panel-for-expansion.module';\n\nimport { WelcomeWindowComponent } from './welcome-window/welcome-window.component';\nimport { IgoWelcomeWindowModule } from './welcome-window/welcome-window.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    MatTooltipModule,\n    MatButtonModule,\n    MatIconModule,\n    MatSidenavModule,\n    MatDialogModule,\n    IgoCoreModule,\n    IgoFeatureModule,\n    IgoImportExportModule,\n    IgoMapModule,\n    IgoQueryModule.forRoot(),\n    IgoSearchModule.forRoot(),\n    IgoActionModule,\n    IgoWorkspaceModule,\n    IgoEntityModule,\n    IgoGeoWorkspaceModule,\n    IgoPanelModule,\n    IgoToolModule,\n    IgoContextMenuModule,\n    IgoBackdropModule,\n    IgoFlexibleModule,\n    IgoIntegrationModule,\n    AppExpansionPanelModule,\n    AppToastPanelModule,\n    AppToastPanelForExpansionModule,\n    AppSidenavModule,\n    MapOverlayModule,\n    IgoContextManagerModule,\n    IgoContextMapButtonModule,\n    IgoEntityTableModule,\n    IgoEntityTablePaginatorModule,\n    IgoInteractiveTourModule,\n    IgoWelcomeWindowModule\n  ],\n  exports: [PortalComponent],\n  declarations: [PortalComponent],\n  entryComponents: [WelcomeWindowComponent]\n})\nexport class PortalModule {}\n","import { Injectable } from '@angular/core';\n\nimport { ConfigService, StorageService } from '@igo2/core';\nimport { MatDialogConfig } from '@angular/material/dialog';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class WelcomeWindowService {\n  nbVisit: number;\n  showAgain: boolean;\n  igoVersionDifferentFromStorage = false;\n\n  constructor(\n    private configService: ConfigService,\n    private storageService: StorageService\n  ) {\n    this.igoVersionDifferentFromStorage = this.isVersionDifferentFromStorage();\n    this.setStorageConfig();\n  }\n\n  setStorageConfig() {\n    this.nbVisit = Number(this.storageService.get('welcomeWindow_nbVisit'));\n    if (!this.nbVisit) {\n      this.nbVisit = 0;\n    }\n\n    this.storageService.set('welcomeWindow_nbVisit', (this.nbVisit += 1));\n    this.storageService.set(\n      'version',\n      this.configService.getConfig('version.lib')\n    );\n  }\n\n  isVersionDifferentFromStorage(): boolean {\n    if (\n      this.storageService.get('version') &&\n      this.storageService.get('version') !==\n        this.configService.getConfig('version.lib')\n    ) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  hasWelcomeWindow(): boolean {\n    if (\n      this.storageService.get('welcomeWindow_showAgain') === false ||\n      this.storageService.get('welcomeWindow_showAgain') === 'false'\n    ) {\n      if (\n        this.nbVisit >=\n        this.configService.getConfig('welcomeWindow.nbVisitToShowAgain')\n      ) {\n        this.storageService.set('welcomeWindow_nbVisit', 0);\n        this.storageService.remove('welcomeWindow_showAgain');\n        return true;\n      } else if (\n        this.configService.getConfig('welcomeWindow.showAgainOnNewIGOVersion')\n      ) {\n        if (this.igoVersionDifferentFromStorage) {\n          this.storageService.set('welcomeWindow_nbVisit', 0);\n          this.storageService.remove('welcomeWindow_showAgain');\n          return true;\n        }\n      }\n      return false;\n    }\n\n    if (typeof this.configService.getConfig('welcomeWindow.nbVisitToShow') !== 'undefined' ) {\n      if (this.nbVisit > this.configService.getConfig('welcomeWindow.nbVisitToShow') ) {\n        this.storageService.set('welcomeWindow_showAgain', false);\n        return false;\n      }\n    }\n\n    return this.configService.getConfig('welcomeWindow');\n  }\n\n  getConfig(): MatDialogConfig {\n    const dialogConfig = new MatDialogConfig();\n\n    dialogConfig.disableClose = true;\n    dialogConfig.autoFocus = true;\n    dialogConfig.maxWidth = '500px';\n\n    return dialogConfig;\n  }\n\n  afterClosedWelcomeWindow() {\n    this.storageService.set('welcomeWindow_showAgain', this.showAgain);\n  }\n}\n","<div class=\"welcome-window\"  *ngIf=\"html$ | async\">\n\n  <mat-toolbar color=\"primary\">\n    <h2>{{'welcomeWindow.title' | translate}}</h2>\n    <span class=\"spacer\"></span>\n\n    <label>\n      <input id=\"doNotShowCheck\" type=\"checkbox\" [(ngModel)]=\"showAgain\" (click)=\"setShowAgain()\">\n      {{'welcomeWindow.notShowCheck' | translate}}\n    </label>\n  </mat-toolbar>\n\n  <div mat-dialog-content class=\"text\">\n    <igo-custom-html class=\"mat-typography\"\n    [html]=\"html$ | async\">\n    </igo-custom-html>\n  </div>\n\n  <p></p>\n  <div class=\"button-container\">\n    <igo-interactive-tour\n      id=\"tour-button\"\n      styleButton = \"raised\"\n      [discoverTitleInLocale$]=\"discoverTitleInLocale$\"\n      (click)= \"closeWelcomeWindow()\">\n    </igo-interactive-tour>\n\n  <button mat-raised-button class=\"button-close\" color=\"primary\" mat-dialog-close>{{'welcomeWindow.closeButton' | translate}}</button>\n  </div>\n\n</div>\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { ConfigService, LanguageService } from '@igo2/core';\nimport { BehaviorSubject, Observable, of, Subscription } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { WelcomeWindowService } from './welcome-window.service';\n\n@Component({\n  selector: 'app-welcome-window',\n  templateUrl: './welcome-window.component.html',\n  styleUrls: ['./welcome-window.component.scss']\n})\nexport class WelcomeWindowComponent implements OnInit, OnDestroy {\n  // isVisible = true;\n  showAgain = false;\n  public discoverTitleInLocale$: Observable<string> = of(this.configService.getConfig('title'));\n  private title$$: Subscription;\n  public html$: BehaviorSubject<string> = new BehaviorSubject(undefined);\n\n  constructor(\n    public dialog: MatDialog,\n    private welcomeWindowService: WelcomeWindowService,\n    private configService: ConfigService,\n    protected languageService: LanguageService\n  ) { }\n\n  ngOnInit(): void {\n    this.computeHtml();\n  }\n\n  closeWelcomeWindow() {\n    this.dialog.closeAll();\n  }\n\n  private computeHtml() {\n    let deltaDay = 0;\n    let isDateParsable = true;\n    let releaseDate = new Date(this.configService.getConfig('version.releaseDate'));\n\n    const releaseDateAppConfig = this.configService.getConfig('version.releaseDateApp');\n\n\n    if (releaseDateAppConfig) {\n      const releaseDateApp = new Date(releaseDateAppConfig);\n      if (isNaN(releaseDateApp.getDate())) {\n        console.log('The releaseDateApp config is not a valid date format');\n        isDateParsable = false;\n      } else {\n        deltaDay = 1;\n        releaseDate = releaseDateApp;\n      }\n    }\n\n    let releaseDateString = '';\n\n    if (isDateParsable) {\n      let day: any = releaseDate.getDate() + deltaDay;\n      if (day < 10) {\n        day = '0' + day;\n      }\n      let month: any = releaseDate.getMonth() + 1;\n      if (month < 10) {\n        month = '0' + month;\n      }\n      const year = releaseDate.getFullYear();\n      releaseDateString = `${year}-${month}-${day}`;\n    } else {\n      releaseDateString = releaseDateAppConfig;\n    }\n\n    this.title$$ = this.languageService.translate.get(this.configService.getConfig('title') || '')\n      .pipe(\n        map(title => {\n          return this.languageService.translate.instant('welcomeWindow.html', {\n            title,\n            description: this.configService.getConfig('description') || '',\n            version: this.configService.getConfig('version.app') || this.configService.getConfig('version.lib') || '',\n            releaseDate: releaseDateString || ''\n          });\n        })\n      ).subscribe((r) => this.html$.next(r));\n\n    return this.html$;\n\n  }\n\n  setShowAgain() {\n    this.welcomeWindowService.showAgain = this.showAgain;\n  }\n\n  ngOnDestroy(): void {\n    if (this.title$$) {\n      this.title$$.unsubscribe();\n    }\n  }\n}\n","<mat-sidenav\n  mode=\"side\"\n  [autoFocus]=\"false\"\n  [(opened)]=\"opened\">\n\n  <div class=\"app-sidenav-content\">\n\n      <div #content class=\"app-content\" [ngClass]=\"{toolActivated: toolbox.activeTool$ | async}\">\n\n        <button *ngIf=\"toolbox.activeTool$ | async\"\n          id=\"homeButton\"\n          mat-icon-button\n          tooltip-position=\"below\"\n          matTooltipShowDelay=\"500\"\n          [matTooltip]=\"'igo.context.sidenav.mainMenu' | translate\"\n          (click)=\"onUnselectButtonClick()\">\n          <mat-icon svgIcon=\"home\"></mat-icon>\n        </button>\n\n        <igo-panel [title]=\"title$ | async | translate\">\n          <button *ngIf=\"toolbox.activeTool$ | async\"\n            mat-icon-button\n            panelLeftButton\n            tooltip-position=\"below\"\n            matTooltipShowDelay=\"500\"\n            [matTooltip]=\"'igo.context.sidenav.goBack' | translate\"\n            (click)=\"onPreviousButtonClick()\">\n            <mat-icon svgIcon=\"arrow-left\"></mat-icon>\n          </button>\n\n          <igo-interactive-tour\n            panelRightButton\n            styleButton = 'icon'>\n          </igo-interactive-tour>\n\n          <!-- <button *ngIf=\"toolbox.activeTool$ | async\"\n            mat-icon-button\n            panelRightButton\n            tooltip-position=\"below\"\n            matTooltipShowDelay=\"500\"\n            [matTooltip]=\"'igo.context.sidenav.mainMenu' | translate\"\n            (click)=\"onUnselectButtonClick()\">\n            <mat-icon svgIcon=\"close\"></mat-icon>\n          </button> -->\n\n          <igo-toolbox\n            class=\"igo-toolbox\"\n            color=\"primary\"\n            [animate]=\"true\"\n            [toolbox]=\"toolbox\">\n          </igo-toolbox>\n\n        </igo-panel>\n    </div>\n  </div>\n</mat-sidenav>\n","import {\n  Component,\n  Input,\n  Output,\n  OnInit,\n  OnDestroy,\n  EventEmitter,\n  ChangeDetectionStrategy\n} from '@angular/core';\n\nimport { BehaviorSubject, Subscription } from 'rxjs';\n\nimport { Tool, Toolbox } from '@igo2/common';\nimport { IgoMap } from '@igo2/geo';\nimport { ToolState, CatalogState } from '@igo2/integration';\nimport { ConfigService } from '@igo2/core';\n\n@Component({\n  selector: 'app-sidenav',\n  templateUrl: './sidenav.component.html',\n  styleUrls: ['./sidenav.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class SidenavComponent implements OnInit, OnDestroy {\n  title$: BehaviorSubject<string> = new BehaviorSubject<string>(undefined);\n\n  private activeTool$$: Subscription;\n\n  @Input()\n  get map(): IgoMap {\n    return this._map;\n  }\n  set map(value: IgoMap) {\n    this._map = value;\n  }\n  private _map: IgoMap;\n\n  @Input()\n  get opened(): boolean {\n    return this._opened;\n  }\n  set opened(value: boolean) {\n    if (value === this._opened) {\n      return;\n    }\n\n    this._opened = value;\n    this.openedChange.emit(this._opened);\n  }\n  private _opened: boolean;\n\n  @Output() openedChange = new EventEmitter<boolean>();\n  @Output() toolChange = new EventEmitter<Tool>();\n\n  get toolbox(): Toolbox {\n    return this.toolState.toolbox;\n  }\n\n  constructor(\n    private toolState: ToolState,\n    private configService: ConfigService,\n    private catalogState: CatalogState) {}\n\n  ngOnInit() {\n    this.activeTool$$ = this.toolbox.activeTool$.subscribe((tool: Tool) => {\n      const sidenavTitle = this.configService.getConfig('sidenavTitle') || 'IGO';\n      if (tool) {\n        if (tool.name === 'catalogBrowser') {\n          for (const catalog of this.catalogState.catalogStore.all()) {\n            if (this.catalogState.catalogStore.state.get(catalog).selected === true) {\n              this.title$.next(catalog.title);\n            }\n          }\n        } else if (tool.name === 'activeTimeFilter' || tool.name === 'activeOgcFilter') {\n          for (const layer of this.map.layers) {\n            if (layer.options.active === true) {\n              this.title$.next(layer.title);\n            }\n          }\n        } else {\n          this.title$.next(tool.title);\n        }\n      } else {\n        this.title$.next(sidenavTitle);\n      }\n      this.toolChange.emit(tool);\n    });\n  }\n\n  ngOnDestroy() {\n    this.activeTool$$.unsubscribe();\n  }\n\n  onPreviousButtonClick() {\n    this.toolbox.activatePreviousTool();\n  }\n\n  onUnselectButtonClick() {\n    this.toolbox.deactivateTool();\n  }\n}\n","<ng-container *ngFor=\"let element of mapOverlay; let i = index\">\n  <div class=\"mapOverlayDefault\" [ngClass]=\"element.cssClass\"\n       [style.position]=\"element.fixed ? 'fixed' : 'absolute'\"\n       [style.marginLeft]=\"element.marginLeft\"\n       [style.marginRight]=\"element.marginRight\"\n       [style.marginTop]=\"element.marginTop\"\n       [style.marginBottom]=\"element.marginBottom\"\n       [style.fontSize]=\"element.fontSize\">\n    <a *ngIf=\"element.link; else templateNoLink\"\n        target=\"_blank\" [href]='element.link'>\n        {{ element.text }}\n        <ng-container *ngIf=\"element.imgSrc\">\n          <img [src]=\"element.imgSrc\"\n               [alt]=\"element.alt\"\n               [ngStyle]=\"{ 'width': element.imgSize }\">\n        </ng-container>\n    </a>\n\n\n  <ng-template #templateNoLink>\n    {{ element.text }}\n    <ng-container *ngIf=\"element.imgSrc\">\n      <img [src]=\"element.imgSrc\" [alt]=\"element.alt\" [ngStyle]=\"{ 'width': element.imgSize }\">\n    </ng-container>\n\n  </ng-template>\n  </div>\n</ng-container>\n","import { Component, AfterViewInit, OnDestroy } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { Context, ContextService } from '@igo2/context';\nimport { MediaService, ConfigService } from '@igo2/core';\nimport { MapOverlay } from './map-overlay.interface';\n\n@Component({\n  selector: 'app-map-overlay',\n  templateUrl: './map-overlay.component.html',\n  styleUrls: ['./map-overlay.component.scss']\n})\n\nexport class MapOverlayComponent implements AfterViewInit, OnDestroy {\n  public mapOverlay: MapOverlay[] = [];\n  private context$$: Subscription;\n  private media$$: Subscription;\n  private context: Context;\n\n  constructor(\n    private contextService: ContextService,\n    private mediaService: MediaService,\n    private configService: ConfigService\n  ) { }\n\n  ngAfterViewInit() {\n    this.context$$ = this.contextService.context$.subscribe(context => {\n        this.handleContextChange(context);\n        this.context = context;\n        }\n    );\n    this.media$$ = this.mediaService.media$.subscribe(media =>\n      this.handleContextChange(this.context)\n    );\n  }\n\n  ngOnDestroy() {\n    this.context$$.unsubscribe();\n    this.media$$.unsubscribe();\n  }\n\n  private handleContextChange(context: Context) {\n    let mapOverlay = [];\n    if (context !== undefined) {\n      this.mapOverlay = [];\n\n      if (context['mapOverlay']) {\n        mapOverlay = context['mapOverlay'];\n      } else if (this.configService.getConfig('mapOverlay')) {\n        mapOverlay = this.configService.getConfig('mapOverlay');\n      }\n      for (const overlay of mapOverlay) {\n\n        // If no media define use default to desktop, display only if current media is on context definition\n        if ((!overlay.media && this.mediaService.getMedia() === 'desktop') ||\n        (overlay.media && overlay.media.includes(this.mediaService.getMedia()))) {\n          this.mapOverlay.push(overlay);\n        }\n      }\n    }\n\n  }\n}\n","import {\n  Component,\n  Input,\n  Output,\n  EventEmitter,\n  HostBinding,\n  ChangeDetectionStrategy\n} from '@angular/core';\nimport { showContent } from './toast-panel-for-expansion.animations';\n\n\n@Component({\n  selector: 'app-toast-panel-for-expansion',\n  templateUrl: './toast-panel-for-expansion.component.html',\n  styleUrls: ['./toast-panel-for-expansion.component.scss'],\n  animations: [showContent()],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ToastPanelForExpansionComponent {\n\n  @Input()\n  set opened(value: boolean) {\n    if (value === this._opened) {\n      return;\n    }\n    this._opened = value;\n    this.openedChange.emit(this._opened);\n  }\n  get opened(): boolean { return this._opened; }\n  private _opened: boolean;\n\n  @Input() title: string;\n\n  @Input() withHeader: boolean;\n\n  @Output() openedChange = new EventEmitter<boolean>();\n\n  @HostBinding('class.toast-panel-for-expansion-opened')\n  get hasOpenedClass() {\n    return this.opened;\n  }\n\n  @HostBinding('style.visibility')\n  get displayStyle() {\n    return (this.withHeader || this.opened) ? 'visible' : 'hidden';\n  }\n\n  constructor() {}\n\n}\n","<div>\n  <div class=\"app-expansion-panel-trigger-container\">\n    <button mat-icon-button (click)=\"onToggleClick()\" \n    [matTooltip]=\"(!expanded ? 'workspace.open' : 'workspace.close') | translate\"\n    color=\"primary\">\n      <mat-icon *ngIf=\"!expanded\" svgIcon=\"launch\"></mat-icon>\n      <mat-icon *ngIf=\"expanded\" style=\"transform: rotate(180deg)\" svgIcon=\"launch\"></mat-icon>\n    </button>\n  </div>\n\n  <div class=\"app-expansion-panel-content\">\n    <ng-content></ng-content>\n  </div>\n</div>\n","<igo-panel [title]=\"title\" [withHeader]=\"withHeader\">\n\n  <div #content [@showContent]=\"opened\">\n    <ng-content></ng-content>\n  </div>\n</igo-panel>\n","import {\n  trigger,\n  state,\n  style,\n  transition,\n  animate,\n  AnimationTriggerMetadata\n} from '@angular/animations';\n\nexport function showContent(\n  duration = '50ms',\n  delay = '280ms',\n  easing = 'ease-in-out'\n): AnimationTriggerMetadata {\n  return trigger('showContent', [\n    state('true', style({\n      opacity: 1,\n      display: 'block'\n    })),\n    state('false', style({\n      opacity: 0,\n      display: 'none'\n    })),\n    transition('false => true', animate(`${duration} ${delay} ${easing}`)),\n    transition('true => false', animate('0ms'))\n  ]);\n}\n","import {\n  Component,\n  Input,\n  Output,\n  EventEmitter,\n  HostBinding,\n  ChangeDetectionStrategy\n} from '@angular/core';\n\n@Component({\n  selector: 'app-expansion-panel-header',\n  templateUrl: './expansion-panel-header.component.html',\n  styleUrls: ['./expansion-panel-header.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExpansionPanelHeaderComponent {\n  @Input()\n  get expanded(): boolean {\n    return this._expanded;\n  }\n  set expanded(value: boolean) {\n    if (value === this._expanded) {\n      return;\n    }\n\n    this._expanded = value;\n    this.expandedChange.emit(this._expanded);\n  }\n  private _expanded: boolean;\n\n  @Output() expandedChange = new EventEmitter<boolean>();\n\n  @HostBinding('class.app-expansion-panel-header-expanded')\n  get hasExpandedClass() {\n    return this.expanded;\n  }\n\n  constructor() {}\n\n  onToggleClick() {\n    this.expanded = !this.expanded;\n  }\n}\n","import {\n  Component,\n  Input,\n  Output,\n  EventEmitter,\n  HostBinding,\n  ChangeDetectionStrategy\n} from '@angular/core';\n\nimport { showContent } from './expansion-panel.animations';\n\n@Component({\n  selector: 'app-expansion-panel',\n  templateUrl: './expansion-panel.component.html',\n  styleUrls: ['./expansion-panel.component.scss'],\n  animations: [showContent()],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExpansionPanelComponent {\n  @Input()\n  get expanded(): boolean {\n    return this._expanded;\n  }\n  set expanded(value: boolean) {\n    if (value === this._expanded) {\n      return;\n    }\n\n    this._expanded = value;\n    this.expandedChange.emit(this._expanded);\n  }\n  private _expanded: boolean;\n\n  @Input() maximized: Boolean = false;\n\n  @Input()\n  get backdropShown(): boolean {\n    return this._backdropShown;\n  }\n  set backdropShown(value: boolean) {\n    this._backdropShown = value;\n  }\n  private _backdropShown: boolean;\n\n  @Output() expandedChange = new EventEmitter<boolean>();\n\n  @HostBinding('class.app-expansion-panel-expanded')\n  get hasExpandedClass() {\n    return this.expanded && !this.maximized;\n  }\n\n  @HostBinding('class.app-expansion-panel-expanded-maximized')\n  get hasExpandedFullClass() {\n    return this.expanded && this.maximized;\n  }\n\n  constructor() {}\n\n  onBackdropClick() {\n    this.expanded = false;\n    this.backdropShown = false;\n  }\n}\n","<div>\n\n  <div class=\"app-expansion-panel-container\">\n    <igo-backdrop\n      [shown]=\"backdropShown\"\n      (click)=\"onBackdropClick()\">\n    </igo-backdrop>\n\n    <app-expansion-panel-header [(expanded)]=\"expanded\">\n      <ng-content select=\"[expansionPanelHeader]\"></ng-content>\n    </app-expansion-panel-header>\n\n    <div\n      class=\"app-expansion-panel-content mat-elevation-z4\"\n      [@showContent]=\"expanded\">\n      <ng-content></ng-content>\n    </div>\n  </div>\n\n</div>\n","import {\n  trigger,\n  state,\n  style,\n  transition,\n  animate,\n  AnimationTriggerMetadata\n} from '@angular/animations';\n\nexport function showContent(\n  duration = '150ms',\n  delay = '300ms',\n  easing = 'ease-in-out'\n): AnimationTriggerMetadata {\n  return trigger('showContent', [\n    state(\n      'true',\n      style({\n        opacity: 1,\n        display: 'block'\n      })\n    ),\n    state(\n      'false',\n      style({\n        opacity: 0,\n        display: 'none'\n      })\n    ),\n    transition('false => true', animate(`${duration} ${delay} ${easing}`)),\n    transition('true => false', animate('0ms'))\n  ]);\n}\n","<ng-template #toast>\n  <igo-panel\n    *ngIf=\"store.entities$ | async\"\n    [ngClass] = \"getClassPanel()\"\n    [title]=\"resultSelected$.value ? getTitle(resultSelected$.value) :('toastPanel.title' | translate )\"\n    (click)=\"onToggleClick($event)\"\n    tabindex=\"0\"\n    (keydown)=\"handleKeyboardEvent($event)\">\n\n    <igo-actionbar\n      id=\"igo-actionbar\"\n      panelLeftButton\n      [store]=\"actionStore\"\n      [withIcon]=\"true\"\n      [icon]=\"icon\"\n      [withTitle]=\"actionbarMode === 'overlay'\"\n      [horizontal]=\"true\"\n      [mode]=\"actionbarMode\">\n    </igo-actionbar>\n\n    <button\n      *ngIf=\"resultSelected$.value\"\n      mat-icon-button\n      igoStopPropagation\n      panelLeftButton\n      [matTooltip]=\"((isSelectedResultOutOfView$ | async) ? 'toastPanel.zoomOnFeatureTooltipOutOfView' : 'toastPanel.zoomOnFeatureTooltip') | translate\"\n      matTooltipShowDelay=\"500\"\n      (click)=\"zoomTo()\">\n      <mat-icon\n      [matBadge]=\"(isSelectedResultOutOfView$ | async) ? '!' : ''\"\n      matBadgeColor=\"accent\"\n      matBadgeSize=\"small\"\n      [matBadgeHidden]=\"!(isSelectedResultOutOfView$ | async)\"     \n      svgIcon=\"magnify-plus-outline\"></mat-icon>\n    </button>\n\n    <button\n      *ngIf=\"resultSelected$.value\"\n      [disabled]=\"results[0].meta.id === resultSelected$.value.meta.id\"\n      mat-icon-button\n      igoStopPropagation\n      panelLeftButton\n      [matTooltip]=\"'toastPanel.previousFeatureTooltip' | translate\"\n      matTooltipShowDelay=\"500\"\n      (click)=\"previousResult()\">\n      <mat-icon svgIcon=\"chevron-left\"></mat-icon>\n    </button>\n\n    <button\n      *ngIf=\"resultSelected$.value\"\n      [disabled]=\"results[results.length-1].meta.id === resultSelected$.value.meta.id\"\n      mat-icon-button\n      igoStopPropagation\n      panelRightButton\n      [matTooltip]=\"'toastPanel.nextFeatureTooltip' | translate\"\n      matTooltipShowDelay=\"500\"\n      (click)=\"nextResult()\">\n      <mat-icon svgIcon=\"chevron-right\"></mat-icon>\n    </button>\n\n    <button\n     *ngIf = \"isDesktop()\"\n      mat-icon-button\n      igoStopPropagation\n      panelRightButton\n      (click)=\"resizeWindows()\"\n      [matTooltip]=\"((this.fullExtent$ | async) ? 'toastPanel.standardExtentTooltip' : 'toastPanel.fullExtentTooltip') | translate\"\n      matTooltipShowDelay=\"500\">\n      <mat-icon svgIcon={{iconResizeWindows}}></mat-icon>\n    </button>\n    <button\n      mat-icon-button\n      igoStopPropagation\n      panelRightButton\n      (click)=\"clear()\">\n      <mat-icon svgIcon=\"close\"></mat-icon>\n    </button>\n\n    <div #content class=\"toast-content\">\n\n      <igo-feature-details\n        *ngIf=\"resultSelected$.value\"\n        [feature]=\"resultSelected$.value.data\"\n        (htmlDisplayEvent)=setHtmlDisplay($event)>\n      </igo-feature-details>\n\n      <igo-search-results\n        *ngIf=\"!resultSelected$.value\"\n        [map]=\"map\"\n        [store]=\"store\"\n        [showIcons]=\"true\"\n        [withZoomButton]=\"withZoomButton\"\n        (resultFocus)=\"focusResult($event)\"\n        (resultUnfocus)=\"unfocusResult($event, true)\"\n        (resultSelect)=\"selectResult($event)\">\n      </igo-search-results>\n    </div>\n  </igo-panel>\n</ng-template>\n\n<div *ngIf=\"isMobile(); else toast\"\nclass=\"swipe-fix\"\n(swipeleft)=\"swipe($event.type)\"\n(swiperight)=\"swipe($event.type)\"\n(swipeup)=\"swipe($event.type)\"\n(swipedown)=\"swipe($event.type)\">\n\n<ng-template [ngTemplateOutlet]=\"toast\"></ng-template>\n</div>\n","import {\n  Component,\n  Input,\n  Output,\n  EventEmitter,\n  HostBinding,\n  HostListener,\n  ChangeDetectionStrategy,\n  OnInit,\n  OnDestroy\n} from '@angular/core';\nimport { BehaviorSubject, Observable, combineLatest, Subscription } from 'rxjs';\nimport { debounceTime, map, skipWhile, tap } from 'rxjs/operators';\nimport olFormatGeoJSON from 'ol/format/GeoJSON';\nimport olFeature from 'ol/Feature';\nimport olPoint from 'ol/geom/Point';\n\nimport {\n  getEntityTitle,\n  EntityStore,\n  ActionStore,\n  Action,\n  ActionbarMode\n} from '@igo2/common';\nimport {\n  Feature,\n  SearchResult,\n  IgoMap,\n  FeatureMotion,\n  moveToOlFeatures,\n  featureToOl,\n  featuresAreTooDeepInView,\n  featureFromOl,\n  getCommonVectorStyle,\n  getCommonVectorSelectedStyle,\n  featuresAreOutOfView,\n  computeOlFeaturesExtent\n} from '@igo2/geo';\nimport {\n  Media,\n  MediaService,\n  LanguageService,\n  StorageService,\n  StorageScope,\n  StorageServiceEvent\n} from '@igo2/core';\nimport { QueryState, StorageState } from '@igo2/integration';\n\n@Component({\n  selector: 'app-toast-panel',\n  templateUrl: './toast-panel.component.html',\n  styleUrls: ['./toast-panel.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ToastPanelComponent implements OnInit, OnDestroy {\n  static SWIPE_ACTION = {\n    RIGHT: 'swiperight',\n    LEFT: 'swipeleft',\n    UP: 'swipeup',\n    DOWN: 'swipedown'\n  };\n\n  get storageService(): StorageService {\n    return this.storageState.storageService;\n  }\n\n  @Input()\n  get map(): IgoMap {\n    return this._map;\n  }\n  set map(value: IgoMap) {\n    this._map = value;\n  }\n  private _map: IgoMap;\n\n  @Input()\n  get store(): EntityStore<SearchResult<Feature>> {\n    return this._store;\n  }\n  set store(value: EntityStore<SearchResult<Feature>>) {\n    this._store = value;\n    this.store.entities$.subscribe((_entities) => {\n      this.unselectResult();\n    });\n  }\n  private _store: EntityStore<SearchResult<Feature>>;\n\n  @Input()\n  get opened(): boolean {\n    return this._opened;\n  }\n  set opened(value: boolean) {\n    if (value !== !this._opened) {\n      return;\n    }\n    this._opened = value;\n    this.storageService.set('toastOpened', value, StorageScope.SESSION);\n    this.openedChange.emit(value);\n  }\n  private _opened = true;\n\n  @Input() hasFeatureEmphasisOnSelection: Boolean = false;\n\n  get zoomAuto(): boolean {\n    return this._zoomAuto;\n  }\n  set zoomAuto(value) {\n    if (value !== !this._zoomAuto) {\n      return;\n    }\n    this._zoomAuto = value;\n    this.zoomAuto$.next(value);\n    this.storageService.set('zoomAuto', value);\n  }\n  private _zoomAuto = false;\n\n  // To allow the toast to use much larger extent on the map\n  get fullExtent(): boolean {\n    return this._fullExtent;\n  }\n  set fullExtent(value) {\n    if (value !== !this._fullExtent) {\n      return;\n    }\n    this._fullExtent = value;\n    this.fullExtent$.next(value);\n    this.fullExtentEvent.emit(value);\n    this.storageService.set('fullExtent', value);\n  }\n  private _fullExtent = false;\n\n  public fullExtent$: BehaviorSubject<boolean> = new BehaviorSubject(\n    this.fullExtent\n  );\n  public isHtmlDisplay = false;\n  public iconResizeWindows = '';\n\n  public icon = 'menu';\n\n  public actionStore = new ActionStore([]);\n  public actionbarMode = ActionbarMode.Overlay;\n\n  private multiple$ = new BehaviorSubject(false);\n  private isResultSelected$ = new BehaviorSubject(false);\n  public isSelectedResultOutOfView$ = new BehaviorSubject(false);\n  private isSelectedResultOutOfView$$: Subscription;\n  private storageChange$$: Subscription;\n  private initialized = true;\n\n  private format = new olFormatGeoJSON();\n\n  private resultOrResolution$$: Subscription;\n  private focusedResult$: BehaviorSubject<\n    SearchResult<Feature>\n  > = new BehaviorSubject(undefined);\n  private abstractFocusedOrSelectedResult: Feature;\n\n  public withZoomButton = true;\n  zoomAuto$: BehaviorSubject<boolean> = new BehaviorSubject(false);\n\n  @Output() openedChange = new EventEmitter<boolean>();\n\n  @Output() fullExtentEvent = new EventEmitter<boolean>();\n  @Output() windowHtmlDisplayEvent = new EventEmitter<boolean>();\n\n  resultSelected$ = new BehaviorSubject<SearchResult<Feature>>(undefined);\n\n  // @HostBinding('class.app-toast-panel-opened')\n  // get hasOpenedClass() {\n  //   return this.opened;\n  // }\n\n  // @HostBinding('class.app-full-toast-panel-collapsed')\n  // get hasFullCollapsedClass() {\n  //   return !this.opened && this.fullExtent;\n  // }\n  getClassPanel() {\n    return {\n      'app-toast-panel-opened' : this.opened && !this.fullExtent && !this.isHtmlDisplay,\n      'app-full-toast-panel-opened' :\n        this.opened && this.fullExtent &&\n        !this.isHtmlDisplay,\n\n      'app-toast-panel-html' :\n        this.opened &&\n        !this.fullExtent &&\n        this.resultSelected$.value &&\n        this.isHtmlDisplay,\n\n      'app-toast-panel-html-large' :\n        this.opened &&\n        this.fullExtent &&\n        this.resultSelected$.value &&\n        this.isHtmlDisplay,\n\n      'app-toast-panel-collapsed': !this.opened && !this.fullExtent && !this.isHtmlDisplay,\n      'app-full-toast-panel-collapsed' : !this.opened && this.fullExtent && !this.isHtmlDisplay,\n      'app-toast-panel-html-collapsed' : !this.opened && this.isHtmlDisplay\n    };\n  }\n\n\n  @HostBinding('style.visibility')\n  get displayStyle() {\n    if (this.results.length) {\n      if (this.results.length === 1 && this.initialized) {\n        this.selectResult(this.results[0]);\n      }\n      return 'visible';\n    }\n    return 'hidden';\n  }\n\n  // @HostBinding('class.app-full-toast-panel-opened')\n  // get hasFullOpenedClass() {\n  //   return this.opened && this.fullExtent;\n  // }\n\n  @HostListener('document:keydown.escape', ['$event']) onEscapeHandler(\n    event: KeyboardEvent\n  ) {\n    this.clear();\n  }\n\n  @HostListener('document:keydown.backspace', ['$event']) onBackHandler(\n    event: KeyboardEvent\n  ) {\n    this.unselectResult();\n  }\n\n  @HostListener('document:keydown.z', ['$event']) onZoomHandler(\n    event: KeyboardEvent\n  ) {\n    if (this.isResultSelected$.getValue() === true) {\n      const localOlFeature = this.format.readFeature(\n        this.resultSelected$.getValue().data,\n        {\n          dataProjection: this.resultSelected$.getValue().data.projection,\n          featureProjection: this.map.projection\n        }\n      );\n      moveToOlFeatures(this.map, [localOlFeature], FeatureMotion.Default);\n    }\n  }\n\n  get results(): SearchResult<Feature>[] {\n    // return this.store.view.filter((e) => e.meta.dataType === FEATURE).all();\n    return this.store.all();\n  }\n\n  get multiple(): Observable<boolean> {\n    this.results.length\n      ? this.multiple$.next(true)\n      : this.multiple$.next(false);\n    return this.multiple$;\n  }\n\n  constructor(\n    public mediaService: MediaService,\n    public languageService: LanguageService,\n    private storageState: StorageState,\n    private queryState: QueryState\n  ) {\n    this.opened = this.storageService.get('toastOpened') as boolean;\n    this.zoomAuto = this.storageService.get('zoomAuto') as boolean;\n    this.fullExtent = this.storageService.get('fullExtent') as boolean;\n    this.setResizeWindowIcon();\n  }\n\n  private monitorResultOutOfView() {\n    this.isSelectedResultOutOfView$$ = combineLatest([\n      this.map.viewController.state$,\n      this.resultSelected$\n    ])\n      .pipe(debounceTime(100))\n      .subscribe((bunch) => {\n        const selectedResult = bunch[1];\n        if (!selectedResult) {\n          this.isSelectedResultOutOfView$.next(false);\n          return;\n        }\n        const selectedOlFeature = featureToOl(selectedResult.data, this.map.projection);\n        const selectedOlFeatureExtent = computeOlFeaturesExtent(this.map, [selectedOlFeature]);\n        this.isSelectedResultOutOfView$.next(featuresAreOutOfView(this.map, selectedOlFeatureExtent));\n      });\n  }\n\n\n  ngOnInit() {\n    this.store.entities$.subscribe(() => {\n      this.initialized = true;\n    });\n    this.monitorResultOutOfView();\n\n    let latestResult;\n    let trigger;\n    if (this.hasFeatureEmphasisOnSelection) {\n      this.resultOrResolution$$ = combineLatest([\n        this.focusedResult$.pipe(\n          tap((res) => {\n            latestResult = res;\n            trigger = 'focused';\n          })\n        ),\n        this.resultSelected$.pipe(\n          tap((res) => {\n            latestResult = res;\n            trigger = 'selected';\n          })\n        ),\n        this.map.viewController.resolution$,\n        this.store.entities$\n      ]).subscribe(() => this.buildResultEmphasis(latestResult, trigger));\n    }\n\n    this.storageChange$$ = this.storageService.storageChange$\n      .pipe(skipWhile((storageChange: StorageServiceEvent) => storageChange.key !== 'zoomAuto'))\n      .subscribe((change) => {\n        this.zoomAuto = change.currentValue;\n      });\n\n    this.actionStore.load([\n      {\n        id: 'list',\n        title: this.languageService.translate.instant('toastPanel.backToList'),\n        icon: 'format-list-bulleted-square',\n        tooltip: this.languageService.translate.instant(\n          'toastPanel.listButton'\n        ),\n        display: () => {\n          return this.isResultSelected$;\n        },\n        handler: () => {\n          this.unselectResult();\n        }\n      },\n      {\n        id: 'zoomFeature',\n        title: this.languageService.translate.instant(\n          'toastPanel.zoomOnFeature'\n        ),\n        icon: 'magnify-plus-outline',\n        tooltip: this.languageService.translate.instant(\n          'toastPanel.zoomOnFeatureTooltip'\n        ),\n        display: () => {\n          return this.isResultSelected$;\n        },\n        handler: () => {\n          const localOlFeature = this.format.readFeature(\n            this.resultSelected$.getValue().data,\n            {\n              dataProjection: this.resultSelected$.getValue().data.projection,\n              featureProjection: this.map.projection\n            }\n          );\n          moveToOlFeatures(this.map, [localOlFeature], FeatureMotion.Zoom);\n        }\n      },\n      {\n        id: 'zoomResults',\n        title: this.languageService.translate.instant(\n          'toastPanel.zoomOnFeatures'\n        ),\n        tooltip: this.languageService.translate.instant(\n          'toastPanel.zoomOnFeaturesTooltip'\n        ),\n        icon: 'magnify-scan',\n        availability: () => {\n          return this.multiple;\n        },\n        handler: () => {\n          const olFeatures = [];\n          for (const result of this.store.all()) {\n            const localOlFeature = this.format.readFeature(result.data, {\n              dataProjection: result.data.projection,\n              featureProjection: this.map.projection\n            });\n            olFeatures.push(localOlFeature);\n          }\n          moveToOlFeatures(this.map, olFeatures, FeatureMotion.Zoom);\n        }\n      },\n      {\n        id: 'zoomAuto',\n        title: this.languageService.translate.instant('toastPanel.zoomAuto'),\n        tooltip: this.languageService.translate.instant(\n          'toastPanel.zoomAutoTooltip'\n        ),\n        checkbox: true,\n        checkCondition: this.zoomAuto$,\n        handler: () => {\n          this.zoomAuto = !this.zoomAuto;\n          if (this.zoomAuto && this.isResultSelected$.value === true) {\n            this.selectResult(this.resultSelected$.getValue());\n          }\n        }\n      },\n      {\n        id: 'fullExtent',\n        title: this.languageService.translate.instant('toastPanel.fullExtent'),\n        tooltip: this.languageService.translate.instant(\n          'toastPanel.fullExtentTooltip'\n        ),\n        icon: 'arrow-expand',\n        display: () => {\n          return this.fullExtent$.pipe(map((v) => !v  && !this.isDesktop()));\n        },\n        handler: () => {\n          this.fullExtent = true;\n        }\n      },\n      {\n        id: 'standardExtent',\n        title: this.languageService.translate.instant(\n          'toastPanel.standardExtent'\n        ),\n        tooltip: this.languageService.translate.instant(\n          'toastPanel.standardExtentTooltip'\n        ),\n        icon: 'arrow-collapse',\n        display: () => {\n          return this.fullExtent$.pipe(map((v) => v && !this.isDesktop()));\n        },\n        handler: () => {\n          this.fullExtent = false;\n        }\n      }\n    ]);\n  }\n\n  ngOnDestroy(): void {\n    if (this.resultOrResolution$$) {\n      this.resultOrResolution$$.unsubscribe();\n    }\n    if (this.isSelectedResultOutOfView$$) {\n      this.isSelectedResultOutOfView$$.unsubscribe();\n    }\n    if (this.storageChange$$) {\n      this.storageChange$$.unsubscribe();\n    }\n  }\n\n  private buildResultEmphasis(\n    result: SearchResult<Feature>,\n    trigger: 'selected' | 'focused' | undefined\n  ) {\n    this.clearFeatureEmphasis();\n    if (!result || (trigger === 'selected' && this.zoomAuto)) {\n      return;\n    }\n    const myOlFeature = featureToOl(result.data, this.map.projection);\n    const olGeometry = myOlFeature.getGeometry();\n    if (featuresAreTooDeepInView(this.map, olGeometry.getExtent(), 0.0025)) {\n      const extent = olGeometry.getExtent();\n      const x = extent[0] + (extent[2] - extent[0]) / 2;\n      const y = extent[1] + (extent[3] - extent[1]) / 2;\n      const feature1 = new olFeature({\n        name: 'abstractFocusedOrSelectedResult',\n        geometry: new olPoint([x, y])\n      });\n      this.abstractFocusedOrSelectedResult = featureFromOl(\n        feature1,\n        this.map.projection\n      );\n      this.abstractFocusedOrSelectedResult.meta.style =\n        getCommonVectorSelectedStyle(\n          Object.assign({},\n            { feature: this.abstractFocusedOrSelectedResult },\n            trigger === 'selected' ?\n              this.queryState.queryOverlayStyleSelection :\n              this.queryState.queryOverlayStyleFocus));\n      this.abstractFocusedOrSelectedResult.meta.style.setZIndex(2000);\n      this.map.queryResultsOverlay.addFeature(\n        this.abstractFocusedOrSelectedResult,\n        FeatureMotion.None\n      );\n    }\n  }\n\n  private clearFeatureEmphasis() {\n    if (this.abstractFocusedOrSelectedResult) {\n      this.map.queryResultsOverlay.removeFeature(this.abstractFocusedOrSelectedResult);\n      this.abstractFocusedOrSelectedResult = undefined;\n    }\n  }\n\n  getTitle(result: SearchResult) {\n    return getEntityTitle(result);\n  }\n\n  focusResult(result: SearchResult<Feature>) {\n    this.focusedResult$.next(result);\n    this.map.queryResultsOverlay.removeFeature(result.data);\n\n    result.data.meta.style = getCommonVectorSelectedStyle(\n      Object.assign({},\n        { feature: result.data },\n        this.queryState.queryOverlayStyleFocus));\n    result.data.meta.style.setZIndex(2000);\n    this.map.queryResultsOverlay.addFeature(result.data, FeatureMotion.None);\n  }\n\n  unfocusResult(result: SearchResult<Feature>, force?) {\n    this.focusedResult$.next(undefined);\n    if (!force && this.store.state.get(result).focused) {\n      return;\n    }\n    this.map.queryResultsOverlay.removeFeature(result.data);\n\n    result.data.meta.style = getCommonVectorStyle(\n      Object.assign({},\n        { feature: result.data },\n        this.queryState.queryOverlayStyle));\n    result.data.meta.style.setZIndex(undefined);\n    this.map.queryResultsOverlay.addFeature(result.data, FeatureMotion.None);\n  }\n\n  selectResult(result: SearchResult<Feature>) {\n    this.store.state.update(\n      result,\n      {\n        focused: true,\n        selected: true\n      },\n      true\n    );\n    this.resultSelected$.next(result);\n    if (result.data.properties && result.data.properties.target === 'iframe') {\n      this.setHtmlDisplay(true);\n    } else {\n      this.setHtmlDisplay(false);\n    }\n\n    const features = [];\n    for (const feature of this.store.all()) {\n      if (feature.meta.id === result.meta.id) {\n        feature.data.meta.style = getCommonVectorSelectedStyle(\n          Object.assign({}, { feature: feature.data },\n            this.queryState.queryOverlayStyleSelection));\n        feature.data.meta.style.setZIndex(2000);\n      } else {\n        feature.data.meta.style = getCommonVectorStyle(\n          Object.assign({},\n            { feature: feature.data },\n            this.queryState.queryOverlayStyle));\n      }\n      features.push(feature.data);\n    }\n    this.map.queryResultsOverlay.removeFeatures(features);\n    this.map.queryResultsOverlay.addFeatures(features, FeatureMotion.None);\n\n    if (this.zoomAuto) {\n      const localOlFeature = this.format.readFeature(\n        this.resultSelected$.getValue().data,\n        {\n          dataProjection: this.resultSelected$.getValue().data.projection,\n          featureProjection: this.map.projection\n        }\n      );\n      moveToOlFeatures(this.map, [localOlFeature], FeatureMotion.Default);\n    }\n\n    this.isResultSelected$.next(true);\n    this.initialized = false;\n  }\n\n  unselectResult() {\n    this.resultSelected$.next(undefined);\n    this.isResultSelected$.next(false);\n    this.setHtmlDisplay(false);\n    this.store.state.clear();\n\n    const features = [];\n    for (const feature of this.store.all()) {\n      feature.data.meta.style = getCommonVectorStyle(\n        Object.assign({},\n          { feature: feature.data },\n          this.queryState.queryOverlayStyle));\n      features.push(feature.data);\n    }\n    this.map.queryResultsOverlay.setFeatures(features, FeatureMotion.None, 'map');\n  }\n\n  clear() {\n    this.clearFeatureEmphasis();\n    this.map.queryResultsOverlay.clear();\n    this.store.clear();\n    this.unselectResult();\n    this.setHtmlDisplay(false);\n  }\n\n  isMobile(): boolean {\n    return this.mediaService.getMedia() === Media.Mobile;\n  }\n  isDesktop(): boolean {\n    return this.mediaService.isDesktop();\n  }\n\n  handleKeyboardEvent(event) {\n    event.preventDefault();\n    if (event.keyCode === 37) {\n      this.previousResult();\n    } else if (event.keyCode === 39) {\n      this.nextResult();\n    }\n  }\n\n  previousResult() {\n    if (!this.resultSelected$.value) {\n      return;\n    }\n    let i = this.results.indexOf(this.resultSelected$.value);\n    const previousResult = this.results[--i];\n    if (previousResult) {\n      this.selectResult(previousResult);\n    }\n  }\n\n  nextResult() {\n    if (!this.resultSelected$.value) {\n      return;\n    }\n    let i = this.results.indexOf(this.resultSelected$.value);\n    const nextResult = this.results[++i];\n    if (nextResult) {\n      this.selectResult(nextResult);\n    }\n  }\n\n  zoomTo() {\n    const localOlFeature = this.format.readFeature(\n      this.resultSelected$.getValue().data,\n      {\n        dataProjection: this.resultSelected$.getValue().data.projection,\n        featureProjection: this.map.projection\n      }\n    );\n    moveToOlFeatures(this.map, [localOlFeature], FeatureMotion.Zoom);\n  }\n\n  swipe(action: string) {\n    if (action === ToastPanelComponent.SWIPE_ACTION.RIGHT) {\n      this.previousResult();\n    } else if (action === ToastPanelComponent.SWIPE_ACTION.LEFT) {\n      this.nextResult();\n    } else if (action === ToastPanelComponent.SWIPE_ACTION.UP) {\n      this.opened = true;\n    } else if (action === ToastPanelComponent.SWIPE_ACTION.DOWN) {\n      this.opened = false;\n    }\n  }\n\n  onToggleClick(e: MouseEvent) {\n    if ((e.target as any).className !== 'igo-panel-title') {\n      return;\n    }\n    this.opened = !this.opened;\n  }\n\n  /**\n   * Invoke the action handler\n   * @internal\n   */\n  onTriggerAction(action: Action) {\n    const args = action.args || [];\n    action.handler(...args);\n  }\n\n  setHtmlDisplay(value: boolean) {\n    if (value === true) {\n      this.isHtmlDisplay = true;\n      this.windowHtmlDisplayEvent.emit(true);\n    } else {\n      this.isHtmlDisplay = false;\n      this.windowHtmlDisplayEvent.emit(false);\n    }\n  }\n\n  isHtmlAndDesktop(): boolean {\n    if (this.isHtmlDisplay && this.isDesktop()) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  setResizeWindowIcon() {\n    if (this.fullExtent) {\n      this.iconResizeWindows = 'arrow-collapse';\n      // this.iconResizeWindows = 'vector-arrange-below';\n    } else {\n      this.iconResizeWindows = 'arrow-expand';\n      // this.iconResizeWindows = 'crop-square';\n    }\n  }\n\n  resizeWindows() {\n    this.storageService.set('fullExtent', !this.fullExtent);\n    if (this.fullExtent) {\n        this.reduceWindow();\n    } else {\n        this.enlargeWindows();\n      }\n  }\n\n  reduceWindow() {\n    this.fullExtent = false;\n    this.setResizeWindowIcon();\n  }\n\n  enlargeWindows() {\n    this.fullExtent = true;\n    this.setResizeWindowIcon();\n  }\n\n}\n","<mat-sidenav-container class=\"app-main-container\">\n  <mat-sidenav-content>\n\n    <igo-backdrop\n      [shown]=\"backdropShown\"\n      (click)=\"onBackdropClick()\">\n    </igo-backdrop>\n\n    <button\n      mat-icon-button\n      id= \"menu-button\"\n      [ngClass]=\"getClassMenuButton()\"\n      tooltip-position=\"below\"\n      matTooltipShowDelay=\"500\"\n      [matTooltip]=\"(sidenavOpened ? 'menu.close' : 'menu.open') | translate\"\n      (click)=\"onToggleSidenavClick()\">\n      <mat-icon svgIcon=\"menu\">\n      </mat-icon>\n    </button>\n\n    <igo-search-bar\n      #searchBar\n      [term]=\"searchBarTerm\"\n      [termSplitter]=\"termSplitter\"\n      [minLength]=\"minSearchTermLength\"\n      [searchSettings]=\"true\"\n      [forceNA]=\"forceCoordsNA\"\n      [store]=\"searchStore\"\n      (searchTermChange)=\"onSearchTermChange($event)\"\n      [pointerSummaryEnabled]=\"igoSearchPointerSummaryEnabled\"\n      (pointerSummaryStatus)=\"onPointerSummaryStatusChange($event)\"\n      [searchResultsGeometryEnabled]=\"searchResultsGeometryEnabled\"\n      (searchResultsGeometryStatus)=\"onSearchResultsGeometryStatusChange($event)\"\n      (search)=\"onSearch($event)\"\n      (clearFeature)=\"onClearSearch()\"\n      (searchSettingsChange)=\"onSearchSettingsChange()\">\n    </igo-search-bar>\n\n    <app-sidenav\n      [map]=\"map\"\n      [(opened)]=\"sidenavOpened\"\n      (toolChange)=\"toolChanged($event)\">\n    </app-sidenav>\n\n    <igo-map-browser\n      igoWorkspaceUpdator\n      [workspaceStore]=\"workspaceStore\"\n      igoSearchPointerSummary\n      [igoSearchPointerSummaryDelay]=\"500\"\n      [igoSearchPointerSummaryEnabled]=igoSearchPointerSummaryEnabled\n\n      #mapBrowser\n      igoQuery\n      [waitForAllQueries]=\"true\"\n      [queryFeatures]=\"true\"\n      [queryFeaturesHitTolerance]=\"15\"\n      igoMapContext\n      igoLayerContext\n      igoDropGeoFile\n      (query)=\"onMapQuery($event)\"\n      [map]=\"map\"\n      [igoContextMenu]=contextMenu\n      (menuPosition)=\"onContextMenuOpen($event)\"\n      [ngClass]=\"{'igo-attribution-offset': map.getBaseLayers().length > 1}\"\n      [@mapStateX]=\"sidenavOpened ? 'right' : 'left'\"\n      (@mapStateX.start)=\"updateMapBrowserClass()\"\n      [@mapStateY]=\"getControlsOffsetY()\"\n      (@mapStateY.start)=\"updateMapBrowserClass()\">\n\n      <igo-zoom-button [map]=\"map\" color=\"primary\"\n        [@controlsOffsetY]=\"getControlsOffsetY()\">\n      </igo-zoom-button>\n      <igo-offline-button [map]=\"map\" color=\"primary\"\n        [@controlsOffsetY]=\"getControlsOffsetY()\"\n        [@mobileOffsetY]=\"getToastPanelStatus()\">\n      </igo-offline-button>\n      <igo-geolocate-button\n        *ngIf=\"hasGeolocateButton\"\n        [map]=\"map\" color=\"primary\"\n        [@controlsOffsetY]=\"getControlsOffsetY()\"\n        [@mobileOffsetY]=\"getToastPanelStatus()\">\n      </igo-geolocate-button>\n      <igo-rotation-button [showIfNoRotation]=\"showRotationButtonIfNoRotation\" [map]=\"map\" color=\"primary\"></igo-rotation-button>\n      <igo-user-button \n        *ngIf=\"auth.url\"\n        [map]=\"map\" color=\"primary\"\n        [@controlsOffsetY]=\"getControlsOffsetY()\"\n        [@mobileOffsetY]=\"getToastPanelStatus()\">\n      </igo-user-button>\n      <igo-baselayers-switcher [map]=\"map\"\n        [@controlsOffsetY]=\"getBaselayersSwitcherStatus()\"\n        [useStaticIcon]=\"true\">\n      </igo-baselayers-switcher>\n    </igo-map-browser>\n\n    <app-map-overlay\n      [@controlStateY]=\"getControlsOffsetY()\"\n      [@controlStateX]=\"(mediaService.media$ | async) !== 'mobile' &&\n                              sidenavOpened ? 'right' : 'left'\">\n    </app-map-overlay>\n\n  </mat-sidenav-content>\n</mat-sidenav-container>\n\n<app-expansion-panel\n  *ngIf=\"hasExpansionPanel && (workspaceState.workspaceEnabled$ | async)\"\n  [backdropShown]=\"expansionPanelBackdropShown\"\n  [(expanded)]=\"expansionPanelExpanded\"\n  [maximized]=\"workspaceMaximize$ | async\"\n  [@expansionPanelSize]=\"getExpansionPanelStatus()\"\n  [@toastOffsetY]=\"(isMobile() && !toastPanelOpened && queryState.store.entities$.value.length > 0 && !expansionPanelExpanded) ? 'true' : 'false'\">\n\n  <ng-container expansionPanelHeader>\n    <igo-workspace-selector\n      igoWorkspaceSelector\n      (toolToActivate)=\"toolToActivateFromWorkspace($event)\"\n      [store]=\"workspaceStore\"\n      [map]=\"map\">\n    </igo-workspace-selector>\n\n    <ng-container *ngIf=\"selectedWorkspace$ | async as workspace\">\n      <button\n        class=\"eye-workspace\"\n        mat-icon-button\n        [color]=\"workspace.layer.visible ? 'primary' : 'default'\"\n        collapsibleButton\n        tooltip-position=\"below\"\n        matTooltipShowDelay=\"500\"\n        [matTooltip]=\"workspace.layer.visible ?\n                      ('igo.geo.layer.hideLayer' | translate) :\n                      ('igo.geo.layer.showLayer' | translate)\"\n        (click)=\"workspace.layer.visible = !workspace.layer.visible\">\n        <mat-icon\n          [ngClass]=\"{disabled: !(workspace.inResolutionRange$ | async)}\"\n          [svgIcon]=\"workspace.layer.visible ? 'eye' : 'eye-off'\">\n        </mat-icon>\n    </button>\n    <igo-actionbar\n      class=\"actionbar-workspace\"\n      *ngIf=\"workspace.actionStore\"\n      [store]=\"workspace.actionStore\"\n      [withIcon]=\"true\"\n      [withTitle]=\"actionbarWithTitle\"\n      [horizontal]=\"true\"\n      [withToggleButton]=\"actionbarMode === 'overlay'\"\n      [iconColor]=\"'primary'\"\n      [color]=\"'primary'\"\n      [mode]=\"actionbarMode\"\n      [overlayClass]=\"workspaceMenuClass\">\n    </igo-actionbar>\n      <div class=\"spacer\"></div>\n      <igo-entity-table-paginator\n      *ngIf=\"workspaceVisibility()\"\n        [store]=\"workspace.entityStore\"\n        [entitySortChange$]=\"workspaceEntitySortChange$\"\n        [paginatorOptions]=\"paginatorOptions\"\n        (paginatorChange)=\"paginatorChange($event)\">\n      </igo-entity-table-paginator>\n    </ng-container>\n  </ng-container>\n\n  <ng-container *ngIf=\"selectedWorkspace$ | async as workspace\">\n    <igo-entity-table\n      [paginator]=\"workspacePaginator\"\n      *ngIf=\"workspace.entityStore && workspace.meta && workspace.meta.tableTemplate && workspaceVisibility()\"\n      [store]=\"workspace.entityStore\"\n      (entitySortChange)=\"entitySortChange()\"\n      (entitySelectChange)=\"entitySelectChange($event)\"\n      [template]=\"workspace.meta.tableTemplate\">\n    </igo-entity-table>\n    <span class=\"mat-typography\">{{workspaceNotAvailableMessage | translate}}</span>\n  </ng-container>\n\n</app-expansion-panel>\n\n<app-toast-panel-for-expansion\n  [withHeader]=\"false\"\n  [(opened)]=\"toastPanelForExpansionOpened\">\n\n  <div class=\"toast-panel-for-expansion-close-button-container\">\n    <button\n      mat-icon-button\n      color=\"warn\"\n      (click)=\"toastPanelForExpansionOpened = false\">\n      <mat-icon svgIcon=\"close\"></mat-icon>\n    </button>\n  </div>\n\n  <igo-workspace-widget-outlet\n    *ngIf=\"selectedWorkspace$ | async as workspace\"\n    [workspace]=\"workspace\"\n    (deactivateWidget)=\"onDeactivateWorkspaceWidget()\">\n  </igo-workspace-widget-outlet>\n\n</app-toast-panel-for-expansion >\n\n<app-toast-panel *ngIf=\"!(queryStore.empty$ | async)\"\n  [map]=\"map\"\n  [store]=\"queryStore\"\n  [hasFeatureEmphasisOnSelection]=\"hasFeatureEmphasisOnSelection\"\n  [@toastPanelOffsetX]=\"(isMobile() || !isLandscape()) ? undefined : getToastPanelExtent()\"\n  [@toastPanelOffsetY]=\"getToastPanelOffsetY()\"\n  [@toastPanelMobileSidenav]=\"(isMobile() && sidenavOpened) || (isTablet() && isPortrait() && sidenavOpened)\"\n  [opened]=\"toastPanelOpened\"\n  (openedChange)=\"toastOpenedChange($event)\"\n  (fullExtentEvent)=\"fullExtent = $event\"\n  (windowHtmlDisplayEvent)=\"toastPanelHtmlDisplay= $event\">\n</app-toast-panel>\n\n<ng-template #contextMenu>\n  <igo-actionbar\n    [store]=\"contextMenuStore\"\n    [withIcon]=\"false\"\n    [horizontal]=\"true\"\n    mode=\"context\">\n  </igo-actionbar>\n</ng-template>\n","import {\n  Component,\n  OnInit,\n  OnDestroy,\n  ChangeDetectorRef,\n  ViewChild,\n  ElementRef\n} from '@angular/core';\nimport { ActivatedRoute, Params } from '@angular/router';\nimport { Subscription, of, BehaviorSubject } from 'rxjs';\nimport { debounceTime, take, pairwise, skipWhile } from 'rxjs/operators';\nimport { MatDialog, MatDialogConfig } from '@angular/material/dialog';\nimport { MapBrowserPointerEvent as OlMapBrowserPointerEvent } from 'ol/MapBrowserEvent';\nimport * as olProj from 'ol/proj';\n\nimport {\n  MediaService,\n  Media,\n  MediaOrientation,\n  ConfigService,\n  LanguageService,\n  MessageService,\n  StorageService\n} from '@igo2/core';\nimport {\n  ActionbarMode,\n  Workspace,\n  WorkspaceStore,\n  ActionStore,\n  EntityStore,\n  // getEntityTitle,\n  Toolbox,\n  Tool,\n  Widget,\n  EntityTablePaginatorOptions,\n  EntityRecord\n} from '@igo2/common';\nimport { AuthOptions, AuthService } from '@igo2/auth';\nimport { DetailedContext } from '@igo2/context';\nimport {\n  DataSourceService,\n  Feature,\n  FEATURE,\n  featureToSearchResult,\n  GoogleLinks,\n  IgoMap,\n  LayerService,\n  QuerySearchSource,\n  Research,\n  SearchResult,\n  SearchSource,\n  SearchSourceService,\n  CapabilitiesService,\n  sourceCanSearch,\n  sourceCanReverseSearch,\n  ImportService,\n  handleFileImportError,\n  handleFileImportSuccess,\n  featureFromOl,\n  QueryService,\n  WfsWorkspace,\n  FeatureWorkspace,\n  generateIdFromSourceOptions,\n  computeOlFeaturesExtent\n} from '@igo2/geo';\n\nimport {\n  ToolState,\n  MapState,\n  SearchState,\n  QueryState,\n  ContextState,\n  WorkspaceState\n} from '@igo2/integration';\n\nimport {\n  expansionPanelAnimation,\n  toastPanelAnimation,\n  controlsAnimations,\n  controlSlideX,\n  controlSlideY,\n  mapSlideX,\n  mapSlideY\n} from './portal.animation';\nimport { HttpClient } from '@angular/common/http';\n\nimport { WelcomeWindowComponent } from './welcome-window/welcome-window.component';\nimport { WelcomeWindowService } from './welcome-window/welcome-window.service';\nimport { MatPaginator } from '@angular/material/paginator';\nimport { ObjectUtils } from '@igo2/utils';\nimport olFormatGeoJSON from 'ol/format/GeoJSON';\n\n@Component({\n  selector: 'app-portal',\n  templateUrl: './portal.component.html',\n  styleUrls: ['./portal.component.scss'],\n  animations: [\n    expansionPanelAnimation(),\n    toastPanelAnimation(),\n    controlsAnimations(),\n    controlSlideX(),\n    controlSlideY(),\n    mapSlideX(),\n    mapSlideY()\n  ]\n})\nexport class PortalComponent implements OnInit, OnDestroy {\n  public minSearchTermLength = 2;\n  public hasExpansionPanel = false;\n  public hasGeolocateButton = true;\n  public showRotationButtonIfNoRotation = false;\n  public hasFeatureEmphasisOnSelection: Boolean = false;\n  public workspaceNotAvailableMessage: String = 'workspace.disabled.resolution';\n  public workspacePaginator: MatPaginator;\n  public workspaceEntitySortChange$: BehaviorSubject<\n    boolean\n  > = new BehaviorSubject(false);\n  public paginatorOptions: EntityTablePaginatorOptions = {\n    pageSize: 50, // Number of items to display on a page.\n    pageSizeOptions: [1, 5, 10, 20, 50, 100, 500] // The set of provided page size options to display to the user.\n  };\n  public workspaceMenuClass = 'workspace-menu';\n\n  public fullExtent = this.storageService.get('fullExtent') as boolean;\n  private workspaceMaximize$$: Subscription[] = [];\n  readonly workspaceMaximize$: BehaviorSubject<boolean> = new BehaviorSubject(\n    this.storageService.get('workspaceMaximize') as boolean\n  );\n  public sidenavOpened = false;\n  public searchBarTerm = '';\n  public onSettingsChange$ = new BehaviorSubject<boolean>(undefined);\n  public termDefinedInUrl = false;\n  public termSplitter = '|';\n  public termDefinedInUrlTriggered = false;\n  private addedLayers$$: Subscription[] = [];\n  public forceCoordsNA = false;\n\n  public contextMenuStore = new ActionStore([]);\n  private contextMenuCoord: [number, number];\n\n  private contextLoaded = false;\n\n  private context$$: Subscription;\n  private openSidenav$$: Subscription;\n\n  public igoSearchPointerSummaryEnabled: boolean;\n\n  public toastPanelForExpansionOpened = true;\n  private activeWidget$$: Subscription;\n  public showToastPanelForExpansionToggle = false;\n  public selectedWorkspace$: BehaviorSubject<Workspace> = new BehaviorSubject(\n    undefined\n  );\n  private routeParams: Params;\n  private menuButtonReverseColor = false;\n  public toastPanelHtmlDisplay = false;\n\n  @ViewChild('mapBrowser', { read: ElementRef, static: true })\n  mapBrowser: ElementRef;\n  @ViewChild('searchBar', { read: ElementRef, static: true })\n  searchBar: ElementRef;\n\n  get map(): IgoMap {\n    return this.mapState.map;\n  }\n\n  get auth(): AuthOptions {\n    return this.configService.getConfig('auth') || [];\n  }\n\n  get toastPanelOpened(): boolean {\n    return this._toastPanelOpened;\n  }\n  set toastPanelOpened(value: boolean) {\n    if (value !== !this._toastPanelOpened) {\n      return;\n    }\n    this._toastPanelOpened = value;\n    this.cdRef.detectChanges();\n  }\n  private _toastPanelOpened =\n    (this.storageService.get('toastOpened') as boolean) !== false;\n\n  isMobile(): boolean {\n    return this.mediaService.getMedia() === Media.Mobile;\n  }\n\n  isTablet(): boolean {\n    return this.mediaService.getMedia() === Media.Tablet;\n  }\n\n  isLandscape(): boolean {\n    return this.mediaService.getOrientation() === MediaOrientation.Landscape;\n  }\n\n  isPortrait(): boolean {\n    return this.mediaService.getOrientation() === MediaOrientation.Portrait;\n  }\n\n  get backdropShown(): boolean {\n    return (\n      (this.isMobile() || (this.isTablet() && this.isPortrait())) &&\n      this.sidenavOpened\n    );\n  }\n\n  get expansionPanelExpanded(): boolean {\n    return this.workspaceState.workspacePanelExpanded;\n  }\n  set expansionPanelExpanded(value: boolean) {\n    this.workspaceState.workspacePanelExpanded = value;\n  }\n\n  get toastPanelShown(): boolean {\n    return true;\n  }\n\n  get expansionPanelBackdropShown(): boolean {\n    return this.expansionPanelExpanded && this.toastPanelForExpansionOpened;\n  }\n\n  get actionbarMode(): ActionbarMode {\n    return ActionbarMode.Overlay;\n  }\n\n  get actionbarWithTitle(): boolean {\n    return this.actionbarMode === ActionbarMode.Overlay;\n  }\n\n  get searchStore(): EntityStore<SearchResult> {\n    return this.searchState.store;\n  }\n\n  get searchResultsGeometryEnabled(): boolean {\n    return this.searchState.searchResultsGeometryEnabled$.value;\n  }\n\n  get queryStore(): EntityStore<SearchResult> {\n    return this.queryState.store;\n  }\n\n  get toolbox(): Toolbox {\n    return this.toolState.toolbox;\n  }\n\n  get toastPanelContent(): string {\n    let content;\n    if (this.workspace !== undefined && this.workspace.hasWidget) {\n      content = 'workspace';\n    } /*else if (this.searchResult !== undefined) {\n      content = this.searchResult.meta.dataType.toLowerCase();\n    }*/\n    return content;\n  }\n\n  // get toastPanelTitle(): string {\n  //   let title;\n  //   if (\n  //     this.toastPanelContent !== 'workspace' &&\n  //     this.searchResult !== undefined\n  //   ) {\n  //     title = getEntityTitle(this.searchResult);\n  //   }\n  //   return title;\n  // }\n\n  get workspaceStore(): WorkspaceStore {\n    return this.workspaceState.store;\n  }\n\n  get workspace(): Workspace {\n    return this.workspaceState.workspace$.value;\n  }\n\n  constructor(\n    private route: ActivatedRoute,\n    public workspaceState: WorkspaceState,\n    public authService: AuthService,\n    public mediaService: MediaService,\n    public layerService: LayerService,\n    public dataSourceService: DataSourceService,\n    public cdRef: ChangeDetectorRef,\n    public capabilitiesService: CapabilitiesService,\n    private contextState: ContextState,\n    private mapState: MapState,\n    private searchState: SearchState,\n    private queryState: QueryState,\n    private toolState: ToolState,\n    private searchSourceService: SearchSourceService,\n    private configService: ConfigService,\n    private importService: ImportService,\n    private http: HttpClient,\n    private languageService: LanguageService,\n    private messageService: MessageService,\n    private welcomeWindowService: WelcomeWindowService,\n    public dialogWindow: MatDialog,\n    private queryService: QueryService,\n    private storageService: StorageService\n  ) {\n    this.hasExpansionPanel = this.configService.getConfig('hasExpansionPanel');\n    this.hasGeolocateButton =\n    this.configService.getConfig('hasGeolocateButton') === undefined ? true : this.configService.getConfig('hasGeolocateButton') ;\n    this.showRotationButtonIfNoRotation =\n    this.configService.getConfig('showRotationButtonIfNoRotation') === undefined ? false : this.configService.getConfig('showRotationButtonIfNoRotation') ;\n    this.forceCoordsNA = this.configService.getConfig('app.forceCoordsNA');\n    this.hasFeatureEmphasisOnSelection = this.configService.getConfig(\n      'hasFeatureEmphasisOnSelection'\n    );\n\n\n    this.igoSearchPointerSummaryEnabled = this.configService.getConfig(\n      'hasSearchPointerSummary'\n    );\n    if (this.igoSearchPointerSummaryEnabled === undefined) {\n      this.igoSearchPointerSummaryEnabled = this.storageService.get('searchPointerSummaryEnabled') as boolean || false;\n    }\n\n    if (\n      typeof this.configService.getConfig('menuButtonReverseColor') !==\n      'undefined'\n    ) {\n      this.menuButtonReverseColor = this.configService.getConfig(\n        'menuButtonReverseColor'\n      );\n    }\n  }\n\n  ngOnInit() {\n    window['IGO'] = this;\n    this.searchState.searchTermSplitter$.next(this.termSplitter);\n\n    this.initWelcomeWindow();\n\n    this.authService.authenticate$.subscribe((authenticated) => {\n      this.contextLoaded = false;\n    });\n\n    this.context$$ = this.contextState.context$.subscribe(\n      (context: DetailedContext) => this.onChangeContext(context)\n    );\n\n    this.contextMenuStore.load([\n      {\n        id: 'coordinates',\n        title: 'coordinates',\n        handler: () => this.searchCoordinate(this.contextMenuCoord)\n      },\n      {\n        id: 'googleMaps',\n        title: 'googleMap',\n        handler: () => this.openGoogleMaps(this.contextMenuCoord)\n      },\n      {\n        id: 'googleStreetView',\n        title: 'googleStreetView',\n        handler: () => this.openGoogleStreetView(this.contextMenuCoord)\n      }\n    ]);\n\n    this.queryStore.count$\n      .pipe(pairwise())\n      .subscribe(([prevCnt, currentCnt]) => {\n        this.map.viewController.padding[2] = currentCnt ? 280 : 0;\n        // on mobile. Close the toast if workspace is opened, on new query\n        if (\n          prevCnt === 0 &&\n          currentCnt !== prevCnt &&\n          this.isMobile() &&\n          this.hasExpansionPanel &&\n          this.expansionPanelExpanded &&\n          this.toastPanelOpened\n        ) {\n          this.toastPanelOpened = false;\n        }\n      });\n    this.map.ol.once('rendercomplete', () => {\n      this.readQueryParams();\n    });\n\n    this.onSettingsChange$.subscribe(() => {\n      this.searchState.setSearchSettingsChange();\n    });\n\n    this.searchState.selectedResult$.subscribe((result) => {\n      if (result && this.isMobile()) {\n        this.closeSidenav();\n      }\n    });\n\n    this.workspaceState.workspaceEnabled$.next(this.hasExpansionPanel);\n    this.workspaceState.store.empty$.subscribe((workspaceEmpty) => {\n      if (!this.hasExpansionPanel) {\n        return;\n      }\n      this.workspaceState.workspaceEnabled$.next(workspaceEmpty ? false : true);\n      if (workspaceEmpty) {\n        this.expansionPanelExpanded = false;\n      }\n      this.updateMapBrowserClass();\n    });\n\n    this.workspaceMaximize$$.push(this.workspaceState.workspaceMaximize$.subscribe((workspaceMaximize) => {\n      this.workspaceMaximize$.next(workspaceMaximize);\n      this.updateMapBrowserClass();\n    }));\n    this.workspaceMaximize$$.push(\n      this.workspaceMaximize$.subscribe(() => this.updateMapBrowserClass())\n    );\n\n    this.workspaceState.workspace$.subscribe((activeWks: WfsWorkspace | FeatureWorkspace) => {\n      if (activeWks) {\n        this.selectedWorkspace$.next(activeWks);\n        this.expansionPanelExpanded = true;\n      } else {\n        this.expansionPanelExpanded = false;\n      }\n    });\n\n    this.activeWidget$$ = this.workspaceState.activeWorkspaceWidget$.subscribe(\n      (widget: Widget) => {\n        if (widget !== undefined) {\n          this.openToastPanelForExpansion();\n          this.showToastPanelForExpansionToggle = true;\n        } else {\n          this.closeToastPanelForExpansion();\n          this.showToastPanelForExpansionToggle = false;\n        }\n      }\n    );\n\n    this.openSidenav$$ = this.toolState.openSidenav$.subscribe(\n      (openSidenav: boolean) => {\n        if (openSidenav) {\n          this.openSidenav();\n          this.toolState.openSidenav$.next(false);\n        }\n      }\n    );\n  }\n\n  getClassMenuButton() {\n    if (this.sidenavOpened) {\n      return {\n        'menu-button': this.menuButtonReverseColor === false,\n        'menu-button-reverse-color': this.menuButtonReverseColor === true\n      };\n    } else {\n      return {\n        'menu-button': this.menuButtonReverseColor === false,\n        'menu-button-reverse-color-close ': this.menuButtonReverseColor === true\n      };\n    }\n  }\n\n  workspaceVisibility(): boolean {\n    const wks = (this.selectedWorkspace$.value as WfsWorkspace | FeatureWorkspace);\n    if (wks.inResolutionRange$.value) {\n      if (wks.entityStore.empty$.value && !wks.layer.visible) {\n        this.workspaceNotAvailableMessage = 'workspace.disabled.visible';\n      } else {\n        this.workspaceNotAvailableMessage = '';\n      }\n    } else {\n      this.workspaceNotAvailableMessage = 'workspace.disabled.resolution';\n    }\n    return wks.inResolutionRange$.value;\n  }\n\n\n  paginatorChange(matPaginator: MatPaginator) {\n    this.workspacePaginator = matPaginator;\n  }\n\n  entitySortChange() {\n    this.workspaceEntitySortChange$.next(true);\n  }\n\n  entitySelectChange(result: { added: Feature[] }) {\n    const baseQuerySearchSource = this.getQuerySearchSource();\n    const querySearchSourceArray: QuerySearchSource[] = [];\n    if (result && result.added) {\n      const results = result.added.map((res) => {\n        if (\n          res &&\n          res.ol &&\n          res.ol.getProperties()._featureStore.layer &&\n          res.ol.getProperties()._featureStore.layer.visible\n        ) {\n          const featureStoreLayer = res.ol.getProperties()._featureStore.layer;\n          const feature = featureFromOl(\n            res.ol,\n            featureStoreLayer.map.projection,\n            featureStoreLayer.ol\n          );\n\n          feature.meta.alias = this.queryService.getAllowedFieldsAndAlias(\n            featureStoreLayer\n          );\n          feature.meta.title =\n            this.queryService.getQueryTitle(feature, featureStoreLayer) ||\n            feature.meta.title;\n          let querySearchSource = querySearchSourceArray.find(\n            (s) => s.title === feature.meta.sourceTitle\n          );\n          if (!querySearchSource) {\n            querySearchSource = new QuerySearchSource({\n              title: feature.meta.sourceTitle\n            });\n            querySearchSourceArray.push(querySearchSource);\n          }\n          return featureToSearchResult(feature, querySearchSource);\n        }\n      });\n\n      const research = {\n        request: of(results),\n        reverse: false,\n        source: baseQuerySearchSource\n      };\n      research.request.subscribe((queryResults: SearchResult<Feature>[]) => {\n        this.queryStore.load(queryResults);\n      });\n    }\n  }\n\n  ngOnDestroy() {\n    this.context$$.unsubscribe();\n    this.activeWidget$$.unsubscribe();\n    this.openSidenav$$.unsubscribe();\n    this.workspaceMaximize$$.map(f => f.unsubscribe());\n  }\n\n  /**\n   * Cancel ongoing add layer, if any\n   */\n  private cancelOngoingAddLayer() {\n    this.addedLayers$$.forEach((sub: Subscription) => sub.unsubscribe());\n    this.addedLayers$$ = [];\n  }\n\n  onBackdropClick() {\n    this.closeSidenav();\n  }\n\n  onToggleSidenavClick() {\n    this.toggleSidenav();\n  }\n\n  onDeactivateWorkspaceWidget() {\n    this.closeToastPanelForExpansion();\n  }\n\n  closeToastPanelForExpansion() {\n    this.toastPanelForExpansionOpened = false;\n  }\n\n  openToastPanelForExpansion() {\n    this.toastPanelForExpansionOpened = true;\n  }\n\n  onMapQuery(event: { features: Feature[]; event: OlMapBrowserPointerEvent }) {\n    const baseQuerySearchSource = this.getQuerySearchSource();\n    const querySearchSourceArray: QuerySearchSource[] = [];\n\n    const results = event.features.map((feature: Feature) => {\n      let querySearchSource = querySearchSourceArray.find(\n        (s) => s.title === feature.meta.sourceTitle\n      );\n      if (!querySearchSource) {\n        querySearchSource = new QuerySearchSource({\n          title: feature.meta.sourceTitle\n        });\n        querySearchSourceArray.push(querySearchSource);\n      }\n      return featureToSearchResult(feature, querySearchSource);\n    });\n\n    const research = {\n      request: of(results),\n      reverse: false,\n      source: baseQuerySearchSource\n    };\n    research.request.subscribe((queryResults: SearchResult<Feature>[]) => {\n      this.queryStore.load(queryResults);\n    });\n  }\n\n  onSearchTermChange(term?: string) {\n    if (this.routeParams?.search &&  term !== this.routeParams.search) {\n      this.searchState.deactivateCustomFilterTermStrategy();\n  }\n\n    this.searchState.setSearchTerm(term);\n    const termWithoutHashtag = term.replace(/(#[^\\s]*)/g, '').trim();\n    if (termWithoutHashtag.length < 2) {\n      this.onClearSearch();\n      return;\n    }\n    this.onBeforeSearch();\n  }\n\n  onSearch(event: { research: Research; results: SearchResult[] }) {\n    const results = event.results;\n\n    const isReverseSearch = !sourceCanSearch(event.research.source);\n\n    let enabledSources;\n    if (isReverseSearch) {\n      enabledSources = this.searchSourceService\n        .getEnabledSources()\n        .filter(sourceCanReverseSearch);\n    } else {\n      enabledSources = this.searchSourceService\n        .getEnabledSources()\n        .filter(sourceCanSearch);\n    }\n\n    const newResults = this.searchStore.entities$.value\n      .filter(\n        (result: SearchResult) =>\n          result.source !== event.research.source &&\n          enabledSources.includes(result.source)\n      )\n      .concat(results);\n    this.searchStore.updateMany(newResults);\n  }\n\n  onSearchResultsGeometryStatusChange(value) {\n    this.searchState.setSearchResultsGeometryStatus(value);\n  }\n\n  onSearchSettingsChange() {\n    this.onSettingsChange$.next(true);\n  }\n\n  private closeSidenav() {\n    this.sidenavOpened = false;\n    this.map.viewController.padding[3] = 0;\n  }\n\n  private openSidenav() {\n    this.sidenavOpened = true;\n    this.map.viewController.padding[3] = this.isMobile() ? 0 : 400;\n  }\n\n  private toggleSidenav() {\n    this.sidenavOpened ? this.closeSidenav() : this.openSidenav();\n  }\n\n  public toolChanged(tool: Tool) {\n    if (tool && tool.name === 'searchResults') {\n      this.searchBar.nativeElement.getElementsByTagName('input')[0].focus();\n    }\n  }\n\n  private onChangeContext(context: DetailedContext) {\n    this.cancelOngoingAddLayer();\n    if (context === undefined) {\n      return;\n    }\n\n    this.route.queryParams.pipe(debounceTime(250)).subscribe((qParams) => {\n      if (!qParams['context'] || qParams['context'] === context.uri) {\n        this.readLayersQueryParams(qParams);\n      }\n    });\n\n    if (this.contextLoaded) {\n      const contextManager = this.toolbox.getTool('contextManager');\n      const contextManagerOptions = contextManager\n        ? contextManager.options\n        : {};\n      let toolToOpen = contextManagerOptions.toolToOpenOnContextChange;\n\n      if (!toolToOpen) {\n        const toolOrderToOpen = ['mapTools', 'map', 'mapDetails', 'mapLegend'];\n        for (const toolName of toolOrderToOpen) {\n          if (this.toolbox.getTool(toolName)) {\n            toolToOpen = toolName;\n            break;\n          }\n        }\n      }\n\n      if (toolToOpen) {\n        this.toolbox.activateTool(toolToOpen);\n      }\n    }\n\n    this.contextLoaded = true;\n  }\n\n  private onBeforeSearch() {\n    if (\n      !this.toolbox.activeTool$.value ||\n      this.toolbox.activeTool$.value.name !== 'searchResults'\n    ) {\n      this.toolbox.activateTool('searchResults');\n    }\n    this.openSidenav();\n  }\n\n  toastOpenedChange(opened: boolean) {\n    this.map.viewController.padding[2] = opened ? 280 : 0;\n    this.handleExpansionAndToastOnMobile();\n    this.toastPanelOpened = opened;\n  }\n\n  private handleExpansionAndToastOnMobile() {\n    if (\n      this.isMobile() &&\n      this.hasExpansionPanel &&\n      this.expansionPanelExpanded &&\n      this.toastPanelOpened\n    ) {\n      this.expansionPanelExpanded = false;\n    }\n  }\n\n  public onClearSearch() {\n    this.map.searchResultsOverlay.clear();\n    this.searchStore.clear();\n    this.searchState.setSelectedResult(undefined);\n    this.searchState.deactivateCustomFilterTermStrategy();\n  }\n\n  private getQuerySearchSource(): SearchSource {\n    return this.searchSourceService\n      .getSources()\n      .find(\n        (searchSource: SearchSource) =>\n          searchSource instanceof QuerySearchSource\n      );\n  }\n\n  onContextMenuOpen(event: { x: number; y: number }) {\n    this.contextMenuCoord = this.getClickCoordinate(event);\n  }\n\n  private getClickCoordinate(event: { x: number; y: number }) {\n    const contextmenuPoint = event;\n    const boundingMapBrowser = this.mapBrowser.nativeElement.getBoundingClientRect();\n    contextmenuPoint.y =\n      contextmenuPoint.y -\n      boundingMapBrowser.top +\n      (window.scrollY || window.pageYOffset);\n    contextmenuPoint.x =\n      contextmenuPoint.x -\n      boundingMapBrowser.left +\n      (window.scrollX || window.pageXOffset);\n    const pixel = [contextmenuPoint.x, contextmenuPoint.y];\n\n    const coord = this.map.ol.getCoordinateFromPixel(pixel);\n    const proj = this.map.projection;\n    return olProj.transform(coord, proj, 'EPSG:4326');\n  }\n\n  private openGoogleMaps(coord: [number, number]) {\n    window.open(GoogleLinks.getGoogleMapsCoordLink(coord[0], coord[1]));\n  }\n\n  private openGoogleStreetView(coord: [number, number]) {\n    window.open(GoogleLinks.getGoogleStreetViewLink(coord[0], coord[1]));\n  }\n\n  searchCoordinate(coord: [number, number]) {\n    this.searchBarTerm = coord.map((c) => c.toFixed(6)).join(', ');\n  }\n\n  updateMapBrowserClass() {\n    const header = this.queryState.store.entities$.value.length > 0;\n    if (this.hasExpansionPanel && this.workspaceState.workspaceEnabled$.value) {\n      this.mapBrowser.nativeElement.classList.add('has-expansion-panel');\n    } else {\n      this.mapBrowser.nativeElement.classList.remove('has-expansion-panel');\n    }\n\n    if (this.hasExpansionPanel && this.expansionPanelExpanded) {\n      if (this.workspaceMaximize$.value) {\n        this.mapBrowser.nativeElement.classList.add('expansion-offset-maximized');\n        this.mapBrowser.nativeElement.classList.remove('expansion-offset');\n      } else {\n        this.mapBrowser.nativeElement.classList.add('expansion-offset');\n        this.mapBrowser.nativeElement.classList.remove('expansion-offset-maximized');\n      }\n    } else {\n      if (this.workspaceMaximize$.value) {\n        this.mapBrowser.nativeElement.classList.remove('expansion-offset-maximized');\n      } else {\n        this.mapBrowser.nativeElement.classList.remove('expansion-offset');\n      }\n    }\n\n    if (this.sidenavOpened) {\n      this.mapBrowser.nativeElement.classList.add('sidenav-offset');\n    } else {\n      this.mapBrowser.nativeElement.classList.remove('sidenav-offset');\n    }\n\n    if (this.sidenavOpened && !this.isMobile()) {\n      this.mapBrowser.nativeElement.classList.add('sidenav-offset-baselayers');\n    } else {\n      this.mapBrowser.nativeElement.classList.remove(\n        'sidenav-offset-baselayers'\n      );\n    }\n\n    if (!this.toastPanelOpened && header && !this.expansionPanelExpanded) {\n      this.mapBrowser.nativeElement.classList.add('toast-offset-scale-line');\n    } else {\n      this.mapBrowser.nativeElement.classList.remove('toast-offset-scale-line');\n    }\n\n    if (\n      !this.toastPanelOpened &&\n      header &&\n      (this.isMobile() || this.isTablet() || this.sidenavOpened) &&\n      !this.expansionPanelExpanded\n    ) {\n      this.mapBrowser.nativeElement.classList.add('toast-offset-attribution');\n    } else {\n      this.mapBrowser.nativeElement.classList.remove(\n        'toast-offset-attribution'\n      );\n    }\n  }\n\n  getToastPanelExtent() {\n    if (!this.sidenavOpened) {\n      if (this.toastPanelHtmlDisplay && this.mediaService.isDesktop()) {\n        return 'htmlDisplay';\n      }\n      if (this.fullExtent) {\n        return 'fullStandard';\n      } else {\n        return 'standard';\n      }\n    } else if (this.sidenavOpened) {\n      if (this.toastPanelHtmlDisplay && this.mediaService.isDesktop()) {\n        return 'htmlDisplayOffsetX';\n      }\n      if (this.fullExtent) {\n        return 'fullOffsetX';\n      } else {\n        return 'standardOffsetX';\n      }\n    }\n  }\n\n  onPointerSummaryStatusChange(value) {\n    this.storageService.set('searchPointerSummaryEnabled', value);\n    this.igoSearchPointerSummaryEnabled = value;\n  }\n\n  getExpansionPanelStatus() {\n    if (this.sidenavOpened === false) {\n      if (this.expansionPanelExpanded === true) {\n        return 'full';\n      }\n      return 'notTriggered';\n    }\n    if (this.sidenavOpened === true && this.isMobile() === false) {\n      if (this.expansionPanelExpanded === true) {\n        return 'reduced';\n      }\n      return 'reducedNotTriggered';\n    }\n    if (this.sidenavOpened === true && this.isMobile() === true) {\n      if (this.expansionPanelExpanded === true) {\n        return 'mobile';\n      } else {\n        return 'notVisible';\n      }\n    }\n  }\n\n  getToastPanelOffsetY() {\n    let status = 'noExpansion';\n    if (this.expansionPanelExpanded) {\n      if (this.workspaceMaximize$.value) {\n        if (this.toastPanelOpened) {\n          status = 'expansionMaximizedAndToastOpened';\n        } else {\n          status = 'expansionMaximizedAndToastClosed';\n        }\n      } else {\n        if (this.toastPanelOpened) {\n          status = 'expansionAndToastOpened';\n        } else {\n          status = 'expansionAndToastClosed';\n        }\n      }\n    } else {\n      status = 'noExpansion';\n    }\n    return status;\n  }\n\n  getToastPanelStatus() {\n    if (this.isMobile() === true && this.toastPanelOpened === false) {\n      if (this.sidenavOpened === false) {\n        if (this.expansionPanelExpanded === false) {\n          if (this.queryState.store.entities$.value.length > 0) {\n            return 'low';\n          }\n        }\n      }\n    }\n  }\n  getControlsOffsetY() {\n    return this.expansionPanelExpanded ? this.workspaceMaximize$.value ? 'firstRowFromBottom-expanded-maximized' : 'firstRowFromBottom-expanded' : 'firstRowFromBottom';\n  }\n\n  getBaselayersSwitcherStatus() {\n    let status;\n    if (this.isMobile()) {\n\n      if (this.workspaceState.workspaceEnabled$.value) {\n        if (this.expansionPanelExpanded === false) {\n          if (this.queryState.store.entities$.value.length === 0) {\n            status = 'secondRowFromBottom';\n           } else {\n            status =  'thirdRowFromBottom';\n           }\n        } else {\n          if (this.queryState.store.entities$.value.length === 0) {\n            status = 'firstRowFromBottom-expanded';\n           } else {\n            status =  'secondRowFromBottom-expanded';\n           }\n        }\n\n      } else {\n        if (this.queryState.store.entities$.value.length === 0) {\n          status =  'firstRowFromBottom';\n         } else {\n          status =  'secondRowFromBottom';\n         }\n      }\n    } else {\n      if (this.workspaceState.workspaceEnabled$.value) {\n        if (this.expansionPanelExpanded) {\n          if (this.workspaceMaximize$.value) {\n            status = 'firstRowFromBottom-expanded-maximized';\n          } else {\n            status = 'firstRowFromBottom-expanded';\n          }\n        } else {\n          status = 'secondRowFromBottom';\n        }\n      } else {\n        status = 'firstRowFromBottom';\n      }\n    }\n    return status;\n  }\n\n  private readQueryParams() {\n    this.route.queryParams.subscribe((params) => {\n      this.routeParams = params;\n      this.readToolParams();\n      this.readSearchParams();\n      this.readFocusFirst();\n    });\n  }\n\n  private computeFocusFirst() {\n    setTimeout(() => {\n      const resultItem: any = document\n        .getElementsByTagName('igo-search-results-item')\n        .item(0);\n      if (resultItem) {\n        resultItem.click();\n      }\n    }, 1);\n  }\n\n  private readFocusFirst() {\n    if (this.routeParams['sf'] === '1' && this.termDefinedInUrl) {\n      const entities$$ = this.searchStore.stateView.all$()\n        .pipe(\n          skipWhile((entities) => entities.length === 0),\n          debounceTime(500),\n          take(1)\n        )\n        .subscribe((entities) => {\n          entities$$.unsubscribe();\n          if (entities.length && !this.termDefinedInUrlTriggered) {\n            this.computeFocusFirst();\n            this.termDefinedInUrlTriggered = true;\n          }\n        });\n    }\n  }\n\n  private readSearchParams() {\n    if (this.routeParams['search']) {\n      this.termDefinedInUrl = true;\n      if (this.routeParams['exactMatch'] === '1') {\n        this.searchState.activateCustomFilterTermStrategy();\n      }\n      if (this.routeParams['search'] && !this.routeParams['zoom'] && this.routeParams['sf'] !== '1') {\n        const entities$$ = this.searchStore.stateView.all$()\n        .pipe(\n          skipWhile((entities) => entities.length === 0),\n          debounceTime(500),\n          take(1)\n        )\n        .subscribe((entities) => {\n          entities$$.unsubscribe();\n          const searchResultsOlFeatures = entities\n            .filter(e => e.entity.meta.dataType === FEATURE)\n            .map((entity: EntityRecord<SearchResult>) =>\n              new olFormatGeoJSON().readFeature(entity.entity.data, {\n                dataProjection: entity.entity.data.projection,\n                featureProjection: this.map.projection\n              })\n            );\n            const totalExtent = computeOlFeaturesExtent(this.map, searchResultsOlFeatures);\n            this.map.viewController.zoomToExtent(totalExtent);\n        });\n      }\n      this.searchBarTerm = this.routeParams['search'];\n    }\n    if (this.routeParams['searchGeom'] === '1') {\n      this.searchState.searchResultsGeometryEnabled$.next(true);\n    }\n  }\n\n  private readToolParams() {\n    if (this.routeParams['tool']) {\n      this.toolbox.activateTool(this.routeParams['tool']);\n    }\n\n    if (this.routeParams['sidenav'] === '1') {\n      setTimeout(() => {\n        this.openSidenav();\n      }, 250);\n    }\n  }\n\n  private readLayersQueryParams(params: Params) {\n    this.readLayersQueryParamsByType(params, 'wms');\n    this.readLayersQueryParamsByType(params, 'wmts');\n    this.readLayersQueryParamsByType(params, 'arcgisrest');\n    this.readLayersQueryParamsByType(params, 'imagearcgisrest');\n    this.readLayersQueryParamsByType(params, 'tilearcgisrest');\n    this.readVectorQueryParams(params);\n  }\n\n  private readLayersQueryParamsByType(params: Params, type) {\n    let nameParamLayersKey;\n    let urlsKey;\n    switch (type) {\n      case 'wms':\n        if ((params['layers'] || params['wmsLayers']) && params['wmsUrl']) {\n          urlsKey = 'wmsUrl';\n          nameParamLayersKey = params['wmsLayers'] ? 'wmsLayers' : 'layers'; // for maintain compatibility\n        }\n        break;\n      case 'wmts':\n        if (params['wmtsLayers'] && params['wmtsUrl']) {\n          urlsKey = 'wmtsUrl';\n          nameParamLayersKey = 'wmtsLayers';\n        }\n        break;\n      case 'arcgisrest':\n        if (params['arcgisLayers'] && params['arcgisUrl']) {\n          urlsKey = 'arcgisUrl';\n          nameParamLayersKey = 'arcgisLayers';\n        }\n        break;\n      case 'imagearcgisrest':\n        if (params['iarcgisLayers'] && params['iarcgisUrl']) {\n          urlsKey = 'iarcgisUrl';\n          nameParamLayersKey = 'iarcgisLayers';\n        }\n        break;\n      case 'tilearcgisrest':\n        if (params['tarcgisLayers'] && params['tarcgisUrl']) {\n          urlsKey = 'tarcgisUrl';\n          nameParamLayersKey = 'tarcgisLayers';\n        }\n        break;\n    }\n    if (!nameParamLayersKey || !urlsKey) {\n      return;\n    }\n    const layersByService = params[nameParamLayersKey].split('),(');\n    const urls = params[urlsKey].split(',');\n\n    let cnt = 0;\n    urls.forEach((url) => {\n      const currentLayersByService = this.extractLayersByService(\n        layersByService[cnt]\n      );\n      currentLayersByService.forEach((layer) => {\n        const layerFromUrl = layer.split(':igoz');\n        const layerOptions = ObjectUtils.removeUndefined({\n          type,\n          url: url,\n          layer: layerFromUrl[0],\n          params: type === 'wms' ? { LAYERS: layerFromUrl[0] } : undefined\n        });\n        const id = generateIdFromSourceOptions(layerOptions);\n        const visibility = this.computeLayerVisibilityFromUrl(params, id);\n        this.addLayerFromURL(\n          url,\n          layerFromUrl[0],\n          type,\n          visibility,\n          layerFromUrl[1] ? parseInt(layerFromUrl[1], 10) : undefined\n        );\n      });\n      cnt += 1;\n    });\n  }\n\n  private readVectorQueryParams(params: Params) {\n    if (params['vector']) {\n      const url = params['vector'] as string;\n      const lastIndex = url.lastIndexOf('/');\n      const fileName = url.slice(lastIndex + 1, url.length);\n\n      this.http.get(`${url}`, { responseType: 'blob' }).subscribe((data) => {\n        const file = new File([data], fileName, {\n          type: data.type,\n          lastModified: Date.now()\n        });\n        this.importService.import(file).subscribe(\n          (features: Feature[]) => this.onFileImportSuccess(file, features),\n          (error: Error) => this.onFileImportError(file, error)\n        );\n      });\n    }\n  }\n\n  private onFileImportSuccess(file: File, features: Feature[]) {\n    handleFileImportSuccess(\n      file,\n      features,\n      this.map,\n      this.messageService,\n      this.languageService\n    );\n  }\n\n  private onFileImportError(file: File, error: Error) {\n    handleFileImportError(\n      file,\n      error,\n      this.messageService,\n      this.languageService\n    );\n  }\n\n  private extractLayersByService(layersByService: string): any[] {\n    let outLayersByService = layersByService;\n    outLayersByService = outLayersByService.startsWith('(')\n      ? outLayersByService.substr(1)\n      : outLayersByService;\n    outLayersByService = outLayersByService.endsWith(')')\n      ? outLayersByService.slice(0, -1)\n      : outLayersByService;\n    return outLayersByService.split(',');\n  }\n  private addLayerFromURL(\n    url: string,\n    name: string,\n    type: 'wms' | 'wmts' | 'arcgisrest'| 'imagearcgisrest' | 'tilearcgisrest',\n    visibility: boolean = true,\n    zIndex: number\n  ) {\n    if (!this.contextLoaded) {\n      return;\n    }\n    const commonSourceOptions = {\n      optionsFromCapabilities: true,\n      optionsFromApi: true,\n      crossOrigin: true,\n      type,\n      url\n    };\n    const arcgisClause = (type === 'arcgisrest' || type === 'imagearcgisrest' || type === 'tilearcgisrest');\n    let sourceOptions = {\n      version: type === 'wmts' ? '1.0.0' : undefined,\n      queryable: arcgisClause  ? true : false,\n      queryFormat: arcgisClause  ? 'esrijson' : undefined,\n      layer: name\n    };\n    if (type === 'wms') {\n      sourceOptions =  { params: {LAYERS: name}} as any;\n    }\n\n    sourceOptions = ObjectUtils.removeUndefined(Object.assign({}, sourceOptions, commonSourceOptions));\n\n    this.addedLayers$$.push(\n      this.layerService\n        .createAsyncLayer({\n          zIndex: zIndex,\n          visible: visibility,\n          sourceOptions\n        })\n        .subscribe((l) => {\n          this.map.addLayer(l);\n        })\n    );\n  }\n\n  private computeLayerVisibilityFromUrl(\n    params: Params,\n    currentLayerid: string\n  ): boolean {\n    const queryParams = params;\n    let visible = true;\n    if (!queryParams || !currentLayerid) {\n      return visible;\n    }\n    let visibleOnLayersParams = '';\n    let visibleOffLayersParams = '';\n    let visiblelayers: string[] = [];\n    let invisiblelayers: string[] = [];\n    if (queryParams['visiblelayers']) {\n      visibleOnLayersParams = queryParams['visiblelayers'];\n    }\n    if (queryParams['invisiblelayers']) {\n      visibleOffLayersParams = queryParams['invisiblelayers'];\n    }\n\n    /* This order is important because to control whichever\n     the order of * param. First whe open and close everything.*/\n    if (visibleOnLayersParams === '*') {\n      visible = true;\n    }\n    if (visibleOffLayersParams === '*') {\n      visible = false;\n    }\n\n    // After, managing named layer by id (context.json OR id from datasource)\n    visiblelayers = visibleOnLayersParams.split(',');\n    invisiblelayers = visibleOffLayersParams.split(',');\n    if (visiblelayers.indexOf(currentLayerid) > -1  || visiblelayers.indexOf(currentLayerid.toString()) > -1) {\n      visible = true;\n    }\n    if (invisiblelayers.indexOf(currentLayerid) > -1 || invisiblelayers.indexOf(currentLayerid.toString()) > -1) {\n      visible = false;\n    }\n    return visible;\n  }\n\n  private initWelcomeWindow(): void {\n    if (this.auth) {\n      this.authService.logged$.subscribe((logged) => {\n        if (logged) {\n          this.createWelcomeWindow();\n        }\n      });\n    } else {\n      this.createWelcomeWindow();\n    }\n  }\n\n  private createWelcomeWindow(): void {\n    if (this.welcomeWindowService.hasWelcomeWindow()) {\n      const welcomWindowConfig: MatDialogConfig = this.welcomeWindowService.getConfig();\n\n      const dialogRef = this.dialogWindow.open(\n        WelcomeWindowComponent,\n        welcomWindowConfig\n      );\n\n      dialogRef.afterClosed().subscribe((result) => {\n        this.welcomeWindowService.afterClosedWelcomeWindow();\n      });\n    }\n  }\n}\n","<igo-spinner igoSpinnerActivity></igo-spinner>\n<igo-message-center></igo-message-center>\n<igo-auth-form *ngIf=\"authConfig && authConfig.url\"></igo-auth-form>\n\n<app-portal igoStopDropPropagation></app-portal>\n","import './portal.variables.scss';\n\nimport {\n  trigger,\n  state,\n  style,\n  transition,\n  animate,\n  AnimationTriggerMetadata\n} from '@angular/animations';\n\nexport function expansionPanelAnimation(): AnimationTriggerMetadata[] {\n  return [\n    trigger('expansionPanelSize', [\n      state(\n        'full',\n        style({\n          left: '5px',\n          'max-width': '100%'\n        })\n      ),\n      state(\n        'notTriggered',\n        style({\n          left: '5px',\n          bottom: '5px',\n          'max-width': '100%'\n        })\n      ),\n      state(\n        'notVisible',\n        style({\n          display: 'none'\n        })\n      ),\n      state(\n        'mobile',\n        style({\n          left: 'calc(100% - 40px)',\n        })\n      ),\n      state(\n        'reduced',\n        style({\n          left: '405px',\n          'max-width': 'calc(100% - 405px)'\n        })\n      ),\n      state(\n        'reducedNotTriggered',\n        style({\n          left: '405px',\n          bottom: '5px',\n          'max-width': 'calc(100% - 405px)'\n        })\n      ),\n      transition('* => *', animate('100ms'))\n    ]),\n    trigger('toastOffsetY', [\n      state(\n        'true',\n        style({\n          bottom: '50px'\n        })\n      ),\n      state(\n        'false',\n        style({\n          bottom: '5px'\n        })\n      )\n    ])\n  ];\n}\n\nexport function toastPanelAnimation(): AnimationTriggerMetadata[] {\n  return [\n    trigger('toastPanelMobileSidenav', [\n      state(\n        'true',\n        style({\n          display: 'none'\n        })\n      ),\n      transition('* => void', animate('0ms')),\n      transition('* => *', animate('200ms'))\n    ]),\n    trigger('toastPanelOffsetX', [\n      state(\n        'fullStandard',\n        style({\n          left: '45%'\n        })\n      ),\n      state(\n        'standard',\n        style({\n          left: '50%'\n        })\n      ),\n      state(\n        'htmlDisplay',\n        style({\n          left: '40%'\n        })\n      ),\n      state(\n        'fullOffsetX',\n        style({\n          left: 'calc(45% + 202px)'\n        })\n      ),\n      state(\n        'standardOffsetX',\n        style({\n          left: 'calc(50% + 202px)'\n        })\n      ),\n      state(\n        'htmlDisplayOffsetX',\n        style({\n          left: 'calc(40% + 160px)'\n        })\n    ),\n      transition('fullStandard => fullOffsetX', animate('200ms')),\n      transition('fullOffsetX => fullStandard', animate('200ms')),\n      transition('standard => standardOffsetX', animate('200ms')),\n      transition('standardOffsetX => standard', animate('200ms')),\n      transition('htmlDisplay => htmlDisplayOffsetX', animate('200ms')),\n      transition('htmlDisplayOffsetX => htmlDisplay', animate('200ms')),\n      // transition('standard => htmlDisplay', animate('200ms')),\n      // transition('htmlDisplay => standard', animate('200ms')),\n    ]),\n    trigger('toastPanelOffsetY', [\n      state(\n        'noExpansion',\n        style({\n          bottom: '0'\n        })\n      ),\n      state(\n        'expansionAndToastOpened',\n        style({\n          bottom: '285px',\n          zIndex: '999'\n        })\n      ),\n      state(\n        'expansionAndToastClosed',\n        style({\n          bottom: '285px',\n          zIndex: '5'\n        })\n      ),\n      state(\n        'expansionMaximizedAndToastOpened',\n        style({\n          bottom: '500px', // workspace full size\n          zIndex: '999'\n        })\n      ),\n      state(\n        'expansionMaximizedAndToastClosed',\n        style({\n          bottom: '500px', // workspace full size\n          zIndex: '5'\n        })\n      ),\n    transition('noExpansion => noExpansion', animate('10ms')),\n    transition('expansionAndToastOpened => expansionAndToastOpened', animate('200ms')),\n    transition('expansionAndToastClosed => expansionAndToastClosed', animate('200ms')),\n    transition('expansionMaximizedAndToastOpened => expansionMaximizedAndToastOpened', animate('200ms')),\n    transition('expansionMaximizedAndToastClosed => expansionMaximizedAndToastClosed', animate('200ms')),\n       ])\n  ];\n}\n\nexport function controlsAnimations(): AnimationTriggerMetadata[] {\n  return [\n    trigger('controlsOffsetY', [\n      state('close', style({})),\n      state(\n        'firstRowFromBottom',\n        style({\n          bottom: '5px'\n        })\n      ),\n      state(\n        'firstRowFromBottom-expanded',\n        style({\n          bottom: '285px'\n        })\n      ),\n      state(\n        'firstRowFromBottom-expanded-maximized',\n        style({\n          bottom: '500px'\n        })\n      ),\n      state(\n        'secondRowFromBottom',\n        style({\n          bottom: '47px'\n        })\n      ),\n      state(\n        'thirdRowFromBottom',\n        style({\n          bottom: '104px'\n        })\n      ),\n      state(\n        '',\n        style({\n          bottom: 'calc(285px)'\n        })\n      ),\n      state(\n        'secondRowFromBottom-expanded',\n        style({\n          bottom: 'calc(285px + 52px)'\n        })\n      ),\n      state(\n        'thirdRowFromBottom-expanded',\n        style({\n          bottom: 'calc(285px + 104px)'\n        })\n      ),\n      transition('* => *', animate('200ms'))\n    ]),\n    trigger('mobileOffsetY', [\n      state(\n        'low',\n        style({\n          bottom: '50px'\n        })\n      ),\n      transition('* => *', animate('200ms'))\n    ])\n  ];\n}\n\nexport function controlSlideX(): AnimationTriggerMetadata {\n  return trigger('controlStateX', [\n    state(\n      'left',\n      style({\n        left: '60px'\n      })\n    ),\n    state(\n      'right',\n      style({\n        left: '465px'\n      })\n    ),\n    transition('* => *', animate('200ms'))\n  ]);\n}\n\nexport function controlSlideY(): AnimationTriggerMetadata {\n  return trigger('controlStateY', [\n    state('close', style({})),\n    state(\n      'firstRowFromBottom',\n      style({\n        bottom: '2px',\n        'margin-left': '0px'\n      })\n    ),\n    state(\n      'firstRowFromBottom-expanded',\n      style({\n        bottom: '285px',\n        'margin-left': '-55px'\n      })\n    ),\n    state(\n      'firstRowFromBottom-expanded-maximized',\n      style({\n        bottom: '500px', // workspace full size\n        'margin-left': '-55px'\n      })\n    ),\n    transition('* => *', animate('200ms'))\n  ]);\n}\n\nexport function mapSlideX(): AnimationTriggerMetadata {\n  return trigger('mapStateX', [\n    state(\n      'left',\n      style({\n        left: '0'\n      })\n    ),\n    state(\n      'right',\n      style({\n        left: '0'\n      })\n    ),\n    transition('* => *', animate('200ms'))\n  ]);\n}\nexport function mapSlideY(): AnimationTriggerMetadata {\n  return trigger('mapStateY', [\n    state(\n      '*',\n      style({\n        bottom: '0'\n      })\n    ),\n    transition('* => *', animate('200ms'))\n  ]);\n}\n","import { Component, Renderer2 } from '@angular/core';\nimport { Title, Meta } from '@angular/platform-browser';\nimport { zip } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport { userAgent } from '@igo2/utils';\nimport {\n  LanguageService,\n  ConfigService,\n  AnalyticsService,\n  MessageService\n} from '@igo2/core';\nimport { AuthOptions } from '@igo2/auth';\nimport { AnalyticsListenerService } from '@igo2/integration';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent {\n  public authConfig: AuthOptions;\n  private themeClass = 'blue-theme';\n\n  constructor(\n    protected languageService: LanguageService,\n    private configService: ConfigService,\n    private analyticsService: AnalyticsService,\n    private analyticsListenerService: AnalyticsListenerService,\n    private renderer: Renderer2,\n    private titleService: Title,\n    private metaService: Meta,\n    private messageService: MessageService\n  ) {\n    this.authConfig = this.configService.getConfig('auth');\n\n    this.readTitleConfig();\n    this.readThemeConfig();\n    this.readDescriptionConfig();\n\n    this.analyticsListenerService.listen();\n\n    this.detectOldBrowser();\n  }\n\n  private readTitleConfig() {\n    this.languageService.translate.get(this.configService.getConfig('title')).subscribe(title => {\n      if (title) {\n        this.titleService.setTitle(title);\n        this.metaService.addTag({ name: 'title', content: title });\n      }\n    });\n  }\n\n  private readThemeConfig() {\n    const theme = this.configService.getConfig('theme') || this.themeClass;\n    if (theme) {\n      this.renderer.addClass(document.body, theme);\n    }\n  }\n\n  private readDescriptionConfig() {\n    const description = this.configService.getConfig('description');\n    if (description) {\n      this.metaService.addTag({ name: 'description', content: description });\n    }\n  }\n\n  private detectOldBrowser() {\n    const oldBrowser = userAgent.satisfies({\n      ie: '<11',\n      chrome: '<64',\n      firefox: '<60'\n    });\n\n    if (oldBrowser) {\n      const translate = this.languageService.translate;\n      const title$ = translate.get('oldBrowser.title');\n      const message$ = translate.get('oldBrowser.message');\n      zip(title$, message$)\n        .pipe(\n          map(([title, message]) => ({\n            title,\n            message\n          }))\n        )\n        .subscribe((rep) =>\n          this.messageService.alert(rep.message, rep.title, {\n            timeOut: 15000\n          })\n        );\n    }\n  }\n}\n","import { BrowserModule, HammerModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\n\nimport {\n  provideConfigOptions,\n  IgoMessageModule,\n  IgoGestureModule,\n  RouteService\n} from '@igo2/core';\nimport { IgoSpinnerModule, IgoStopPropagationModule } from '@igo2/common';\nimport { IgoAuthModule } from '@igo2/auth';\nimport {\n  provideIChercheSearchSource,\n  provideIChercheReverseSearchSource,\n  provideNominatimSearchSource,\n  provideCoordinatesReverseSearchSource,\n  provideILayerSearchSource,\n  provideStoredQueriesSearchSource,\n  provideOsrmDirectionsSource,\n  provideOptionsApi,\n  provideCadastreSearchSource\n} from '@igo2/geo';\n\nimport { environment } from '../environments/environment';\nimport { PortalModule } from './pages';\nimport { AppComponent } from './app.component';\n\n@NgModule({\n  declarations: [AppComponent],\n  imports: [\n    BrowserModule,\n    BrowserAnimationsModule,\n    RouterModule.forRoot([]),\n    IgoAuthModule.forRoot(),\n    IgoGestureModule.forRoot(),\n    IgoMessageModule,\n    IgoSpinnerModule,\n    IgoStopPropagationModule,\n    PortalModule,\n    HammerModule\n  ],\n  providers: [\n    provideConfigOptions({\n      default: environment.igo,\n      path: './config/config.json'\n    }),\n    RouteService,\n    provideNominatimSearchSource(),\n    provideIChercheSearchSource(),\n    provideIChercheReverseSearchSource(),\n    provideCoordinatesReverseSearchSource(),\n    provideILayerSearchSource(),\n    provideStoredQueriesSearchSource(),\n    provideOsrmDirectionsSource(),\n    provideOptionsApi(),\n    provideCadastreSearchSource()\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule {}\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nimport 'hammerjs';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic()\n  .bootstrapModule(AppModule)\n  .catch(err => console.log(err));\n"]}