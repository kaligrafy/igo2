{"version":3,"mappings":"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CA,sBACA,sBACA,8BACA,kBACA,uBACA,yBACA,0BACA,uBACA,sBACA,8BACA,mBAIA,cACA,WACA,YAEA,cACA,cACA,8CACA,gCACA3H,EAEA,YAEAqC,kBACA,uBAEAA,YACAlG,YACAkG,kCCnCA,OACA,aACA,gBACA,aACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,mBACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,YACA,eACA,aACA,gBACA,mBACA,gBACA,mBACA,gBACA,aACA,gBACA,YACA,eACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,aACA,gBACA,aACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,cACA,iBACA,aACA,gBACA,aACA,gBACA,mBACA,gBACA,mBACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,mBACA,sBACA,mBACA,sBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,gBACA,mBACA,aACA,gBACA,aACA,gBACA,aACA,eACA,kBACA,gBACA,aACA,gBACA,WACA,cACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,mBACA,gBACA,YACA,eACA,YACA,eACA,YACA,eACA,aACA,gBACA,aACA,gBACA,mBACA,gBACA,aACA,gBACA,iBACA,oBACA,gBACA,mBACA,aACA,gBACA,aACA,gBACA,mBACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,kBACA,qBACA,gBACA,aACA,gBACA,aACA,gBACA,YACA,eACA,aACA,gBACA,aACA,gBACA,cACA,iBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,gBACA,mBACA,cACA,iBACA,aACA,gBACA,cACA,iBACA,cACA,mBACA,sBACA,iBACA,gBACA,mBACA,aACA,gBACA,aACA,gBACA,aACA,kBACA,qBACA,gBACA,aACA,gBACA,mBACA,sBACA,aACA,gBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,oBAIA,cACA,WACA,YAEA,cACA,cACA,8CACA,gCACArC,EAEA,YAEAqC,kBACA,uBAEAA,YACAlG,YACAkG","names":["x","O","v","de","production","igo","app","forceCoordsNA","catalog","sources","id","title","url","showLegend","depot","importExport","language","prefix","interactiveTour","tourInMobile","pathToConfigFile","searchSources","nominatim","available","storedqueries","icherche","searchUrl","order","params","limit","coordinatesreverse","showInPointerSummary","icherchereverse","enabled","ilayer","cadastre","projections","code","alias","def","extent","searchOverlayStyle","base","markerColor","markerOpacity","markerOutlineColor","fillColor","fillOpacity","strokeColor","strokeOpacity","strokeWidth","focus","selection","queryOverlayStyle","j","g","F","C","P","he","ye","Se","T","h","p","R","me","l","Z","D","E","z","I","K","k","ue","W","y","B","constructor","t","n","this","igoVersionDifferentFromStorage","isVersionDifferentFromStorage","setStorageConfig","nbVisit","Number","storageService","get","set","configService","getConfig","hasWelcomeWindow","remove","disableClose","autoFocus","maxWidth","afterClosedWelcomeWindow","showAgain","e","factory","ɵfac","Q","o","i","se","_","ngOnInit","computeHtml","closeWelcomeWindow","dialog","closeAll","Date","c","isNaN","getDate","console","log","r","m","getMonth","getFullYear","title$$","languageService","translate","pipe","ee","instant","description","version","releaseDate","subscribe","html$","next","setShowAgain","welcomeWindowService","ngOnDestroy","unsubscribe","selectors","N","_map","_opened","openedChange","emit","toolState","toolbox","activeTool$$","activeTool$","name","catalogState","catalogStore","all","_step","state","selected","title$","map","layers","_step2","options","active","toolChange","onPreviousButtonClick","activatePreviousTool","onUnselectButtonClick","deactivateTool","Y","ngAfterViewInit","context$$","contextService","context$","handleContextChange","context","media$$","mediaService","media$","mapOverlay","_step3","media","getMedia","includes","push","U","opened","withHeader","a","arguments","s","opacity","display","changeDetection","q","_expanded","expandedChange","expanded","onToggleClick","V","_backdropShown","maximized","onBackdropClick","backdropShown","b","fullExtent","_e","zoomAuto","setResizeWindowIcon","storageState","_store","store","entities$","unselectResult","_zoomAuto","zoomAuto$","_fullExtent","fullExtent$","fullExtentEvent","getClassPanel","isHtmlDisplay","resultSelected$","value","results","length","initialized","selectResult","onEscapeHandler","clear","onBackHandler","onZoomHandler","isResultSelected$","getValue","format","readFeature","data","dataProjection","projection","featureProjection","multiple$","monitorResultOutOfView","isSelectedResultOutOfView$$","ie","viewController","state$","H","isSelectedResultOutOfView$","hasFeatureEmphasisOnSelection","resultOrResolution$$","focusedResult$","ve","resolution$","buildResultEmphasis","storageChange$$","storageChange$","$","key","currentValue","actionStore","load","icon","tooltip","handler","availability","multiple","_step4","_iterator4","checkbox","checkCondition","isDesktop","clearFeatureEmphasis","getGeometry","getExtent","u","qe","geometry","Ve","abstractFocusedOrSelectedResult","meta","style","Object","assign","feature","queryState","queryOverlayStyleSelection","queryOverlayStyleFocus","setZIndex","queryResultsOverlay","addFeature","removeFeature","getTitle","focusResult","unfocusResult","focused","update","properties","target","setHtmlDisplay","_step5","removeFeatures","addFeatures","_step6","setFeatures","isMobile","handleKeyboardEvent","keyCode","previousResult","nextResult","indexOf","zoomTo","swipe","SWIPE_ACTION","RIGHT","LEFT","UP","DOWN","className","onTriggerAction","args","windowHtmlDisplayEvent","isHtmlAndDesktop","iconResizeWindows","resizeWindows","reduceWindow","enlargeWindows","oxw","workspaceState","X","f","S","ne","re","A","le","pe","ce","Tt","Mt","kt","Et","$t","Bt","At","jt","Ft","pageSize","pageSizeOptions","hasExpansionPanel","hasHomeExtentButton","hasGeolocateButton","showRotationButtonIfNoRotation","showMenuButton","showSearchBar","igoSearchPointerSummaryEnabled","mapState","sidenavOpened$","_toastPanelOpened","cdRef","detectChanges","isTablet","isLandscape","getOrientation","isPortrait","sidenavOpened","workspacePanelExpanded","expansionPanelExpanded","toastPanelForExpansionOpened","actionbarMode","searchState","searchResultsGeometryEnabled$","workspace","hasWidget","workspace$","window","IGO","searchTermSplitter$","termSplitter","initWelcomeWindow","authService","authenticate$","contextLoaded","contextState","onChangeContext","contextMenuStore","searchCoordinate","contextMenuCoord","openGoogleMaps","openGoogleStreetView","queryStore","count$","be","padding","toastPanelOpened","ol","once","readQueryParams","onSettingsChange$","setSearchSettingsChange","selectedResult$","closeSidenav","workspaceEnabled$","empty$","updateMapBrowserClass","workspaceMaximize$$","workspaceMaximize$","selectedWorkspace$","layer","paginatorOptions","activeWidget$$","activeWorkspaceWidget$","openToastPanelForExpansion","showToastPanelForExpansionToggle","closeToastPanelForExpansion","openSidenav$$","openSidenav$","openSidenav","sidenavMediaAndOrientation$$","orientation$","computeToastPanelOffsetX","setToastPanelHtmlDisplay","toastPanelHtmlDisplay","Promise","resolve","then","toastPanelOffsetX$","getToastPanelExtent","workspaceVisibility","inResolutionRange$","entityStore","visible","workspaceNotAvailableMessage","isEditionWorkspace","type","createFeatureProperties","rowsInMapExtentCheckCondition$","editFeature","sourceOptions","sourceFields","forEach","primary","paginatorChange","workspacePaginator","entitySortChange","workspaceEntitySortChange$","entitySelectChange","getQuerySearchSource","getLayerWksOptionTabQuery","added","getProperties","_featureStore","queryService","getAllowedFieldsAndAlias","getQueryTitle","find","sourceTitle","cancelOngoingAddLayer","addedLayers$$","onToggleSidenavClick","toggleSidenav","onDeactivateWorkspaceWidget","onMapQuery","features","getFeatureIsSameActiveWks","getWksActiveOpenInResolution","getLayerWksOptionMapQuery","filter","onSearchTermChange","routeParams","search","deactivateCustomFilterTermStrategy","setSearchTerm","replace","trim","onClearSearch","onBeforeSearch","onSearch","research","source","searchSourceService","getEnabledSources","searchStore","concat","updateMany","onSearchResultsGeometryStatusChange","setSearchResultsGeometryStatus","onSearchSettingsChange","toolChanged","searchBar","nativeElement","getElementsByTagName","computeHomeExtentValues","view","homeExtent","homeCenter","center","homeZoom","zoom","empty","softClear","route","queryParams","uri","readLayersQueryParams","getTool","toolToOpenOnContextChange","_i2","activateTool","toastOpenedChange","handleExpansionAndToastOnMobile","searchResultsOverlay","setSelectedResult","getSources","onContextMenuOpen","getClickCoordinate","mapBrowser","getBoundingClientRect","top","scrollY","pageYOffset","left","scrollX","pageXOffset","getCoordinateFromPixel","fe","open","searchBarTerm","toFixed","join","classList","add","onPointerSummaryStatusChange","getExpansionPanelStatus","getToastPanelOffsetY","getToastPanelStatus","getControlsOffsetY","getBaselayersSwitcherStatus","readToolParams","readSearchParams","readFocusFirst","computeZoomToExtent","zoomExtent","split","zoomToExtent","computeFocusFirst","setTimeout","document","item","click","sf","termDefinedInUrl","stateView","all$","ge","termDefinedInUrlTriggered","exactMatch","activateCustomFilterTermStrategy","entity","dataType","searchGeom","tool","matDialogRef$","te","sidenav","routing","routingOptions","parseInt","directionState","stopsStore","storeInitialized$","position","text","coordinates","debounceTime","routesFeatureStore","zoomToActiveRoute$","readLayersQueryParamsByType","readVectorQueryParams","getQueryParam","xe","fromString","wmsLayers","wmsUrl","wmtsLayers","wmtsUrl","arcgisLayers","arcgisUrl","iarcgisLayers","iarcgisUrl","tarcgisLayers","tarcgisUrl","extractLayersByService","ae","LAYERS","computeLayerVisibilityFromUrl","addLayerFromURL","vector","lastIndexOf","slice","http","responseType","File","lastModified","now","importService","onFileImportSuccess","onFileImportError","messageService","startsWith","substr","endsWith","optionsFromCapabilities","optionsFromApi","crossOrigin","queryable","queryFormat","VERSION","layerService","createAsyncLayer","zIndex","addLayer","visiblelayers","invisiblelayers","toString","auth","logged$","createWelcomeWindow","dialogWindow","afterClosed","refreshRelationsWorkspace","_step7","workspaceStore","workspaceId","tableTemplate","columns","editionWorkspaceService","getDomainValues","relation","table","domainValues","_loop","bottom","G","getTranslation","getLanguage","authConfig","readTitleConfig","readThemeConfig","readDescriptionConfig","analyticsListenerService","listen","detectOldBrowser","titleService","setTitle","metaService","addTag","content","themeClass","renderer","addClass","body","chrome","firefox","safari","Ce","_ref4","message","alert","timeOut","L","bootstrap","default","path","imports","w","M","oe","bootstrapModule"],"sources":["webpack:///$_lazy_route_resources|lazy|groupOptions:%20%7B%7D|namespace%20object","webpack:///src/environments/environment.github.ts","webpack:///src/app/pages/portal/map-overlay/map-overlay.module.ts","webpack:///src/app/pages/portal/expansion-panel/expansion-panel.module.ts","webpack:///src/app/pages/portal/toast-panel/toast-panel.module.ts","webpack:///src/app/pages/portal/sidenav/sidenav.module.ts","webpack:///src/app/pages/portal/toast-panel-for-expansion/toast-panel-for-expansion.module.ts","webpack:///src/app/pages/portal/welcome-window/welcome-window.module.ts","webpack:///src/app/pages/portal/portal.module.ts","webpack:///src/app/pages/portal/welcome-window/welcome-window.service.ts","webpack:///src/app/pages/portal/welcome-window/welcome-window.component.html","webpack:///src/app/pages/portal/welcome-window/welcome-window.component.ts","webpack:///src/app/pages/portal/sidenav/sidenav.component.html","webpack:///src/app/pages/portal/sidenav/sidenav.component.ts","webpack:///src/app/pages/portal/map-overlay/map-overlay.component.html","webpack:///src/app/pages/portal/map-overlay/map-overlay.component.ts","webpack:///src/app/pages/portal/toast-panel-for-expansion/toast-panel-for-expansion.component.ts","webpack:///src/app/pages/portal/expansion-panel/expansion-panel-header.component.html","webpack:///src/app/pages/portal/toast-panel-for-expansion/toast-panel-for-expansion.component.html","webpack:///src/app/pages/portal/toast-panel-for-expansion/toast-panel-for-expansion.animations.ts","webpack:///src/app/pages/portal/expansion-panel/expansion-panel-header.component.ts","webpack:///src/app/pages/portal/expansion-panel/expansion-panel.component.ts","webpack:///src/app/pages/portal/expansion-panel/expansion-panel.component.html","webpack:///src/app/pages/portal/expansion-panel/expansion-panel.animations.ts","webpack:///src/app/pages/portal/toast-panel/toast-panel.component.html","webpack:///src/app/pages/portal/toast-panel/toast-panel.component.ts","webpack:///src/app/pages/portal/portal.component.html","webpack:///src/app/pages/portal/portal.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/pages/portal/portal.animation.ts","webpack:///src/app/app.component.ts","webpack:///src/app/app.module.ts","webpack:///src/main.ts","webpack:///node_modules/@igo2/core/locale|sync|/^/.*/.json$","webpack:///node_modules/moment/locale|sync|/^/.*$"],"sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 98255;\nmodule.exports = webpackEmptyAsyncContext;","import { LanguageOptions } from '@igo2/core';\nimport {\n  SearchSourceOptions,\n  ImportExportServiceOptions,\n  CatalogServiceOptions,\n  Projection,\n  CommonVectorStyleOptions\n} from '@igo2/geo';\n\ninterface Environment {\n  production: boolean;\n  igo: {\n    app: {\n      forceCoordsNA: boolean;\n    };\n    catalog?: CatalogServiceOptions;\n    importExport?: ImportExportServiceOptions;\n    language?: LanguageOptions;\n    searchSources?: { [key: string]: SearchSourceOptions };\n    projections?: Projection[];\n    interactiveTour?: { tourInMobile: boolean; pathToConfigFile: string };\n    depot?: { url: string; trainingGuides?: string[]; };\n    queryOverlayStyle?: {\n      base?: CommonVectorStyleOptions,\n      selection?: CommonVectorStyleOptions,\n      focus?: CommonVectorStyleOptions\n    };\n    searchOverlayStyle?: {\n      base?: CommonVectorStyleOptions,\n      selection?: CommonVectorStyleOptions,\n      focus?: CommonVectorStyleOptions\n    };\n  };\n}\n\nexport const environment: Environment = {\n  production: true,\n  igo: {\n    app: {\n      forceCoordsNA: false\n    },\n    catalog: {\n      sources: [\n        {\n          id: 'Gououvert',\n          title: 'Gouvouvert',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi'\n        },\n        {\n          id: 'glace',\n          title: 'Carte de glace',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/radarsat.fcgi',\n          showLegend: true\n        }\n      ]\n    },\n    depot: {\n      url: '/apis/depot'\n    },\n    importExport: {\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/ogre'\n    },\n    language: {\n      prefix: './locale/'\n    },\n    interactiveTour: {\n      tourInMobile: true,\n      pathToConfigFile: './config/interactiveTour.json'\n    },\n    searchSources: {\n      nominatim: {\n        available: false\n      },\n      storedqueries: {\n        available: false\n      },\n      icherche: {\n        searchUrl: 'https://geoegl.msp.gouv.qc.ca/apis/icherche',\n        order: 2,\n        params: {\n          limit: '8'\n        }\n      },\n      coordinatesreverse: {\n        showInPointerSummary: true\n      },\n      icherchereverse: {\n        showInPointerSummary: true,\n        searchUrl: 'https://geoegl.msp.gouv.qc.ca/apis/terrapi',\n        order: 3,\n        enabled: true\n      },\n      ilayer: {\n        searchUrl: 'https://geoegl.msp.gouv.qc.ca/apis/icherche/layers',\n        order: 4,\n        params: {\n          limit: '5'\n        }\n      },\n      cadastre: {\n        enabled: false\n      }\n    },\n    projections: [\n      {\n        code: 'EPSG:32198',\n        alias: 'Quebec Lambert',\n        def:\n          '+proj=lcc +lat_1=60 +lat_2=46 +lat_0=44 +lon_0=-68.5 +x_0=0 +y_0=0 \\\n          +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs',\n        extent: [-799574, 45802, 891595.4, 1849567.5]\n      },\n      {\n        code: 'EPSG:3798',\n        alias: 'MTQ Lambert',\n        def:\n          '+proj=lcc +lat_1=50 +lat_2=46 +lat_0=44 +lon_0=-70 +x_0=800000 +y_0=0 \\\n          +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs',\n        extent: [31796.5834, 158846.2231, 1813323.4284, 2141241.0978]\n      }\n    ],\n    searchOverlayStyle: {\n      base: {\n        markerColor: '#5ed0fb', // marker fill\n        markerOpacity: 0.8, // marker opacity not applied if a rgba markerColor is provided\n        markerOutlineColor: '#a7e7ff', // marker contour\n        fillColor: '#5ed0fb', // poly\n        fillOpacity: 0.2, // poly fill opacity not applied if a rgba fillColor is provided\n        strokeColor: '#5ed0fb', // line and poly\n        strokeOpacity: 0.7, // line and poly not applied if a rgba strokeColor is provided\n        strokeWidth: 2 // line and poly\n      },\n      focus: {\n        markerColor: '#5ed0fb', // marker fill\n        markerOpacity: 1, // marker opacity not applied if a rgba markerColor is provided\n        markerOutlineColor: '#DFF7FF', // marker contour\n        fillColor: '#5ed0fb', // poly\n        fillOpacity: 0.3, // poly fill opacity not applied if a rgba fillColor is provided\n        strokeColor: '#DFF7FF', // line and poly\n        strokeOpacity: 1, // line and poly not applied if a rgba strokeColor is provided\n        strokeWidth: 2 // line and poly\n      },\n      selection: {\n        markerColor: '#00a1de', // marker fill\n        markerOpacity: 1, // marker opacity not applied if a rgba markerColor is provided\n        markerOutlineColor: '#ffffff', // marker contour\n        fillColor: '#00a1de', // poly\n        fillOpacity: 0.3, // poly fill opacity not applied if a rgba fillColor is provided\n        strokeColor: '#00A1DE', // line and poly\n        strokeOpacity: 1, // line and poly not applied if a rgba strokeColor is provided\n        strokeWidth: 2 // line and poly\n      }\n    },\n    queryOverlayStyle: {\n      base: {\n        markerColor: '#5ed0fb', // marker fill\n        markerOpacity: 0.8, // marker opacity not applied if a rgba markerColor is provided\n        markerOutlineColor: '#a7e7ff', // marker contour\n        fillColor: '#5ed0fb', // poly\n        fillOpacity: 0.2, // poly fill opacity not applied if a rgba fillColor is provided\n        strokeColor: '#5ed0fb', // line and poly\n        strokeOpacity: 0.7, // line and poly not applied if a rgba strokeColor is provided\n        strokeWidth: 2 // line and poly\n      },\n      focus: {\n        markerColor: '#5ed0fb', // marker fill\n        markerOpacity: 1, // marker opacity not applied if a rgba markerColor is provided\n        markerOutlineColor: '#DFF7FF', // marker contour\n        fillColor: '#5ed0fb', // poly\n        fillOpacity: 0.3, // poly fill opacity not applied if a rgba fillColor is provided\n        strokeColor: '#DFF7FF', // line and poly\n        strokeOpacity: 1, // line and poly not applied if a rgba strokeColor is provided\n        strokeWidth: 2 // line and poly\n      },\n      selection: {\n        markerColor: '#00a1de', // marker fill\n        markerOpacity: 1, // marker opacity not applied if a rgba markerColor is provided\n        markerOutlineColor: '#ffffff', // marker contour\n        fillColor: '#00a1de', // poly\n        fillOpacity: 0.3, // poly fill opacity not applied if a rgba fillColor is provided\n        strokeColor: '#00A1DE', // line and poly\n        strokeOpacity: 1, // line and poly not applied if a rgba strokeColor is provided\n        strokeWidth: 2 // line and poly\n      }\n    }\n  }\n};\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\n\nimport { MapOverlayComponent } from './map-overlay.component';\n\n@NgModule({\n  imports: [\n    CommonModule\n  ],\n  exports: [MapOverlayComponent],\n  declarations: [MapOverlayComponent]\n})\nexport class MapOverlayModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatListModule } from '@angular/material/list';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatSelectModule } from '@angular/material/select';\n\nimport { IgoLanguageModule } from '@igo2/core';\nimport { IgoBackdropModule } from '@igo2/common';\n\nimport { ExpansionPanelComponent } from './expansion-panel.component';\nimport { ExpansionPanelHeaderComponent } from './expansion-panel-header.component';\nimport { MatTooltipModule } from '@angular/material/tooltip';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    MatButtonModule,\n    MatIconModule,\n    MatMenuModule,\n    MatListModule,\n    MatSelectModule,\n    MatTooltipModule,\n    IgoLanguageModule,\n    IgoBackdropModule\n  ],\n  exports: [ExpansionPanelComponent],\n  declarations: [ExpansionPanelComponent, ExpansionPanelHeaderComponent]\n})\nexport class AppExpansionPanelModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatTooltipModule } from '@angular/material/tooltip';\n\nimport { IgoPanelModule, IgoStopPropagationModule, IgoActionModule } from '@igo2/common';\nimport { IgoLanguageModule } from '@igo2/core';\nimport { IgoFeatureModule, IgoSearchResultsModule } from '@igo2/geo';\n\nimport { ToastPanelComponent } from './toast-panel.component';\nimport { MatBadgeModule } from '@angular/material/badge';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    MatBadgeModule,\n    MatIconModule,\n    MatButtonModule,\n    MatTooltipModule,\n    MatMenuModule,\n    IgoLanguageModule,\n    IgoPanelModule,\n    IgoStopPropagationModule,\n    IgoActionModule,\n    IgoFeatureModule,\n    IgoSearchResultsModule\n  ],\n  exports: [ToastPanelComponent],\n  declarations: [ToastPanelComponent]\n})\nexport class AppToastPanelModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatSidenavModule } from '@angular/material/sidenav';\nimport { MatTooltipModule } from '@angular/material/tooltip';\n\nimport { IgoLanguageModule } from '@igo2/core';\nimport {\n  IgoPanelModule,\n  IgoFlexibleModule,\n  IgoToolModule,\n  IgoInteractiveTourModule,\n  IgoHomeButtonModule\n} from '@igo2/common';\nimport { IgoFeatureModule } from '@igo2/geo';\nimport { IgoContextManagerModule } from '@igo2/context';\n\nimport { SidenavComponent } from './sidenav.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    MatIconModule,\n    MatButtonModule,\n    MatSidenavModule,\n    MatTooltipModule,\n    IgoLanguageModule,\n    IgoPanelModule,\n    IgoFlexibleModule,\n    IgoContextManagerModule,\n    IgoToolModule,\n    IgoFeatureModule,\n    IgoInteractiveTourModule,\n    IgoHomeButtonModule\n  ],\n  exports: [SidenavComponent],\n  declarations: [SidenavComponent]\n})\nexport class AppSidenavModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\n\nimport { IgoPanelModule, IgoStopPropagationModule } from '@igo2/common';\nimport { IgoLanguageModule } from '@igo2/core';\n\nimport { ToastPanelForExpansionComponent } from './toast-panel-for-expansion.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    MatIconModule,\n    MatButtonModule,\n    IgoLanguageModule,\n    IgoPanelModule,\n    IgoStopPropagationModule\n  ],\n  exports: [ToastPanelForExpansionComponent],\n  declarations: [ToastPanelForExpansionComponent]\n})\nexport class AppToastPanelForExpansionModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { MatDialogModule } from '@angular/material/dialog';\n\nimport { WelcomeWindowComponent } from './welcome-window.component';\nimport { IgoLanguageModule } from '@igo2/core';\nimport { IgoInteractiveTourModule, IgoCustomHtmlModule } from '@igo2/common';\n\n@NgModule({\n  imports: [\n    IgoLanguageModule,\n    CommonModule,\n    FormsModule,\n    MatDialogModule,\n    IgoInteractiveTourModule,\n    IgoCustomHtmlModule,\n    MatButtonModule,\n    MatTooltipModule,\n    MatIconModule,\n    MatToolbarModule\n  ],\n  declarations: [WelcomeWindowComponent],\n  exports: [WelcomeWindowComponent]\n})\nexport class IgoWelcomeWindowModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatSidenavModule } from '@angular/material/sidenav';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { MatDialogModule } from '@angular/material/dialog';\n\nimport { IgoCoreModule } from '@igo2/core';\nimport {\n  IgoActionModule,\n  IgoWorkspaceModule,\n  IgoEntityModule,\n  IgoPanelModule,\n  IgoBackdropModule,\n  IgoFlexibleModule,\n  IgoContextMenuModule,\n  IgoToolModule,\n  IgoEntityTableModule,\n  IgoEntityTablePaginatorModule,\n  IgoInteractiveTourModule\n} from '@igo2/common';\n\nimport {\n  IgoGeoWorkspaceModule,\n  IgoFeatureModule,\n  IgoImportExportModule,\n  IgoMapModule,\n  IgoQueryModule,\n  IgoSearchModule\n} from '@igo2/geo';\nimport {\n  IgoContextManagerModule,\n  IgoContextMapButtonModule\n} from '@igo2/context';\n\nimport { IgoIntegrationModule } from '@igo2/integration';\n\nimport { MapOverlayModule } from './map-overlay/map-overlay.module';\nimport { AppExpansionPanelModule } from './expansion-panel/expansion-panel.module';\nimport { AppToastPanelModule } from './toast-panel/toast-panel.module';\nimport { AppSidenavModule } from './sidenav/sidenav.module';\n\nimport { PortalComponent } from './portal.component';\nimport { AppToastPanelForExpansionModule } from './toast-panel-for-expansion/toast-panel-for-expansion.module';\n\nimport { WelcomeWindowComponent } from './welcome-window/welcome-window.component';\nimport { IgoWelcomeWindowModule } from './welcome-window/welcome-window.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    MatTooltipModule,\n    MatButtonModule,\n    MatIconModule,\n    MatSidenavModule,\n    MatDialogModule,\n    IgoCoreModule,\n    IgoFeatureModule,\n    IgoImportExportModule,\n    IgoMapModule,\n    IgoQueryModule.forRoot(),\n    IgoSearchModule.forRoot(),\n    IgoActionModule,\n    IgoWorkspaceModule,\n    IgoEntityModule,\n    IgoGeoWorkspaceModule,\n    IgoPanelModule,\n    IgoToolModule,\n    IgoContextMenuModule,\n    IgoBackdropModule,\n    IgoFlexibleModule,\n    IgoIntegrationModule,\n    AppExpansionPanelModule,\n    AppToastPanelModule,\n    AppToastPanelForExpansionModule,\n    AppSidenavModule,\n    MapOverlayModule,\n    IgoContextManagerModule,\n    IgoContextMapButtonModule,\n    IgoEntityTableModule,\n    IgoEntityTablePaginatorModule,\n    IgoInteractiveTourModule,\n    IgoWelcomeWindowModule\n  ],\n  exports: [PortalComponent],\n  declarations: [PortalComponent],\n  entryComponents: [WelcomeWindowComponent]\n})\nexport class PortalModule {}\n","import { Injectable } from '@angular/core';\n\nimport { ConfigService, StorageService } from '@igo2/core';\nimport { MatDialogConfig } from '@angular/material/dialog';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class WelcomeWindowService {\n  nbVisit: number;\n  showAgain: boolean;\n  igoVersionDifferentFromStorage = false;\n\n  constructor(\n    private configService: ConfigService,\n    private storageService: StorageService\n  ) {\n    this.igoVersionDifferentFromStorage = this.isVersionDifferentFromStorage();\n    this.setStorageConfig();\n  }\n\n  setStorageConfig() {\n    this.nbVisit = Number(this.storageService.get('welcomeWindow_nbVisit'));\n    if (!this.nbVisit) {\n      this.nbVisit = 0;\n    }\n\n    this.storageService.set('welcomeWindow_nbVisit', (this.nbVisit += 1));\n    this.storageService.set(\n      'version',\n      this.configService.getConfig('version.lib')\n    );\n  }\n\n  isVersionDifferentFromStorage(): boolean {\n    if (\n      this.storageService.get('version') &&\n      this.storageService.get('version') !==\n        this.configService.getConfig('version.lib')\n    ) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  hasWelcomeWindow(): boolean {\n    if (\n      this.storageService.get('welcomeWindow_showAgain') === false ||\n      this.storageService.get('welcomeWindow_showAgain') === 'false'\n    ) {\n      if (\n        this.nbVisit >=\n        this.configService.getConfig('welcomeWindow.nbVisitToShowAgain')\n      ) {\n        this.storageService.set('welcomeWindow_nbVisit', 0);\n        this.storageService.remove('welcomeWindow_showAgain');\n        return true;\n      } else if (\n        this.configService.getConfig('welcomeWindow.showAgainOnNewIGOVersion')\n      ) {\n        if (this.igoVersionDifferentFromStorage) {\n          this.storageService.set('welcomeWindow_nbVisit', 0);\n          this.storageService.remove('welcomeWindow_showAgain');\n          return true;\n        }\n      }\n      return false;\n    }\n\n    if (typeof this.configService.getConfig('welcomeWindow.nbVisitToShow') !== 'undefined' ) {\n      if (this.nbVisit > this.configService.getConfig('welcomeWindow.nbVisitToShow') ) {\n        this.storageService.set('welcomeWindow_showAgain', false);\n        return false;\n      }\n    }\n\n    return this.configService.getConfig('welcomeWindow');\n  }\n\n  getConfig(): MatDialogConfig {\n    const dialogConfig = new MatDialogConfig();\n\n    dialogConfig.disableClose = true;\n    dialogConfig.autoFocus = true;\n    dialogConfig.maxWidth = '500px';\n\n    return dialogConfig;\n  }\n\n  afterClosedWelcomeWindow() {\n    this.storageService.set('welcomeWindow_showAgain', this.showAgain);\n  }\n}\n","<div class=\"welcome-window\"  *ngIf=\"html$ | async\">\n\n  <mat-toolbar color=\"primary\">\n    <h2>{{'welcomeWindow.title' | translate}}</h2>\n    <span class=\"spacer\"></span>\n\n    <label>\n      <input id=\"doNotShowCheck\" type=\"checkbox\" [(ngModel)]=\"showAgain\" (click)=\"setShowAgain()\">\n      {{'welcomeWindow.notShowCheck' | translate}}\n    </label>\n  </mat-toolbar>\n\n  <div mat-dialog-content class=\"text\">\n    <igo-custom-html class=\"mat-typography\"\n    [html]=\"html$ | async\">\n    </igo-custom-html>\n  </div>\n\n  <p></p>\n  <div class=\"button-container\">\n    <igo-interactive-tour\n      id=\"tour-button\"\n      styleButton = \"raised\"\n      [discoverTitleInLocale$]=\"discoverTitleInLocale$\"\n      (click)= \"closeWelcomeWindow()\">\n    </igo-interactive-tour>\n\n  <button mat-raised-button class=\"button-close\" color=\"primary\" mat-dialog-close>{{'welcomeWindow.closeButton' | translate}}</button>\n  </div>\n\n</div>\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { ConfigService, LanguageService } from '@igo2/core';\nimport { BehaviorSubject, Observable, of, Subscription } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { WelcomeWindowService } from './welcome-window.service';\n\n@Component({\n  selector: 'app-welcome-window',\n  templateUrl: './welcome-window.component.html',\n  styleUrls: ['./welcome-window.component.scss']\n})\nexport class WelcomeWindowComponent implements OnInit, OnDestroy {\n  // isVisible = true;\n  showAgain = false;\n  public discoverTitleInLocale$: Observable<string> =\n    of(this.configService.getConfig('welcomeWindow.discoverTitleInLocale') || this.configService.getConfig('title'));\n  private title$$: Subscription;\n  public html$: BehaviorSubject<string> = new BehaviorSubject(undefined);\n\n  constructor(\n    public dialog: MatDialog,\n    private welcomeWindowService: WelcomeWindowService,\n    private configService: ConfigService,\n    protected languageService: LanguageService\n  ) { }\n\n  ngOnInit(): void {\n    this.computeHtml();\n  }\n\n  closeWelcomeWindow() {\n    this.dialog.closeAll();\n  }\n\n  private computeHtml() {\n    let deltaDay = 0;\n    let isDateParsable = true;\n    let releaseDate = new Date(this.configService.getConfig('version.releaseDate'));\n\n    const releaseDateAppConfig = this.configService.getConfig('version.releaseDateApp');\n\n\n    if (releaseDateAppConfig) {\n      const releaseDateApp = new Date(releaseDateAppConfig);\n      if (isNaN(releaseDateApp.getDate())) {\n        console.log('The releaseDateApp config is not a valid date format');\n        isDateParsable = false;\n      } else {\n        deltaDay = 1;\n        releaseDate = releaseDateApp;\n      }\n    }\n\n    let releaseDateString = '';\n\n    if (isDateParsable) {\n      let day: any = releaseDate.getDate() + deltaDay;\n      if (day < 10) {\n        day = '0' + day;\n      }\n      let month: any = releaseDate.getMonth() + 1;\n      if (month < 10) {\n        month = '0' + month;\n      }\n      const year = releaseDate.getFullYear();\n      releaseDateString = `${year}-${month}-${day}`;\n    } else {\n      releaseDateString = releaseDateAppConfig;\n    }\n\n    this.title$$ = this.languageService.translate.get(this.configService.getConfig('title') || '')\n      .pipe(\n        map(title => {\n          return this.languageService.translate.instant('welcomeWindow.html', {\n            title,\n            description: this.configService.getConfig('description') || '',\n            version: this.configService.getConfig('version.app') || this.configService.getConfig('version.lib') || '',\n            releaseDate: releaseDateString || ''\n          });\n        })\n      ).subscribe((r) => this.html$.next(r));\n\n    return this.html$;\n\n  }\n\n  setShowAgain() {\n    this.welcomeWindowService.showAgain = this.showAgain;\n  }\n\n  ngOnDestroy(): void {\n    if (this.title$$) {\n      this.title$$.unsubscribe();\n    }\n  }\n}\n","<mat-sidenav\n  mode=\"side\"\n  [autoFocus]=\"false\"\n  [(opened)]=\"opened\">\n\n  <div class=\"app-sidenav-content\">\n\n      <div #content class=\"app-content\" [ngClass]=\"{toolActivated: toolbox.activeTool$ | async}\">\n\n        <igo-home-button\n          *ngIf=\"toolbox.activeTool$ | async\"\n          (unselectButton)=\"onUnselectButtonClick()\">\n        </igo-home-button>\n\n        <igo-panel [title]=\"title$ | async | translate\">\n          <button *ngIf=\"toolbox.activeTool$ | async\"\n            mat-icon-button\n            panelLeftButton\n            tooltip-position=\"below\"\n            matTooltipShowDelay=\"500\"\n            [matTooltip]=\"'igo.context.sidenav.goBack' | translate\"\n            (click)=\"onPreviousButtonClick()\">\n            <mat-icon svgIcon=\"arrow-left\"></mat-icon>\n          </button>\n\n          <igo-interactive-tour\n            panelRightButton\n            styleButton = 'icon'>\n          </igo-interactive-tour>\n\n          <!-- <button *ngIf=\"toolbox.activeTool$ | async\"\n            mat-icon-button\n            panelRightButton\n            tooltip-position=\"below\"\n            matTooltipShowDelay=\"500\"\n            [matTooltip]=\"'igo.context.sidenav.mainMenu' | translate\"\n            (click)=\"onUnselectButtonClick()\">\n            <mat-icon svgIcon=\"close\"></mat-icon>\n          </button> -->\n\n          <igo-toolbox\n            class=\"igo-toolbox\"\n            color=\"primary\"\n            [animate]=\"true\"\n            [toolbox]=\"toolbox\">\n          </igo-toolbox>\n\n        </igo-panel>\n    </div>\n  </div>\n</mat-sidenav>\n","import {\n  Component,\n  Input,\n  Output,\n  OnInit,\n  OnDestroy,\n  EventEmitter,\n  ChangeDetectionStrategy\n} from '@angular/core';\n\nimport { BehaviorSubject, Subscription } from 'rxjs';\n\nimport { Tool, Toolbox } from '@igo2/common';\nimport { IgoMap } from '@igo2/geo';\nimport { ToolState, CatalogState } from '@igo2/integration';\nimport { ConfigService } from '@igo2/core';\n\n@Component({\n  selector: 'app-sidenav',\n  templateUrl: './sidenav.component.html',\n  styleUrls: ['./sidenav.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class SidenavComponent implements OnInit, OnDestroy {\n  title$: BehaviorSubject<string> = new BehaviorSubject<string>(undefined);\n\n  private activeTool$$: Subscription;\n\n  @Input()\n  get map(): IgoMap {\n    return this._map;\n  }\n  set map(value: IgoMap) {\n    this._map = value;\n  }\n  private _map: IgoMap;\n\n  @Input()\n  get opened(): boolean {\n    return this._opened;\n  }\n  set opened(value: boolean) {\n    if (value === this._opened) {\n      return;\n    }\n\n    this._opened = value;\n    this.openedChange.emit(this._opened);\n  }\n  private _opened: boolean;\n\n  @Output() openedChange = new EventEmitter<boolean>();\n  @Output() toolChange = new EventEmitter<Tool>();\n\n  get toolbox(): Toolbox {\n    return this.toolState.toolbox;\n  }\n\n  constructor(\n    private toolState: ToolState,\n    private configService: ConfigService,\n    private catalogState: CatalogState) {}\n\n  ngOnInit() {\n    this.activeTool$$ = this.toolbox.activeTool$.subscribe((tool: Tool) => {\n      const sidenavTitle = this.configService.getConfig('sidenavTitle') || 'IGO';\n      if (tool) {\n        if (tool.name === 'catalogBrowser') {\n          for (const catalog of this.catalogState.catalogStore.all()) {\n            if (this.catalogState.catalogStore.state.get(catalog).selected === true) {\n              this.title$.next(catalog.title);\n            }\n          }\n        } else if (tool.name === 'activeTimeFilter' || tool.name === 'activeOgcFilter') {\n          for (const layer of this.map.layers) {\n            if (layer.options.active === true) {\n              this.title$.next(layer.title);\n            }\n          }\n        } else {\n          this.title$.next(tool.title);\n        }\n      } else {\n        this.title$.next(sidenavTitle);\n      }\n      this.toolChange.emit(tool);\n    });\n  }\n\n  ngOnDestroy() {\n    this.activeTool$$.unsubscribe();\n  }\n\n  onPreviousButtonClick() {\n    this.toolbox.activatePreviousTool();\n  }\n\n  onUnselectButtonClick() {\n    this.toolbox.deactivateTool();\n  }\n}\n","<ng-container *ngFor=\"let element of mapOverlay; let i = index\">\n  <div class=\"mapOverlayDefault\" [ngClass]=\"element.cssClass\"\n       [style.position]=\"element.fixed ? 'fixed' : 'absolute'\"\n       [style.marginLeft]=\"element.marginLeft\"\n       [style.marginRight]=\"element.marginRight\"\n       [style.marginTop]=\"element.marginTop\"\n       [style.marginBottom]=\"element.marginBottom\"\n       [style.fontSize]=\"element.fontSize\">\n    <a *ngIf=\"element.link; else templateNoLink\"\n        target=\"_blank\" [href]='element.link'>\n        {{ element.text }}\n        <ng-container *ngIf=\"element.imgSrc\">\n          <img [src]=\"element.imgSrc\"\n               [alt]=\"element.alt\"\n               [ngStyle]=\"{ 'width': element.imgSize }\">\n        </ng-container>\n    </a>\n\n\n  <ng-template #templateNoLink>\n    {{ element.text }}\n    <ng-container *ngIf=\"element.imgSrc\">\n      <img [src]=\"element.imgSrc\" [alt]=\"element.alt\" [ngStyle]=\"{ 'width': element.imgSize }\">\n    </ng-container>\n\n  </ng-template>\n  </div>\n</ng-container>\n","import { Component, AfterViewInit, OnDestroy } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { Context, ContextService } from '@igo2/context';\nimport { MediaService, ConfigService } from '@igo2/core';\nimport { MapOverlay } from './map-overlay.interface';\n\n@Component({\n  selector: 'app-map-overlay',\n  templateUrl: './map-overlay.component.html',\n  styleUrls: ['./map-overlay.component.scss']\n})\n\nexport class MapOverlayComponent implements AfterViewInit, OnDestroy {\n  public mapOverlay: MapOverlay[] = [];\n  private context$$: Subscription;\n  private media$$: Subscription;\n  private context: Context;\n\n  constructor(\n    private contextService: ContextService,\n    private mediaService: MediaService,\n    private configService: ConfigService\n  ) { }\n\n  ngAfterViewInit() {\n    this.context$$ = this.contextService.context$.subscribe(context => {\n        this.handleContextChange(context);\n        this.context = context;\n        }\n    );\n    this.media$$ = this.mediaService.media$.subscribe(media =>\n      this.handleContextChange(this.context)\n    );\n  }\n\n  ngOnDestroy() {\n    this.context$$.unsubscribe();\n    this.media$$.unsubscribe();\n  }\n\n  private handleContextChange(context: Context) {\n    let mapOverlay = [];\n    if (context !== undefined) {\n      this.mapOverlay = [];\n\n      if (context['mapOverlay']) {\n        mapOverlay = context['mapOverlay'];\n      } else if (this.configService.getConfig('mapOverlay')) {\n        mapOverlay = this.configService.getConfig('mapOverlay');\n      }\n      for (const overlay of mapOverlay) {\n\n        // If no media define use default to desktop, display only if current media is on context definition\n        if ((!overlay.media && this.mediaService.getMedia() === 'desktop') ||\n        (overlay.media && overlay.media.includes(this.mediaService.getMedia()))) {\n          this.mapOverlay.push(overlay);\n        }\n      }\n    }\n\n  }\n}\n","import {\n  Component,\n  Input,\n  Output,\n  EventEmitter,\n  HostBinding,\n  ChangeDetectionStrategy\n} from '@angular/core';\nimport { showContent } from './toast-panel-for-expansion.animations';\n\n\n@Component({\n  selector: 'app-toast-panel-for-expansion',\n  templateUrl: './toast-panel-for-expansion.component.html',\n  styleUrls: ['./toast-panel-for-expansion.component.scss'],\n  animations: [showContent()],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ToastPanelForExpansionComponent {\n\n  @Input()\n  set opened(value: boolean) {\n    if (value === this._opened) {\n      return;\n    }\n    this._opened = value;\n    this.openedChange.emit(this._opened);\n  }\n  get opened(): boolean { return this._opened; }\n  private _opened: boolean;\n\n  @Input() title: string;\n\n  @Input() withHeader: boolean;\n\n  @Output() openedChange = new EventEmitter<boolean>();\n\n  @HostBinding('class.toast-panel-for-expansion-opened')\n  get hasOpenedClass() {\n    return this.opened;\n  }\n\n  @HostBinding('style.visibility')\n  get displayStyle() {\n    return (this.withHeader || this.opened) ? 'visible' : 'hidden';\n  }\n\n  constructor() {}\n\n}\n","<div>\n  <div class=\"app-expansion-panel-trigger-container\">\n    <button mat-icon-button (click)=\"onToggleClick()\" \n    [matTooltip]=\"(!expanded ? 'workspace.open' : 'workspace.close') | translate\"\n    color=\"primary\">\n      <mat-icon *ngIf=\"!expanded\" svgIcon=\"launch\"></mat-icon>\n      <mat-icon *ngIf=\"expanded\" style=\"transform: rotate(180deg)\" svgIcon=\"launch\"></mat-icon>\n    </button>\n  </div>\n\n  <div class=\"app-expansion-panel-content\">\n    <ng-content></ng-content>\n  </div>\n</div>\n","<igo-panel [title]=\"title\" [withHeader]=\"withHeader\">\n\n  <div #content [@showContent]=\"opened\">\n    <ng-content></ng-content>\n  </div>\n</igo-panel>\n","import {\n  trigger,\n  state,\n  style,\n  transition,\n  animate,\n  AnimationTriggerMetadata\n} from '@angular/animations';\n\nexport function showContent(\n  duration = '50ms',\n  delay = '280ms',\n  easing = 'ease-in-out'\n): AnimationTriggerMetadata {\n  return trigger('showContent', [\n    state('true', style({\n      opacity: 1,\n      display: 'block'\n    })),\n    state('false', style({\n      opacity: 0,\n      display: 'none'\n    })),\n    transition('false => true', animate(`${duration} ${delay} ${easing}`)),\n    transition('true => false', animate('0ms'))\n  ]);\n}\n","import {\n  Component,\n  Input,\n  Output,\n  EventEmitter,\n  HostBinding,\n  ChangeDetectionStrategy\n} from '@angular/core';\n\n@Component({\n  selector: 'app-expansion-panel-header',\n  templateUrl: './expansion-panel-header.component.html',\n  styleUrls: ['./expansion-panel-header.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExpansionPanelHeaderComponent {\n  @Input()\n  get expanded(): boolean {\n    return this._expanded;\n  }\n  set expanded(value: boolean) {\n    if (value === this._expanded) {\n      return;\n    }\n\n    this._expanded = value;\n    this.expandedChange.emit(this._expanded);\n  }\n  private _expanded: boolean;\n\n  @Output() expandedChange = new EventEmitter<boolean>();\n\n  @HostBinding('class.app-expansion-panel-header-expanded')\n  get hasExpandedClass() {\n    return this.expanded;\n  }\n\n  constructor() {}\n\n  onToggleClick() {\n    this.expanded = !this.expanded;\n  }\n}\n","import {\n  Component,\n  Input,\n  Output,\n  EventEmitter,\n  HostBinding,\n  ChangeDetectionStrategy\n} from '@angular/core';\n\nimport { showContent } from './expansion-panel.animations';\n\n@Component({\n  selector: 'app-expansion-panel',\n  templateUrl: './expansion-panel.component.html',\n  styleUrls: ['./expansion-panel.component.scss'],\n  animations: [showContent()],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExpansionPanelComponent {\n  @Input()\n  get expanded(): boolean {\n    return this._expanded;\n  }\n  set expanded(value: boolean) {\n    if (value === this._expanded) {\n      return;\n    }\n\n    this._expanded = value;\n    this.expandedChange.emit(this._expanded);\n  }\n  private _expanded: boolean;\n\n  @Input() maximized: Boolean = false;\n\n  @Input()\n  get backdropShown(): boolean {\n    return this._backdropShown;\n  }\n  set backdropShown(value: boolean) {\n    this._backdropShown = value;\n  }\n  private _backdropShown: boolean;\n\n  @Output() expandedChange = new EventEmitter<boolean>();\n\n  @HostBinding('class.app-expansion-panel-expanded')\n  get hasExpandedClass() {\n    return this.expanded && !this.maximized;\n  }\n\n  @HostBinding('class.app-expansion-panel-expanded-maximized')\n  get hasExpandedFullClass() {\n    return this.expanded && this.maximized;\n  }\n\n  constructor() {}\n\n  onBackdropClick() {\n    this.expanded = false;\n    this.backdropShown = false;\n  }\n}\n","<div>\n\n  <div class=\"app-expansion-panel-container\">\n    <igo-backdrop\n      [shown]=\"backdropShown\"\n      (click)=\"onBackdropClick()\">\n    </igo-backdrop>\n\n    <app-expansion-panel-header [(expanded)]=\"expanded\">\n      <ng-content select=\"[expansionPanelHeader]\"></ng-content>\n    </app-expansion-panel-header>\n\n    <div\n      class=\"app-expansion-panel-content mat-elevation-z4\"\n      [@showContent]=\"expanded\">\n      <ng-content></ng-content>\n    </div>\n  </div>\n\n</div>\n","import {\n  trigger,\n  state,\n  style,\n  transition,\n  animate,\n  AnimationTriggerMetadata\n} from '@angular/animations';\n\nexport function showContent(\n  duration = '150ms',\n  delay = '300ms',\n  easing = 'ease-in-out'\n): AnimationTriggerMetadata {\n  return trigger('showContent', [\n    state(\n      'true',\n      style({\n        opacity: 1,\n        display: 'block'\n      })\n    ),\n    state(\n      'false',\n      style({\n        opacity: 0,\n        display: 'none'\n      })\n    ),\n    transition('false => true', animate(`${duration} ${delay} ${easing}`)),\n    transition('true => false', animate('0ms'))\n  ]);\n}\n","<ng-template #toast>\n  <igo-panel\n    *ngIf=\"store.entities$ | async\"\n    [ngClass] = \"getClassPanel()\"\n    [title]=\"resultSelected$.value ? getTitle(resultSelected$.value) : ('toastPanel.title' | translate )\"\n    (click)=\"onToggleClick($event)\"\n    tabindex=\"0\"\n    (keydown)=\"handleKeyboardEvent($event)\">\n\n    <igo-actionbar\n      id=\"igo-actionbar\"\n      panelLeftButton\n      [store]=\"actionStore\"\n      [withIcon]=\"true\"\n      [icon]=\"icon\"\n      [withTitle]=\"actionbarMode === 'overlay'\"\n      [horizontal]=\"true\"\n      [mode]=\"actionbarMode\">\n    </igo-actionbar>\n\n    <button\n      *ngIf=\"resultSelected$.value\"\n      mat-icon-button\n      igoStopPropagation\n      panelLeftButton\n      [matTooltip]=\"((isSelectedResultOutOfView$ | async) ? 'toastPanel.zoomOnFeatureTooltipOutOfView' : 'toastPanel.zoomOnFeatureTooltip') | translate\"\n      matTooltipShowDelay=\"500\"\n      (click)=\"zoomTo()\">\n      <mat-icon\n      [matBadge]=\"(isSelectedResultOutOfView$ | async) ? '!' : ''\"\n      matBadgeColor=\"accent\"\n      matBadgeSize=\"small\"\n      [matBadgeHidden]=\"(isSelectedResultOutOfView$ | async)!==true\"     \n      svgIcon=\"magnify-plus-outline\"></mat-icon>\n    </button>\n\n    <button\n      *ngIf=\"resultSelected$.value\"\n      [disabled]=\"results[0].meta.id === resultSelected$.value.meta.id\"\n      mat-icon-button\n      igoStopPropagation\n      panelLeftButton\n      [matTooltip]=\"'toastPanel.previousFeatureTooltip' | translate\"\n      matTooltipShowDelay=\"500\"\n      (click)=\"previousResult()\">\n      <mat-icon svgIcon=\"chevron-left\"></mat-icon>\n    </button>\n\n    <button\n      *ngIf=\"resultSelected$.value\"\n      [disabled]=\"results[results.length-1].meta.id === resultSelected$.value.meta.id\"\n      mat-icon-button\n      igoStopPropagation\n      panelRightButton\n      [matTooltip]=\"'toastPanel.nextFeatureTooltip' | translate\"\n      matTooltipShowDelay=\"500\"\n      (click)=\"nextResult()\">\n      <mat-icon svgIcon=\"chevron-right\"></mat-icon>\n    </button>\n\n    <button\n     *ngIf = \"isDesktop()\"\n      mat-icon-button\n      igoStopPropagation\n      panelRightButton\n      (click)=\"resizeWindows()\"\n      [matTooltip]=\"((this.fullExtent$ | async) ? 'toastPanel.standardExtentTooltip' : 'toastPanel.fullExtentTooltip') | translate\"\n      matTooltipShowDelay=\"500\">\n      <mat-icon svgIcon={{iconResizeWindows}}></mat-icon>\n    </button>\n    <button\n      mat-icon-button\n      igoStopPropagation\n      panelRightButton\n      (click)=\"clear()\">\n      <mat-icon svgIcon=\"close\"></mat-icon>\n    </button>\n\n    <div #content class=\"toast-content\">\n\n      <igo-feature-details\n        *ngIf=\"resultSelected$.value\"\n        [feature]=\"resultSelected$.value.data\"\n        (htmlDisplayEvent)=setHtmlDisplay($event)>\n      </igo-feature-details>\n\n      <igo-search-results\n        *ngIf=\"!resultSelected$.value\"\n        [map]=\"map\"\n        [store]=\"store\"\n        [showIcons]=\"true\"\n        [withZoomButton]=\"withZoomButton\"\n        (resultFocus)=\"focusResult($event)\"\n        (resultUnfocus)=\"unfocusResult($event, true)\"\n        (resultSelect)=\"selectResult($event)\">\n      </igo-search-results>\n    </div>\n  </igo-panel>\n</ng-template>\n\n<div *ngIf=\"isMobile(); else toast\"\nclass=\"swipe-fix\"\n(swipeleft)=\"swipe($event.type)\"\n(swiperight)=\"swipe($event.type)\"\n(swipeup)=\"swipe($event.type)\"\n(swipedown)=\"swipe($event.type)\">\n\n<ng-template [ngTemplateOutlet]=\"toast\"></ng-template>\n</div>\n","import {\n  Component,\n  Input,\n  Output,\n  EventEmitter,\n  HostBinding,\n  HostListener,\n  ChangeDetectionStrategy,\n  OnInit,\n  OnDestroy\n} from '@angular/core';\nimport { BehaviorSubject, Observable, combineLatest, Subscription } from 'rxjs';\nimport { debounceTime, map, skipWhile, tap } from 'rxjs/operators';\nimport olFormatGeoJSON from 'ol/format/GeoJSON';\nimport olFeature from 'ol/Feature';\nimport olPoint from 'ol/geom/Point';\n\nimport {\n  getEntityTitle,\n  EntityStore,\n  ActionStore,\n  Action,\n  ActionbarMode\n} from '@igo2/common';\nimport {\n  Feature,\n  SearchResult,\n  IgoMap,\n  FeatureMotion,\n  moveToOlFeatures,\n  featureToOl,\n  featuresAreTooDeepInView,\n  featureFromOl,\n  getCommonVectorStyle,\n  getCommonVectorSelectedStyle,\n  featuresAreOutOfView,\n  computeOlFeaturesExtent\n} from '@igo2/geo';\nimport {\n  Media,\n  MediaService,\n  LanguageService,\n  StorageService,\n  StorageScope,\n  StorageServiceEvent\n} from '@igo2/core';\nimport { QueryState, StorageState } from '@igo2/integration';\n\n@Component({\n  selector: 'app-toast-panel',\n  templateUrl: './toast-panel.component.html',\n  styleUrls: ['./toast-panel.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ToastPanelComponent implements OnInit, OnDestroy {\n  static SWIPE_ACTION = {\n    RIGHT: 'swiperight',\n    LEFT: 'swipeleft',\n    UP: 'swipeup',\n    DOWN: 'swipedown'\n  };\n\n  get storageService(): StorageService {\n    return this.storageState.storageService;\n  }\n\n  @Input()\n  get map(): IgoMap {\n    return this._map;\n  }\n  set map(value: IgoMap) {\n    this._map = value;\n  }\n  private _map: IgoMap;\n\n  @Input()\n  get store(): EntityStore<SearchResult<Feature>> {\n    return this._store;\n  }\n  set store(value: EntityStore<SearchResult<Feature>>) {\n    this._store = value;\n    this.store.entities$.subscribe((_entities) => {\n      this.unselectResult();\n    });\n  }\n  private _store: EntityStore<SearchResult<Feature>>;\n\n  @Input()\n  get opened(): boolean {\n    return this._opened;\n  }\n  set opened(value: boolean) {\n    if (value !== !this._opened) {\n      return;\n    }\n    this._opened = value;\n    this.storageService.set('toastOpened', value, StorageScope.SESSION);\n    this.openedChange.emit(value);\n  }\n  private _opened = true;\n\n  @Input() hasFeatureEmphasisOnSelection: Boolean = false;\n\n  get zoomAuto(): boolean {\n    return this._zoomAuto;\n  }\n  set zoomAuto(value) {\n    if (value !== !this._zoomAuto) {\n      return;\n    }\n    this._zoomAuto = value;\n    this.zoomAuto$.next(value);\n    this.storageService.set('zoomAuto', value);\n  }\n  private _zoomAuto = false;\n\n  // To allow the toast to use much larger extent on the map\n  get fullExtent(): boolean {\n    return this._fullExtent;\n  }\n  set fullExtent(value) {\n    if (value !== !this._fullExtent) {\n      return;\n    }\n    this._fullExtent = value;\n    this.fullExtent$.next(value);\n    this.fullExtentEvent.emit(value);\n    this.storageService.set('fullExtent', value);\n  }\n  private _fullExtent = false;\n\n  public fullExtent$: BehaviorSubject<boolean> = new BehaviorSubject(\n    this.fullExtent\n  );\n  public isHtmlDisplay = false;\n  public iconResizeWindows = '';\n\n  public icon = 'menu';\n\n  public actionStore = new ActionStore([]);\n  public actionbarMode = ActionbarMode.Overlay;\n\n  private multiple$ = new BehaviorSubject(false);\n  private isResultSelected$ = new BehaviorSubject(false);\n  public isSelectedResultOutOfView$ = new BehaviorSubject(false);\n  private isSelectedResultOutOfView$$: Subscription;\n  private storageChange$$: Subscription;\n  private initialized = true;\n\n  private format = new olFormatGeoJSON();\n\n  private resultOrResolution$$: Subscription;\n  private focusedResult$: BehaviorSubject<\n    SearchResult<Feature>\n  > = new BehaviorSubject(undefined);\n  private abstractFocusedOrSelectedResult: Feature;\n\n  public withZoomButton = true;\n  zoomAuto$: BehaviorSubject<boolean> = new BehaviorSubject(false);\n\n  @Output() openedChange = new EventEmitter<boolean>();\n\n  @Output() fullExtentEvent = new EventEmitter<boolean>();\n  @Output() windowHtmlDisplayEvent = new EventEmitter<boolean>();\n\n  resultSelected$ = new BehaviorSubject<SearchResult<Feature>>(undefined);\n\n  // @HostBinding('class.app-toast-panel-opened')\n  // get hasOpenedClass() {\n  //   return this.opened;\n  // }\n\n  // @HostBinding('class.app-full-toast-panel-collapsed')\n  // get hasFullCollapsedClass() {\n  //   return !this.opened && this.fullExtent;\n  // }\n  getClassPanel() {\n    return {\n      'app-toast-panel-opened' : this.opened && !this.fullExtent && !this.isHtmlDisplay,\n      'app-full-toast-panel-opened' :\n        this.opened && this.fullExtent &&\n        !this.isHtmlDisplay,\n\n      'app-toast-panel-html' :\n        this.opened &&\n        !this.fullExtent &&\n        this.resultSelected$.value &&\n        this.isHtmlDisplay,\n\n      'app-toast-panel-html-large' :\n        this.opened &&\n        this.fullExtent &&\n        this.resultSelected$.value &&\n        this.isHtmlDisplay,\n\n      'app-toast-panel-collapsed': !this.opened && !this.fullExtent && !this.isHtmlDisplay,\n      'app-full-toast-panel-collapsed' : !this.opened && this.fullExtent && !this.isHtmlDisplay,\n      'app-toast-panel-html-collapsed' : !this.opened && this.isHtmlDisplay\n    };\n  }\n\n\n  @HostBinding('style.visibility')\n  get displayStyle() {\n    if (this.results.length) {\n      if (this.results.length === 1 && this.initialized) {\n        this.selectResult(this.results[0]);\n      }\n      return 'visible';\n    }\n    return 'hidden';\n  }\n\n  // @HostBinding('class.app-full-toast-panel-opened')\n  // get hasFullOpenedClass() {\n  //   return this.opened && this.fullExtent;\n  // }\n\n  @HostListener('document:keydown.escape', ['$event']) onEscapeHandler(\n    event: KeyboardEvent\n  ) {\n    this.clear();\n  }\n\n  @HostListener('document:keydown.backspace', ['$event']) onBackHandler(\n    event: KeyboardEvent\n  ) {\n    this.unselectResult();\n  }\n\n  @HostListener('document:keydown.z', ['$event']) onZoomHandler(\n    event: KeyboardEvent\n  ) {\n    if (this.isResultSelected$.getValue() === true) {\n      const localOlFeature = this.format.readFeature(\n        this.resultSelected$.getValue().data,\n        {\n          dataProjection: this.resultSelected$.getValue().data.projection,\n          featureProjection: this.map.projection\n        }\n      );\n      moveToOlFeatures(this.map, [localOlFeature], FeatureMotion.Default);\n    }\n  }\n\n  get results(): SearchResult<Feature>[] {\n    // return this.store.view.filter((e) => e.meta.dataType === FEATURE).all();\n    return this.store.all();\n  }\n\n  get multiple(): Observable<boolean> {\n    this.results.length\n      ? this.multiple$.next(true)\n      : this.multiple$.next(false);\n    return this.multiple$;\n  }\n\n  constructor(\n    public mediaService: MediaService,\n    public languageService: LanguageService,\n    private storageState: StorageState,\n    private queryState: QueryState\n  ) {\n    this.opened = this.storageService.get('toastOpened') as boolean;\n    this.zoomAuto = this.storageService.get('zoomAuto') as boolean;\n    this.fullExtent = this.storageService.get('fullExtent') as boolean;\n    this.setResizeWindowIcon();\n  }\n\n  private monitorResultOutOfView() {\n    this.isSelectedResultOutOfView$$ = combineLatest([\n      this.map.viewController.state$,\n      this.resultSelected$\n    ])\n      .pipe(debounceTime(100))\n      .subscribe((bunch) => {\n        const selectedResult = bunch[1];\n        if (!selectedResult) {\n          this.isSelectedResultOutOfView$.next(false);\n          return;\n        }\n        const selectedOlFeature = featureToOl(selectedResult.data, this.map.projection);\n        const selectedOlFeatureExtent = computeOlFeaturesExtent(this.map, [selectedOlFeature]);\n        this.isSelectedResultOutOfView$.next(featuresAreOutOfView(this.map, selectedOlFeatureExtent));\n      });\n  }\n\n\n  ngOnInit() {\n    this.store.entities$.subscribe(() => {\n      this.initialized = true;\n    });\n    this.monitorResultOutOfView();\n\n    let latestResult;\n    let trigger;\n    if (this.hasFeatureEmphasisOnSelection) {\n      this.resultOrResolution$$ = combineLatest([\n        this.focusedResult$.pipe(\n          tap((res) => {\n            latestResult = res;\n            trigger = 'focused';\n          })\n        ),\n        this.resultSelected$.pipe(\n          tap((res) => {\n            latestResult = res;\n            trigger = 'selected';\n          })\n        ),\n        this.map.viewController.resolution$,\n        this.store.entities$\n      ]).subscribe(() => this.buildResultEmphasis(latestResult, trigger));\n    }\n\n    this.storageChange$$ = this.storageService.storageChange$\n      .pipe(skipWhile((storageChange: StorageServiceEvent) => storageChange.key !== 'zoomAuto'))\n      .subscribe((change) => {\n        this.zoomAuto = change.currentValue;\n      });\n\n    this.actionStore.load([\n      {\n        id: 'list',\n        title: this.languageService.translate.instant('toastPanel.backToList'),\n        icon: 'format-list-bulleted-square',\n        tooltip: this.languageService.translate.instant(\n          'toastPanel.listButton'\n        ),\n        display: () => {\n          return this.isResultSelected$;\n        },\n        handler: () => {\n          this.unselectResult();\n        }\n      },\n      {\n        id: 'zoomFeature',\n        title: this.languageService.translate.instant(\n          'toastPanel.zoomOnFeature'\n        ),\n        icon: 'magnify-plus-outline',\n        tooltip: this.languageService.translate.instant(\n          'toastPanel.zoomOnFeatureTooltip'\n        ),\n        display: () => {\n          return this.isResultSelected$;\n        },\n        handler: () => {\n          const localOlFeature = this.format.readFeature(\n            this.resultSelected$.getValue().data,\n            {\n              dataProjection: this.resultSelected$.getValue().data.projection,\n              featureProjection: this.map.projection\n            }\n          );\n          moveToOlFeatures(this.map, [localOlFeature], FeatureMotion.Zoom);\n        }\n      },\n      {\n        id: 'zoomResults',\n        title: this.languageService.translate.instant(\n          'toastPanel.zoomOnFeatures'\n        ),\n        tooltip: this.languageService.translate.instant(\n          'toastPanel.zoomOnFeaturesTooltip'\n        ),\n        icon: 'magnify-scan',\n        availability: () => {\n          return this.multiple;\n        },\n        handler: () => {\n          const olFeatures = [];\n          for (const result of this.store.all()) {\n            const localOlFeature = this.format.readFeature(result.data, {\n              dataProjection: result.data.projection,\n              featureProjection: this.map.projection\n            });\n            olFeatures.push(localOlFeature);\n          }\n          moveToOlFeatures(this.map, olFeatures, FeatureMotion.Zoom);\n        }\n      },\n      {\n        id: 'zoomAuto',\n        title: this.languageService.translate.instant('toastPanel.zoomAuto'),\n        tooltip: this.languageService.translate.instant(\n          'toastPanel.zoomAutoTooltip'\n        ),\n        checkbox: true,\n        checkCondition: this.zoomAuto$,\n        handler: () => {\n          this.zoomAuto = !this.zoomAuto;\n          if (this.zoomAuto && this.isResultSelected$.value === true) {\n            this.selectResult(this.resultSelected$.getValue());\n          }\n        }\n      },\n      {\n        id: 'fullExtent',\n        title: this.languageService.translate.instant('toastPanel.fullExtent'),\n        tooltip: this.languageService.translate.instant(\n          'toastPanel.fullExtentTooltip'\n        ),\n        icon: 'arrow-expand',\n        display: () => {\n          return this.fullExtent$.pipe(map((v) => !v && !this.isDesktop()));\n        },\n        handler: () => {\n          this.fullExtent = true;\n        }\n      },\n      {\n        id: 'standardExtent',\n        title: this.languageService.translate.instant(\n          'toastPanel.standardExtent'\n        ),\n        tooltip: this.languageService.translate.instant(\n          'toastPanel.standardExtentTooltip'\n        ),\n        icon: 'arrow-collapse',\n        display: () => {\n          return this.fullExtent$.pipe(map((v) => v && !this.isDesktop()));\n        },\n        handler: () => {\n          this.fullExtent = false;\n        }\n      }\n    ]);\n  }\n\n  ngOnDestroy(): void {\n    if (this.resultOrResolution$$) {\n      this.resultOrResolution$$.unsubscribe();\n    }\n    if (this.isSelectedResultOutOfView$$) {\n      this.isSelectedResultOutOfView$$.unsubscribe();\n    }\n    if (this.storageChange$$) {\n      this.storageChange$$.unsubscribe();\n    }\n  }\n\n  private buildResultEmphasis(\n    result: SearchResult<Feature>,\n    trigger: 'selected' | 'focused' | undefined\n  ) {\n    this.clearFeatureEmphasis();\n    if (!result || (trigger === 'selected' && this.zoomAuto)) {\n      return;\n    }\n    const myOlFeature = featureToOl(result.data, this.map.projection);\n    const olGeometry = myOlFeature.getGeometry();\n    if (featuresAreTooDeepInView(this.map, olGeometry.getExtent() as [number, number, number, number], 0.0025)) {\n      const extent = olGeometry.getExtent();\n      const x = extent[0] + (extent[2] - extent[0]) / 2;\n      const y = extent[1] + (extent[3] - extent[1]) / 2;\n      const feature1 = new olFeature({\n        name: 'abstractFocusedOrSelectedResult',\n        geometry: new olPoint([x, y])\n      });\n      this.abstractFocusedOrSelectedResult = featureFromOl(\n        feature1,\n        this.map.projection\n      );\n      this.abstractFocusedOrSelectedResult.meta.style =\n        getCommonVectorSelectedStyle(\n          Object.assign({},\n            { feature: this.abstractFocusedOrSelectedResult },\n            trigger === 'selected' ?\n              this.queryState.queryOverlayStyleSelection :\n              this.queryState.queryOverlayStyleFocus));\n      this.abstractFocusedOrSelectedResult.meta.style.setZIndex(2000);\n      this.map.queryResultsOverlay.addFeature(\n        this.abstractFocusedOrSelectedResult,\n        FeatureMotion.None\n      );\n    }\n  }\n\n  private clearFeatureEmphasis() {\n    if (this.abstractFocusedOrSelectedResult) {\n      this.map.queryResultsOverlay.removeFeature(this.abstractFocusedOrSelectedResult);\n      this.abstractFocusedOrSelectedResult = undefined;\n    }\n  }\n\n  getTitle(result: SearchResult) {\n    return getEntityTitle(result);\n  }\n\n  focusResult(result: SearchResult<Feature>) {\n    this.focusedResult$.next(result);\n    this.map.queryResultsOverlay.removeFeature(result.data);\n\n    result.data.meta.style = getCommonVectorSelectedStyle(\n      Object.assign({},\n        { feature: result.data },\n        this.queryState.queryOverlayStyleFocus));\n    result.data.meta.style.setZIndex(2000);\n    this.map.queryResultsOverlay.addFeature(result.data, FeatureMotion.None);\n  }\n\n  unfocusResult(result: SearchResult<Feature>, force?) {\n    this.focusedResult$.next(undefined);\n    if (!force && this.store.state.get(result).focused) {\n      return;\n    }\n    this.map.queryResultsOverlay.removeFeature(result.data);\n\n    result.data.meta.style = getCommonVectorStyle(\n      Object.assign({},\n        { feature: result.data },\n        this.queryState.queryOverlayStyle));\n    result.data.meta.style.setZIndex(undefined);\n    this.map.queryResultsOverlay.addFeature(result.data, FeatureMotion.None);\n  }\n\n  selectResult(result: SearchResult<Feature>) {\n    this.store.state.update(\n      result,\n      {\n        focused: true,\n        selected: true\n      },\n      true\n    );\n    this.resultSelected$.next(result);\n    if (result.data.properties && result.data.properties.target === 'iframe') {\n      this.setHtmlDisplay(true);\n    } else {\n      this.setHtmlDisplay(false);\n    }\n\n    const features = [];\n    for (const feature of this.store.all()) {\n      if (feature.meta.id === result.meta.id) {\n        feature.data.meta.style = getCommonVectorSelectedStyle(\n          Object.assign({}, { feature: feature.data },\n            this.queryState.queryOverlayStyleSelection));\n        feature.data.meta.style.setZIndex(2000);\n      } else {\n        feature.data.meta.style = getCommonVectorStyle(\n          Object.assign({},\n            { feature: feature.data },\n            this.queryState.queryOverlayStyle));\n      }\n      features.push(feature.data);\n    }\n    this.map.queryResultsOverlay.removeFeatures(features);\n    this.map.queryResultsOverlay.addFeatures(features, FeatureMotion.None);\n\n    if (this.zoomAuto) {\n      const localOlFeature = this.format.readFeature(\n        this.resultSelected$.getValue().data,\n        {\n          dataProjection: this.resultSelected$.getValue().data.projection,\n          featureProjection: this.map.projection\n        }\n      );\n      moveToOlFeatures(this.map, [localOlFeature], FeatureMotion.Default);\n    }\n\n    this.isResultSelected$.next(true);\n    this.initialized = false;\n  }\n\n  unselectResult() {\n    this.resultSelected$.next(undefined);\n    this.isResultSelected$.next(false);\n    this.setHtmlDisplay(false);\n    this.store.state.clear();\n\n    const features = [];\n    for (const feature of this.store.all()) {\n      feature.data.meta.style = getCommonVectorStyle(\n        Object.assign({},\n          { feature: feature.data },\n          this.queryState.queryOverlayStyle));\n      features.push(feature.data);\n    }\n    this.map.queryResultsOverlay.setFeatures(features, FeatureMotion.None, 'map');\n  }\n\n  clear() {\n    this.clearFeatureEmphasis();\n    this.map.queryResultsOverlay.clear();\n    this.store.clear();\n    this.unselectResult();\n    this.setHtmlDisplay(false);\n  }\n\n  isMobile(): boolean {\n    return this.mediaService.getMedia() === Media.Mobile;\n  }\n  isDesktop(): boolean {\n    return this.mediaService.isDesktop();\n  }\n\n  handleKeyboardEvent(event) {\n    if (event.keyCode === 37) {\n      this.previousResult();\n    } else if (event.keyCode === 39) {\n      this.nextResult();\n    }\n  }\n\n  previousResult() {\n    if (!this.resultSelected$.value) {\n      return;\n    }\n    let i = this.results.indexOf(this.resultSelected$.value);\n    const previousResult = this.results[--i];\n    if (previousResult) {\n      this.selectResult(previousResult);\n    }\n  }\n\n  nextResult() {\n    if (!this.resultSelected$.value) {\n      return;\n    }\n    let i = this.results.indexOf(this.resultSelected$.value);\n    const nextResult = this.results[++i];\n    if (nextResult) {\n      this.selectResult(nextResult);\n    }\n  }\n\n  zoomTo() {\n    const localOlFeature = this.format.readFeature(\n      this.resultSelected$.getValue().data,\n      {\n        dataProjection: this.resultSelected$.getValue().data.projection,\n        featureProjection: this.map.projection\n      }\n    );\n    moveToOlFeatures(this.map, [localOlFeature], FeatureMotion.Zoom);\n  }\n\n  swipe(action: string) {\n    if (action === ToastPanelComponent.SWIPE_ACTION.RIGHT) {\n      this.previousResult();\n    } else if (action === ToastPanelComponent.SWIPE_ACTION.LEFT) {\n      this.nextResult();\n    } else if (action === ToastPanelComponent.SWIPE_ACTION.UP) {\n      this.opened = true;\n    } else if (action === ToastPanelComponent.SWIPE_ACTION.DOWN) {\n      this.opened = false;\n    }\n  }\n\n  onToggleClick(e: MouseEvent) {\n    if ((e.target as any).className !== 'igo-panel-title') {\n      return;\n    }\n    this.opened = !this.opened;\n  }\n\n  /**\n   * Invoke the action handler\n   * @internal\n   */\n  onTriggerAction(action: Action) {\n    const args = action.args || [];\n    action.handler(...args);\n  }\n\n  setHtmlDisplay(value: boolean) {\n    if (value === true) {\n      this.isHtmlDisplay = true;\n      this.windowHtmlDisplayEvent.emit(true);\n    } else {\n      this.isHtmlDisplay = false;\n      this.windowHtmlDisplayEvent.emit(false);\n    }\n  }\n\n  isHtmlAndDesktop(): boolean {\n    if (this.isHtmlDisplay && this.isDesktop()) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  setResizeWindowIcon() {\n    if (this.fullExtent) {\n      this.iconResizeWindows = 'arrow-collapse';\n      // this.iconResizeWindows = 'vector-arrange-below';\n    } else {\n      this.iconResizeWindows = 'arrow-expand';\n      // this.iconResizeWindows = 'crop-square';\n    }\n  }\n\n  resizeWindows() {\n    this.storageService.set('fullExtent', !this.fullExtent);\n    if (this.fullExtent) {\n        this.reduceWindow();\n    } else {\n        this.enlargeWindows();\n      }\n  }\n\n  reduceWindow() {\n    this.fullExtent = false;\n    this.setResizeWindowIcon();\n  }\n\n  enlargeWindows() {\n    this.fullExtent = true;\n    this.setResizeWindowIcon();\n  }\n\n}\n","<mat-sidenav-container class=\"app-main-container\">\n  <mat-sidenav-content>\n\n    <igo-backdrop\n      [shown]=\"backdropShown\"\n      (click)=\"onBackdropClick()\">\n    </igo-backdrop>\n\n    <igo-menu-button *ngIf=\"showMenuButton\"\n      [sidenavOpened]=\"sidenavOpened\"\n      (openSidenav)=\"onToggleSidenavClick()\">\n    </igo-menu-button>\n\n    <igo-search-bar *ngIf=\"showSearchBar\"\n      #searchBar\n      [term]=\"searchBarTerm\"\n      [termSplitter]=\"termSplitter\"\n      [minLength]=\"minSearchTermLength\"\n      [searchSettings]=\"true\"\n      [forceNA]=\"forceCoordsNA\"\n      [store]=\"searchStore\"\n      (searchTermChange)=\"onSearchTermChange($event)\"\n      [pointerSummaryEnabled]=\"igoSearchPointerSummaryEnabled\"\n      (pointerSummaryStatus)=\"onPointerSummaryStatusChange($event)\"\n      [searchResultsGeometryEnabled]=\"searchResultsGeometryEnabled\"\n      (searchResultsGeometryStatus)=\"onSearchResultsGeometryStatusChange($event)\"\n      (search)=\"onSearch($event)\"\n      (clearFeature)=\"onClearSearch()\"\n      (searchSettingsChange)=\"onSearchSettingsChange()\">\n    </igo-search-bar>\n\n    <app-sidenav\n      [map]=\"map\"\n      [(opened)]=\"sidenavOpened\"\n      (toolChange)=\"toolChanged($event)\">\n    </app-sidenav>\n\n    <igo-map-browser\n      igoWorkspaceUpdator\n      [workspaceStore]=\"workspaceStore\"\n      igoSearchPointerSummary\n      [igoSearchPointerSummaryDelay]=\"500\"\n      [igoSearchPointerSummaryEnabled]=igoSearchPointerSummaryEnabled\n      igoHoverFeature\n      [igoHoverFeatureDelay]=\"250\"\n      [igoHoverFeatureEnabled]=\"true\"\n      #mapBrowser\n      igoQuery\n      [waitForAllQueries]=\"true\"\n      [queryFeatures]=\"true\"\n      [queryFeaturesHitTolerance]=\"15\"\n      igoMapContext\n      igoLayerContext\n      igoDropGeoFile\n      (query)=\"onMapQuery($event)\"\n      [map]=\"map\"\n      [igoContextMenu]=contextMenu\n      (menuPosition)=\"onContextMenuOpen($event)\"\n      [ngClass]=\"{'igo-attribution-offset': map.getBaseLayers().length > 1}\"\n      [@mapStateX]=\"sidenavOpened ? 'right' : 'left'\"\n      (@mapStateX.start)=\"updateMapBrowserClass()\"\n      [@mapStateY]=\"getControlsOffsetY()\"\n      (@mapStateY.start)=\"updateMapBrowserClass()\">\n\n      <igo-zoom-button [map]=\"map\" color=\"primary\"\n        [@controlsOffsetY]=\"getControlsOffsetY()\">\n      </igo-zoom-button>\n      <igo-swipe-control [map]=\"map\"></igo-swipe-control>\n      <igo-map-center [map]=\"map\"></igo-map-center>\n      <igo-offline-button [map]=\"map\" color=\"primary\"\n        [@controlsOffsetY]=\"getControlsOffsetY()\"\n        [@mobileOffsetY]=\"getToastPanelStatus()\">\n      </igo-offline-button>\n      <igo-geolocate-button\n        *ngIf=\"hasGeolocateButton\"\n        [map]=\"map\" color=\"primary\"\n        [@controlsOffsetY]=\"getControlsOffsetY()\"\n        [@mobileOffsetY]=\"getToastPanelStatus()\">\n      </igo-geolocate-button>\n      <igo-rotation-button [showIfNoRotation]=\"showRotationButtonIfNoRotation\" [map]=\"map\" color=\"primary\"></igo-rotation-button>\n      <igo-home-extent-button\n        *ngIf=\"hasHomeExtentButton\"\n        [map]=\"map\"\n        [extentOverride]=\"homeExtent\"\n        [centerOverride]=\"homeCenter\"\n        [zoomOverride]=\"homeZoom\"\n        color=\"primary\">\n      </igo-home-extent-button>\n      <igo-user-button\n        *ngIf=\"auth.url\"\n        [map]=\"map\" color=\"primary\"\n        [@controlsOffsetY]=\"getControlsOffsetY()\"\n        [@mobileOffsetY]=\"getToastPanelStatus()\">\n      </igo-user-button>\n      <igo-baselayers-switcher [map]=\"map\"\n        [@controlsOffsetY]=\"getBaselayersSwitcherStatus()\"\n        [useStaticIcon]=\"true\">\n      </igo-baselayers-switcher>\n    </igo-map-browser>\n\n    <app-map-overlay\n      [@controlStateY]=\"getControlsOffsetY()\"\n      [@controlStateX]=\"(mediaService.media$ | async) !== 'mobile' &&\n                              sidenavOpened ? 'right' : 'left'\">\n    </app-map-overlay>\n\n  </mat-sidenav-content>\n</mat-sidenav-container>\n\n<app-expansion-panel\n  *ngIf=\"hasExpansionPanel && (workspaceState.workspaceEnabled$ | async)\"\n  [backdropShown]=\"expansionPanelBackdropShown\"\n  [(expanded)]=\"expansionPanelExpanded\"\n  [maximized]=\"workspaceMaximize$ | async\"\n  [@expansionPanelSize]=\"getExpansionPanelStatus()\"\n  [@toastOffsetY]=\"(isMobile() && !toastPanelOpened && queryState.store.entities$.value.length > 0 && !expansionPanelExpanded) ? 'true' : 'false'\">\n\n  <ng-container expansionPanelHeader>\n    <igo-workspace-selector\n      igoWorkspaceSelector\n      (toolToActivate)=\"toolToActivateFromWorkspace($event)\"\n      (changeWorkspace)=\"workspaceState.setActiveWorkspaceByTitle($event)\"\n      (disableSwitch)=\"workspaceSwitchDisabled = $event\"\n      (relationLayers)=\"refreshRelationsWorkspace($event)\"\n      (rowsInMapExtentCheckCondition)=\"workspaceState.rowsInMapExtentCheckCondition$.next($event)\"\n      [store]=\"workspaceStore\"\n      [disabled]=\"workspaceSwitchDisabled\"\n      [map]=\"map\">\n    </igo-workspace-selector>\n\n    <ng-container *ngIf=\"selectedWorkspace$ | async as workspace\">\n      <button\n        class=\"eye-workspace\"\n        mat-icon-button\n        [color]=\"workspace.layer.visible ? 'primary' : 'default'\"\n        collapsibleButton\n        tooltip-position=\"below\"\n        matTooltipShowDelay=\"500\"\n        [matTooltip]=\"workspace.layer.visible ?\n                      ('igo.geo.layer.hideLayer' | translate) :\n                      ('igo.geo.layer.showLayer' | translate)\"\n        (click)=\"workspace.layer.visible = !workspace.layer.visible\">\n        <mat-icon\n          [ngClass]=\"{disabled: (workspace.inResolutionRange$ | async)!==true}\"\n          [svgIcon]=\"workspace.layer.visible ? 'eye' : 'eye-off'\">\n        </mat-icon>\n      </button>\n      <button\n        *ngIf=\"isEditionWorkspace(workspace)\"\n        class=\"add-feature\"\n        mat-icon-button\n        color=\"primary\"\n        collapsibleButton\n        tooltip-position=\"below\"\n        matTooltipShowDelay=\"500\"\n        [matTooltip]=\"('workspace.addFeature') | translate\"\n        (click)=\"addFeature(workspace)\">\n        <mat-icon\n          svgIcon=\"plus\">\n        </mat-icon>\n      </button>\n      <igo-actionbar\n        class=\"actionbar-workspace\"\n        *ngIf=\"workspace.actionStore\"\n        [store]=\"workspace.actionStore\"\n        [withIcon]=\"true\"\n        [withTitle]=\"actionbarWithTitle\"\n        [horizontal]=\"true\"\n        [withToggleButton]=\"actionbarMode === 'overlay'\"\n        [iconColor]=\"'primary'\"\n        [color]=\"'primary'\"\n        [mode]=\"actionbarMode\"\n        [overlayClass]=\"workspaceMenuClass\">\n      </igo-actionbar>\n      <div class=\"spacer\"></div>\n      <igo-entity-table-paginator\n        *ngIf=\"workspaceVisibility()\"\n        [store]=\"workspace.entityStore\"\n        [entitySortChange$]=\"workspaceEntitySortChange$\"\n        [paginatorOptions]=\"paginatorOptions\"\n        (paginatorChange)=\"paginatorChange($event)\">\n      </igo-entity-table-paginator>\n    </ng-container>\n  </ng-container>\n\n  <ng-container *ngIf=\"selectedWorkspace$ | async as workspace\">\n    <igo-entity-table\n      [class]=\"isEditionWorkspace(workspace) ? 'edition-table' : ''\"\n      [paginator]=\"workspacePaginator\"\n      *ngIf=\"workspace.entityStore && workspace.meta && workspace.meta.tableTemplate && workspaceVisibility()\"\n      [store]=\"workspace.entityStore\"\n      (entitySortChange)=\"entitySortChange()\"\n      (entitySelectChange)=\"entitySelectChange($event)\"\n      [template]=\"workspace.meta.tableTemplate\">\n    </igo-entity-table>\n    <span class=\"mat-typography\">{{workspaceNotAvailableMessage | translate}}</span>\n  </ng-container>\n\n</app-expansion-panel>\n\n<app-toast-panel-for-expansion\n  [withHeader]=\"false\"\n  [(opened)]=\"toastPanelForExpansionOpened\">\n\n  <div class=\"toast-panel-for-expansion-close-button-container\">\n    <button\n      mat-icon-button\n      color=\"warn\"\n      (click)=\"toastPanelForExpansionOpened = false\">\n      <mat-icon svgIcon=\"close\"></mat-icon>\n    </button>\n  </div>\n\n  <igo-workspace-widget-outlet\n    *ngIf=\"selectedWorkspace$ | async as workspace\"\n    [workspace]=\"workspace\"\n    (deactivateWidget)=\"onDeactivateWorkspaceWidget()\">\n  </igo-workspace-widget-outlet>\n\n</app-toast-panel-for-expansion >\n\n<app-toast-panel *ngIf=\"(queryStore.empty$ | async)!==true\"\n  [map]=\"map\"\n  [store]=\"queryStore\"\n  [hasFeatureEmphasisOnSelection]=\"hasFeatureEmphasisOnSelection\"\n  [@toastPanelOffsetX]=\"toastPanelOffsetX$ | async\"\n  [@toastPanelOffsetY]=\"getToastPanelOffsetY()\"\n  [@toastPanelMobileSidenav]=\"(isMobile() && sidenavOpened) || (isTablet() && isPortrait() && sidenavOpened)\"\n  [opened]=\"toastPanelOpened\"\n  (openedChange)=\"toastOpenedChange($event)\"\n  (fullExtentEvent)=\"fullExtent = $event\"\n  (windowHtmlDisplayEvent)=\"setToastPanelHtmlDisplay($event)\">\n</app-toast-panel>\n\n<ng-template #contextMenu>\n  <igo-actionbar\n    [store]=\"contextMenuStore\"\n    [withIcon]=\"false\"\n    [horizontal]=\"true\"\n    mode=\"context\">\n  </igo-actionbar>\n</ng-template>\n","import {\n  Component,\n  OnInit,\n  OnDestroy,\n  ChangeDetectorRef,\n  ViewChild,\n  ElementRef\n} from '@angular/core';\nimport { ActivatedRoute, Params } from '@angular/router';\nimport { Subscription, of, BehaviorSubject, combineLatest } from 'rxjs';\nimport { debounceTime, take, pairwise, skipWhile, first } from 'rxjs/operators';\nimport { MatDialog, MatDialogConfig, MatDialogRef } from '@angular/material/dialog';\nimport MapBrowserEvent from 'ol/MapBrowserEvent';\nimport * as olProj from 'ol/proj';\nimport olFeature from 'ol/Feature';\nimport type { default as OlGeometry } from 'ol/geom/Geometry';\n\nimport {\n  MediaService,\n  Media,\n  MediaOrientation,\n  ConfigService,\n  LanguageService,\n  MessageService,\n  StorageService\n} from '@igo2/core';\nimport {\n  ActionbarMode,\n  Workspace,\n  WorkspaceStore,\n  ActionStore,\n  EntityStore,\n  // getEntityTitle,\n  Toolbox,\n  Tool,\n  Widget,\n  EntityTablePaginatorOptions,\n  EntityRecord\n} from '@igo2/common';\nimport { AuthOptions, AuthService } from '@igo2/auth';\nimport { DetailedContext } from '@igo2/context';\nimport {\n  DataSourceService,\n  Feature,\n  FEATURE,\n  featureToSearchResult,\n  GoogleLinks,\n  IgoMap,\n  LayerService,\n  QuerySearchSource,\n  Research,\n  SearchResult,\n  SearchSource,\n  SearchSourceService,\n  CapabilitiesService,\n  sourceCanSearch,\n  sourceCanReverseSearch,\n  ImportService,\n  handleFileImportError,\n  handleFileImportSuccess,\n  featureFromOl,\n  QueryService,\n  WfsWorkspace,\n  FeatureWorkspace,\n  EditionWorkspace,\n  EditionWorkspaceService,\n  generateIdFromSourceOptions,\n  computeOlFeaturesExtent,\n  addStopToStore,\n  ImageLayer,\n  VectorLayer,\n  MapExtent\n} from '@igo2/geo';\n\nimport {\n  ToolState,\n  MapState,\n  SearchState,\n  QueryState,\n  ContextState,\n  WorkspaceState,\n  DirectionState\n} from '@igo2/integration';\n\nimport {\n  expansionPanelAnimation,\n  toastPanelAnimation,\n  controlsAnimations,\n  controlSlideX,\n  controlSlideY,\n  mapSlideX,\n  mapSlideY\n} from './portal.animation';\nimport { HttpClient, HttpParams } from '@angular/common/http';\n\nimport { WelcomeWindowComponent } from './welcome-window/welcome-window.component';\nimport { WelcomeWindowService } from './welcome-window/welcome-window.service';\nimport { MatPaginator } from '@angular/material/paginator';\nimport { ObjectUtils } from '@igo2/utils';\nimport olFormatGeoJSON from 'ol/format/GeoJSON';\n\n@Component({\n  selector: 'app-portal',\n  templateUrl: './portal.component.html',\n  styleUrls: ['./portal.component.scss'],\n  animations: [\n    expansionPanelAnimation(),\n    toastPanelAnimation(),\n    controlsAnimations(),\n    controlSlideX(),\n    controlSlideY(),\n    mapSlideX(),\n    mapSlideY()\n  ]\n})\nexport class PortalComponent implements OnInit, OnDestroy {\n  public toastPanelOffsetX$: BehaviorSubject<string> = new BehaviorSubject(undefined);\n  public sidenavOpened$: BehaviorSubject<boolean> = new BehaviorSubject(false);\n  public minSearchTermLength = 2;\n  public hasExpansionPanel = false;\n  public hasGeolocateButton = true;\n  public hasHomeExtentButton = false;\n  public showMenuButton = true;\n  public showSearchBar = true;\n  public showRotationButtonIfNoRotation = false;\n  public hasFeatureEmphasisOnSelection: Boolean = false;\n  public workspaceNotAvailableMessage: String = 'workspace.disabled.resolution';\n  public workspacePaginator: MatPaginator;\n  public workspaceEntitySortChange$: BehaviorSubject<boolean> = new BehaviorSubject(false);\n  public workspaceSwitchDisabled = false;\n  public paginatorOptions: EntityTablePaginatorOptions = {\n    pageSize: 50, // Number of items to display on a page.\n    pageSizeOptions: [1, 5, 10, 20, 50, 100, 500] // The set of provided page size options to display to the user.\n  };\n  public workspaceMenuClass = 'workspace-menu';\n\n  public fullExtent = this.storageService.get('fullExtent') as boolean;\n  private workspaceMaximize$$: Subscription[] = [];\n  readonly workspaceMaximize$: BehaviorSubject<boolean> = new BehaviorSubject(\n    this.storageService.get('workspaceMaximize') as boolean\n  );\n\n  public matDialogRef$ = new BehaviorSubject<MatDialogRef<any>>(undefined);\n  public searchBarTerm = '';\n  public onSettingsChange$ = new BehaviorSubject<boolean>(undefined);\n  public termDefinedInUrl = false;\n  public termSplitter = '|';\n  public termDefinedInUrlTriggered = false;\n  private addedLayers$$: Subscription[] = [];\n  public forceCoordsNA = false;\n\n  public contextMenuStore = new ActionStore([]);\n  private contextMenuCoord: [number, number];\n\n  private contextLoaded = false;\n\n  private context$$: Subscription;\n  private openSidenav$$: Subscription;\n  private sidenavMediaAndOrientation$$: Subscription;\n\n  public igoSearchPointerSummaryEnabled: boolean;\n\n  public toastPanelForExpansionOpened = true;\n  private activeWidget$$: Subscription;\n  public showToastPanelForExpansionToggle = false;\n  public selectedWorkspace$: BehaviorSubject<Workspace> = new BehaviorSubject(\n    undefined\n  );\n  private routeParams: Params;\n  public toastPanelHtmlDisplay = false;\n\n  public homeExtent: MapExtent;\n  public homeCenter: [number, number];\n  public homeZoom: number;\n  @ViewChild('mapBrowser', { read: ElementRef, static: true })\n  mapBrowser: ElementRef;\n  @ViewChild('searchBar', { read: ElementRef, static: true })\n  searchBar: ElementRef;\n\n  get map(): IgoMap {\n    return this.mapState.map;\n  }\n\n  get sidenavOpened(): boolean {\n    return this.sidenavOpened$.value;\n  }\n\n  set sidenavOpened(value: boolean) {\n    this.sidenavOpened$.next(value);\n  }\n\n  get auth(): AuthOptions {\n    return this.configService.getConfig('auth') || [];\n  }\n\n  get toastPanelOpened(): boolean {\n    return this._toastPanelOpened;\n  }\n  set toastPanelOpened(value: boolean) {\n    if (value !== !this._toastPanelOpened) {\n      return;\n    }\n    this._toastPanelOpened = value;\n    this.cdRef.detectChanges();\n  }\n  private _toastPanelOpened =\n    (this.storageService.get('toastOpened') as boolean) !== false;\n\n  isMobile(): boolean {\n    return this.mediaService.getMedia() === Media.Mobile;\n  }\n\n  isTablet(): boolean {\n    return this.mediaService.getMedia() === Media.Tablet;\n  }\n\n  isLandscape(): boolean {\n    return this.mediaService.getOrientation() === MediaOrientation.Landscape;\n  }\n\n  isPortrait(): boolean {\n    return this.mediaService.getOrientation() === MediaOrientation.Portrait;\n  }\n\n  get backdropShown(): boolean {\n    return (\n      (this.isMobile() || (this.isTablet() && this.isPortrait())) &&\n      this.sidenavOpened\n    );\n  }\n\n  get expansionPanelExpanded(): boolean {\n    return this.workspaceState.workspacePanelExpanded;\n  }\n  set expansionPanelExpanded(value: boolean) {\n    this.workspaceState.workspacePanelExpanded = value;\n  }\n\n  get toastPanelShown(): boolean {\n    return true;\n  }\n\n  get expansionPanelBackdropShown(): boolean {\n    return this.expansionPanelExpanded && this.toastPanelForExpansionOpened;\n  }\n\n  get actionbarMode(): ActionbarMode {\n    return ActionbarMode.Overlay;\n  }\n\n  get actionbarWithTitle(): boolean {\n    return this.actionbarMode === ActionbarMode.Overlay;\n  }\n\n  get searchStore(): EntityStore<SearchResult> {\n    return this.searchState.store;\n  }\n\n  get searchResultsGeometryEnabled(): boolean {\n    return this.searchState.searchResultsGeometryEnabled$.value;\n  }\n\n  get queryStore(): EntityStore<SearchResult> {\n    return this.queryState.store;\n  }\n\n  get toolbox(): Toolbox {\n    return this.toolState.toolbox;\n  }\n\n  get toastPanelContent(): string {\n    let content;\n    if (this.workspace !== undefined && this.workspace.hasWidget) {\n      content = 'workspace';\n    } /*else if (this.searchResult !== undefined) {\n      content = this.searchResult.meta.dataType.toLowerCase();\n    }*/\n    return content;\n  }\n\n  // get toastPanelTitle(): string {\n  //   let title;\n  //   if (\n  //     this.toastPanelContent !== 'workspace' &&\n  //     this.searchResult !== undefined\n  //   ) {\n  //     title = getEntityTitle(this.searchResult);\n  //   }\n  //   return title;\n  // }\n\n  get workspaceStore(): WorkspaceStore {\n    return this.workspaceState.store;\n  }\n\n  get workspace(): Workspace {\n    return this.workspaceState.workspace$.value;\n  }\n\n  constructor(\n    private route: ActivatedRoute,\n    public workspaceState: WorkspaceState,\n    public authService: AuthService,\n    public mediaService: MediaService,\n    public layerService: LayerService,\n    public dataSourceService: DataSourceService,\n    public cdRef: ChangeDetectorRef,\n    public capabilitiesService: CapabilitiesService,\n    private contextState: ContextState,\n    private mapState: MapState,\n    private searchState: SearchState,\n    private queryState: QueryState,\n    private toolState: ToolState,\n    private searchSourceService: SearchSourceService,\n    private configService: ConfigService,\n    private importService: ImportService,\n    private http: HttpClient,\n    private languageService: LanguageService,\n    private messageService: MessageService,\n    private welcomeWindowService: WelcomeWindowService,\n    public dialogWindow: MatDialog,\n    private queryService: QueryService,\n    private storageService: StorageService,\n    private editionWorkspaceService: EditionWorkspaceService,\n    private directionState: DirectionState\n  ) {\n    this.hasExpansionPanel = this.configService.getConfig('hasExpansionPanel');\n    this.hasHomeExtentButton =\n      this.configService.getConfig('homeExtentButton') === undefined ? false : true;\n    this.hasGeolocateButton = this.configService.getConfig('hasGeolocateButton') === undefined ? true :\n      this.configService.getConfig('hasGeolocateButton');\n    this.showRotationButtonIfNoRotation = this.configService.getConfig('showRotationButtonIfNoRotation') === undefined ? false :\n      this.configService.getConfig('showRotationButtonIfNoRotation');\n    this.showMenuButton = this.configService.getConfig('showMenuButton') === undefined ? true :\n      this.configService.getConfig('showMenuButton');\n    this.showSearchBar = this.configService.getConfig('showSearchBar') === undefined ? true :\n      this.configService.getConfig('showSearchBar');\n    this.forceCoordsNA = this.configService.getConfig('app.forceCoordsNA');\n    this.hasFeatureEmphasisOnSelection = this.configService.getConfig('hasFeatureEmphasisOnSelection');\n\n\n    this.igoSearchPointerSummaryEnabled = this.configService.getConfig('hasSearchPointerSummary');\n    if (this.igoSearchPointerSummaryEnabled === undefined) {\n      this.igoSearchPointerSummaryEnabled = this.storageService.get('searchPointerSummaryEnabled') as boolean || false;\n    }\n  }\n\n  ngOnInit() {\n    window['IGO'] = this;\n    this.searchState.searchTermSplitter$.next(this.termSplitter);\n\n    this.initWelcomeWindow();\n\n    this.authService.authenticate$.subscribe((authenticated) => {\n      this.contextLoaded = false;\n    });\n\n    this.context$$ = this.contextState.context$.subscribe(\n      (context: DetailedContext) => this.onChangeContext(context)\n    );\n\n    this.contextMenuStore.load([\n      {\n        id: 'coordinates',\n        title: 'coordinates',\n        handler: () => this.searchCoordinate(this.contextMenuCoord)\n      },\n      {\n        id: 'googleMaps',\n        title: 'googleMap',\n        handler: () => this.openGoogleMaps(this.contextMenuCoord)\n      },\n      {\n        id: 'googleStreetView',\n        title: 'googleStreetView',\n        handler: () => this.openGoogleStreetView(this.contextMenuCoord)\n      }\n    ]);\n\n    this.queryStore.count$\n      .pipe(pairwise())\n      .subscribe(([prevCnt, currentCnt]) => {\n        this.map.viewController.padding[2] = currentCnt ? 280 : 0;\n        // on mobile. Close the toast if workspace is opened, on new query\n        if (\n          prevCnt === 0 &&\n          currentCnt !== prevCnt &&\n          this.isMobile() &&\n          this.hasExpansionPanel &&\n          this.expansionPanelExpanded &&\n          this.toastPanelOpened\n        ) {\n          this.toastPanelOpened = false;\n        }\n      });\n    this.map.ol.once('rendercomplete', () => {\n      this.readQueryParams();\n    });\n\n    this.onSettingsChange$.subscribe(() => {\n      this.searchState.setSearchSettingsChange();\n    });\n\n    this.searchState.selectedResult$.subscribe((result) => {\n      if (result && this.isMobile()) {\n        this.closeSidenav();\n      }\n    });\n\n    this.workspaceState.workspaceEnabled$.next(this.hasExpansionPanel);\n    this.workspaceState.store.empty$.subscribe((workspaceEmpty) => {\n      if (!this.hasExpansionPanel) {\n        return;\n      }\n      this.workspaceState.workspaceEnabled$.next(workspaceEmpty ? false : true);\n      if (workspaceEmpty) {\n        this.expansionPanelExpanded = false;\n      }\n      this.updateMapBrowserClass();\n    });\n\n    this.workspaceMaximize$$.push(this.workspaceState.workspaceMaximize$.subscribe((workspaceMaximize) => {\n      this.workspaceMaximize$.next(workspaceMaximize);\n      this.updateMapBrowserClass();\n    }));\n    this.workspaceMaximize$$.push(\n      this.workspaceMaximize$.subscribe(() => this.updateMapBrowserClass())\n    );\n\n    this.workspaceState.workspace$.subscribe((activeWks: WfsWorkspace | FeatureWorkspace | EditionWorkspace) => {\n      if (activeWks) {\n        this.selectedWorkspace$.next(activeWks);\n        this.expansionPanelExpanded = true;\n\n        if (activeWks.layer.options.workspace?.pageSize && activeWks.layer.options.workspace?.pageSizeOptions) {\n          this.paginatorOptions = {\n            pageSize: activeWks.layer.options.workspace?.pageSize,\n            pageSizeOptions: activeWks.layer.options.workspace?.pageSizeOptions\n          };\n        } else {\n          this.paginatorOptions = {\n            pageSize: 50,\n            pageSizeOptions: [1, 5, 10, 20, 50, 100, 500]\n          };\n        }\n      } else {\n        this.expansionPanelExpanded = false;\n      }\n    });\n\n    this.activeWidget$$ = this.workspaceState.activeWorkspaceWidget$.subscribe(\n      (widget: Widget) => {\n        if (widget !== undefined) {\n          this.openToastPanelForExpansion();\n          this.showToastPanelForExpansionToggle = true;\n        } else {\n          this.closeToastPanelForExpansion();\n          this.showToastPanelForExpansionToggle = false;\n        }\n      }\n    );\n\n    this.openSidenav$$ = this.toolState.openSidenav$.subscribe(\n      (openSidenav: boolean) => {\n        if (openSidenav) {\n          this.openSidenav();\n          this.toolState.openSidenav$.next(false);\n        }\n      }\n    );\n\n    this.sidenavMediaAndOrientation$$ =\n      combineLatest([\n        this.sidenavOpened$,\n        this.mediaService.media$,\n        this.mediaService.orientation$]\n      ).pipe(\n        debounceTime(50)\n      ).subscribe((sidenavMediaAndOrientation: [boolean, string, string]) => {\n        this.computeToastPanelOffsetX();\n      });\n  }\n\n  setToastPanelHtmlDisplay(value) {\n    this.toastPanelHtmlDisplay = value;\n    this.computeToastPanelOffsetX();\n  }\n\n  computeToastPanelOffsetX() {\n    if (this.isMobile() || !this.isLandscape()) {\n      Promise.resolve().then(() => this.toastPanelOffsetX$.next(undefined));\n    } else {\n      Promise.resolve().then(() => this.toastPanelOffsetX$.next(this.getToastPanelExtent()));\n    }\n  }\n\n  workspaceVisibility(): boolean {\n    const wks = (this.selectedWorkspace$.value as WfsWorkspace | FeatureWorkspace | EditionWorkspace);\n    if (wks.inResolutionRange$.value) {\n      if (wks.entityStore.empty$.value && !wks.layer.visible) {\n        this.workspaceNotAvailableMessage = 'workspace.disabled.visible';\n      } else {\n        this.workspaceNotAvailableMessage = '';\n      }\n    } else {\n      this.workspaceNotAvailableMessage = 'workspace.disabled.resolution';\n    }\n    return wks.inResolutionRange$.value;\n  }\n\n  isEditionWorkspace(workspace) {\n    if (workspace instanceof EditionWorkspace) {\n      return true;\n    }\n    return false;\n  }\n\n  addFeature(workspace: EditionWorkspace) {\n    let feature = {\n      type: \"Feature\",\n      properties: {}\n    };\n    feature.properties = this.createFeatureProperties(workspace.layer);\n    this.workspaceState.rowsInMapExtentCheckCondition$.next(false);\n    workspace.editFeature(feature, workspace);\n  }\n\n  createFeatureProperties(layer: ImageLayer | VectorLayer) {\n    let properties = {};\n    layer.options.sourceOptions.sourceFields.forEach(field => {\n      if (!field.primary && field.visible) {\n        properties[field.name] = '';\n      }\n    });\n    return properties;\n  }\n\n  paginatorChange(matPaginator: MatPaginator) {\n    this.workspacePaginator = matPaginator;\n  }\n\n  entitySortChange() {\n    this.workspaceEntitySortChange$.next(true);\n  }\n\n  entitySelectChange(result: { added: Feature[] }) {\n    const baseQuerySearchSource = this.getQuerySearchSource();\n    const querySearchSourceArray: QuerySearchSource[] = [];\n\n    if (this.selectedWorkspace$.value instanceof WfsWorkspace || this.selectedWorkspace$.value instanceof FeatureWorkspace) {\n      if (!this.selectedWorkspace$.value.getLayerWksOptionTabQuery()) {return;}\n    }\n    if (result && result.added) {\n      const results = result.added.map((res) => {\n        if (\n          res &&\n          res.ol &&\n          res.ol.getProperties()._featureStore.layer &&\n          res.ol.getProperties()._featureStore.layer.visible\n        ) {\n          const ol = res.ol as olFeature<OlGeometry>;\n          const featureStoreLayer = res.ol.getProperties()._featureStore.layer;\n          const feature = featureFromOl(\n            ol,\n            featureStoreLayer.map.projection,\n            featureStoreLayer.ol\n          );\n\n          feature.meta.alias = this.queryService.getAllowedFieldsAndAlias(\n            featureStoreLayer\n          );\n          feature.meta.title =\n            this.queryService.getQueryTitle(feature, featureStoreLayer) ||\n            feature.meta.title;\n          let querySearchSource = querySearchSourceArray.find(\n            (s) => s.title === feature.meta.sourceTitle\n          );\n          if (!querySearchSource) {\n            querySearchSource = new QuerySearchSource({\n              title: feature.meta.sourceTitle\n            });\n            querySearchSourceArray.push(querySearchSource);\n          }\n          return featureToSearchResult(feature, querySearchSource);\n        }\n      });\n\n      const research = {\n        request: of(results),\n        reverse: false,\n        source: baseQuerySearchSource\n      };\n      research.request.subscribe((queryResults: SearchResult<Feature>[]) => {\n        this.queryStore.load(queryResults);\n      });\n    }\n  }\n\n  ngOnDestroy() {\n    this.context$$.unsubscribe();\n    this.activeWidget$$.unsubscribe();\n    this.openSidenav$$.unsubscribe();\n    this.workspaceMaximize$$.map(f => f.unsubscribe());\n    this.sidenavMediaAndOrientation$$.unsubscribe();\n  }\n\n  /**\n   * Cancel ongoing add layer, if any\n   */\n  private cancelOngoingAddLayer() {\n    this.addedLayers$$.forEach((sub: Subscription) => sub.unsubscribe());\n    this.addedLayers$$ = [];\n  }\n\n  onBackdropClick() {\n    this.closeSidenav();\n  }\n\n  onToggleSidenavClick() {\n    this.toggleSidenav();\n  }\n\n  onDeactivateWorkspaceWidget() {\n    this.closeToastPanelForExpansion();\n  }\n\n  closeToastPanelForExpansion() {\n    this.toastPanelForExpansionOpened = false;\n  }\n\n  openToastPanelForExpansion() {\n    this.toastPanelForExpansionOpened = true;\n  }\n\n  onMapQuery(event: { features: Feature[]; event: MapBrowserEvent<any> }) {\n    const baseQuerySearchSource = this.getQuerySearchSource();\n    const querySearchSourceArray: QuerySearchSource[] = [];\n    const results = event.features.map((feature: Feature) => {\n      let querySearchSource = querySearchSourceArray.find(\n        (s) => s.title === feature.meta.sourceTitle\n      );\n      if (this.getFeatureIsSameActiveWks(feature)) {\n        if (this.getWksActiveOpenInResolution() && !(this.workspace as WfsWorkspace).getLayerWksOptionMapQuery()) {\n          return;\n        }\n      }\n      if (!querySearchSource) {\n        querySearchSource = new QuerySearchSource({\n          title: feature.meta.sourceTitle\n        });\n        querySearchSourceArray.push(querySearchSource);\n      }\n      return featureToSearchResult(feature, querySearchSource);\n    });\n    const filteredResults = results.filter(x => x !== undefined);\n    const research = {\n      request: of(filteredResults),\n      reverse: false,\n      source: baseQuerySearchSource\n    };\n    research.request.subscribe((queryResults: SearchResult<Feature>[]) => {\n      this.queryStore.load(queryResults);\n    });\n  }\n\n  onSearchTermChange(term?: string) {\n    if (this.routeParams?.search && term !== this.routeParams.search) {\n      this.searchState.deactivateCustomFilterTermStrategy();\n    }\n\n    this.searchState.setSearchTerm(term);\n    const termWithoutHashtag = term.replace(/(#[^\\s]*)/g, '').trim();\n    if (termWithoutHashtag.length < 2) {\n      this.onClearSearch();\n      return;\n    }\n    this.onBeforeSearch();\n  }\n\n  onSearch(event: { research: Research; results: SearchResult[] }) {\n    const results = event.results;\n\n    const isReverseSearch = !sourceCanSearch(event.research.source);\n\n    let enabledSources;\n    if (isReverseSearch) {\n      enabledSources = this.searchSourceService\n        .getEnabledSources()\n        .filter(sourceCanReverseSearch);\n    } else {\n      enabledSources = this.searchSourceService\n        .getEnabledSources()\n        .filter(sourceCanSearch);\n    }\n\n    const newResults = this.searchStore.entities$.value\n      .filter(\n        (result: SearchResult) =>\n          result.source !== event.research.source &&\n          enabledSources.includes(result.source)\n      )\n      .concat(results);\n    this.searchStore.updateMany(newResults);\n  }\n\n  onSearchResultsGeometryStatusChange(value) {\n    this.searchState.setSearchResultsGeometryStatus(value);\n  }\n\n  onSearchSettingsChange() {\n    this.onSettingsChange$.next(true);\n  }\n\n  private closeSidenav() {\n    this.sidenavOpened = false;\n    this.map.viewController.padding[3] = 0;\n  }\n\n  private openSidenav() {\n    this.sidenavOpened = true;\n    this.map.viewController.padding[3] = this.isMobile() ? 0 : 400;\n  }\n\n  private toggleSidenav() {\n    this.sidenavOpened ? this.closeSidenav() : this.openSidenav();\n    this.computeToastPanelOffsetX();\n  }\n\n  public toolChanged(tool: Tool) {\n    if (tool && tool.name === 'searchResults' && this.searchBar) {\n      this.searchBar.nativeElement.getElementsByTagName('input')[0].focus();\n    }\n  }\n\n  private computeHomeExtentValues(context: DetailedContext) {\n    if (context?.map?.view?.homeExtent) {\n      this.homeExtent = context.map.view.homeExtent.extent;\n      this.homeCenter = context.map.view.homeExtent.center;\n      this.homeZoom = context.map.view.homeExtent.zoom;\n    } else {\n      this.homeExtent = undefined;\n      this.homeCenter = undefined;\n      this.homeZoom = undefined;\n    }\n\n  }\n\n  private onChangeContext(context: DetailedContext) {\n    this.cancelOngoingAddLayer();\n    if (context === undefined) {\n      return;\n    }\n    if (!this.queryState.store.empty) {\n      this.queryState.store.softClear();\n    }\n\n    this.computeHomeExtentValues(context);\n\n    this.route.queryParams.pipe(debounceTime(250)).subscribe((qParams) => {\n      if (!qParams['context'] || qParams['context'] === context.uri) {\n        this.readLayersQueryParams(qParams);\n      }\n    });\n\n    if (this.contextLoaded) {\n      const contextManager = this.toolbox.getTool('contextManager');\n      const contextManagerOptions = contextManager\n        ? contextManager.options\n        : {};\n      let toolToOpen = contextManagerOptions.toolToOpenOnContextChange;\n\n      if (!toolToOpen) {\n        const toolOrderToOpen = ['mapTools', 'map', 'mapDetails', 'mapLegend'];\n        for (const toolName of toolOrderToOpen) {\n          if (this.toolbox.getTool(toolName)) {\n            toolToOpen = toolName;\n            break;\n          }\n        }\n      }\n\n      if (toolToOpen) {\n        this.toolbox.activateTool(toolToOpen);\n      }\n    }\n\n    this.contextLoaded = true;\n  }\n\n  private onBeforeSearch() {\n    if (\n      !this.toolbox.activeTool$.value ||\n      this.toolbox.activeTool$.value.name !== 'searchResults'\n    ) {\n      this.toolbox.activateTool('searchResults');\n    }\n    this.openSidenav();\n  }\n\n  toastOpenedChange(opened: boolean) {\n    this.map.viewController.padding[2] = opened ? 280 : 0;\n    this.handleExpansionAndToastOnMobile();\n    this.toastPanelOpened = opened;\n  }\n\n  private handleExpansionAndToastOnMobile() {\n    if (\n      this.isMobile() &&\n      this.hasExpansionPanel &&\n      this.expansionPanelExpanded &&\n      this.toastPanelOpened\n    ) {\n      this.expansionPanelExpanded = false;\n    }\n  }\n\n  public onClearSearch() {\n    this.map.searchResultsOverlay.clear();\n    this.searchStore.clear();\n    this.searchState.setSelectedResult(undefined);\n    this.searchState.deactivateCustomFilterTermStrategy();\n  }\n\n  private getQuerySearchSource(): SearchSource {\n    return this.searchSourceService\n      .getSources()\n      .find(\n        (searchSource: SearchSource) =>\n          searchSource instanceof QuerySearchSource\n      );\n  }\n\n  onContextMenuOpen(event: { x: number; y: number }) {\n    this.contextMenuCoord = this.getClickCoordinate(event) as [number, number];\n  }\n\n  private getClickCoordinate(event: { x: number; y: number }) {\n    const contextmenuPoint = event;\n    const boundingMapBrowser = this.mapBrowser.nativeElement.getBoundingClientRect();\n    contextmenuPoint.y =\n      contextmenuPoint.y -\n      boundingMapBrowser.top +\n      (window.scrollY || window.pageYOffset);\n    contextmenuPoint.x =\n      contextmenuPoint.x -\n      boundingMapBrowser.left +\n      (window.scrollX || window.pageXOffset);\n    const pixel = [contextmenuPoint.x, contextmenuPoint.y];\n\n    const coord = this.map.ol.getCoordinateFromPixel(pixel);\n    const proj = this.map.projection;\n    return olProj.transform(coord, proj, 'EPSG:4326');\n  }\n\n  private openGoogleMaps(coord: [number, number]) {\n    window.open(GoogleLinks.getGoogleMapsCoordLink(coord[0], coord[1]));\n  }\n\n  private openGoogleStreetView(coord: [number, number]) {\n    window.open(GoogleLinks.getGoogleStreetViewLink(coord[0], coord[1]));\n  }\n\n  searchCoordinate(coord: [number, number]) {\n    this.searchBarTerm = coord.map((c) => c.toFixed(6)).join(', ');\n  }\n\n  updateMapBrowserClass() {\n    const header = this.queryState.store.entities$.value.length > 0;\n    if (this.hasExpansionPanel && this.workspaceState.workspaceEnabled$.value) {\n      this.mapBrowser.nativeElement.classList.add('has-expansion-panel');\n    } else {\n      this.mapBrowser.nativeElement.classList.remove('has-expansion-panel');\n    }\n\n    if (this.hasExpansionPanel && this.expansionPanelExpanded) {\n      if (this.workspaceMaximize$.value) {\n        this.mapBrowser.nativeElement.classList.add('expansion-offset-maximized');\n        this.mapBrowser.nativeElement.classList.remove('expansion-offset');\n      } else {\n        this.mapBrowser.nativeElement.classList.add('expansion-offset');\n        this.mapBrowser.nativeElement.classList.remove('expansion-offset-maximized');\n      }\n    } else {\n      if (this.workspaceMaximize$.value) {\n        this.mapBrowser.nativeElement.classList.remove('expansion-offset-maximized');\n      } else {\n        this.mapBrowser.nativeElement.classList.remove('expansion-offset');\n      }\n    }\n\n    if (this.sidenavOpened) {\n      this.mapBrowser.nativeElement.classList.add('sidenav-offset');\n    } else {\n      this.mapBrowser.nativeElement.classList.remove('sidenav-offset');\n    }\n\n    if (this.sidenavOpened && !this.isMobile()) {\n      this.mapBrowser.nativeElement.classList.add('sidenav-offset-baselayers');\n    } else {\n      this.mapBrowser.nativeElement.classList.remove(\n        'sidenav-offset-baselayers'\n      );\n    }\n\n    if (!this.toastPanelOpened && header && !this.expansionPanelExpanded) {\n      this.mapBrowser.nativeElement.classList.add('toast-offset-scale-line');\n    } else {\n      this.mapBrowser.nativeElement.classList.remove('toast-offset-scale-line');\n    }\n\n    if (\n      !this.toastPanelOpened &&\n      header &&\n      (this.isMobile() || this.isTablet() || this.sidenavOpened) &&\n      !this.expansionPanelExpanded\n    ) {\n      this.mapBrowser.nativeElement.classList.add('toast-offset-attribution');\n    } else {\n      this.mapBrowser.nativeElement.classList.remove(\n        'toast-offset-attribution'\n      );\n    }\n  }\n\n  getToastPanelExtent() {\n    if (!this.sidenavOpened) {\n      if (this.toastPanelHtmlDisplay && this.mediaService.isDesktop()) {\n        return 'htmlDisplay';\n      }\n      if (this.fullExtent) {\n        return 'fullStandard';\n      } else {\n        return 'standard';\n      }\n    } else if (this.sidenavOpened) {\n      if (this.toastPanelHtmlDisplay && this.mediaService.isDesktop()) {\n        return 'htmlDisplayOffsetX';\n      }\n      if (this.fullExtent) {\n        return 'fullOffsetX';\n      } else {\n        return 'standardOffsetX';\n      }\n    }\n  }\n\n  onPointerSummaryStatusChange(value) {\n    this.storageService.set('searchPointerSummaryEnabled', value);\n    this.igoSearchPointerSummaryEnabled = value;\n  }\n\n  getExpansionPanelStatus() {\n    if (this.sidenavOpened === false) {\n      if (this.expansionPanelExpanded === true) {\n        return 'full';\n      }\n      return 'notTriggered';\n    }\n    if (this.sidenavOpened === true && this.isMobile() === false) {\n      if (this.expansionPanelExpanded === true) {\n        return 'reduced';\n      }\n      return 'reducedNotTriggered';\n    }\n    if (this.sidenavOpened === true && this.isMobile() === true) {\n      if (this.expansionPanelExpanded === true) {\n        return 'mobile';\n      } else {\n        return 'notVisible';\n      }\n    }\n  }\n\n  getToastPanelOffsetY() {\n    let status = 'noExpansion';\n    if (this.expansionPanelExpanded) {\n      if (this.workspaceMaximize$.value) {\n        if (this.toastPanelOpened) {\n          status = 'expansionMaximizedAndToastOpened';\n        } else {\n          status = 'expansionMaximizedAndToastClosed';\n        }\n      } else {\n        if (this.toastPanelOpened) {\n          status = 'expansionAndToastOpened';\n        } else {\n          status = 'expansionAndToastClosed';\n        }\n      }\n    } else {\n      status = 'noExpansion';\n    }\n    return status;\n  }\n\n  getToastPanelStatus() {\n    if (this.isMobile() === true && this.toastPanelOpened === false) {\n      if (this.sidenavOpened === false) {\n        if (this.expansionPanelExpanded === false) {\n          if (this.queryState.store.entities$.value.length > 0) {\n            return 'low';\n          }\n        }\n      }\n    }\n  }\n  getControlsOffsetY() {\n    return this.expansionPanelExpanded ?\n      this.workspaceMaximize$.value ? 'firstRowFromBottom-expanded-maximized' : 'firstRowFromBottom-expanded' :\n      'firstRowFromBottom';\n  }\n\n  getBaselayersSwitcherStatus() {\n    let status;\n    if (this.isMobile()) {\n\n      if (this.workspaceState.workspaceEnabled$.value) {\n        if (this.expansionPanelExpanded === false) {\n          if (this.queryState.store.entities$.value.length === 0) {\n            status = 'secondRowFromBottom';\n          } else {\n            status = 'thirdRowFromBottom';\n          }\n        } else {\n          if (this.queryState.store.entities$.value.length === 0) {\n            status = 'firstRowFromBottom-expanded';\n          } else {\n            status = 'secondRowFromBottom-expanded';\n          }\n        }\n\n      } else {\n        if (this.queryState.store.entities$.value.length === 0) {\n          status = 'firstRowFromBottom';\n        } else {\n          status = 'secondRowFromBottom';\n        }\n      }\n    } else {\n      if (this.workspaceState.workspaceEnabled$.value) {\n        if (this.expansionPanelExpanded) {\n          if (this.workspaceMaximize$.value) {\n            status = 'firstRowFromBottom-expanded-maximized';\n          } else {\n            status = 'firstRowFromBottom-expanded';\n          }\n        } else {\n          status = 'secondRowFromBottom';\n        }\n      } else {\n        status = 'firstRowFromBottom';\n      }\n    }\n    return status;\n  }\n\n  private readQueryParams() {\n    this.route.queryParams.subscribe((params) => {\n      this.routeParams = params;\n      this.readToolParams();\n      this.readSearchParams();\n      this.readFocusFirst();\n      this.computeZoomToExtent();\n    });\n  }\n\n  private computeZoomToExtent() {\n    if (this.routeParams['zoomExtent']) {\n      const extentParams = this.routeParams['zoomExtent'].split(',');\n      const olExtent = olProj.transformExtent(\n        extentParams,\n        'EPSG:4326',\n        this.map.projection\n      );\n      this.map.viewController.zoomToExtent(olExtent as [number, number, number, number]);\n    }\n  }\n\n  private computeFocusFirst() {\n    setTimeout(() => {\n      const resultItem: any = document\n        .getElementsByTagName('igo-search-results-item')\n        .item(0);\n      if (resultItem) {\n        resultItem.click();\n      }\n    }, 1);\n  }\n\n  private readFocusFirst() {\n    if (this.routeParams['sf'] === '1' && this.termDefinedInUrl) {\n      const entities$$ = this.searchStore.stateView.all$()\n        .pipe(\n          skipWhile((entities) => entities.length === 0),\n          debounceTime(500),\n          take(1)\n        )\n        .subscribe((entities) => {\n          entities$$.unsubscribe();\n          if (entities.length && !this.termDefinedInUrlTriggered) {\n            this.computeFocusFirst();\n            this.termDefinedInUrlTriggered = true;\n          }\n        });\n    }\n  }\n\n  private readSearchParams() {\n    if (this.routeParams['search']) {\n      this.termDefinedInUrl = true;\n      if (this.routeParams['exactMatch'] === '1') {\n        this.searchState.activateCustomFilterTermStrategy();\n      }\n      if (this.routeParams['search'] && !this.routeParams['zoom'] && this.routeParams['sf'] !== '1') {\n        const entities$$ = this.searchStore.stateView.all$()\n          .pipe(\n            skipWhile((entities) => entities.length === 0),\n            debounceTime(500),\n            take(1)\n          )\n          .subscribe((entities) => {\n            entities$$.unsubscribe();\n            const searchResultsOlFeatures = entities\n              .filter(e => e.entity.meta.dataType === FEATURE)\n              .map((entity: EntityRecord<SearchResult>) =>\n                new olFormatGeoJSON().readFeature(entity.entity.data, {\n                  dataProjection: entity.entity.data.projection,\n                  featureProjection: this.map.projection\n                })\n              );\n            const totalExtent = computeOlFeaturesExtent(this.map, searchResultsOlFeatures);\n            this.map.viewController.zoomToExtent(totalExtent);\n          });\n      }\n      this.searchBarTerm = this.routeParams['search'];\n    }\n    if (this.routeParams['searchGeom'] === '1') {\n      this.searchState.searchResultsGeometryEnabled$.next(true);\n    }\n  }\n\n  private readToolParams() {\n    if (this.routeParams['tool']) {\n      this.matDialogRef$.pipe(\n        skipWhile(r => r !== undefined),\n        first()\n      ).subscribe(matDialogOpened => {\n        if (!matDialogOpened) {\n          this.toolbox.activateTool(this.routeParams['tool']);\n        }\n      });\n    }\n\n    if (this.routeParams['sidenav'] === '1') {\n      setTimeout(() => {\n        this.openSidenav();\n      }, 250);\n    }\n\n    if (this.routeParams['routing']) {\n      let routingCoordLoaded = false;\n      const stopCoords = this.routeParams['routing'].split(';');\n      const routingOptions = this.routeParams['routingOptions'];\n      let resultSelection: number;\n      if (routingOptions) {\n        resultSelection = parseInt(routingOptions.split('result:')[1], 10);\n      }\n      this.directionState.stopsStore.storeInitialized$\n        .pipe(skipWhile(init => !init), first())\n        .subscribe((init: boolean) => {\n          if (init && !routingCoordLoaded) {\n            routingCoordLoaded = true;\n            stopCoords.map((coord, i) => {\n              if (i > 1) {\n                addStopToStore(this.directionState.stopsStore);\n              }\n            });\n            setTimeout(() => {\n              stopCoords.map((coord, i) => {\n                const stop = this.directionState.stopsStore.all().find(e => e.position === i);\n                stop.text = coord;\n                stop.coordinates = coord.split(',');\n                this.directionState.stopsStore.update(stop);\n              });\n            }, this.directionState.debounceTime * 1.25); // this delay is due to the default component debounce time\n          }\n        });\n      // zoom to active route\n      this.directionState.routesFeatureStore.count$\n        .pipe(skipWhile(c => c < 1), first())\n        .subscribe(c => {\n          if (c >= 1) {\n            this.directionState.zoomToActiveRoute$.next();\n          }\n        });\n      // select the active route by url controls\n      this.directionState.routesFeatureStore.count$\n        .pipe(skipWhile(c => c < 2), first())\n        .subscribe(() => {\n          if (resultSelection) {\n            this.directionState.routesFeatureStore.entities$.value.map(d => d.properties.active = false);\n            this.directionState.routesFeatureStore.entities$.value[resultSelection].properties.active = true;\n            this.directionState.zoomToActiveRoute$.next();\n          }\n        });\n    }\n  }\n\n  private readLayersQueryParams(params: Params) {\n    this.readLayersQueryParamsByType(params, 'wms');\n    this.readLayersQueryParamsByType(params, 'wmts');\n    this.readLayersQueryParamsByType(params, 'arcgisrest');\n    this.readLayersQueryParamsByType(params, 'imagearcgisrest');\n    this.readLayersQueryParamsByType(params, 'tilearcgisrest');\n    this.readVectorQueryParams(params);\n  }\n\n  getQueryParam(name, url) {\n    let paramValue;\n    if (url.includes('?')) {\n      const httpParams = new HttpParams({ fromString: url.split('?')[1] });\n      paramValue = httpParams.get(name);\n    }\n    return paramValue;\n  }\n\n  private readLayersQueryParamsByType(params: Params, type) {\n    let nameParamLayersKey;\n    let urlsKey;\n    switch (type) {\n      case 'wms':\n        if ((params['layers'] || params['wmsLayers']) && params['wmsUrl']) {\n          urlsKey = 'wmsUrl';\n          nameParamLayersKey = params['wmsLayers'] ? 'wmsLayers' : 'layers'; // for maintain compatibility\n        }\n        break;\n      case 'wmts':\n        if (params['wmtsLayers'] && params['wmtsUrl']) {\n          urlsKey = 'wmtsUrl';\n          nameParamLayersKey = 'wmtsLayers';\n        }\n        break;\n      case 'arcgisrest':\n        if (params['arcgisLayers'] && params['arcgisUrl']) {\n          urlsKey = 'arcgisUrl';\n          nameParamLayersKey = 'arcgisLayers';\n        }\n        break;\n      case 'imagearcgisrest':\n        if (params['iarcgisLayers'] && params['iarcgisUrl']) {\n          urlsKey = 'iarcgisUrl';\n          nameParamLayersKey = 'iarcgisLayers';\n        }\n        break;\n      case 'tilearcgisrest':\n        if (params['tarcgisLayers'] && params['tarcgisUrl']) {\n          urlsKey = 'tarcgisUrl';\n          nameParamLayersKey = 'tarcgisLayers';\n        }\n        break;\n    }\n    if (!nameParamLayersKey || !urlsKey) {\n      return;\n    }\n    const layersByService = params[nameParamLayersKey].split('),(');\n    const urls = params[urlsKey].split(',');\n\n    let cnt = 0;\n    urls.forEach((urlSrc) => {\n      let url = urlSrc;\n      const version =\n        this.getQueryParam('VERSION', url) ||\n        this.getQueryParam('version', url) ||\n        undefined;\n      if (version) {\n        url = url.replace('VERSION=' + version, '').replace('version=' + version, '');\n      }\n\n      const currentLayersByService = this.extractLayersByService(\n        layersByService[cnt]\n      );\n      currentLayersByService.forEach((layer) => {\n        const layerFromUrl = layer.split(':igoz');\n        const layerOptions = ObjectUtils.removeUndefined({\n          type,\n          url: url,\n          layer: layerFromUrl[0],\n          params: type === 'wms' ? { LAYERS: layerFromUrl[0] } : undefined\n        });\n        const id = generateIdFromSourceOptions(layerOptions);\n        const visibility = this.computeLayerVisibilityFromUrl(params, id);\n        this.addLayerFromURL(\n          url,\n          layerFromUrl[0],\n          type,\n          version,\n          visibility,\n          layerFromUrl[1] ? parseInt(layerFromUrl[1], 10) : undefined\n        );\n      });\n      cnt += 1;\n    });\n  }\n\n  private readVectorQueryParams(params: Params) {\n    if (params['vector']) {\n      const url = params['vector'] as string;\n      const lastIndex = url.lastIndexOf('/');\n      const fileName = url.slice(lastIndex + 1, url.length);\n\n      this.http.get(`${url}`, { responseType: 'blob' }).subscribe((data) => {\n        const file = new File([data], fileName, {\n          type: data.type,\n          lastModified: Date.now()\n        });\n        this.importService.import(file).subscribe(\n          (features: Feature[]) => this.onFileImportSuccess(file, features),\n          (error: Error) => this.onFileImportError(file, error)\n        );\n      });\n    }\n  }\n\n  private onFileImportSuccess(file: File, features: Feature[]) {\n    handleFileImportSuccess(\n      file,\n      features,\n      this.map,\n      this.messageService,\n      this.languageService\n    );\n  }\n\n  private onFileImportError(file: File, error: Error) {\n    handleFileImportError(\n      file,\n      error,\n      this.messageService,\n      this.languageService\n    );\n  }\n\n  private extractLayersByService(layersByService: string): any[] {\n    let outLayersByService = layersByService;\n    outLayersByService = outLayersByService.startsWith('(')\n      ? outLayersByService.substr(1)\n      : outLayersByService;\n    outLayersByService = outLayersByService.endsWith(')')\n      ? outLayersByService.slice(0, -1)\n      : outLayersByService;\n    return outLayersByService.split(',');\n  }\n  private addLayerFromURL(\n    url: string,\n    name: string,\n    type: 'wms' | 'wmts' | 'arcgisrest' | 'imagearcgisrest' | 'tilearcgisrest',\n    version: string,\n    visibility: boolean = true,\n    zIndex: number\n  ) {\n    if (!this.contextLoaded) {\n      return;\n    }\n    const commonSourceOptions = {\n      optionsFromCapabilities: true,\n      optionsFromApi: true,\n      crossOrigin: true,\n      type,\n      url\n    };\n    const arcgisClause = (type === 'arcgisrest' || type === 'imagearcgisrest' || type === 'tilearcgisrest');\n    let sourceOptions = {\n      version: type === 'wmts' ? '1.0.0' : undefined,\n      queryable: arcgisClause ? true : false,\n      queryFormat: arcgisClause ? 'esrijson' : undefined,\n      layer: name\n    };\n    if (type === 'wms') {\n      sourceOptions = { params: { LAYERS: name, VERSION: version } } as any;\n    }\n\n    sourceOptions = ObjectUtils.removeUndefined(Object.assign({}, sourceOptions, commonSourceOptions));\n\n    this.addedLayers$$.push(\n      this.layerService\n        .createAsyncLayer({\n          zIndex: zIndex,\n          visible: visibility,\n          sourceOptions\n        })\n        .subscribe((l) => {\n          this.map.addLayer(l);\n        })\n    );\n  }\n\n  private computeLayerVisibilityFromUrl(\n    params: Params,\n    currentLayerid: string\n  ): boolean {\n    const queryParams = params;\n    let visible = true;\n    if (!queryParams || !currentLayerid) {\n      return visible;\n    }\n    let visibleOnLayersParams = '';\n    let visibleOffLayersParams = '';\n    let visiblelayers: string[] = [];\n    let invisiblelayers: string[] = [];\n    if (queryParams['visiblelayers']) {\n      visibleOnLayersParams = queryParams['visiblelayers'];\n    }\n    if (queryParams['invisiblelayers']) {\n      visibleOffLayersParams = queryParams['invisiblelayers'];\n    }\n\n    /* This order is important because to control whichever\n     the order of * param. First whe open and close everything.*/\n    if (visibleOnLayersParams === '*') {\n      visible = true;\n    }\n    if (visibleOffLayersParams === '*') {\n      visible = false;\n    }\n\n    // After, managing named layer by id (context.json OR id from datasource)\n    visiblelayers = visibleOnLayersParams.split(',');\n    invisiblelayers = visibleOffLayersParams.split(',');\n    if (visiblelayers.indexOf(currentLayerid) > -1 || visiblelayers.indexOf(currentLayerid.toString()) > -1) {\n      visible = true;\n    }\n    if (invisiblelayers.indexOf(currentLayerid) > -1 || invisiblelayers.indexOf(currentLayerid.toString()) > -1) {\n      visible = false;\n    }\n    return visible;\n  }\n\n  private initWelcomeWindow(): void {\n    if (this.auth?.url) {\n      this.authService.logged$.subscribe((logged) => {\n        if (logged) {\n          this.createWelcomeWindow();\n        }\n      });\n    } else {\n      this.createWelcomeWindow();\n    }\n  }\n\n  private createWelcomeWindow(): void {\n    if (this.welcomeWindowService.hasWelcomeWindow()) {\n      const welcomWindowConfig: MatDialogConfig = this.welcomeWindowService.getConfig();\n\n      this.matDialogRef$.next(\n          this.dialogWindow.open(\n          WelcomeWindowComponent,\n          welcomWindowConfig\n        ));\n\n        this.matDialogRef$.value.afterClosed().subscribe((result) => {\n        this.welcomeWindowService.afterClosedWelcomeWindow();\n        this.matDialogRef$.next(undefined);\n      });\n    }\n  }\n\n  private getFeatureIsSameActiveWks(feature: Feature): boolean {\n    if (this.workspace) {\n      const featureTitle = feature.meta.sourceTitle;\n      const wksTitle = this.workspace.title;\n      if (wksTitle === featureTitle) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n    return false;\n  }\n\n  private getWksActiveOpenInResolution(): boolean {\n    if(this.workspace) {\n      const activeWks = this.workspace as WfsWorkspace;\n      if(activeWks.active && activeWks.inResolutionRange$.value && this.workspaceState.workspacePanelExpanded) {\n        return true;\n      }\n    }\n    return false;\n   }\n\n  refreshRelationsWorkspace(relationLayers: ImageLayer[] | VectorLayer[]) {\n    if (relationLayers?.length) {\n      for (const layer of relationLayers) {\n        const relationWorkspace = this.workspaceStore.all().find(workspace => layer.options.workspace.workspaceId.includes(workspace.id));\n        relationWorkspace?.meta.tableTemplate.columns.forEach(col => {\n          // Update domain list\n          if (col.type === 'list' || col.type === 'autocomplete') {\n            this.editionWorkspaceService.getDomainValues(col.relation.table).subscribe(result => {\n              col.domainValues = result;\n            });\n          }\n        });\n      }\n    }\n  }\n}\n","<igo-spinner igoSpinnerActivity></igo-spinner>\n\n<igo-auth-form *ngIf=\"authConfig && authConfig.url\"></igo-auth-form>\n\n<app-portal igoStopDropPropagation></app-portal>\n","import './portal.variables.scss';\n\nimport {\n  trigger,\n  state,\n  style,\n  transition,\n  animate,\n  AnimationTriggerMetadata\n} from '@angular/animations';\n\nexport function expansionPanelAnimation(): AnimationTriggerMetadata[] {\n  return [\n    trigger('expansionPanelSize', [\n      state(\n        'full',\n        style({\n          left: '5px',\n          'max-width': '100%'\n        })\n      ),\n      state(\n        'notTriggered',\n        style({\n          left: '5px',\n          bottom: '5px',\n          'max-width': '100%'\n        })\n      ),\n      state(\n        'notVisible',\n        style({\n          display: 'none'\n        })\n      ),\n      state(\n        'mobile',\n        style({\n          left: 'calc(100% - 40px)',\n        })\n      ),\n      state(\n        'reduced',\n        style({\n          left: '405px',\n          'max-width': 'calc(100% - 405px)'\n        })\n      ),\n      state(\n        'reducedNotTriggered',\n        style({\n          left: '405px',\n          bottom: '5px',\n          'max-width': 'calc(100% - 405px)'\n        })\n      ),\n      transition('* => *', animate('100ms'))\n    ]),\n    trigger('toastOffsetY', [\n      state(\n        'true',\n        style({\n          bottom: '50px'\n        })\n      ),\n      state(\n        'false',\n        style({\n          bottom: '5px'\n        })\n      )\n    ])\n  ];\n}\n\nexport function toastPanelAnimation(): AnimationTriggerMetadata[] {\n  return [\n    trigger('toastPanelMobileSidenav', [\n      state(\n        'true',\n        style({\n          display: 'none'\n        })\n      ),\n      transition('* => void', animate('0ms')),\n      transition('* => *', animate('200ms'))\n    ]),\n    trigger('toastPanelOffsetX', [\n      state(\n        'fullStandard',\n        style({\n          left: '45%'\n        })\n      ),\n      state(\n        'standard',\n        style({\n          left: '50%'\n        })\n      ),\n      state(\n        'htmlDisplay',\n        style({\n          left: '40%'\n        })\n      ),\n      state(\n        'fullOffsetX',\n        style({\n          left: 'calc(45% + 202px)'\n        })\n      ),\n      state(\n        'standardOffsetX',\n        style({\n          left: 'calc(50% + 202px)'\n        })\n      ),\n      state(\n        'htmlDisplayOffsetX',\n        style({\n          left: 'calc(40% + 160px)'\n        })\n    ),\n      transition('fullStandard => fullOffsetX', animate('200ms')),\n      transition('fullOffsetX => fullStandard', animate('200ms')),\n      transition('standard => standardOffsetX', animate('200ms')),\n      transition('standardOffsetX => standard', animate('200ms')),\n      transition('htmlDisplay => htmlDisplayOffsetX', animate('200ms')),\n      transition('htmlDisplayOffsetX => htmlDisplay', animate('200ms')),\n      // transition('standard => htmlDisplay', animate('200ms')),\n      // transition('htmlDisplay => standard', animate('200ms')),\n    ]),\n    trigger('toastPanelOffsetY', [\n      state(\n        'noExpansion',\n        style({\n          bottom: '0'\n        })\n      ),\n      state(\n        'expansionAndToastOpened',\n        style({\n          bottom: '285px',\n          zIndex: '999'\n        })\n      ),\n      state(\n        'expansionAndToastClosed',\n        style({\n          bottom: '285px',\n          zIndex: '5'\n        })\n      ),\n      state(\n        'expansionMaximizedAndToastOpened',\n        style({\n          bottom: '500px', // workspace full size\n          zIndex: '999'\n        })\n      ),\n      state(\n        'expansionMaximizedAndToastClosed',\n        style({\n          bottom: '500px', // workspace full size\n          zIndex: '5'\n        })\n      ),\n    transition('noExpansion => noExpansion', animate('10ms')),\n    transition('expansionAndToastOpened => expansionAndToastOpened', animate('200ms')),\n    transition('expansionAndToastClosed => expansionAndToastClosed', animate('200ms')),\n    transition('expansionMaximizedAndToastOpened => expansionMaximizedAndToastOpened', animate('200ms')),\n    transition('expansionMaximizedAndToastClosed => expansionMaximizedAndToastClosed', animate('200ms')),\n       ])\n  ];\n}\n\nexport function controlsAnimations(): AnimationTriggerMetadata[] {\n  return [\n    trigger('controlsOffsetY', [\n      state('close', style({})),\n      state(\n        'firstRowFromBottom',\n        style({\n          bottom: '5px'\n        })\n      ),\n      state(\n        'firstRowFromBottom-expanded',\n        style({\n          bottom: '285px'\n        })\n      ),\n      state(\n        'firstRowFromBottom-expanded-maximized',\n        style({\n          bottom: '500px'\n        })\n      ),\n      state(\n        'secondRowFromBottom',\n        style({\n          bottom: '47px'\n        })\n      ),\n      state(\n        'thirdRowFromBottom',\n        style({\n          bottom: '104px'\n        })\n      ),\n      state(\n        '',\n        style({\n          bottom: 'calc(285px)'\n        })\n      ),\n      state(\n        'secondRowFromBottom-expanded',\n        style({\n          bottom: 'calc(285px + 52px)'\n        })\n      ),\n      state(\n        'thirdRowFromBottom-expanded',\n        style({\n          bottom: 'calc(285px + 104px)'\n        })\n      ),\n      transition('* => *', animate('200ms'))\n    ]),\n    trigger('mobileOffsetY', [\n      state(\n        'low',\n        style({\n          bottom: '50px'\n        })\n      ),\n      transition('* => *', animate('200ms'))\n    ])\n  ];\n}\n\nexport function controlSlideX(): AnimationTriggerMetadata {\n  return trigger('controlStateX', [\n    state(\n      'left',\n      style({\n        left: '60px'\n      })\n    ),\n    state(\n      'right',\n      style({\n        left: '465px'\n      })\n    ),\n    transition('* => *', animate('200ms'))\n  ]);\n}\n\nexport function controlSlideY(): AnimationTriggerMetadata {\n  return trigger('controlStateY', [\n    state('close', style({})),\n    state(\n      'firstRowFromBottom',\n      style({\n        bottom: '2px',\n        'margin-left': '0px'\n      })\n    ),\n    state(\n      'firstRowFromBottom-expanded',\n      style({\n        bottom: '285px',\n        'margin-left': '-55px'\n      })\n    ),\n    state(\n      'firstRowFromBottom-expanded-maximized',\n      style({\n        bottom: '500px', // workspace full size\n        'margin-left': '-55px'\n      })\n    ),\n    transition('* => *', animate('200ms'))\n  ]);\n}\n\nexport function mapSlideX(): AnimationTriggerMetadata {\n  return trigger('mapStateX', [\n    state(\n      'left',\n      style({\n        left: '0'\n      })\n    ),\n    state(\n      'right',\n      style({\n        left: '0'\n      })\n    ),\n    transition('* => *', animate('200ms'))\n  ]);\n}\nexport function mapSlideY(): AnimationTriggerMetadata {\n  return trigger('mapStateY', [\n    state(\n      '*',\n      style({\n        bottom: '0'\n      })\n    ),\n    transition('* => *', animate('200ms'))\n  ]);\n}\n","import { Component, Renderer2 } from '@angular/core';\nimport { Title, Meta } from '@angular/platform-browser';\nimport { zip } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport { userAgent } from '@igo2/utils';\nimport {\n  LanguageService,\n  ConfigService,\n  AnalyticsService,\n  MessageService\n} from '@igo2/core';\nimport { AuthOptions } from '@igo2/auth';\nimport { AnalyticsListenerService } from '@igo2/integration';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent {\n  public authConfig: AuthOptions;\n  private themeClass = 'blue-theme';\n\n  constructor(\n    protected languageService: LanguageService,\n    private configService: ConfigService,\n    private analyticsService: AnalyticsService,\n    private analyticsListenerService: AnalyticsListenerService,\n    private renderer: Renderer2,\n    private titleService: Title,\n    private metaService: Meta,\n    private messageService: MessageService\n  ) {\n   this.languageService.translate.getTranslation(this.languageService.getLanguage()).subscribe();\n\n    this.authConfig = this.configService.getConfig('auth');\n\n    this.readTitleConfig();\n    this.readThemeConfig();\n    this.readDescriptionConfig();\n\n    this.analyticsListenerService.listen();\n\n    this.detectOldBrowser();\n  }\n\n  private readTitleConfig() {\n    this.languageService.translate.get(this.configService.getConfig('title')).subscribe(title => {\n      if (title) {\n        this.titleService.setTitle(title);\n        this.metaService.addTag({ name: 'title', content: title });\n      }\n    });\n  }\n\n  private readThemeConfig() {\n    const theme = this.configService.getConfig('theme') || this.themeClass;\n    if (theme) {\n      this.renderer.addClass(document.body, theme);\n    }\n  }\n\n  private readDescriptionConfig() {\n    const description = this.configService.getConfig('description');\n    if (description) {\n      this.metaService.addTag({ name: 'description', content: description });\n    }\n  }\n\n  private detectOldBrowser() {\n    const oldBrowser = userAgent.satisfies({\n      ie: '<=11',\n      chrome: '<64',\n      firefox: '<60',\n      safari: '<=11'\n    });\n\n    if (oldBrowser) {\n      const translate = this.languageService.translate;\n      const title$ = translate.get('oldBrowser.title');\n      const message$ = translate.get('oldBrowser.message');\n      zip(title$, message$)\n        .pipe(\n          map(([title, message]) => ({\n            title,\n            message\n          }))\n        )\n        .subscribe((rep) =>\n          this.messageService.alert(rep.message, rep.title, {\n            timeOut: 15000\n          })\n        );\n    }\n  }\n}\n","import { BrowserModule, HammerModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\n\nimport {\n  provideConfigOptions,\n  IgoMessageModule,\n  IgoGestureModule,\n  RouteService\n} from '@igo2/core';\nimport { IgoSpinnerModule, IgoStopPropagationModule } from '@igo2/common';\nimport { IgoAuthModule } from '@igo2/auth';\nimport {\n  provideIChercheSearchSource,\n  provideIChercheReverseSearchSource,\n  provideNominatimSearchSource,\n  provideCoordinatesReverseSearchSource,\n  provideILayerSearchSource,\n  provideStoredQueriesSearchSource,\n  provideOsrmDirectionsSource,\n  provideOptionsApi,\n  provideCadastreSearchSource,\n  provideStyleListOptions\n} from '@igo2/geo';\n\nimport { environment } from '../environments/environment';\nimport { PortalModule } from './pages';\nimport { AppComponent } from './app.component';\n\n@NgModule({\n  declarations: [AppComponent],\n  imports: [\n    BrowserModule,\n    BrowserAnimationsModule,\n    RouterModule.forRoot([]),\n    IgoAuthModule.forRoot(),\n    IgoGestureModule.forRoot(),\n    IgoMessageModule,\n    IgoSpinnerModule,\n    IgoStopPropagationModule,\n    PortalModule,\n    HammerModule\n  ],\n  providers: [\n    provideConfigOptions({\n      default: environment.igo,\n      path: './config/config.json'\n    }),\n    RouteService,\n    provideNominatimSearchSource(),\n    provideIChercheSearchSource(),\n    provideIChercheReverseSearchSource(),\n    provideCoordinatesReverseSearchSource(),\n    provideILayerSearchSource(),\n    provideStoredQueriesSearchSource(),\n    provideOsrmDirectionsSource(),\n    provideOptionsApi(),\n    provideCadastreSearchSource(),\n    provideStyleListOptions({\n      path: './assets/list-style.json'\n    })\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule {}\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nimport 'hammerjs';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic()\n  .bootstrapModule(AppModule)\n  .catch(err => console.log(err));\n","var map = {\n\t\"./en.auth.json\": 44505,\n\t\"./en.common.json\": 13841,\n\t\"./en.context.json\": 2977,\n\t\"./en.core.json\": 8982,\n\t\"./en.geo.json\": 49853,\n\t\"./en.integration.json\": 38430,\n\t\"./en.json\": 90642,\n\t\"./fr.auth.json\": 13788,\n\t\"./fr.common.json\": 55144,\n\t\"./fr.context.json\": 65742,\n\t\"./fr.core.json\": 38783,\n\t\"./fr.geo.json\": 78405,\n\t\"./fr.integration.json\": 66409,\n\t\"./fr.json\": 60863\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 22356;","var map = {\n\t\"./af\": 62275,\n\t\"./af.js\": 62275,\n\t\"./ar\": 90857,\n\t\"./ar-dz\": 11218,\n\t\"./ar-dz.js\": 11218,\n\t\"./ar-kw\": 14754,\n\t\"./ar-kw.js\": 14754,\n\t\"./ar-ly\": 66680,\n\t\"./ar-ly.js\": 66680,\n\t\"./ar-ma\": 92178,\n\t\"./ar-ma.js\": 92178,\n\t\"./ar-sa\": 56522,\n\t\"./ar-sa.js\": 56522,\n\t\"./ar-tn\": 95682,\n\t\"./ar-tn.js\": 95682,\n\t\"./ar.js\": 90857,\n\t\"./az\": 70164,\n\t\"./az.js\": 70164,\n\t\"./be\": 79774,\n\t\"./be.js\": 79774,\n\t\"./bg\": 60947,\n\t\"./bg.js\": 60947,\n\t\"./bm\": 21832,\n\t\"./bm.js\": 21832,\n\t\"./bn\": 89650,\n\t\"./bn-bd\": 74477,\n\t\"./bn-bd.js\": 74477,\n\t\"./bn.js\": 89650,\n\t\"./bo\": 66005,\n\t\"./bo.js\": 66005,\n\t\"./br\": 98492,\n\t\"./br.js\": 98492,\n\t\"./bs\": 70534,\n\t\"./bs.js\": 70534,\n\t\"./ca\": 52061,\n\t\"./ca.js\": 52061,\n\t\"./cs\": 84737,\n\t\"./cs.js\": 84737,\n\t\"./cv\": 61167,\n\t\"./cv.js\": 61167,\n\t\"./cy\": 77996,\n\t\"./cy.js\": 77996,\n\t\"./da\": 9528,\n\t\"./da.js\": 9528,\n\t\"./de\": 14540,\n\t\"./de-at\": 49430,\n\t\"./de-at.js\": 49430,\n\t\"./de-ch\": 67978,\n\t\"./de-ch.js\": 67978,\n\t\"./de.js\": 14540,\n\t\"./dv\": 83426,\n\t\"./dv.js\": 83426,\n\t\"./el\": 6616,\n\t\"./el.js\": 6616,\n\t\"./en-au\": 63816,\n\t\"./en-au.js\": 63816,\n\t\"./en-ca\": 32162,\n\t\"./en-ca.js\": 32162,\n\t\"./en-gb\": 83305,\n\t\"./en-gb.js\": 83305,\n\t\"./en-ie\": 61954,\n\t\"./en-ie.js\": 61954,\n\t\"./en-il\": 43060,\n\t\"./en-il.js\": 43060,\n\t\"./en-in\": 59923,\n\t\"./en-in.js\": 59923,\n\t\"./en-nz\": 13540,\n\t\"./en-nz.js\": 13540,\n\t\"./en-sg\": 16505,\n\t\"./en-sg.js\": 16505,\n\t\"./eo\": 41907,\n\t\"./eo.js\": 41907,\n\t\"./es\": 86640,\n\t\"./es-do\": 41246,\n\t\"./es-do.js\": 41246,\n\t\"./es-mx\": 56131,\n\t\"./es-mx.js\": 56131,\n\t\"./es-us\": 36430,\n\t\"./es-us.js\": 36430,\n\t\"./es.js\": 86640,\n\t\"./et\": 62551,\n\t\"./et.js\": 62551,\n\t\"./eu\": 32711,\n\t\"./eu.js\": 32711,\n\t\"./fa\": 54572,\n\t\"./fa.js\": 54572,\n\t\"./fi\": 33390,\n\t\"./fi.js\": 33390,\n\t\"./fil\": 87860,\n\t\"./fil.js\": 87860,\n\t\"./fo\": 48216,\n\t\"./fo.js\": 48216,\n\t\"./fr\": 99291,\n\t\"./fr-ca\": 98527,\n\t\"./fr-ca.js\": 98527,\n\t\"./fr-ch\": 58407,\n\t\"./fr-ch.js\": 58407,\n\t\"./fr.js\": 99291,\n\t\"./fy\": 47054,\n\t\"./fy.js\": 47054,\n\t\"./ga\": 49540,\n\t\"./ga.js\": 49540,\n\t\"./gd\": 73917,\n\t\"./gd.js\": 73917,\n\t\"./gl\": 51486,\n\t\"./gl.js\": 51486,\n\t\"./gom-deva\": 56245,\n\t\"./gom-deva.js\": 56245,\n\t\"./gom-latn\": 48868,\n\t\"./gom-latn.js\": 48868,\n\t\"./gu\": 59652,\n\t\"./gu.js\": 59652,\n\t\"./he\": 89019,\n\t\"./he.js\": 89019,\n\t\"./hi\": 42040,\n\t\"./hi.js\": 42040,\n\t\"./hr\": 63402,\n\t\"./hr.js\": 63402,\n\t\"./hu\": 79322,\n\t\"./hu.js\": 79322,\n\t\"./hy-am\": 27609,\n\t\"./hy-am.js\": 27609,\n\t\"./id\": 57942,\n\t\"./id.js\": 57942,\n\t\"./is\": 98275,\n\t\"./is.js\": 98275,\n\t\"./it\": 73053,\n\t\"./it-ch\": 4378,\n\t\"./it-ch.js\": 4378,\n\t\"./it.js\": 73053,\n\t\"./ja\": 46176,\n\t\"./ja.js\": 46176,\n\t\"./jv\": 679,\n\t\"./jv.js\": 679,\n\t\"./ka\": 92726,\n\t\"./ka.js\": 92726,\n\t\"./kk\": 72953,\n\t\"./kk.js\": 72953,\n\t\"./km\": 86957,\n\t\"./km.js\": 86957,\n\t\"./kn\": 59181,\n\t\"./kn.js\": 59181,\n\t\"./ko\": 47148,\n\t\"./ko.js\": 47148,\n\t\"./ku\": 27752,\n\t\"./ku.js\": 27752,\n\t\"./ky\": 65675,\n\t\"./ky.js\": 65675,\n\t\"./lb\": 41263,\n\t\"./lb.js\": 41263,\n\t\"./lo\": 65746,\n\t\"./lo.js\": 65746,\n\t\"./lt\": 11143,\n\t\"./lt.js\": 11143,\n\t\"./lv\": 38753,\n\t\"./lv.js\": 38753,\n\t\"./me\": 44054,\n\t\"./me.js\": 44054,\n\t\"./mi\": 31573,\n\t\"./mi.js\": 31573,\n\t\"./mk\": 30202,\n\t\"./mk.js\": 30202,\n\t\"./ml\": 68523,\n\t\"./ml.js\": 68523,\n\t\"./mn\": 79794,\n\t\"./mn.js\": 79794,\n\t\"./mr\": 56681,\n\t\"./mr.js\": 56681,\n\t\"./ms\": 56975,\n\t\"./ms-my\": 39859,\n\t\"./ms-my.js\": 39859,\n\t\"./ms.js\": 56975,\n\t\"./mt\": 3691,\n\t\"./mt.js\": 3691,\n\t\"./my\": 5152,\n\t\"./my.js\": 5152,\n\t\"./nb\": 7607,\n\t\"./nb.js\": 7607,\n\t\"./ne\": 21526,\n\t\"./ne.js\": 21526,\n\t\"./nl\": 86368,\n\t\"./nl-be\": 40076,\n\t\"./nl-be.js\": 40076,\n\t\"./nl.js\": 86368,\n\t\"./nn\": 68420,\n\t\"./nn.js\": 68420,\n\t\"./oc-lnc\": 51906,\n\t\"./oc-lnc.js\": 51906,\n\t\"./pa-in\": 94504,\n\t\"./pa-in.js\": 94504,\n\t\"./pl\": 54721,\n\t\"./pl.js\": 54721,\n\t\"./pt\": 74645,\n\t\"./pt-br\": 54548,\n\t\"./pt-br.js\": 54548,\n\t\"./pt.js\": 74645,\n\t\"./ro\": 71977,\n\t\"./ro.js\": 71977,\n\t\"./ru\": 26042,\n\t\"./ru.js\": 26042,\n\t\"./sd\": 78849,\n\t\"./sd.js\": 78849,\n\t\"./se\": 27739,\n\t\"./se.js\": 27739,\n\t\"./si\": 50084,\n\t\"./si.js\": 50084,\n\t\"./sk\": 92449,\n\t\"./sk.js\": 92449,\n\t\"./sl\": 23086,\n\t\"./sl.js\": 23086,\n\t\"./sq\": 33139,\n\t\"./sq.js\": 33139,\n\t\"./sr\": 30607,\n\t\"./sr-cyrl\": 30063,\n\t\"./sr-cyrl.js\": 30063,\n\t\"./sr.js\": 30607,\n\t\"./ss\": 40131,\n\t\"./ss.js\": 40131,\n\t\"./sv\": 21665,\n\t\"./sv.js\": 21665,\n\t\"./sw\": 5642,\n\t\"./sw.js\": 5642,\n\t\"./ta\": 33622,\n\t\"./ta.js\": 33622,\n\t\"./te\": 74825,\n\t\"./te.js\": 74825,\n\t\"./tet\": 48336,\n\t\"./tet.js\": 48336,\n\t\"./tg\": 39238,\n\t\"./tg.js\": 39238,\n\t\"./th\": 99463,\n\t\"./th.js\": 99463,\n\t\"./tk\": 39986,\n\t\"./tk.js\": 39986,\n\t\"./tl-ph\": 29672,\n\t\"./tl-ph.js\": 29672,\n\t\"./tlh\": 40043,\n\t\"./tlh.js\": 40043,\n\t\"./tr\": 51212,\n\t\"./tr.js\": 51212,\n\t\"./tzl\": 50110,\n\t\"./tzl.js\": 50110,\n\t\"./tzm\": 80482,\n\t\"./tzm-latn\": 38309,\n\t\"./tzm-latn.js\": 38309,\n\t\"./tzm.js\": 80482,\n\t\"./ug-cn\": 42495,\n\t\"./ug-cn.js\": 42495,\n\t\"./uk\": 54157,\n\t\"./uk.js\": 54157,\n\t\"./ur\": 80984,\n\t\"./ur.js\": 80984,\n\t\"./uz\": 64141,\n\t\"./uz-latn\": 43662,\n\t\"./uz-latn.js\": 43662,\n\t\"./uz.js\": 64141,\n\t\"./vi\": 12607,\n\t\"./vi.js\": 12607,\n\t\"./x-pseudo\": 66460,\n\t\"./x-pseudo.js\": 66460,\n\t\"./yo\": 92948,\n\t\"./yo.js\": 92948,\n\t\"./zh-cn\": 62658,\n\t\"./zh-cn.js\": 62658,\n\t\"./zh-hk\": 39352,\n\t\"./zh-hk.js\": 39352,\n\t\"./zh-mo\": 38274,\n\t\"./zh-mo.js\": 38274,\n\t\"./zh-tw\": 98451,\n\t\"./zh-tw.js\": 98451\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 46700;"]}