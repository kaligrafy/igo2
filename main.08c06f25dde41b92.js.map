{"version":3,"file":"main.08c06f25dde41b92.js","mappings":"yLAkCO,MAAMA,GAA2B,CACtCC,YAAY,EACZC,IAAK,CACHC,IAAK,CACHC,eAAe,EACfC,QAAS,CACPC,SAAS,EACTC,SAAS,EACTC,aAAc,+BAEhBC,IAAK,CACHH,SAAS,IAGbI,QAAS,CACPC,QAAS,CACP,CACEC,GAAI,YACJC,MAAO,aACPC,IAAK,6DAEP,CACEF,GAAI,QACJC,MAAO,iBACPC,IAAK,sDACLC,YAAY,KAIlBC,MAAO,CACLF,IAAK,eAEPG,aAAc,CACZH,IAAK,0CACLI,yBAA0B,2BAC1BC,wBAAyB,GACzBC,mBAAmB,GAErBC,SAAU,CACRC,OAAQ,aAEVC,gBAAiB,CACfC,cAAc,EACdC,iBAAkB,iCAEpBC,cAAe,CACbC,UAAW,CACTC,WAAW,GAEbC,cAAe,CACbD,WAAW,GAEbE,SAAU,CACRC,UAAW,8CACXC,MAAO,EACPC,OAAQ,CACNC,MAAO,MAGXC,mBAAoB,CAClBC,sBAAsB,GAExBC,gBAAiB,CACfD,sBAAsB,EACtBL,UAAW,6CACXC,MAAO,EACP1B,SAAS,GAEXgC,OAAQ,CACNP,UAAW,qDACXC,MAAO,EACPC,OAAQ,CACNC,MAAO,OAIbK,YAAa,CACX,CACEC,KAAM,aACNC,MAAO,iBACPC,IACE,qIAEFC,OAAQ,EAAC,OAAS,MAAO,SAAU,YAErC,CACEH,KAAM,YACNC,MAAO,cACPC,IACE,wIAEFC,OAAQ,CAAC,WAAY,YAAa,aAAc,gBAGpDC,mBAAoB,CAClBC,KAAM,CACJC,YAAa,UACbC,cAAe,GACfC,mBAAoB,UACpBC,UAAW,UACXC,YAAa,GACbC,YAAa,UACbC,cAAe,GACfC,YAAa,GAEfC,MAAO,CACLR,YAAa,UACbC,cAAe,EACfC,mBAAoB,UACpBC,UAAW,UACXC,YAAa,GACbC,YAAa,UACbC,cAAe,EACfC,YAAa,GAEfE,UAAW,CACTT,YAAa,UACbC,cAAe,EACfC,mBAAoB,UACpBC,UAAW,UACXC,YAAa,GACbC,YAAa,UACbC,cAAe,EACfC,YAAa,IAGjBG,kBAAmB,CACjBX,KAAM,CACJC,YAAa,UACbC,cAAe,GACfC,mBAAoB,UACpBC,UAAW,UACXC,YAAa,GACbC,YAAa,UACbC,cAAe,GACfC,YAAa,GAEfC,MAAO,CACLR,YAAa,UACbC,cAAe,EACfC,mBAAoB,UACpBC,UAAW,UACXC,YAAa,GACbC,YAAa,UACbC,cAAe,EACfC,YAAa,GAEfE,UAAW,CACTT,YAAa,UACbC,cAAe,EACfC,mBAAoB,UACpBC,UAAW,UACXC,YAAa,GACbC,YAAa,UACbC,cAAe,EACfC,YAAa,iGChLd,MAAMI,2CAAgB,0BAAhBA,gCALTC,gDCuBG,MAAMC,2CAAuB,0BAAvBA,gCAbTD,KACAE,KACAC,KACAC,MACAC,MACAC,MACAC,KACAC,KACAC,wBCMG,MAAMC,2CAAmB,0BAAnBA,gCAhBTV,KACAW,KACAR,KACAD,KACAK,KACAH,MACAI,KACAC,KACAA,KACAA,KACAG,MACAA,SCYG,MAAMC,2CAAgB,0BAAhBA,gCAjBTb,KACAG,KACAD,KACAY,KACAP,KACAC,KACAC,KACAA,KACAM,KACAN,KACAG,MACAH,KACAA,QCZG,MAAMO,2CAA+B,0BAA/BA,gCAVThB,KACAG,KACAD,KACAM,KACAC,KACAA,oCCaG,MAAMQ,2CAAsB,0BAAtBA,gCAdTT,KACAR,KACAkB,MACAC,KACAV,KACAA,KACAP,KACAK,KACAJ,KACAiB,SC+DG,MAAMC,2CAAY,0BAAZA,gCArCLrB,KACAO,KACAL,KACAC,KACAW,KACAK,KACAX,KACAI,MACAA,MACAA,MACAA,gBACAA,gBACAH,KACAA,KACAA,KACAG,MACAH,KACAA,KACAA,KACAA,KACAA,KACAa,KACArB,EACAS,EACAM,EACAH,EACAd,EACAgB,KACAA,KACAN,KACAA,KACAA,KACAQ,qXCzED,MAAMM,EAEXC,YACUC,EACAC,EACAC,GAFAC,eACAA,uBACAA,4BAJFA,oBAAyB,EAM3BH,EAAQI,WACVD,KAAKE,sBAET,CAEAC,kBACMH,KAAKH,QAAQI,cACfG,MAAS,MAAeC,QAAKC,MAAK,IAAIC,UAAU,IAAWC,kCACzD,IACE,MAAMC,QAAoBT,KAAKH,QAAQa,iBACvCC,QAAQC,IAAIH,EAAc,8BAAgC,wCACnDI,GACPF,QAAQG,MAAM,+BAAgCD,GAElD,GAEJ,CAEQE,iBACN,GAAIf,KAAKgB,cACP,OAEF,MAEMC,EAAU,GAFFjB,KAAKF,gBAAgBoB,UAAUC,QAAQ,4BACxCnB,KAAKF,gBAAgBoB,UAAUC,QAAQ,qBAEpDnB,KAAKD,qBAAqBqB,KAAKH,GAASZ,QAAKgB,MAAI,IAAMrB,KAAKgB,eAAgB,IAAOT,UAAWe,IACxFA,IACFtB,KAAKgB,eAAgB,EACjBO,OAAOC,UAAUC,OACnBC,SAASC,SAASC,UAElBC,MAAM,wIACNC,WAAW,KACT9B,KAAKe,gBAAc,EAClB,MAAM,EAIjB,CAEQb,uBACNF,KAAKH,QAAQkC,eAAexB,UAAUyB,IACpC,OAAQA,EAAIC,UACL,mBACHtB,QAAQC,IAAI,gCAAgCoB,EAAIE,QAAQC,QACxD,UACG,gBACHxB,QAAQC,IAAI,wBAAwBoB,EAAII,eAAeD,QACvDxB,QAAQC,IAAI,kCAAkCoB,EAAIK,cAAcF,QAChEnC,KAAKe,iBACL,UACG,8BACHJ,QAAQG,MAAM,kCAAkCkB,EAAIE,QAAQC,UAAUH,EAAIlB,SAC1E,EAGR,wCA/DWnB,GAAU2C,iEAAV3C,EAAU4C,QAAV5C,EAAU,qBAFT,4JCAP,MAAM6C,EAKX5C,YACU6C,EACAC,GADA1C,qBACAA,sBAJVA,qCAAiC,EAM/BA,KAAK2C,+BAAiC3C,KAAK4C,gCAC3C5C,KAAK6C,kBACP,CAEAA,mBACE7C,KAAK8C,QAAUC,OAAO/C,KAAK0C,eAAeM,IAAI,0BACzChD,KAAK8C,UACR9C,KAAK8C,QAAU,GAGjB9C,KAAK0C,eAAeO,IAAI,wBAA0BjD,KAAK8C,SAAW,GAClE9C,KAAK0C,eAAeO,IAClB,UACAjD,KAAKyC,cAAcS,UAAU,eAEjC,CAEAN,gCACE,SACE5C,KAAK0C,eAAeM,IAAI,YACxBhD,KAAK0C,eAAeM,IAAI,aACtBhD,KAAKyC,cAAcS,UAAU,eAMnC,CAEAC,mBACE,OACyD,IAAvDnD,KAAK0C,eAAeM,IAAI,4BAC+B,UAAvDhD,KAAK0C,eAAeM,IAAI,4BAGtBhD,KAAK8C,SACL9C,KAAKyC,cAAcS,UAAU,wCAM7BlD,KAAKyC,cAAcS,UAAU,4CAEzBlD,KAAK2C,mCANT3C,KAAK0C,eAAeO,IAAI,wBAAyB,GACjDjD,KAAK0C,eAAeU,OAAO,4BACpB,QAagE,IAAhEpD,KAAKyC,cAAcS,UAAU,gCAClClD,KAAK8C,QAAU9C,KAAKyC,cAAcS,UAAU,gCAC9ClD,KAAK0C,eAAeO,IAAI,2BAA2B,IAC5C,GAIJjD,KAAKyC,cAAcS,UAAU,gBACtC,CAEAA,YACE,MAAMG,EAAe,IAAI9D,KAEzB,SAAa+D,cAAe,EAC5BD,EAAaE,WAAY,EACzBF,EAAaG,SAAW,QAEjBH,CACT,CAEAI,2BACEzD,KAAK0C,eAAeO,IAAI,0BAA2BjD,KAAK0D,UAC1D,wCApFWlB,GAAoBF,oDAApBE,EAAoBD,QAApBC,EAAoB,qBAFnB,iECNdF,iBAAmD,kBAAnDA,CAAmD,QAG3CA,8BAAqCA,QACzCA,kBAEAA,iBAAO,aACsCA,yFAAuB,mDAAUA,uBAAc,GAA1FA,QACAA,8BACFA,UAGFA,kBACEA,gDAGFA,QAEAA,cACAA,kBAA8B,6BAK1BA,yDAAUA,6BAAoB,GAChCA,QAEFA,qBAAgFA,gCAA2CA,oCAxBrHA,iDAIyCA,sCAC3CA,gEAMFA,4CASEA,kEAI4EA,0DCf3E,MAAMqB,EAQX/D,YACSL,EACCqE,EACAnB,EACE3C,GAHHE,cACCA,4BACAA,qBACEA,uBAVZA,gBAAY,EACLA,+BACL6D,OAAG7D,KAAKyC,cAAcS,UAAU,wCAA0ClD,KAAKyC,cAAcS,UAAU,UAElGlD,WAAiC,IAAI8D,SAAgB,EAOxD,CAEJC,WACE/D,KAAKgE,aACP,CAEAC,qBACEjE,KAAKT,OAAO2E,UACd,CAEQF,cACN,IAAIG,EAAW,EACXC,GAAiB,EACjBC,EAAc,IAAIC,KAAKtE,KAAKyC,cAAcS,UAAU,wBAExD,MAAMqB,EAAuBvE,KAAKyC,cAAcS,UAAU,0BAG1D,GAAIqB,EAAsB,CACxB,MAAMC,EAAiB,IAAIF,KAAKC,GAC5BE,MAAMD,EAAeE,YACvB/D,QAAQC,IAAI,wDACZwD,GAAiB,IAEjBD,EAAW,EACXE,EAAcG,GAIlB,IAAIG,EAAoB,GAExB,GAAIP,EAAgB,CAClB,IAAIQ,EAAWP,EAAYK,UAAYP,EACnCS,EAAM,KACRA,EAAM,IAAMA,GAEd,IAAIC,EAAaR,EAAYS,WAAa,EACtCD,EAAQ,KACVA,EAAQ,IAAMA,GAGhBF,EAAoB,GADPN,EAAYU,iBACMF,KAASD,SAExCD,EAAoBJ,EAGtB,YAAKS,QAAUhF,KAAKF,gBAAgBoB,UAAU8B,IAAIhD,KAAKyC,cAAcS,UAAU,UAAY,IACxF7C,QACC4E,MAAI1J,GACKyE,KAAKF,gBAAgBoB,UAAUC,QAAQ,qBAAsB,CAClE5F,QACA2J,YAAalF,KAAKyC,cAAcS,UAAU,gBAAkB,GAC5DhB,QAASlC,KAAKyC,cAAcS,UAAU,gBAAkBlD,KAAKyC,cAAcS,UAAU,gBAAkB,GACvGmB,YAAaM,GAAqB,OAGtCpE,UAAW4E,GAAMnF,KAAKoF,MAAMC,KAAKF,IAE9BnF,KAAKoF,KAEd,CAEAE,eACEtF,KAAK4D,qBAAqBF,UAAY1D,KAAK0D,SAC7C,CAEA6B,cACMvF,KAAKgF,SACPhF,KAAKgF,QAAQQ,aAEjB,wCAnFW7B,GAAsBrB,uEAAtBqB,EAAsB8B,yfDZnCnD,iDAA8BA,sZEKxBA,4CACAA,sBCSC,MAAMoD,EAsBX9F,cAPUI,oBAAiB,IAAIsC,KAOhB,CApBXqD,eACF,OAAO3F,KAAK4F,SACd,CACID,aAASE,GACPA,IAAU7F,KAAK4F,YAInB5F,KAAK4F,UAAYC,EACjB7F,KAAK8F,eAAeC,KAAK/F,KAAK4F,WAChC,CAMII,uBACF,OAAOhG,KAAK2F,QACd,CAIAM,gBACEjG,KAAK2F,UAAY3F,KAAK2F,QACxB,wCA1BWD,EAA6B,0BAA7BA,EAA6BD,2mBDf1CnD,eAAK,UAALA,CAAK,cAEuBA,gCAAS4D,iBAAe,wBAG9C5D,6BACAA,6BACFA,UAGFA,iBACEA,SACFA,iBATEA,sFAEaA,mCACAA,4ZEYV,MAAM6D,EAsCXvG,cAvBSI,gBAAqB,EAWpBA,oBAAiB,IAAIsC,KAYhB,CApCXqD,eACF,OAAO3F,KAAK4F,SACd,CACID,aAASE,GACPA,IAAU7F,KAAK4F,YAInB5F,KAAK4F,UAAYC,EACjB7F,KAAK8F,eAAeC,KAAK/F,KAAK4F,WAChC,CAMIQ,oBACF,OAAOpG,KAAKqG,cACd,CACID,kBAAcP,GAChB7F,KAAKqG,eAAiBR,CACxB,CAMIG,uBACF,OAAOhG,KAAK2F,WAAa3F,KAAKsG,SAChC,CAGIC,2BACF,OAAOvG,KAAK2F,UAAY3F,KAAKsG,SAC/B,CAIAE,kBACExG,KAAK2F,UAAW,EAChB3F,KAAKoG,eAAgB,CACvB,wCA3CWD,EAAuB,0BAAvBA,EAAuBV,mkBClBpCnD,eAAK,UAALA,CAAK,oBAKCA,gCAAS4D,mBAAiB,GAC5B5D,QAEAA,wCAA4BA,yDAC1BA,SACFA,QAEAA,iBAGEA,WACFA,mBAZEA,wCAI0BA,sCAM1BA,kyCDCQ,CENP,SAASmE,GACdC,EAAW,QACXC,EAAQ,QACRC,EAAS,eAET,SAAOC,MAAQ,cAAe,IAC5BA,MACE,UACAA,MAAM,CACJC,QAAS,MACT,EAEJD,MACE,WACAA,MAAM,CACJC,QAAS,MACT,EAEJD,MAAW,mBAAiBA,MAAQ,GAAGH,KAAYC,KAASC,OAAS,EACrEC,MAAW,mBAAiBA,MAAQ,SAExC,CFfeJ,KAAcM,wFGMzBzE,qBAOEA,0DAASA,iBAAQ,yCACjBA,yDAMFA,iCATEA,oJAIAA,0EAA4D,yGAO9DA,qBAQEA,0DAASA,yBAAgB,wBACzBA,uBACFA,iCAREA,yEAAiE,uGAUnEA,qBAQEA,0DAASA,qBAAY,wBACrBA,uBACFA,iCAREA,0FAAgF,mGAUlFA,qBAKEA,0DAASA,wBAAe,yCAGxBA,uBACFA,iCAHEA,0HAEUA,wFAYVA,kCAGEA,sEAAmBA,0BAAsB,GAC3CA,iCAFEA,wFAIFA,iCAMEA,iEAAeA,uBAAmB,EAAlCA,CAAmC,6DAClBA,yBAAsB,GAAK,EAD5CA,CAAmC,4DAEnBA,wBAAoB,GAEtCA,iCAREA,mBAAW,gBAAXA,CAAW,eAAXA,CAAW,kCAAXA,CAAW,iEAxFjBA,uBAKEA,2DAASA,yBAAqB,EAA9BA,CAA+B,uDAEpBA,+BAA2B,wBAEtCA,2BAWAA,4BAgBAA,2BAYAA,2BAYAA,2BAUAA,oBAIEA,0DAASA,gBAAO,GAChBA,uBACFA,QAEAA,qBAEEA,0CAMAA,yCAWFA,mCA/FAA,mCAA6B,+BAA7BA,CAA6B,oGAU3BA,sCAAqB,cAArBA,CAAqB,cAArBA,CAAqB,wCAArBA,CAAqB,gBAArBA,CAAqB,wBASpBA,+CAgBAA,+CAYAA,+CAYDA,qCAoBGA,+CAMAA,2EAvFPA,uEACGA,uGAoGLA,kBAEAA,8DAAaA,sBAAkB,EAA/BA,CAAgC,yDAClBA,sBAAkB,EADhCA,CAAgC,sDAErBA,sBAAkB,EAF7BA,CAAgC,wDAGnBA,sBAAkB,GAE/BA,iCACAA,yCADaA,sCCtDN,MAAM0E,EA6NXpH,YACSqH,EACAnH,EACCoH,EACAC,EACA1E,GAJDzC,oBACAA,uBACCA,oBACAA,kBACAA,qBA1NHA,eAAW,EAuCVA,cAAU,EAETA,oCAAyC,EAa1CA,gBAAY,EAeZA,kBAAc,EAEfA,iBAAwC,IAAI8D,IACjD9D,KAAKoH,YAEApH,oBAAgB,EAChBA,uBAAoB,GAEpBA,UAAO,OAEPA,iBAAc,IAAInB,KAAY,IAC9BmB,mBAAgBnB,aAEfmB,eAAY,IAAI8D,KAAgB,GAChC9D,uBAAoB,IAAI8D,KAAgB,GACzC9D,gCAA6B,IAAI8D,KAAgB,GAGhD9D,kBAAc,EAEdA,YAAS,IAAIqH,KAGbrH,oBAEJ,IAAI8D,SAAgB,GAGjB9D,qBAAiB,EACxBA,eAAsC,IAAI8D,KAAgB,GAEhD9D,kBAAe,IAAIsC,MAEnBtC,qBAAkB,IAAIsC,MACtBtC,4BAAyB,IAAIsC,MAEvCtC,qBAAkB,IAAI8D,SAAuC,GAmH3D9D,KAAKsH,WAAWtH,KAAKyC,cAAcS,UAAU,cACzClD,KAAKyC,cAAcS,UAAU,aAEjClD,KAAKuH,OAASvH,KAAK0C,eAAeM,IAAI,eACtChD,KAAKwH,SAAWxH,KAAK0C,eAAeM,IAAI,YACxChD,KAAKoH,WAAapH,KAAK0C,eAAeM,IAAI,cAC1ChD,KAAKyH,qBACP,CAjOI/E,qBACF,OAAO1C,KAAKkH,aAAaxE,cAC3B,CAGIuC,UACF,OAAOjF,KAAK0H,IACd,CACIzC,QAAIY,GACN7F,KAAK0H,KAAO7B,CACd,CAII8B,YACF,OAAO3H,KAAK4H,MACd,CACID,UAAM9B,GACR7F,KAAK4H,OAAS/B,EACd7F,KAAK2H,MAAME,UAAUtH,UAAWuH,IAC9B9H,KAAK+H,gBAAc,EAEvB,CAIIR,aACF,OAAOvH,KAAKgI,OACd,CACIT,WAAO1B,GACLA,KAAW7F,KAAKgI,UAGpBhI,KAAKgI,QAAUnC,EACf7F,KAAK0C,eAAeO,IAAI,cAAe4C,EAAOjH,cAC9CoB,KAAKiI,aAAalC,KAAKF,GACzB,CAKI2B,eACF,OAAOxH,KAAKkI,SACd,CACIV,aAAS3B,GACPA,KAAW7F,KAAKkI,YAGpBlI,KAAKkI,UAAYrC,EACjB7F,KAAKmI,UAAU9C,KAAKQ,GACpB7F,KAAK0C,eAAeO,IAAI,WAAY4C,GACtC,CAIIuB,iBACF,OAAOpH,KAAKoI,WACd,CACIhB,eAAWvB,GACTA,KAAW7F,KAAKoI,cAGpBpI,KAAKoI,YAAcvC,EACnB7F,KAAKqI,YAAYhD,KAAKQ,GACtB7F,KAAKsI,gBAAgBvC,KAAKF,GAC1B7F,KAAK0C,eAAeO,IAAI,aAAc4C,GACxC,CAiDA0C,gBAEE,MAAO,CACL,yBAA2BvI,KAAKuH,SAAWvH,KAAKoH,aAAepH,KAAKwI,cACpE,8BACExI,KAAKuH,QAAUvH,KAAKoH,aACnBpH,KAAKwI,cAER,uBACExI,KAAKuH,SACJvH,KAAKoH,YACNpH,KAAKyI,gBAAgB5C,OACrB7F,KAAKwI,cAEP,6BACExI,KAAKuH,QACLvH,KAAKoH,YACLpH,KAAKyI,gBAAgB5C,OACrB7F,KAAKwI,cAEP,6BAA8BxI,KAAKuH,SAAWvH,KAAKoH,aAAepH,KAAKwI,cACvE,kCAAoCxI,KAAKuH,QAAUvH,KAAKoH,aAAepH,KAAKwI,cAC5E,kCAAoCxI,KAAKuH,QAAUvH,KAAKwI,cAE5D,CAIAE,wBACE,OAAG1I,KAAKyI,gBAAgB5C,QAAU7F,KAAKuH,OAC9B,IAGNvH,KAAKsH,UAAatH,KAAKoH,YAAepH,KAAKwI,cAEpCxI,KAAKsH,UAAYtH,KAAKuH,QAC9BvH,KAAKoH,aAAepH,KAAKwI,cAClB,8CAFF,EADE,mCAKX,CAGIG,mBACF,OAAI3I,KAAK4I,QAAQC,QACa,IAAxB7I,KAAK4I,QAAQC,QAAgB7I,KAAK8I,aACpC9I,KAAK+I,aAAa/I,KAAK4I,QAAQ,IAE1B,WAEF,QACT,CAOqDI,gBACnDC,GAEAjJ,KAAKkJ,OACP,CAEwDC,cACtDF,GAEAjJ,KAAK+H,gBACP,CAEgDqB,cAC9CH,GAEA,IAA0C,IAAtCjJ,KAAKqJ,kBAAkBC,WAAqB,CAC9C,MAAMC,EAAiBvJ,KAAKwJ,OAAOC,YACjCzJ,KAAKyI,gBAAgBa,WAAWI,KAChC,CACEC,eAAgB3J,KAAKyI,gBAAgBa,WAAWI,KAAKE,WACrDC,kBAAmB7J,KAAKiF,IAAI2E,cAGhC,SAAiB5J,KAAKiF,IAAK,CAACsE,GAAiBvK,eAEjD,CAEI4J,cAEF,OAAO5I,KAAK2H,MAAMmC,KACpB,CAEIC,eACF,YAAKnB,QAAQC,OACT7I,KAAKgK,UAAU3E,MAAK,GACpBrF,KAAKgK,UAAU3E,MAAK,GACjBrF,KAAKgK,SACd,CAkBQC,yBACNjK,KAAKkK,+BAA8BC,MAAc,CAC/CnK,KAAKiF,IAAImF,eAAeC,OACxBrK,KAAKyI,kBAEJpI,QAAKiK,KAAa,MAClB/J,UAAWgK,IACV,MAAMC,EAAiBD,EAAM,GAC7B,IAAKC,EAEH,YADAxK,KAAKyK,2BAA2BpF,MAAK,GAGvC,MAAMqF,KAAoB1L,OAAYwL,EAAed,KAAM1J,KAAKiF,IAAI2E,YAC9De,KAA0B3L,OAAwBgB,KAAKiF,IAAK,CAACyF,IACnE1K,KAAKyK,2BAA2BpF,QAAKrG,OAAqBgB,KAAKiF,IAAK0F,GAAwB,EAElG,CAGA5G,WAME,IAAI6G,EACAC,EANJ7K,KAAK2H,MAAME,UAAUtH,UAAU,KAC7BP,KAAK8I,aAAc,IAErB9I,KAAKiK,yBAIDjK,KAAK8K,gCACP9K,KAAK+K,wBAAuBZ,MAAc,CACxCnK,KAAKgL,eAAe3K,QAClBgB,MAAK4J,IACHL,EAAeK,EACfJ,EAAU,aAGd7K,KAAKyI,gBAAgBpI,QACnBgB,MAAK4J,IACHL,EAAeK,EACfJ,EAAU,cAGd7K,KAAKiF,IAAImF,eAAec,YACxBlL,KAAK2H,MAAME,YACVtH,UAAU,IAAMP,KAAKmL,oBAAoBP,EAAcC,KAG5D7K,KAAKoL,gBAAkBpL,KAAK0C,eAAe2I,eACxChL,QAAKiL,KAAWC,GAA6D,aAAtBA,EAAcC,MACrEjL,UAAWkL,IACVzL,KAAKwH,SAAWiE,EAAOC,eAG3B1L,KAAK2L,YAAYC,KAAK,CACpB,CACEtQ,GAAI,OACJC,MAAOyE,KAAKF,gBAAgBoB,UAAUC,QAAQ,yBAC9C5C,KAAM,8BACNI,QAASqB,KAAKF,gBAAgBoB,UAAUC,QACtC,yBAEF0K,QAAS,IACA7L,KAAKqJ,kBAEdyC,QAAS,KACP9L,KAAK+H,gBAAc,GAGvB,CACEzM,GAAI,cACJC,MAAOyE,KAAKF,gBAAgBoB,UAAUC,QACpC,4BAEF5C,KAAM,uBACNI,QAASqB,KAAKF,gBAAgBoB,UAAUC,QACtC,mCAEF0K,QAAS,IACA7L,KAAKqJ,kBAEdyC,QAAS,KACP,MAAMvC,EAAiBvJ,KAAKwJ,OAAOC,YACjCzJ,KAAKyI,gBAAgBa,WAAWI,KAChC,CACEC,eAAgB3J,KAAKyI,gBAAgBa,WAAWI,KAAKE,WACrDC,kBAAmB7J,KAAKiF,IAAI2E,cAGhC,SAAiB5J,KAAKiF,IAAK,CAACsE,GAAiBvK,WAAkB,GAGnE,CACE1D,GAAI,cACJC,MAAOyE,KAAKF,gBAAgBoB,UAAUC,QACpC,6BAEFxC,QAASqB,KAAKF,gBAAgBoB,UAAUC,QACtC,oCAEF5C,KAAM,eACNwN,aAAc,IACL/L,KAAK+J,SAEd+B,QAAS,KACP,MAAME,EAAa,GACnB,UAAWC,KAAUjM,KAAK2H,MAAMmC,MAAO,CACrC,MAAMP,EAAiBvJ,KAAKwJ,OAAOC,YAAYwC,EAAOvC,KAAM,CAC1DC,eAAgBsC,EAAOvC,KAAKE,WAC5BC,kBAAmB7J,KAAKiF,IAAI2E,aAE9BoC,EAAWE,KAAK3C,IAElB,SAAiBvJ,KAAKiF,IAAK+G,EAAYhN,WAAkB,GAG7D,CACE1D,GAAI,WACJC,MAAOyE,KAAKF,gBAAgBoB,UAAUC,QAAQ,uBAC9CxC,QAASqB,KAAKF,gBAAgBoB,UAAUC,QACtC,8BAEFgL,UAAU,EACVC,eAAgBpM,KAAKmI,UACrB2D,QAAS,KACP9L,KAAKwH,UAAYxH,KAAKwH,SAClBxH,KAAKwH,WAA6C,IAAjCxH,KAAKqJ,kBAAkBxD,OAC1C7F,KAAK+I,aAAa/I,KAAKyI,gBAAgBa,WAAU,GAIvD,CACEhO,GAAI,aACJC,MAAOyE,KAAKF,gBAAgBoB,UAAUC,QAAQ,yBAC9CxC,QAASqB,KAAKF,gBAAgBoB,UAAUC,QACtC,gCAEF5C,KAAM,eACNsN,QAAS,IACA7L,KAAKqI,YAAYhI,QAAK4E,MAAKoH,IAAOA,IAAMrM,KAAKsM,cAEtDR,QAAS,KACP9L,KAAKoH,YAAa,IAGtB,CACE9L,GAAI,iBACJC,MAAOyE,KAAKF,gBAAgBoB,UAAUC,QACpC,6BAEFxC,QAASqB,KAAKF,gBAAgBoB,UAAUC,QACtC,oCAEF5C,KAAM,iBACNsN,QAAS,IACA7L,KAAKqI,YAAYhI,QAAK4E,MAAKoH,GAAMA,IAAMrM,KAAKsM,cAErDR,QAAS,KACP9L,KAAKoH,YAAa,KAI1B,CAEA7B,cACMvF,KAAK+K,sBACP/K,KAAK+K,qBAAqBvF,cAExBxF,KAAKkK,6BACPlK,KAAKkK,4BAA4B1E,cAE/BxF,KAAKoL,iBACPpL,KAAKoL,gBAAgB5F,aAEzB,CAEQ2F,oBACNc,EACApB,GAGA,GADA7K,KAAKuM,wBACAN,GAAuB,aAAZpB,GAA0B7K,KAAKwH,SAC7C,OAGF,MAAMgF,KADcxN,OAAYiN,EAAOvC,KAAM1J,KAAKiF,IAAI2E,YACvB6C,cAC/B,MAAIzN,OAAyBgB,KAAKiF,IAAKuH,EAAWE,YAAiD,OAAS,CAC1G,MAAMrP,EAASmP,EAAWE,YACpBC,EAAItP,EAAO,IAAMA,EAAO,GAAKA,EAAO,IAAM,EAC1CuP,EAAIvP,EAAO,IAAMA,EAAO,GAAKA,EAAO,IAAM,EAC1CwP,EAAW,IAAIC,KAAU,CAC7BC,KAAM,kCACNC,SAAU,IAAIC,KAAQ,CAACN,EAAGC,MAE5B5M,KAAKkN,mCAAkClO,OACrC6N,EACA7M,KAAKiF,IAAI2E,YAEX5J,KAAKkN,gCAAgCC,KAAKC,SACxCpO,OACEqO,OAAOC,OAAO,GACZ,CAAEC,QAASvN,KAAKkN,iCACJ,aAAZrC,EACE7K,KAAKmH,WAAWqG,2BAChBxN,KAAKmH,WAAWsG,yBACxBzN,KAAKkN,gCAAgCC,KAAKC,MAAMM,UAAU,KAC1D1N,KAAKiF,IAAI0I,oBAAoBC,WAC3B5N,KAAKkN,gCACLlO,YAGN,CAEQuN,uBACFvM,KAAKkN,kCACPlN,KAAKiF,IAAI0I,oBAAoBE,cAAc7N,KAAKkN,iCAChDlN,KAAKkN,qCAAkC,EAE3C,CAEAY,SAAS7B,GACP,SAAOpN,MAAeoN,EACxB,CAEA8B,YAAY9B,GACVjM,KAAKgL,eAAe3F,KAAK4G,GACzBjM,KAAKiF,IAAI0I,oBAAoBE,cAAc5B,EAAOvC,MAElDuC,EAAOvC,KAAKyD,KAAKC,SAAQpO,OACvBqO,OAAOC,OAAO,GACZ,CAAEC,QAAStB,EAAOvC,MAClB1J,KAAKmH,WAAWsG,yBACpBxB,EAAOvC,KAAKyD,KAAKC,MAAMM,UAAU,KACjC1N,KAAKiF,IAAI0I,oBAAoBC,WAAW3B,EAAOvC,KAAM1K,WACvD,CAEAgP,cAAc/B,EAA+BgC,GAC3CjO,KAAKgL,eAAe3F,UAAK,IACpB4I,IAASjO,KAAK2H,MAAMuG,MAAMlL,IAAIiJ,GAAQkC,WAG3CnO,KAAKiF,IAAI0I,oBAAoBE,cAAc5B,EAAOvC,MAElDuC,EAAOvC,KAAKyD,KAAKC,SAAQpO,OACvBqO,OAAOC,OAAO,GACZ,CAAEC,QAAStB,EAAOvC,MAClB1J,KAAKmH,WAAWjJ,oBACpB+N,EAAOvC,KAAKyD,KAAKC,MAAMM,eAAU,GACjC1N,KAAKiF,IAAI0I,oBAAoBC,WAAW3B,EAAOvC,KAAM1K,YACvD,CAEA+J,aAAakD,GACXjM,KAAK2H,MAAMuG,MAAME,OACfnC,EACA,CACEkC,SAAS,EACTE,UAAU,IAEZ,GAEFrO,KAAKyI,gBAAgBpD,KAAK4G,GACtBA,EAAOvC,KAAK4E,YAAgD,WAAlCrC,EAAOvC,KAAK4E,WAAWC,OACnDvO,KAAKwO,gBAAe,GAEpBxO,KAAKwO,gBAAe,GAGtB,MAAMC,EAAW,GACjB,UAAWlB,KAAWvN,KAAK2H,MAAMmC,MAC3ByD,EAAQJ,KAAK7R,KAAO2Q,EAAOkB,KAAK7R,IAClCiS,EAAQ7D,KAAKyD,KAAKC,SAAQpO,OACxBqO,OAAOC,OAAO,GAAI,CAAEC,QAASA,EAAQ7D,MACnC1J,KAAKmH,WAAWqG,6BACpBD,EAAQ7D,KAAKyD,KAAKC,MAAMM,UAAU,MAElCH,EAAQ7D,KAAKyD,KAAKC,SAAQpO,OACxBqO,OAAOC,OAAO,GACZ,CAAEC,QAASA,EAAQ7D,MACnB1J,KAAKmH,WAAWjJ,oBAEtBuQ,EAASvC,KAAKqB,EAAQ7D,MAKxB,GAHA1J,KAAKiF,IAAI0I,oBAAoBe,eAAeD,GAC5CzO,KAAKiF,IAAI0I,oBAAoBgB,YAAYF,EAAUzP,YAE/CgB,KAAKwH,SAAU,CACjB,MAAM+B,EAAiBvJ,KAAKwJ,OAAOC,YACjCzJ,KAAKyI,gBAAgBa,WAAWI,KAChC,CACEC,eAAgB3J,KAAKyI,gBAAgBa,WAAWI,KAAKE,WACrDC,kBAAmB7J,KAAKiF,IAAI2E,cAGhC,SAAiB5J,KAAKiF,IAAK,CAACsE,GAAiBvK,eAG/CgB,KAAKqJ,kBAAkBhE,MAAK,GAC5BrF,KAAK8I,aAAc,CACrB,CAEAf,iBACE/H,KAAKyI,gBAAgBpD,UAAK,GAC1BrF,KAAKqJ,kBAAkBhE,MAAK,GAC5BrF,KAAKwO,gBAAe,GACpBxO,KAAK2H,MAAMuG,MAAMhF,QAEjB,MAAMuF,EAAW,GACjB,UAAWlB,KAAWvN,KAAK2H,MAAMmC,MAC/ByD,EAAQ7D,KAAKyD,KAAKC,SAAQpO,OACxBqO,OAAOC,OAAO,GACZ,CAAEC,QAASA,EAAQ7D,MACnB1J,KAAKmH,WAAWjJ,oBACpBuQ,EAASvC,KAAKqB,EAAQ7D,MAExB1J,KAAKiF,IAAI0I,oBAAoBiB,YAAYH,EAAUzP,WAAoB,MACzE,CAEAkK,QACElJ,KAAKuM,uBACLvM,KAAKiF,IAAI0I,oBAAoBzE,QAC7BlJ,KAAK2H,MAAMuB,QACXlJ,KAAK+H,iBACL/H,KAAKwO,gBAAe,EACtB,CAEAK,WACE,OAAO7O,KAAKiH,aAAa6H,aAAelQ,WAC1C,CACA0N,YACE,OAAOtM,KAAKiH,aAAaqF,WAC3B,CAEAyC,oBAAoB9F,GACI,KAAlBA,EAAM+F,QACRhP,KAAKiP,iBACsB,KAAlBhG,EAAM+F,SACfhP,KAAKkP,YAET,CAEAD,iBACE,IAAKjP,KAAKyI,gBAAgB5C,MACxB,OAEF,IAAIsJ,EAAInP,KAAK4I,QAAQwG,QAAQpP,KAAKyI,gBAAgB5C,OAClD,MAAMoJ,EAAiBjP,KAAK4I,UAAUuG,GAClCF,GACFjP,KAAK+I,aAAakG,EAEtB,CAEAC,aACE,IAAKlP,KAAKyI,gBAAgB5C,MACxB,OAEF,IAAIsJ,EAAInP,KAAK4I,QAAQwG,QAAQpP,KAAKyI,gBAAgB5C,OAClD,MAAMqJ,EAAalP,KAAK4I,UAAUuG,GAC9BD,GACFlP,KAAK+I,aAAamG,EAEtB,CAEAG,SACE,MAAM9F,EAAiBvJ,KAAKwJ,OAAOC,YACjCzJ,KAAKyI,gBAAgBa,WAAWI,KAChC,CACEC,eAAgB3J,KAAKyI,gBAAgBa,WAAWI,KAAKE,WACrDC,kBAAmB7J,KAAKiF,IAAI2E,cAGhC,SAAiB5J,KAAKiF,IAAK,CAACsE,GAAiBvK,WAC/C,CAEAsQ,MAAMC,GACAA,IAAWvI,EAAoBwI,aAAaC,MAC9CzP,KAAKiP,iBACIM,IAAWvI,EAAoBwI,aAAaE,KACrD1P,KAAKkP,aACIK,IAAWvI,EAAoBwI,aAAaG,GACrD3P,KAAKuH,QAAS,EACLgI,IAAWvI,EAAoBwI,aAAaI,OACrD5P,KAAKuH,QAAS,EAElB,CAEAtB,cAAc4J,GACwB,oBAA/BA,EAAEtB,OAAeuB,YAGtB9P,KAAKuH,QAAUvH,KAAKuH,OACtB,CAMAwI,gBAAgBR,GACd,MAAMS,EAAOT,EAAOS,MAAQ,GAC5BT,EAAOzD,WAAWkE,EACpB,CAEAxB,eAAe3I,IACC,IAAVA,GACF7F,KAAKwI,eAAgB,EACrBxI,KAAKiQ,uBAAuBlK,MAAK,KAEjC/F,KAAKwI,eAAgB,EACrBxI,KAAKiQ,uBAAuBlK,MAAK,GAErC,CAEAmK,mBACE,SAAIlQ,KAAKwI,gBAAiBxI,KAAKsM,YAKjC,CAEA7E,sBACMzH,KAAKoH,WACPpH,KAAKmQ,kBAAoB,iBAGzBnQ,KAAKmQ,kBAAoB,cAG7B,CAEAC,gBACEpQ,KAAK0C,eAAeO,IAAI,cAAejD,KAAKoH,YAExCpH,KAAKoH,WACPpH,KAAKqQ,eAELrQ,KAAKsQ,gBAET,CAEAD,eACErQ,KAAKoH,YAAa,EAClBpH,KAAKyH,qBACP,CAEA6I,iBACEtQ,KAAKoH,YAAa,EAClBpH,KAAKyH,qBACP,EAzqBOT,eAAe,CACpByI,MAAO,aACPC,KAAM,YACNC,GAAI,UACJC,KAAM,mDALG5I,GAAmB1E,sFAAnB0E,EAAmBvB,qHAAnBS,oBAAuB,mDAAvBA,kBAAqB,2CAArBA,kBAAqB,u2EDvDlC5D,2CAsGAA,+CAAMA,oCAAkB,uwMEpFjB,MAAMiO,EA6BX3Q,cAZUI,kBAAe,IAAIsC,KAYd,CA1BXiF,WAAO1B,GACLA,IAAU7F,KAAKgI,UAGnBhI,KAAKgI,QAAUnC,EACf7F,KAAKiI,aAAalC,KAAK/F,KAAKgI,SAC9B,CACIT,aAAoB,OAAOvH,KAAKgI,OAAS,CAUzCwI,qBACF,OAAOxQ,KAAKuH,MACd,CAGIoB,mBACF,OAAQ3I,KAAKyQ,YAAczQ,KAAKuH,OAAU,UAAY,QACxD,2CCpCMjF,6BAEEA,kEAAkBA,gCAAuB,GAC3CA,kDAGEA,qBAMEA,yDAASA,gCAAuB,wBAChCA,uBACFA,aAHEA,kGDFCiO,EAA+B,0BAA/BA,EAA+B9K,6ZElB5CnD,uBAAqD,gBAGjDA,SACFA,iBAJSA,uBAAe,2BAEVA,m5BFaF,CGNP,SAASoO,GACdhK,EAAW,OACXC,EAAQ,QACRC,EAAS,eAET,SAAOC,MAAQ,cAAe,IAC5BA,MAAM,UAAQA,MAAM,CAClBC,QAAS,EACT+E,QAAS,YACT,EACFhF,MAAM,WAASA,MAAM,CACnBC,QAAS,EACT+E,QAAS,WACT,EACFhF,MAAW,mBAAiBA,MAAQ,GAAGH,KAAYC,KAASC,OAAS,EACrEC,MAAW,mBAAiBA,MAAQ,SAExC,CHXe6J,KAAc3J,kEIQtB,MAAM4J,EAmCX/Q,YACUgR,EACAnO,EACAoO,GAFA7Q,iBACAA,qBACAA,oBArCVA,YAAkC,IAAI8D,SAAwB,GA2BpD9D,kBAAe,IAAIsC,MACnBtC,gBAAa,IAAIsC,KASY,CAhCnC2C,UACF,OAAOjF,KAAK0H,IACd,CACIzC,QAAIY,GACN7F,KAAK0H,KAAO7B,CACd,CAII0B,aACF,OAAOvH,KAAKgI,OACd,CACIT,WAAO1B,GACLA,IAAU7F,KAAKgI,UAInBhI,KAAKgI,QAAUnC,EACf7F,KAAKiI,aAAalC,KAAK/F,KAAKgI,SAC9B,CAMI8I,cACF,OAAO9Q,KAAK4Q,UAAUE,OACxB,CAOA/M,WACE/D,KAAK+Q,aAAe/Q,KAAK8Q,QAAQE,YAAYzQ,UAAW0Q,IACtD,MAAMC,EAAelR,KAAKyC,cAAcS,UAAU,iBAAmB,MACrE,GAAI+N,EACF,GAAkB,mBAAdA,EAAKlE,KACP,UAAW3R,KAAW4E,KAAK6Q,aAAaM,aAAarH,OACgB,IAA/D9J,KAAK6Q,aAAaM,aAAajD,MAAMlL,IAAI5H,GAASiT,UACpDrO,KAAKoR,OAAO/L,KAAKjK,EAAQG,YAAK,GAGX,qBAAd0V,EAAKlE,MAA6C,oBAAdkE,EAAKlE,KAClD,UAAWsE,KAASrR,KAAKiF,IAAIqM,QACE,IAAzBD,EAAME,QAAQC,QAChBxR,KAAKoR,OAAO/L,KAAKgM,EAAM9V,YAI3ByE,KAAKoR,OAAO/L,KAAK4L,EAAK1V,YAGxByE,KAAKoR,OAAO/L,KAAK6L,GAEnBlR,KAAKyR,WAAW1L,KAAKkL,EAAI,EAE7B,CAEA1L,cACEvF,KAAK+Q,aAAavL,aACpB,CAEAkM,wBACE1R,KAAK8Q,QAAQa,sBACf,CAEAC,wBACE5R,KAAK8Q,QAAQe,gBACf,wCA5EWlB,GAAgBrO,8DAAhBqO,EAAgBlL,6uBHvB7BnD,yBAGEA,qDAEAA,iBAAiC,8BAI3BA,qDAKAA,6DACEA,8CAUAA,mCAGuB,oBAmBzBA,qBA7CNA,sBAAmB,mBAKmBA,wEAG7BA,yDAIQA,yDACAA,0DA4BPA,6BAAgB,21CIhCpBA,SACEA,iBAGFA,yCAHOA,qCAAsB,YAAtBA,CAAsB,4DAJjCA,eAEIA,SACAA,iCAKJA,wCAPoBA,2BAChBA,+BACeA,2DAUnBA,SACEA,iBACFA,yCADOA,qCAAsB,YAAtBA,CAAsB,4DAF7BA,SACAA,iEADAA,sBACeA,2DArBnBA,SACEA,iBAOEA,sBAWFA,2CAOAA,QACFA,6CAzBOA,sDAAuD,2BAAvDA,CAAuD,6BAAvDA,CAAuD,yBAAvDA,CAAuD,+BAAvDA,CAAuD,wBAD7BA,4BAOzBA,8BAAoB,eCIrB,MAAMwP,GAMXlS,YACUmS,EACA9K,EACAxE,GAFAzC,sBACAA,oBACAA,qBARHA,gBAA2B,EAS9B,CAEJgS,kBACEhS,KAAKiS,UAAYjS,KAAK+R,eAAeG,SAAS3R,UAAU4R,IACpDnS,KAAKoS,oBAAoBD,GACzBnS,KAAKmS,QAAUA,IAGnBnS,KAAKqS,QAAUrS,KAAKiH,aAAaqL,OAAO/R,UAAUgS,GAChDvS,KAAKoS,oBAAoBpS,KAAKmS,SAElC,CAEA5M,cACEvF,KAAKiS,UAAUzM,cACfxF,KAAKqS,QAAQ7M,aACf,CAEQ4M,oBAAoBD,GAC1B,IAAIK,EAAa,GACjB,QAAgB,IAAZL,EAAuB,CACzBnS,KAAKwS,WAAa,GAEdL,EAAQK,WACVA,EAAaL,EAAQK,WACZxS,KAAKyC,cAAcS,UAAU,gBACtCsP,EAAaxS,KAAKyC,cAAcS,UAAU,eAE5C,UAAWuP,KAAWD,IAGdC,EAAQF,OAA0C,YAAjCvS,KAAKiH,aAAa6H,YACxC2D,EAAQF,OAASE,EAAQF,MAAMG,SAAS1S,KAAKiH,aAAa6H,cACzD9O,KAAKwS,WAAWtG,KAAKuG,GAK7B,yCAhDWX,IAAmBxP,+DAAnBwP,GAAmBrM,uRDZhCnD,uCAAkCA,i1BEQ9BA,8BAEEA,+DAAeA,+BAAsB,GACvCA,gCAFEA,iFAIFA,gCAQEA,qEAAoBA,8BAA0B,EAA9CA,CAA+C,mEAEvBA,wCAAoC,EAF5DA,CAA+C,0EAIhBA,+CAA2C,EAJ1EA,CAA+C,8EAMZA,6CAAyC,EAN5EA,CAA+C,qDAOrCA,oBAAgB,EAP1BA,CAA+C,0DAQ/BA,wBAAe,EAR/BA,CAA+C,kEASvBA,iCAAwB,GAClDA,gCAhBEA,8BAAsB,8BAAtBA,CAAsB,kCAAtBA,CAAsB,oBAAtBA,CAAsB,0BAAtBA,CAAsB,sBAAtBA,CAAsB,yDAAtBA,CAAsB,8DAAtBA,CAAsB,iGA2DtBA,yDACAA,qDAAoBA,mBAAW,0CAAXA,CAAW,oEAK/BA,uDAEEA,mBAAW,0CAAXA,CAAW,oEAKbA,0DAEEA,mBAAW,8BAAXA,CAAW,8BAAXA,CAAW,qDAMbA,kDAEEA,mBAAW,0CAAXA,CAAW,oFAyDbA,qBAUEA,yEAASA,sBAAqB,wBAC9BA,uBAGFA,qCANEA,uEAA6F,0EAO/FA,iEAGEA,6BAA+B,cAA/BA,CAA+B,iCAA/BA,CAA+B,gBAA/BA,CAA+B,+CAA/BA,CAA+B,sBAA/BA,CAA+B,kBAA/BA,CAA+B,uBAA/BA,CAA+B,+EAUjCA,qBAUEA,0DAASA,mCAA0B,yCACnCA,wCAGFA,iCAXEA,6EAAsF,4DAStFA,mKAIFA,yCAKEA,qEAAmBA,2BAAuB,GAC5CA,gDAJEA,6BAA+B,iDAA/BA,CAA+B,0HA/DnCA,SACEA,qBAUEA,sDAASA,uCAAkD,6CAC3DA,wCAIFA,QACAA,4BAeAA,mCAaAA,4BAeAA,kBACAA,iDAOFA,0CAhEIA,4DAAyD,yGASvDA,6EAAqE,2CAKtEA,+CAgBAA,qCAaAA,+CAeAA,yFAULA,+BAKEA,qEAAoBA,2BAAkB,EAAtCA,CAAuC,kEACjBA,8BAA0B,GAElDA,gDAPEA,kDACAA,wCAAgC,sBAAhCA,CAAgC,4DAHpCA,SACEA,sCASAA,mBAA6BA,8BAA4CA,QAC3EA,wCAPKA,4FAM0BA,oGAtGjCA,kCAGEA,wHAKAA,YACEA,qCAEEA,mEAAkBA,uCAAmC,EAArDA,CAAsD,8DACnCA,oDAAgD,EADnEA,CAAsD,gGAAtDA,CAAsD,6DAGpCA,qCAAiC,EAHnDA,CAAsD,4EAIrBA,8DAA0D,GAI7FA,QAEAA,oDAqEFA,QAEAA,kDAaFA,gCAvGEA,qDAA6C,oCAA7CA,CAA6C,6CAA7CA,CAA6C,kDAA7CA,CAA6C,0IAczCA,yCAAwB,qCAAxBA,CAAwB,aAKXA,wDAuEFA,kGA4BfA,0CAGEA,oEAAoBA,sCAA6B,GACnDA,+BAFEA,+DAMJA,8BAQEA,iEAAgBA,6BAAyB,EAAzCA,CAA0C,qFAA1CA,CAA0C,qEAEhBA,oCAAgC,oBAC5DA,gCAVEA,mBAAW,qBAAXA,CAAW,gEAAXA,CAAW,qDAAXA,CAAW,8CAAXA,CAAW,wGAAXA,CAAW,uDAaXA,iDACEA,kCAA0B,cAA1BA,CAA0B,2EC7IvB,MAAMqQ,GAoMX/S,YACUgT,EACDC,EACAC,EACA7L,EACA8L,EACAC,EACAC,EACAC,EACCC,EACAC,EACAC,EACAlM,GACAyJ,EACA0C,GACA7Q,GACA8Q,GACAC,GACA1T,GACA2T,GACA7P,GACD8P,GACCC,GACAjR,GACAkR,GACAC,GACAjY,IAzBAoE,aACDA,sBACAA,mBACAA,oBACAA,oBACAA,yBACAA,aACAA,2BACCA,oBACAA,gBACAA,mBACAA,mBACAA,iBACAA,4BACAA,sBACAA,sBACAA,aACAA,wBACAA,uBACAA,6BACDA,qBACCA,qBACAA,uBACAA,gCACAA,uBACAA,iCA7NHA,wBAA8C,IAAI8D,SAAgB,GAClE9D,oBAA2C,IAAI8D,KAAgB,GAC/D9D,yBAAsB,EACtBA,wBAAoB,EACpBA,yBAAqB,EACrBA,0BAAsB,EACtBA,qBAAiB,EACjBA,oBAAgB,EAChBA,wBAAoB,EACpBA,yBAAqB,EACrBA,qCAAiC,EACjCA,oCAAyC,EACzCA,kCAAuC,gCAEvCA,gCAAuD,IAAI8D,KAAgB,GAC3E9D,8BAA0B,EAC1BA,sBAAgD,CACrD8T,SAAU,GACVC,gBAAiB,CAAC,EAAG,EAAG,GAAI,GAAI,GAAI,IAAK,MAEpC/T,wBAAqB,iBAErBA,gBAAaA,KAAK0C,eAAeM,IAAI,cACpChD,yBAAsC,GACrCA,wBAA+C,IAAI8D,IAC1D9D,KAAK0C,eAAeM,IAAI,sBAGnBhD,mBAAgB,IAAI8D,SAAmC,GACvD9D,mBAAgB,GAChBA,uBAAoB,IAAI8D,SAAyB,GACjD9D,uBAAmB,EACnBA,kBAAe,IACfA,gCAA4B,EAC3BA,mBAAgC,GACjCA,oBAAgB,EAEhBA,sBAAmB,IAAInB,KAAY,IAGlCmB,oBAAgB,EASjBA,mCAA+B,EAE/BA,uCAAmC,EACnCA,wBAAiD,IAAI8D,SAC1D,GAGK9D,4BAAwB,EAoCvBA,wBACkD,IAAvDA,KAAK0C,eAAeM,IAAI,eAkIzBhD,KAAKgU,kBAAoBhU,KAAKyC,cAAcS,UAAU,qBACtDlD,KAAKiU,yBACkD,IAArDjU,KAAKyC,cAAcS,UAAU,oBAC/BlD,KAAKkU,wBAA4E,IAAvDlU,KAAKyC,cAAcS,UAAU,uBACrDlD,KAAKyC,cAAcS,UAAU,sBAC/BlD,KAAKmU,oCAAoG,IAAnEnU,KAAKyC,cAAcS,UAAU,mCACjElD,KAAKyC,cAAcS,UAAU,kCAC/BlD,KAAKoU,oBAAoE,IAAnDpU,KAAKyC,cAAcS,UAAU,mBACjDlD,KAAKyC,cAAcS,UAAU,kBAC/BlD,KAAKqU,mBAA4E,IAA5DrU,KAAKyC,cAAcS,UAAU,4BAChDlD,KAAKyC,cAAcS,UAAU,2BAC/BlD,KAAKsU,uBAAsE,IAAlDtU,KAAKyC,cAAcS,UAAU,kBACpDlD,KAAKyC,cAAcS,UAAU,iBAC/BlD,KAAKuU,wBAA2E,IAAtDvU,KAAKyC,cAAcS,UAAU,sBACrDlD,KAAKyC,cAAcS,UAAU,qBAE/BlD,KAAKlF,cAAgBkF,KAAKyC,cAAcS,UAAU,qBAClDlD,KAAK8K,8BAAgC9K,KAAKyC,cAAcS,UAAU,iCAGlElD,KAAKwU,+BAAiCxU,KAAKyC,cAAcS,UAAU,gCACvB,IAAxClD,KAAKwU,iCACPxU,KAAKwU,+BAAiCxU,KAAK0C,eAAeM,IAAI,iCAA6C,GAG7GhD,KAAKyU,oCAAsCzU,KAAK0C,eAAeM,IAAI,sCAAkD,CACvH,CAvLIiC,UACF,OAAOjF,KAAKoT,SAASnO,GACvB,CAEIyP,oBACF,OAAO1U,KAAK2U,eAAe9O,KAC7B,CAEI6O,kBAAc7O,GAChB7F,KAAK2U,eAAetP,KAAKQ,EAC3B,CAEI+O,WACF,OAAO5U,KAAKyC,cAAcS,UAAU,SAAW,EACjD,CAEI2R,uBACF,OAAO7U,KAAK8U,iBACd,CACID,qBAAiBhP,GACfA,KAAW7F,KAAK8U,oBAGpB9U,KAAK8U,kBAAoBjP,EACzB7F,KAAKiT,MAAM8B,gBACb,CAIAlG,WACE,OAAO7O,KAAKiH,aAAa6H,aAAelQ,WAC1C,CAEAoW,WACE,OAAOhV,KAAKiH,aAAa6H,aAAelQ,WAC1C,CAEAqW,cACE,OAAOjV,KAAKiH,aAAaiO,mBAAqBtW,cAChD,CAEAuW,aACE,OAAOnV,KAAKiH,aAAaiO,mBAAqBtW,aAChD,CAEIwH,oBACF,OACGpG,KAAK6O,YAAe7O,KAAKgV,YAAchV,KAAKmV,eAC7CnV,KAAK0U,aAET,CAEIU,6BACF,OAAOpV,KAAK6S,eAAewC,sBAC7B,CACID,2BAAuBvP,GACzB7F,KAAK6S,eAAewC,uBAAyBxP,GAC/B,IAAVA,EACF7F,KAAKiF,IAAImF,eAAekL,WAAW,CAACC,OAAQ,MAE5CvV,KAAKiF,IAAImF,eAAekL,WAAW,CAACC,OAAQ,GAEhD,CAEIC,uBACF,OAAiC,QAA1BC,OAAKtC,aAAajB,gBAAQ,SAAE5I,WAAatJ,KAAKmT,aAAajB,SAAS5I,WAAWoM,SAAM,CAC9F,CAEIC,sBACF,OAAO,CACT,CAEIC,kCACF,OAAO5V,KAAKoV,wBAA0BpV,KAAK6V,4BAC7C,CAEIC,oBACF,OAAOjX,YACT,CAEIkX,yBACF,OAAO/V,KAAK8V,gBAAkBjX,YAChC,CAEImX,kBACF,OAAOhW,KAAKqT,YAAY1L,KAC1B,CAEIsO,mCACF,OAAOjW,KAAKqT,YAAY6C,8BAA8BrQ,KACxD,CAEIsQ,iBACF,OAAOnW,KAAKmH,WAAWQ,KACzB,CAEImJ,cACF,OAAO9Q,KAAK4Q,UAAUE,OACxB,CAEIsF,wBACF,IAAIC,EACJ,YAAuB,IAAnBrW,KAAKsW,WAA2BtW,KAAKsW,UAAUC,YACjDF,EAAU,aAILA,CACT,CAaIG,qBACF,OAAOxW,KAAK6S,eAAelL,KAC7B,CAEI2O,gBACF,OAAOtW,KAAK6S,eAAe4D,WAAW5Q,KACxC,CA0DA9B,WACExC,OAAOmV,IAAS1W,KAChBA,KAAKqT,YAAYsD,oBAAoBtR,KAAKrF,KAAK4W,cAE/C5W,KAAK6W,oBAEL7W,KAAK4S,MAAMkE,YAAYvW,UAAW5D,IAChCqD,KAAK+W,kBAAkBpa,EAAM,GAG/BqD,KAAK8S,YAAYkE,cAAczW,UAAW0W,IACxCjX,KAAKkX,eAAgB,IAGvBlX,KAAKiS,UAAYjS,KAAKmT,aAAajB,SAAS3R,UACzC4R,GAA6BnS,KAAKmX,gBAAgBhF,IAGrD,MAAMiF,EAAiB,CAAC,CACtB9b,GAAI,cACJC,MAAO,cACPuQ,QAAS,IAAM9L,KAAKqX,iBAAiBrX,KAAKsX,mBAE5C,CACEhc,GAAI,aACJC,MAAO,YACPuQ,QAAS,IAAM9L,KAAKuX,eAAevX,KAAKsX,mBAE1C,CACEhc,GAAI,mBACJC,MAAO,mBACPuQ,QAAS,IAAM9L,KAAKwX,qBAAqBxX,KAAKsX,oBA+GhD,GA5GAtX,KAAKyX,iBAAiB7L,KAAKwL,GAE3BpX,KAAKmW,WAAWuB,OACbrX,QAAKsX,SACLpX,UAAU,EAAEqX,EAASC,MACpB7X,KAAKiF,IAAImF,eAAe0N,QAAQ,GAAKD,EAAa,IAAM,EAG1C,IAAZD,GACAC,IAAeD,GACf5X,KAAK6O,YACL7O,KAAKgU,mBACLhU,KAAKoV,wBACLpV,KAAK6U,mBAEL7U,KAAK6U,kBAAmB,KAG9B7U,KAAKiF,IAAI8S,GAAGC,KAAK,iBAAkB,KACjChY,KAAKiY,uBAC6D,IAA9DjY,KAAKyC,cAAcS,UAAU,+BAC/BlD,KAAKiF,IAAIiT,sBAAsBC,SAAWnY,KAAKyC,cAAcS,UAAU,6BAA2B,GAItGlD,KAAKoY,kBAAkB7X,UAAU,KAC/BP,KAAKqT,YAAYgF,yBAAuB,GAG1CrY,KAAKqT,YAAYiF,gBAAgB/X,UAAW0L,IACtCA,GAAUjM,KAAK6O,YACjB7O,KAAKuY,cAAY,GAIrBvY,KAAK6S,eAAe2F,kBAAkBnT,KAAKrF,KAAKgU,mBAChDhU,KAAK6S,eAAelL,MAAM8Q,OAAOlY,UAAWmY,KACrC1Y,KAAKgU,oBAGVhU,KAAK6S,eAAe2F,kBAAkBnT,MAAKqT,GACvCA,IACF1Y,KAAKoV,wBAAyB,GAEhCpV,KAAK2Y,wBAAqB,GAG5B3Y,KAAK4Y,oBAAoB1M,KAAKlM,KAAK6S,eAAegG,mBAAmBtY,UAAWuY,IAC9E9Y,KAAK6Y,mBAAmBxT,KAAKyT,GAC7B9Y,KAAK2Y,uBAAqB,IAE5B3Y,KAAK4Y,oBAAoB1M,KACvBlM,KAAK6Y,mBAAmBtY,UAAU,IAAMP,KAAK2Y,0BAG/C3Y,KAAK6S,eAAe4D,WAAWlW,UAAWwY,gBACpCA,GACF/Y,KAAKgZ,mBAAmB3T,KAAK0T,GAC7B/Y,KAAKoV,wBAAyB,GAEO,QAAjCK,IAAUpE,MAAME,QAAQ+E,iBAAS,eAAExC,YAA6C,QAAjCmF,IAAU5H,MAAME,QAAQ+E,iBAAS,eAAEvC,iBACpF/T,KAAKkZ,iBAAmB,CACtBpF,SAA2C,QAAjCqF,IAAU9H,MAAME,QAAQ+E,iBAAS,eAAExC,SAC7CC,gBAAkD,QAAjCqF,IAAU/H,MAAME,QAAQ+E,iBAAS,eAAEvC,iBAGtD/T,KAAKkZ,iBAAmB,CACtBpF,SAAU,GACVC,gBAAiB,CAAC,EAAG,EAAG,GAAI,GAAI,GAAI,IAAK,OAI7C/T,KAAKoV,wBAAyB,IAIlCpV,KAAKqZ,eAAiBrZ,KAAK6S,eAAeyG,uBAAuB/Y,UAC9DgZ,SACgB,IAAXA,GACFvZ,KAAKwZ,6BACLxZ,KAAKyZ,kCAAmC,IAExCzZ,KAAK0Z,8BACL1Z,KAAKyZ,kCAAmC,KAK9CzZ,KAAK2Z,cAAgB3Z,KAAK4Q,UAAUgJ,aAAarZ,UAC9CsZ,IACKA,IACF7Z,KAAK6Z,cACL7Z,KAAK4Q,UAAUgJ,aAAavU,MAAK,GAAK,GAK5CrF,KAAK8Z,gCACH3P,MAAc,CACZnK,KAAK2U,eACL3U,KAAKiH,aAAaqL,OAClBtS,KAAKiH,aAAa8S,eAClB1Z,QACAiK,KAAa,KACb/J,UAAWyZ,IACXha,KAAKia,0BAAwB,GAG7Bja,KAAKyC,cAAcS,UAAU,gBAAiB,CAChD,MAAMtH,EAA2BoE,KAAKyC,cAAcS,UAAU,yCAC1DtH,GACFoE,KAAKpE,yBAAyBgQ,KAAKhQ,GAGzC,CAEAse,yBAAyBrU,GACvB7F,KAAKma,sBAAwBtU,EAC7B7F,KAAKia,0BACP,CAEAA,2BACMja,KAAK6O,aAAe7O,KAAKiV,cAC3BmF,QAAQC,UAAUC,KAAK,IAAMta,KAAKua,mBAAmBlV,UAAK,IAE1D+U,QAAQC,UAAUC,KAAK,IAAMta,KAAKua,mBAAmBlV,KAAKrF,KAAKwa,uBAEnE,CAEAC,sBACE,MAAMC,EAAO1a,KAAKgZ,mBAAmBnT,MACrC,OAAI6U,EAAIC,mBAAmB9U,MACrB6U,EAAIE,YAAYnC,OAAO5S,QAAU6U,EAAIrJ,MAAMwJ,QAC7C7a,KAAK8a,6BAA+B,6BAEpC9a,KAAK8a,6BAA+B,GAGtC9a,KAAK8a,6BAA+B,gCAE/BJ,EAAIC,mBAAmB9U,KAChC,CAEAkV,mBAAmBzE,GACjB,OAAIA,aAAqBtX,KAI3B,CAEA4O,WAAW0I,GACT,IAAI/I,EAAU,CACZtL,KAAM,UACNqM,WAAY,IAEdf,EAAQe,WAAatO,KAAKgb,wBAAwB1E,EAAUjF,OAC5DrR,KAAK6S,eAAeoI,+BAA+B5V,MAAK,GACxDiR,EAAU4E,YAAY3N,EAAS+I,EACjC,CAEA0E,wBAAwB3J,GACtB,IAAI/C,EAAa,GACjB,SAAMiD,QAAQ4J,cAAcC,aAAaC,QAAQC,KAC1CA,EAAMC,SAAWD,EAAMT,UAC1BvM,EAAWgN,EAAMvO,MAAQ,MAGtBuB,CACT,CAEAkN,gBAAgBC,GACdzb,KAAK0b,mBAAqBD,CAC5B,CAEAE,mBACE3b,KAAK4b,2BAA2BvW,MAAK,EACvC,CAEAwW,mBAAmB5P,GACajM,KAAK8b,uBAAnC,MACMC,EAA8C,GAEpD,MAAI/b,KAAKgZ,mBAAmBnT,iBAAiB7G,OAAgBgB,KAAKgZ,mBAAmBnT,iBAAiB7G,QAC/FgB,KAAKgZ,mBAAmBnT,MAAMmW,8BAEjC/P,GAAUA,EAAOgQ,MAAO,CAC1B,MAAMrT,EAAUqD,EAAOgQ,MAAMhX,IAAKgG,IAChC,GACEA,GACAA,EAAI8M,IACJ9M,EAAI8M,GAAGmE,gBAAgBC,cAAc9K,OACrCpG,EAAI8M,GAAGmE,gBAAgBC,cAAc9K,MAAMwJ,QAC3C,CACA,MAAM9C,EAAK9M,EAAI8M,GACTqE,EAAoBnR,EAAI8M,GAAGmE,gBAAgBC,cAAc9K,MACzD9D,KAAUvO,OACd+Y,EACAqE,EAAkBnX,IAAI2E,WACtBwS,EAAkBrE,IAGpBxK,EAAQJ,KAAKhQ,MAAQ6C,KAAK2T,aAAa0I,yBACrCD,GAEF7O,EAAQJ,KAAK5R,MACXyE,KAAK2T,aAAa2I,cAAc/O,EAAS6O,IACzC7O,EAAQJ,KAAK5R,MACf,IAAIghB,EAAoBR,EAAuBS,KAC5CC,GAAMA,EAAElhB,QAAUgS,EAAQJ,KAAKuP,aAElC,OAAKH,IACHA,EAAoB,IAAIvd,MAAkB,CACxCzD,MAAOgS,EAAQJ,KAAKuP,cAEtBX,EAAuB7P,KAAKqQ,KAAiB,EAExCvd,OAAsBuO,EAASgP,OAKxC,EAAS1Y,OAAG+E,GAIGrI,UAAWoc,IAC1B3c,KAAKmW,WAAWvK,KAAK+Q,EAAY,GAGvC,CAEApX,cACEvF,KAAKiS,UAAUzM,cACfxF,KAAKqZ,eAAe7T,cACpBxF,KAAK2Z,cAAcnU,cACnBxF,KAAK4Y,oBAAoB3T,IAAI2X,GAAKA,EAAEpX,eACpCxF,KAAK8Z,6BAA6BtU,aACpC,CAKQqX,wBACN7c,KAAK8c,cAAczB,QAAS0B,GAAsBA,EAAIvX,eACtDxF,KAAK8c,cAAgB,EACvB,CAEAtW,kBACExG,KAAKuY,cACP,CAEAyE,uBACEhd,KAAKid,eACP,CAEAC,8BACEld,KAAK0Z,6BACP,CAEAA,8BACE1Z,KAAK6V,8BAA+B,CACtC,CAEA2D,6BACExZ,KAAK6V,8BAA+B,CACtC,CAEAsH,WAAWlU,GACqBjJ,KAAK8b,uBAAnC,MACMC,EAA8C,GAkB9CqB,EAjBUnU,EAAMwF,SAASxJ,IAAKsI,IAClC,IAAIgP,EAAoBR,EAAuBS,KAC5CC,GAAMA,EAAElhB,QAAUgS,EAAQJ,KAAKuP,aAElC,IAAI1c,KAAKqd,0BAA0B9P,KAC7BvN,KAAKsd,gCAAoCtd,KAAKsW,UAA2BiH,4BAI/E,OAAKhB,IACHA,EAAoB,IAAIvd,MAAkB,CACxCzD,MAAOgS,EAAQJ,KAAKuP,cAEtBX,EAAuB7P,KAAKqQ,KAAiB,EAExCvd,OAAsBuO,EAASgP,EAAiB,GAEzBiB,OAAO7Q,QAAW,IAANA,IAE1C,EAAS9I,OAAGuZ,GAIG7c,UAAWoc,IAC1B3c,KAAKmW,WAAWvK,KAAK+Q,EAAY,EAErC,CAEAc,mBAAmBC,UACG,QAAhBjI,OAAKkI,mBAAW,eAAEC,SAAUF,IAAS1d,KAAK2d,YAAYC,QACxD5d,KAAKqT,YAAYwK,qCAEnB7d,KAAK8d,cAAgBJ,EACrB1d,KAAKqT,YAAY0K,cAAcL,GACJA,EAAKM,QAAQ,aAAc,IAAIC,OACnCpV,OAAS,EAC9B7I,KAAKke,gBAGPle,KAAKme,gBACP,CAEAC,SAASnV,GACP,MAAML,EAAUK,EAAML,QAEhByV,IAAkB,EAACrf,OAAgBiK,EAAMqV,SAASC,QAExD,IAAIC,EAEFA,EADEH,EACere,KAAKsT,oBACnBmL,oBACAjB,OAAOxe,OAEOgB,KAAKsT,oBACnBmL,oBACAjB,OAAOxe,OAGZ,MAAM0f,EAAa1e,KAAKgW,YAAYnO,UAAUhC,MAC3C2X,OACEvR,GACCA,EAAOsS,SAAWtV,EAAMqV,SAASC,QACjCC,EAAe9L,SAASzG,EAAOsS,SAElCI,OAAO/V,GACV5I,KAAKgW,YAAY4I,WAAWF,EAC9B,CAEAG,oCAAoChZ,GAClC7F,KAAKqT,YAAYyL,+BAA+BjZ,EAClD,CAEAkZ,kCAAkClZ,GAChC7F,KAAK0C,eAAeO,IAAI,mCAAoC4C,GAC5D7F,KAAKyU,oCAAsC5O,CAC7C,CAEAmZ,yBACEhf,KAAKoY,kBAAkB/S,MAAK,EAC9B,CAEQkT,eACNvY,KAAK0U,eAAgB,EACrB1U,KAAKiF,IAAImF,eAAe0N,QAAQ,GAAK,CACvC,CAEQ+B,cACN7Z,KAAK0U,eAAgB,EACrB1U,KAAKiF,IAAImF,eAAe0N,QAAQ,GAAK9X,KAAK6O,WAAa,EAAI,GAC7D,CAEQoO,gBACNjd,KAAK0U,cAAgB1U,KAAKuY,eAAiBvY,KAAK6Z,cAChD7Z,KAAKia,0BACP,CAEOgF,YAAYhO,GACbA,GAAsB,kBAAdA,EAAKlE,MAA4B/M,KAAKkf,WAChDlf,KAAKkf,UAAUC,cAAcC,qBAAqB,SAAS,GAAGphB,OAElE,CAEQqhB,wBAAwBlN,WACR,QAAlB8G,EAAY,QAAZxD,EAAO,MAAPtD,OAAO,EAAPA,EAASlN,WAAG,eAAEqa,YAAI,SAAEC,YACtBvf,KAAKuf,WAAapN,EAAQlN,IAAIqa,KAAKC,WAAWliB,OAC9C2C,KAAKwf,WAAarN,EAAQlN,IAAIqa,KAAKC,WAAWE,OAC9Czf,KAAK0f,SAAWvN,EAAQlN,IAAIqa,KAAKC,WAAWI,OAE5C3f,KAAKuf,gBAAa,EAClBvf,KAAKwf,gBAAa,EAClBxf,KAAK0f,cAAW,EAGpB,CAEQvI,gBAAgBhF,GAEtB,GADAnS,KAAK6c,6BACW,IAAZ1K,EAkBJ,IAfInS,KAAKsW,YAActW,KAAKsW,UAAUsE,YAAYgF,OAChD5f,KAAKsW,UAAUsE,YAAY1R,QAExBlJ,KAAKmH,WAAWQ,MAAMiY,OACzB5f,KAAKmH,WAAWQ,MAAMkY,YAGxB7f,KAAKqf,wBAAwBlN,GAE7BnS,KAAK4S,MAAMkE,YAAYzW,QAAKiK,KAAa,MAAM/J,UAAWuf,MACnDA,EAAQ3N,SAAc2N,EAAQ3N,UAAeA,EAAQuD,MACxD1V,KAAK+f,sBAAsBD,EAAO,GAIlC9f,KAAKkX,cAAe,CACtB,MAAM8I,EAAiBhgB,KAAK8Q,QAAQmP,QAAQ,kBAI5C,IAAIC,GAH0BF,EAC1BA,EAAezO,QACf,IACmC4O,0BAEvC,IAAKD,EAAY,CACf,MAAME,EAAkB,CAAC,WAAY,MAAO,aAAc,aAC1D,UAAWC,KAAYD,EACrB,GAAIpgB,KAAK8Q,QAAQmP,QAAQI,GAAW,CAClCH,EAAaG,EACb,OAKFH,GACFlgB,KAAK8Q,QAAQwP,aAAaJ,GAI9BlgB,KAAKkX,eAAgB,EACvB,CAEQiH,mBAEHne,KAAK8Q,QAAQE,YAAYnL,OACc,kBAAxC7F,KAAK8Q,QAAQE,YAAYnL,MAAMkH,OAE/B/M,KAAK8Q,QAAQwP,aAAa,iBAE5BtgB,KAAK6Z,aACP,CAEA0G,kBAAkBhZ,GAChBvH,KAAKiF,IAAImF,eAAe0N,QAAQ,GAAKvQ,EAAS,IAAM,EACpDvH,KAAKwgB,kCACLxgB,KAAK6U,iBAAmBtN,CAC1B,CAEQiZ,kCAEJxgB,KAAK6O,YACL7O,KAAKgU,mBACLhU,KAAKoV,wBACLpV,KAAK6U,mBAEL7U,KAAKoV,wBAAyB,EAElC,CAEO8I,gBACLle,KAAKiF,IAAIwb,qBAAqBvX,QAC9BlJ,KAAKgW,YAAY9M,QACjBlJ,KAAKqT,YAAYqN,uBAAkB,GACnC1gB,KAAKqT,YAAYwK,oCACnB,CAEQ/B,uBACN,OAAO9b,KAAKsT,oBACTqN,aACAnE,KACEoE,GACCA,aAAwB5hB,MAEhC,CAEA6hB,kBAAkB5X,GAChBjJ,KAAKsX,iBAAmBtX,KAAK8gB,mBAAmB7X,EAClD,CAEQ6X,mBAAmB7X,GACzB,MAAM8X,EAAmB9X,EACnB+X,EAAqBhhB,KAAKihB,WAAW9B,cAAc+B,wBACzDH,EAAiBnU,EACfmU,EAAiBnU,EACjBoU,EAAmBG,KAClB5f,OAAO6f,SAAW7f,OAAO8f,aAC5BN,EAAiBpU,EACfoU,EAAiBpU,EACjBqU,EAAmBM,MAClB/f,OAAOggB,SAAWhgB,OAAOigB,aAC5B,MAAMC,EAAQ,CAACV,EAAiBpU,EAAGoU,EAAiBnU,GAE9C8U,EAAQ1hB,KAAKiF,IAAI8S,GAAG4J,uBAAuBF,GAC3CG,EAAO5hB,KAAKiF,IAAI2E,WACtB,OAAOiY,MAAiBH,EAAOE,EAAM,YACvC,CAEQrK,eAAemK,GACrBngB,OAAOH,KAAKpC,6BAAmC0iB,EAAM,GAAIA,EAAM,IACjE,CAEQlK,qBAAqBkK,GAC3BngB,OAAOH,KAAKpC,8BAAoC0iB,EAAM,GAAIA,EAAM,IAClE,CAEArK,iBAAiBqK,GACf1hB,KAAK8d,cAAkB9d,KAAKyU,oCACgBiN,EAAMI,UAAU7c,IAAK8c,GAAMA,EAAEC,QAAQ,IAAIC,KAAK,MAA1FP,EAAMzc,IAAK8c,GAAMA,EAAEC,QAAQ,IAAIC,KAAK,KACtC,CAEAtJ,wBACE,MAAMuJ,EAASliB,KAAKmH,WAAWQ,MAAME,UAAUhC,MAAMgD,OAAS,EAC1D7I,KAAKgU,mBAAqBhU,KAAK6S,eAAe2F,kBAAkB3S,MAClE7F,KAAKihB,WAAW9B,cAAcgD,UAAUC,IAAI,uBAE5CpiB,KAAKihB,WAAW9B,cAAcgD,UAAU/e,OAAO,uBAG7CpD,KAAKgU,mBAAqBhU,KAAKoV,uBAC7BpV,KAAK6Y,mBAAmBhT,OAC1B7F,KAAKihB,WAAW9B,cAAcgD,UAAUC,IAAI,8BAC5CpiB,KAAKihB,WAAW9B,cAAcgD,UAAU/e,OAAO,sBAE/CpD,KAAKihB,WAAW9B,cAAcgD,UAAUC,IAAI,oBAC5CpiB,KAAKihB,WAAW9B,cAAcgD,UAAU/e,OAAO,+BAG7CpD,KAAK6Y,mBAAmBhT,MAC1B7F,KAAKihB,WAAW9B,cAAcgD,UAAU/e,OAAO,8BAE/CpD,KAAKihB,WAAW9B,cAAcgD,UAAU/e,OAAO,oBAI/CpD,KAAK0U,cACP1U,KAAKihB,WAAW9B,cAAcgD,UAAUC,IAAI,kBAE5CpiB,KAAKihB,WAAW9B,cAAcgD,UAAU/e,OAAO,kBAG7CpD,KAAK0U,gBAAkB1U,KAAK6O,WAC9B7O,KAAKihB,WAAW9B,cAAcgD,UAAUC,IAAI,6BAE5CpiB,KAAKihB,WAAW9B,cAAcgD,UAAU/e,OACtC,6BAICpD,KAAK6U,mBAAoBqN,GAAWliB,KAAKoV,uBAG5CpV,KAAKihB,WAAW9B,cAAcgD,UAAU/e,OAAO,2BAF/CpD,KAAKihB,WAAW9B,cAAcgD,UAAUC,IAAI,4BAM3CpiB,KAAK6U,kBACNqN,IACCliB,KAAK6O,YAAc7O,KAAKgV,YAAchV,KAAK0U,iBAC3C1U,KAAKoV,uBAENpV,KAAKihB,WAAW9B,cAAcgD,UAAUC,IAAI,4BAE5CpiB,KAAKihB,WAAW9B,cAAcgD,UAAU/e,OACtC,2BAGN,CAEAoX,sBACE,OAAKxa,KAAK0U,cASC1U,KAAK0U,cACV1U,KAAKma,uBAAyBna,KAAKiH,aAAaqF,YAC3C,qBAELtM,KAAKoH,WACA,cAEA,uBAPJ,EARDpH,KAAKma,uBAAyBna,KAAKiH,aAAaqF,YAC3C,cAELtM,KAAKoH,WACA,eAEA,UAYb,CAEAib,6BAA6Bxc,GAC3B7F,KAAK0C,eAAeO,IAAI,8BAA+B4C,GACvD7F,KAAKwU,+BAAiC3O,CACxC,CAEAyc,0BACE,OAA2B,IAAvBtiB,KAAK0U,eAC6B,IAAhC1U,KAAKoV,uBACA,OAEF,gBAEkB,IAAvBpV,KAAK0U,gBAA8C,IAApB1U,KAAK6O,YACF,IAAhC7O,KAAKoV,uBACA,UAEF,uBAEkB,IAAvBpV,KAAK0U,gBAA8C,IAApB1U,KAAK6O,YACF,IAAhC7O,KAAKoV,uBACA,SAEA,kBAJX,CAOF,CAEAmN,uBACE,IAAIC,EAAS,cACb,OAGMA,EAHFxiB,KAAKoV,uBACHpV,KAAK6Y,mBAAmBhT,MACtB7F,KAAK6U,iBACE,mCAEA,mCAGP7U,KAAK6U,iBACE,0BAEA,0BAIJ,cAEJ2N,CACT,CAEAC,sBACE,IAAwB,IAApBziB,KAAK6O,aAAiD,IAA1B7O,KAAK6U,mBACR,IAAvB7U,KAAK0U,gBAC6B,IAAhC1U,KAAKoV,wBACHpV,KAAKmH,WAAWQ,MAAME,UAAUhC,MAAMgD,OAAS,EACjD,MAAO,KAKjB,CACA6Z,qBACE,OAAO1iB,KAAKoV,uBACVpV,KAAK6Y,mBAAmBhT,MAAQ,wCAA0C,8BAC1E,oBACJ,CAEA8c,8BACE,IAAIH,EACJ,OAKQA,EALJxiB,KAAK6O,WAEH7O,KAAK6S,eAAe2F,kBAAkB3S,OACJ,IAAhC7F,KAAKoV,uBAC8C,IAAjDpV,KAAKmH,WAAWQ,MAAME,UAAUhC,MAAMgD,OAC/B,sBAEA,qBAG0C,IAAjD7I,KAAKmH,WAAWQ,MAAME,UAAUhC,MAAMgD,OAC/B,8BAEA,+BAKwC,IAAjD7I,KAAKmH,WAAWQ,MAAME,UAAUhC,MAAMgD,OAC/B,qBAEA,sBAIT7I,KAAK6S,eAAe2F,kBAAkB3S,MACpC7F,KAAKoV,uBACHpV,KAAK6Y,mBAAmBhT,MACjB,wCAEA,8BAGF,sBAGF,qBAGN2c,CACT,CAEQvK,kBACNjY,KAAK4S,MAAMkE,YAAYvW,UAAW5D,IAChCqD,KAAK2d,YAAchhB,EACnBqD,KAAK4iB,iBACL5iB,KAAK6iB,mBACL7iB,KAAK8iB,iBACL9iB,KAAK+iB,qBAAmB,EAE5B,CAEQhM,kBAAkBpa,GACpBA,EAAOqmB,OACThjB,KAAK8S,YAAYmQ,eAAgB,EACjCjjB,KAAKF,gBAAgBojB,YAAYvmB,EAAOqmB,MAE5C,CAEQD,sBACN,GAAI/iB,KAAK2d,YAAYwF,WAAe,CAClC,MAAMC,EAAepjB,KAAK2d,YAAYwF,WAAcE,MAAM,KACpDC,EAAWzB,MACfuB,EACA,YACApjB,KAAKiF,IAAI2E,YAEX5J,KAAKiF,IAAImF,eAAemZ,aAAaD,GAEzC,CAEQE,oBACN1hB,WAAW,KACT,MAAM2hB,EAAkB/hB,SACrB0d,qBAAqB,2BACrBsE,KAAK,GACJD,GACFA,EAAWE,OAAK,EAEjB,EACL,CAEQb,iBACN,GAA+B,MAA3B9iB,KAAK2d,YAAYiG,IAAiB5jB,KAAK6jB,iBAAkB,CAC3D,MAAMC,EAAa9jB,KAAKgW,YAAY+N,UAAUC,OAC3C3jB,QACCiL,KAAW2Y,GAAiC,IAApBA,EAASpb,SAAY,EAC7CyB,KAAa,MAAI,EACjB4Z,MAAK,IAEN3jB,UAAW0jB,IACVH,EAAWte,cACPye,EAASpb,SAAW7I,KAAKmkB,4BAC3BnkB,KAAKwjB,oBACLxjB,KAAKmkB,2BAA4B,KAI3C,CAEQtB,mBACN,GAAI7iB,KAAK2d,YAAYC,OAAW,CAK9B,GAJA5d,KAAK6jB,kBAAmB,EACe,MAAnC7jB,KAAK2d,YAAYyG,YACnBpkB,KAAKqT,YAAYgR,mCAEfrkB,KAAK2d,YAAYC,SAAc5d,KAAK2d,YAAYgC,MAAsC,MAA3B3f,KAAK2d,YAAYiG,GAAe,CAC7F,MAAME,EAAa9jB,KAAKgW,YAAY+N,UAAUC,OAC3C3jB,QACCiL,KAAW2Y,GAAiC,IAApBA,EAASpb,SAAY,EAC7CyB,KAAa,MAAG,EAChB4Z,MAAK,IAEN3jB,UAAW0jB,IACVH,EAAWte,cACX,MAAM8e,EAA0BL,EAC7BzG,OAAO3N,GAAKA,EAAE0U,OAAOpX,KAAKqX,WAAaxlB,OACvCiG,IAAKsf,IACJ,IAAIld,MAAkBoC,YAAY8a,EAAOA,OAAO7a,KAAM,CACpDC,eAAgB4a,EAAOA,OAAO7a,KAAKE,WACnCC,kBAAmB7J,KAAKiF,IAAI2E,cAG5B6a,KAAczlB,OAAwBgB,KAAKiF,IAAKqf,GACtDtkB,KAAKiF,IAAImF,eAAemZ,aAAakB,EAAW,GAGtDzkB,KAAK8d,cAAgB9d,KAAK2d,YAAYC,OAED,MAAnC5d,KAAK2d,YAAY+G,YACnB1kB,KAAKqT,YAAY6C,8BAA8B7Q,MAAK,EAExD,CAEQud,iBAkBN,GAjBI5iB,KAAK2d,YAAY1M,MACnBjR,KAAK2kB,cAActkB,QACjBiL,KAAUnG,QAAW,IAANA,IAAe,EAC9Byf,QACArkB,UAAUskB,IACLA,GACH7kB,KAAK8Q,QAAQwP,aAAatgB,KAAK2d,YAAY1M,KAAO,GAKpB,MAAhCjR,KAAK2d,YAAYze,SACnB4C,WAAW,KACT9B,KAAK6Z,aAAW,EACf,KAGD7Z,KAAK2d,YAAYmH,QAAY,CAC/B,IAAIC,GAAqB,EACzB,MAAMC,EAAahlB,KAAK2d,YAAYmH,QAAWzB,MAAM,KAC/C4B,EAAiBjlB,KAAK2d,YAAYsH,eACxC,IAAIC,EACAD,IACFC,EAAkBC,SAASF,EAAe5B,MAAM,WAAW,GAAI,KAEjErjB,KAAK6T,eAAeuR,WAAWC,kBAC5BhlB,QAAKiL,KAAUga,IAASA,IAAI,EAAGV,QAC/BrkB,UAAW+kB,IACNA,IAASP,IACXA,GAAqB,EACrBC,EAAW/f,IAAI,CAACyc,EAAOvS,KACjBA,EAAI,MACNnQ,OAAegB,KAAK6T,eAAeuR,WAAU,GAGjDtjB,WAAW,KACTkjB,EAAW/f,IAAI,CAACyc,EAAOvS,KACrB,MAAMoW,EAAOvlB,KAAK6T,eAAeuR,WAAWtb,MAAM0S,KAAK3M,GAAKA,EAAE2V,WAAarW,GAC3EoW,EAAKE,KAAO/D,EACZ6D,EAAKG,YAAchE,EAAM2B,MAAM,KAC/BrjB,KAAK6T,eAAeuR,WAAWhX,OAAOmX,EAAI,EAC3C,EACmC,KAAnCvlB,KAAK6T,eAAevJ,cAAmB,GAIhDtK,KAAK6T,eAAe8R,mBAAmBjO,OACpCrX,QAAKiL,KAAUyW,GAAKA,EAAI,IAAC,EAAG6C,QAC5BrkB,UAAUwhB,IACLA,GAAK,GACP/hB,KAAK6T,eAAe+R,mBAAmBvgB,MAAI,GAIjDrF,KAAK6T,eAAe8R,mBAAmBjO,OACpCrX,QAAKiL,KAAUyW,GAAKA,EAAI,IAAC,EAAG6C,QAC5BrkB,UAAU,KACL2kB,IACFllB,KAAK6T,eAAe8R,mBAAmB9d,UAAUhC,MAAMZ,IAAI4gB,GAAKA,EAAEvX,WAAWkD,QAAS,GACtFxR,KAAK6T,eAAe8R,mBAAmB9d,UAAUhC,MAAMqf,GAAiB5W,WAAWkD,QAAS,EAC5FxR,KAAK6T,eAAe+R,mBAAmBvgB,OAAI,GAIrD,CAEQ0a,sBAAsBpjB,GAC5BqD,KAAK8lB,4BAA4BnpB,EAAQ,OACzCqD,KAAK8lB,4BAA4BnpB,EAAQ,QACzCqD,KAAK8lB,4BAA4BnpB,EAAQ,cACzCqD,KAAK8lB,4BAA4BnpB,EAAQ,mBACzCqD,KAAK8lB,4BAA4BnpB,EAAQ,kBACzCqD,KAAK+lB,sBAAsBppB,EAC7B,CAEAqpB,cAAcjZ,EAAMvR,GAClB,IAAIyqB,EACJ,OAAIzqB,EAAIkX,SAAS,OAEfuT,EADmB,IAAIzS,MAAW,CAAE0S,WAAY1qB,EAAI6nB,MAAM,KAAK,KACvCrgB,IAAI+J,IAEvBkZ,CACT,CAEQH,4BAA4BnpB,EAAgBsF,GAClD,IAAIkkB,EACAC,EACJ,OAAQnkB,OACD,OACEtF,EAAO2U,QAAa3U,EAAO0pB,YAAiB1pB,EAAO2pB,SACtDF,EAAU,SACVD,EAAqBxpB,EAAO0pB,UAAe,YAAc,UAE3D,UACG,OACC1pB,EAAO4pB,YAAiB5pB,EAAO6pB,UACjCJ,EAAU,UACVD,EAAqB,cAEvB,UACG,aACCxpB,EAAO8pB,cAAmB9pB,EAAO+pB,YACnCN,EAAU,YACVD,EAAqB,gBAEvB,UACG,kBACCxpB,EAAOgqB,eAAoBhqB,EAAOiqB,aACpCR,EAAU,aACVD,EAAqB,iBAEvB,UACG,iBACCxpB,EAAOkqB,eAAoBlqB,EAAOmqB,aACpCV,EAAU,aACVD,EAAqB,iBAI3B,IAAKA,IAAuBC,EAC1B,OAEF,MAAMW,EAAkBpqB,EAAOwpB,GAAoB9C,MAAM,OACnD2D,EAAOrqB,EAAOypB,GAAS/C,MAAM,KAEnC,IAAI4D,EAAM,EACVD,EAAK3L,QAAS6L,IACZ,IAAI1rB,EAAM0rB,EACV,MAAMhlB,EACJlC,KAAKgmB,cAAc,UAAWxqB,IAC9BwE,KAAKgmB,cAAc,UAAWxqB,SAC9B,EACE0G,IACF1G,EAAMA,EAAIwiB,QAAQ,WAAa9b,EAAS,IAAI8b,QAAQ,WAAa9b,EAAS,KAExE1G,EAAI2rB,SAAS,OACf3rB,EAAMA,EAAI4rB,UAAU,EAAG5rB,EAAIqN,OAAS,IAGP7I,KAAKqnB,uBAClCN,EAAgBE,IAEK5L,QAAShK,KAC9B,MAAMiW,EAAejW,GAAMgS,MAAM,SAC3BkE,GAAeC,sBAA4B,CAC/CvlB,OACAzG,IAAKA,EACL6V,MAAOiW,EAAa,GACpB3qB,OAAiB,QAATsF,EAAiB,CAAEwlB,OAAQH,EAAa,SAAO,IAEnDhsB,MAAK0D,OAA4BuoB,IACjCG,GAAa1nB,KAAK2nB,8BAA8BhrB,EAAQrB,IAC9D0E,KAAK4nB,gBACHpsB,EACA8rB,EAAa,GACbrlB,EACAC,EACAwlB,GACAJ,EAAa,GAAKnC,SAASmC,EAAa,GAAI,SAAM,EAAS,GAG/DL,GAAO,GAEX,CAEQlB,sBAAsBppB,GAC5B,GAAIA,EAAOkrB,OAAW,CACpB,MAAMrsB,EAAMmB,EAAOkrB,OACbC,EAAYtsB,EAAIusB,YAAY,KAC5BC,EAAWxsB,EAAIysB,MAAMH,EAAY,EAAGtsB,EAAIqN,QAE9C7I,KAAKwT,KAAKxQ,IAAI,GAAGxH,IAAO,CAAE0sB,aAAc,SAAU3nB,UAAWmJ,IAC3D,MAAMye,EAAO,IAAIC,KAAK,CAAC1e,GAAOse,EAAU,CACtC/lB,KAAMyH,EAAKzH,KACXomB,aAAc/jB,KAAKgkB,QAErBtoB,KAAKuT,cAAcgV,OAAOJ,GAAM5nB,UAC7BkO,GAAwBzO,KAAKwoB,oBAAoBL,EAAM1Z,GACvD3N,GAAiBd,KAAKyoB,kBAAkBN,EAAMrnB,GAAM,GAI7D,CAEQ0nB,oBAAoBL,EAAY1Z,IACtC,SACE0Z,EACA1Z,EACAzO,KAAKiF,IACLjF,KAAKmT,aAAajB,SAASrM,MAAM6P,IACjC1V,KAAKyT,eACLzT,KAAK+S,aAET,CAEQ0V,kBAAkBN,EAAYrnB,IACpC,SACEqnB,EACArnB,EACAd,KAAKyT,eAET,CAEQ4T,uBAAuBN,GAC7B,IAAI2B,EAAqB3B,EACzB,SAAqB2B,EAAmBC,WAAW,KAC/CD,EAAmBE,OAAO,GAC1BF,EACJA,EAAqBA,EAAmBvB,SAAS,KAC7CuB,EAAmBT,MAAM,GAAG,GAC5BS,EACGA,EAAmBrF,MAAM,IAClC,CACQuE,gBACNpsB,EACAuR,EACA9K,EACAC,EACAwlB,GAAsB,EACtBmB,GAEA,IAAK7oB,KAAKkX,cACR,OAEF,MAAM4R,EAAsB,CAC1BC,yBAAyB,EACzBC,gBAAgB,EAChBC,aAAa,EACbhnB,OACAzG,OAEI0tB,EAAyB,eAATjnB,GAAkC,oBAATA,GAAuC,mBAATA,EAC7E,IAAIkZ,EAAgB,CAClBjZ,QAAkB,SAATD,EAAkB,aAAU,EACrCknB,YAAWD,EACXE,YAAaF,EAAe,gBAAa,EACzC7X,MAAOtE,GAEI,QAAT9K,IACFkZ,EAAgB,CAAExe,OAAQ,CAAE8qB,OAAQ1a,EAAMsc,QAASnnB,KAGrDiZ,EAAgBqM,sBAA4Bna,OAAOC,OAAO,GAAI6N,EAAe2N,IAE7E9oB,KAAK8c,cAAc5Q,KACjBlM,KAAK+S,aACFuW,iBAAiB,CAChBT,OAAQA,EACRhO,QAAS6M,EACTvM,kBAED5a,UAAWgpB,IACVvpB,KAAKiF,IAAIukB,SAASD,EAAC,GAG3B,CAEQ5B,8BACNhrB,EACA8sB,GAEA,MAAM3S,EAAcna,EACpB,IAAIke,GAAU,EACd,IAAK/D,IAAgB2S,EACnB,OAAO5O,EAET,IAAI6O,EAAwB,GACxBC,EAAyB,GACzBC,EAA0B,GAC1BC,EAA4B,GAChC,OAAI/S,EAAY8S,gBACdF,EAAwB5S,EAAY8S,eAElC9S,EAAY+S,kBACdF,EAAyB7S,EAAY+S,iBAKT,MAA1BH,IACF7O,GAAU,GAEmB,MAA3B8O,IACF9O,GAAU,GAIZ+O,EAAgBF,EAAsBrG,MAAM,KAC5CwG,EAAkBF,EAAuBtG,MAAM,MAC3CuG,EAAcxa,QAAQqa,IAAkB,GAAMG,EAAcxa,QAAQqa,EAAeK,aAAc,KACnGjP,GAAU,IAERgP,EAAgBza,QAAQqa,IAAkB,GAAMI,EAAgBza,QAAQqa,EAAeK,aAAc,KACvGjP,GAAU,GAELA,CACT,CAEQhE,0BACO,QAATpB,OAAKb,YAAI,SAAEpZ,IACbwE,KAAK8S,YAAYiX,QAAQxpB,UAAWypB,IAC9BA,GACFhqB,KAAKiqB,qBAAmB,GAI5BjqB,KAAKiqB,qBAET,CAEQA,sBACN,GAAIjqB,KAAK4D,qBAAqBT,mBAAoB,CAChD,MAAM+mB,EAAsClqB,KAAK4D,qBAAqBV,YAEtElD,KAAK2kB,cAActf,KACfrF,KAAK0T,aAAatS,KAClBuC,EACAumB,IAGFlqB,KAAK2kB,cAAc9e,MAAMskB,cAAc5pB,UAAW0L,IAClDjM,KAAK4D,qBAAqBH,2BAC1BzD,KAAK2kB,cAActf,UAAK,EAAS,GAGvC,CAEQgY,0BAA0B9P,GAChC,GAAIvN,KAAKsW,UAAW,CAClB,MAAM8T,EAAe7c,EAAQJ,KAAKuP,YAElC,OADiB1c,KAAKsW,UAAU/a,QACf6uB,EAMnB,OAAO,CACT,CAEQ9M,+BACN,GAAGtd,KAAKsW,UAAW,CACjB,MAAMyC,EAAY/Y,KAAKsW,UACvB,GAAGyC,EAAUvH,QAAUuH,EAAU4B,mBAAmB9U,OAAS7F,KAAK6S,eAAewC,uBAC/E,OAAO,EAGX,OAAO,CACR,CAEDgV,0BAA0BC,GACxB,GAAkB,MAAdA,KAAgBzhB,OAClB,UAAWwI,KAASiZ,EAAgB,CAClC,MAAMC,EAAoBvqB,KAAKwW,eAAe1M,MAAM0S,KAAKlG,GAAajF,EAAME,QAAQ+E,UAAUkU,YAAY9X,SAAS4D,EAAUhb,KAC5G,MAAjBivB,KAAmBpd,KAAKsd,cAAcC,QAAQrP,QAAQsP,KAEnC,SAAbA,EAAI1oB,MAAgC,iBAAb0oB,EAAI1oB,OAC7BjC,KAAK4T,wBAAwBgX,gBAAgBD,EAAIE,UAAUtqB,UAAU0L,IACnE0e,EAAIG,aAAe7e,GACpB,GAKX,CAEA8e,2BACE,IAAIvhB,EAAS,IAAInC,KACjB,MAAM2jB,EAAmBhrB,KAAK6S,eAAeoY,mBAAmBhmB,IAAIimB,GAAQA,EAAI3G,QAChF,GAAgC,IAA5ByG,EAAiBniB,OACnB,OAEF,MAAMsiB,EAAqB,GAC3B,UAAWC,KAAQJ,EAAkB,CACnC,IAAIzhB,EAAiBC,EAAOC,YAAY2hB,EACtC,CACEzhB,eAAgByhB,EAAKxhB,WACrBC,kBAAmB7J,KAAKiF,IAAI2E,aAE9BuhB,EAAmBjf,KAAK3C,IAE5B,SAAiBvJ,KAAKiF,IAAKkmB,EAAoBnsB,WACjD,yCAn7CW2T,IAAerQ,2VAAfqQ,GAAelN,sEA8DOnD,iBAEDA,qmIDtLlCA,mCAAkD,wBAAlDA,CAAkD,oBAK5CA,gCAAS4D,mBAAiB,GAC5B5D,QAEAA,oCAKAA,mCAoBAA,yBAEEA,4DAA0B,gCACZ4D,gBAAmB,GACnC5D,QAEAA,+BAoBEA,iCAAS4D,eAAkB,EAA3B5D,CAA4B,kCAGZ4D,sBAAyB,EAHzC5D,CAA4B,qCAMR4D,yBAAuB,EAN3C5D,CAA4B,qCAQR4D,yBAAuB,GAE3C5D,6BAEkB,wBAFlBA,CAEkB,uBAGlBA,0CACAA,yCAKAA,2CAMAA,mCACAA,6CAQAA,sCAMAA,uCAIFA,QAEAA,8CAMFA,UAGFA,6DA2GAA,6CAEEA,2EAEAA,mBAA8D,gBAI1DA,gEAAwC,CAAK,GAC7CA,wBACFA,UAGFA,oEAMFA,QAEAA,wDAaAA,qEA7PMA,wCAIgBA,wCAKDA,uCAqBfA,4BAAW,0BAQXA,kDAAiC,mCAAjCA,CAAiC,kEAAjCA,CAAiC,2BAAjCA,CAAiC,4BAAjCA,CAAiC,uBAAjCA,CAAiC,mBAAjCA,CAAiC,+BAAjCA,CAAiC,0BAAjCA,CAAiC,YAAjCA,CAAiC,mBAAjCA,CAAiC,sDAAjCA,CAAiC,4CAAjCA,CAAiC,qCA2BhBA,4BAAW,2CAGTA,4BACHA,4BACOA,4CAEpBA,2CAKAA,4CAKkBA,oEAAmD,aAErEA,6CAQAA,kCAKsBA,4BAAW,mDAAXA,CAAW,oBAOpCA,wDAAuC,gGAS1CA,4FA2GDA,gCAAoB,yCAajBA,yDAOaA,s+ZCxIJ,CCjGP,SAAS+oB,KACd,MAAO,IACLxkB,MAAQ,qBAAsB,IAC5BA,MACE,UACAA,MAAM,CACJya,KAAM,MACN,YAAa,WACb,EAEJza,MACE,kBACAA,MAAM,CACJya,KAAM,MACN/L,OAAQ,MACR,YAAa,WACb,EAEJ1O,MACE,gBACAA,MAAM,CACJgF,QAAS,WACT,EAEJhF,MACE,YACAA,MAAM,CACJya,KAAM,wBACN,EAEJza,MACE,aACAA,MAAM,CACJya,KAAM,QACN,YAAa,yBACb,EAEJza,MACE,yBACAA,MAAM,CACJya,KAAM,QACN/L,OAAQ,MACR,YAAa,yBACb,EAEJ1O,MAAW,YAAUA,MAAQ,aAC9B,EACDA,MAAQ,eAAgB,IACtBA,MACE,UACAA,MAAM,CACJ0O,OAAQ,WACR,EAEJ1O,MACE,WACAA,MAAM,CACJ0O,OAAQ,WAKlB,CDoCI8V,GClCG,SAASC,KACd,MAAO,IACLzkB,MAAQ,0BAA2B,IACjCA,MACE,UACAA,MAAM,CACJgF,QAAS,WACT,EAEJhF,MAAW,eAAaA,MAAQ,SAAM,EACtCA,MAAW,YAAUA,MAAQ,aAC9B,EACDA,MAAQ,oBAAqB,IAC3BA,MACE,kBACAA,MAAM,CACJya,KAAM,UACN,EAEJza,MACE,cACAA,MAAM,CACJya,KAAM,UACN,EAEJza,MACE,iBACAA,MAAM,CACJya,KAAM,UACN,EAEJza,MACE,iBACAA,MAAM,CACJya,KAAM,wBACN,EAEJza,MACE,qBACAA,MAAM,CACJya,KAAM,wBACN,EAEJza,MACE,wBACAA,MAAM,CACJya,KAAM,wBACN,EAEJza,MAAW,iCAA+BA,MAAQ,WAAQ,EAC1DA,MAAW,iCAA+BA,MAAQ,WAAQ,EAC1DA,MAAW,iCAA+BA,MAAQ,WAAQ,EAC1DA,MAAW,iCAA+BA,MAAQ,WAAQ,EAC1DA,MAAW,uCAAqCA,MAAQ,WAAQ,EAChEA,MAAW,uCAAqCA,MAAQ,aAGzD,EACDA,MAAQ,oBAAqB,IAC3BA,MACE,iBACAA,MAAM,CACJ0O,OAAQ,QACR,EAEJ1O,MACE,6BACAA,MAAM,CACJ0O,OAAQ,QACRsT,OAAQ,UACR,EAEJhiB,MACE,6BACAA,MAAM,CACJ0O,OAAQ,QACRsT,OAAQ,QACR,EAEJhiB,MACE,sCACAA,MAAM,CACJ0O,OAAQ,QACRsT,OAAQ,UACR,EAEJhiB,MACE,sCACAA,MAAM,CACJ0O,OAAQ,QACRsT,OAAQ,QACR,EAENhiB,MAAW,gCAA8BA,MAAQ,UAAO,EACxDA,MAAW,wDAAsDA,MAAQ,WAAQ,EACjFA,MAAW,wDAAsDA,MAAQ,WAAQ,EACjFA,MAAW,0EAAwEA,MAAQ,WAAQ,EACnGA,MAAW,0EAAwEA,MAAQ,YAG/F,CDjEIykB,GCmEG,SAASC,KACd,MAAO,IACL1kB,MAAQ,kBAAmB,IACzBA,MAAM,WAASA,MAAM,MAAG,EACxBA,MACE,wBACAA,MAAM,CACJ0O,OAAQ,UACR,EAEJ1O,MACE,iCACAA,MAAM,CACJ0O,OAAQ,YACR,EAEJ1O,MACE,2CACAA,MAAM,CACJ0O,OAAQ,YACR,EAEJ1O,MACE,yBACAA,MAAM,CACJ0O,OAAQ,WACR,EAEJ1O,MACE,wBACAA,MAAM,CACJ0O,OAAQ,YACR,EAEJ1O,MACE,MACAA,MAAM,CACJ0O,OAAQ,kBACR,EAEJ1O,MACE,kCACAA,MAAM,CACJ0O,OAAQ,yBACR,EAEJ1O,MACE,iCACAA,MAAM,CACJ0O,OAAQ,0BACR,EAEJ1O,MAAW,YAAUA,MAAQ,aAC9B,EACDA,MAAQ,gBAAiB,IACvBA,MACE,SACAA,MAAM,CACJ0O,OAAQ,WACR,EAEJ1O,MAAW,YAAUA,MAAQ,YAGnC,CDlII0kB,GCoIG,SAASC,KACd,SAAO3kB,MAAQ,gBAAiB,IAC9BA,MACE,UACAA,MAAM,CACJya,KAAM,WACN,EAEJza,MACE,WACAA,MAAM,CACJya,KAAM,YACN,EAEJza,MAAW,YAAUA,MAAQ,WAEjC,CDnJI2kB,GCqJG,SAASC,KACd,SAAO5kB,MAAQ,gBAAiB,IAC9BA,MAAM,WAASA,MAAM,MAAG,EACxBA,MACE,wBACAA,MAAM,CACJ0O,OAAQ,MACR,cAAe,UACf,EAEJ1O,MACE,iCACAA,MAAM,CACJ0O,OAAQ,QACR,cAAe,YACf,EAEJ1O,MACE,2CACAA,MAAM,CACJ0O,OAAQ,QACR,cAAe,YACf,EAEJ1O,MAAW,YAAUA,MAAQ,WAEjC,CD9KI4kB,GCgLG,SAASC,KACd,SAAO7kB,MAAQ,YAAa,IAC1BA,MACE,UACAA,MAAM,CACJya,KAAM,QACN,EAEJza,MACE,WACAA,MAAM,CACJya,KAAM,QACN,EAEJza,MAAW,YAAUA,MAAQ,WAEjC,CD/LI6kB,GCgMG,SAASC,KACd,SAAO9kB,MAAQ,YAAa,IAC1BA,MACE,OACAA,MAAM,CACJ0O,OAAQ,QACR,EAEJ1O,MAAW,YAAUA,MAAQ,WAEjC,CDzMI8kB,OE3GG,MAAMC,GAKXhsB,YACU6C,EACE3C,GADFE,qBACEA,uBACRA,KAAK6rB,eACP,CAEFA,gBACE7rB,KAAK8rB,WAAa9rB,KAAKyC,cAAcS,UAAU,eAC/ClD,KAAK+rB,gBAAkB/rB,KAAKyC,cAAcS,UAAU,mBACtD,yCAdW0oB,IAAetpB,mDAAfspB,GAAenmB,6tBCR5BnD,yBAA0D,UAA1DA,CAA0D,UAA1DA,CAA0D,UAA1DA,CAA0D,SAKtCA,iBACJA,QACZA,iBACAA,eAAsEA,8BAA8BA,UAErGA,kBAAkE,UAAlEA,CAAkE,QAAlEA,CAAkE,iCAGwEA,gCAAkCA,cAG5KA,iBAAmE,QAAGA,gCAA8BA,uBAXlDA,yCAEVA,8CAC+BA,0CAKMA,+DAA6DA,gDAGpEA,+tICRlE,MAAM0pB,GAEXpsB,YAAsBE,yBAAmC,wBCR3DwC,+CAEAA,mDAIAA,6DDAa0pB,IAAe1pB,uCAAf0pB,GAAevmB,oPER5BnD,iBAAyC,WAAzCA,CAAyC,WAAzCA,CAAyC,8BAIbA,8BAAmCA,UAEvDA,kBAA4BA,eAAGA,QAC/BA,kBAA0B,gCAENA,gCAAiCA,UAErDA,mBAA4BA,gBAAGA,QAC/BA,mBAA0B,gCAENA,gCAA4BA,qBAXqBA,gEACjDA,+CAIiDA,gEACjDA,+CAIiDA,2DACjDA,6uBCGrB,MAAM2pB,GAMXrsB,YACYE,EACF2C,EACAypB,EACAC,EACAC,EACAC,EACA5Y,EACA6Y,GAPEtsB,uBACFA,qBACAA,gCACAA,gBACAA,oBACAA,mBACAA,sBACAA,kBAZFA,gBAAa,aACdA,gBAAY,EACZA,gBAAY,EAYjBA,KAAKusB,WAAavsB,KAAKyC,cAAcS,UAAU,QAE/ClD,KAAKwsB,kBACLxsB,KAAKysB,kBACLzsB,KAAK0sB,wBAEL1sB,KAAKksB,yBAAyBS,SAE9B3sB,KAAK4sB,mBAEL5sB,KAAK6sB,eAAiE,IAArD7sB,KAAKyC,cAAcS,UAAU,qBAC9ClD,KAAKyC,cAAcS,UAAU,oBAE7BlD,KAAK8sB,eAA0D,IAA9C9sB,KAAKyC,cAAcS,UAAU,cAC9ClD,KAAKyC,cAAcS,UAAU,aAE7BlD,KAAK+sB,cACL/sB,KAAKgtB,gBACLhtB,KAAKssB,WAAWnsB,iBAClB,CAEQqsB,kBACNxsB,KAAKF,gBAAgBoB,UAAU8B,IAAIhD,KAAKyC,cAAcS,UAAU,UAAU3C,UAAUhF,IAC9EA,IACFyE,KAAKosB,aAAaa,SAAS1xB,GAC3ByE,KAAKqsB,YAAYa,OAAO,CAAEngB,KAAM,QAASsJ,QAAS9a,IAAO,EAG/D,CAEQwxB,oBACN,MAAMI,EAAYntB,KAAKyC,cAAcS,UAAU,OAC/C,GAAsB,QAAlBuS,EAAS,MAAT0X,OAAS,EAATA,EAAWpyB,eAAO,SAAEC,QAAS,CAC/B,MAAME,EAAeiyB,EAAUpyB,QAAQG,cAAgB,uBACvDwG,SAAS0rB,cAAc,wBAAwBC,aAAa,OAAQnyB,GAExE,CAEQ8xB,wBACN,MAAMG,EAAYntB,KAAKyC,cAAcS,UAAU,QACzB,QAAlBuS,EAAS,MAAT0X,OAAS,EAATA,EAAWpyB,eAAO,eAAEC,WAA6B,QAAlBie,EAAS,MAATkU,OAAS,EAATA,EAAWpyB,eAAO,eAAEE,UACvB,QAA1BusB,mBACFjmB,OAAO+rB,iBAAiB,sBAAwBrkB,IAC9CA,EAAMskB,iBACNvtB,KAAKwtB,YAAcvkB,EACnB1H,OAAO+rB,iBAAiB,QAAS,KAC/BxrB,WAAW,KACT9B,KAAKwtB,YAAYC,SACjBztB,KAAKwtB,iBAAc,GAClB,IAAG,EACL,CAAExV,MAAM,GAAM,EAChB,CAAEA,MAAM,GAGjB,CAGQyU,kBACN,MAAMiB,EAAQ1tB,KAAKyC,cAAcS,UAAU,UAAYlD,KAAK2tB,WACxDD,GACF1tB,KAAKmsB,SAASyB,SAASlsB,SAASmsB,KAAMH,EAE1C,CAEQhB,wBACN,MAAMxnB,EAAclF,KAAKyC,cAAcS,UAAU,eAC7CgC,GACFlF,KAAKqsB,YAAYa,OAAO,CAAEngB,KAAM,cAAesJ,QAASnR,GAE5D,CAEQ0nB,mBACapF,gBAAoB,CACrCsG,GAAI,OACJC,OAAQ,MACRC,QAAS,MACTC,OAAQ,UAIRjuB,KAAKyT,eAAe5R,MAAM,qBAAsB,mBAAoB,CAClEqsB,QAAS,MAGf,yCApGWjC,IAAY3pB,yHAAZ2pB,GAAYxmB,2KFjBzBnD,yBAEAA,kCAEAA,+BAEAA,wBAEAA,sCANgBA,sDAEHA,mCAEDA,6IAECA,k0BGWN,MAAM6rB,2CAAY,0BAAZA,gCART/vB,KACAQ,KACAY,SCIG,MAAM4uB,2CAAY,0BAAZA,gCAPThwB,KACAQ,wBCiFG,MAAMyvB,2CAAS,0BAATA,EAASC,WAFRrC,mCA1BD,IACTrtB,MAAqB,CACnB2vB,QAAS7zB,OACT8zB,KAAM,yBAER5vB,QACAI,UAA4B,EAC5BA,UAA2B,EAC3BA,UAA4B,EAC5BA,UAAkC,EAClCA,UAAqC,EACrCA,UAAyB,EACzBA,UAAgC,EAChCA,UAA2B,EAC3BA,SACA,CACEyvB,QAASnsB,MACTosB,WAaN,SAASC,GACPC,EACAC,GAGA,MAAO,IAAM,IAAIzU,QAAcC,IAC7BwU,EAAeC,SAASzuB,QACtBukB,KAAMkK,IAAyB,IAAbA,IAAiB,EACnCC,MAAU,KACR,MAAMjvB,EAAkB8uB,EAAS5rB,IAAIpE,MAC/BokB,EAAOljB,EAAgBkvB,cAC7B,OAAOlvB,EAAgBoB,UAAU+tB,eAAejM,EAAI,IAErDziB,UAAW2uB,IACV,MAAMpvB,EAAkB8uB,EAAS5rB,IAAIpE,MAC/BokB,EAAOljB,EAAgBkvB,cAC7BlvB,EAAgBoB,UAAUiuB,eAAenM,EAAMkM,GAC/C7U,GAAO,EACR,EAEP,EAhCM+U,KAAM,CAAC9sB,MAAUA,OACjB+sB,OAAO,MAETrwB,OAAwB,CACtBwvB,KAAM,6BAER,CAAEC,QAAS9vB,KAA6B2wB,SAnDmB,CAC7DC,UAAW,IACXC,UAAW,EACXC,kBAAmB,EACnBC,6BAA6B,KAgD5BC,SA1CCC,KACAC,KACAC,aAAqB,IACrBC,gBACAnxB,eACAA,KACAC,KACAA,KACAY,EACAmwB,KACAzB,EACAC,EACA4B,eAA6B,iBAAkB,CAC7Ch1B,QAASN,uBACTu1B,qBAAsB,uCCrDxBv1B,kBACF4H,SAGFstB,OACGM,gBAAgB7B,GAChB8B,MAAMtvB,GAAOF,QAAQC,IAAIC,GAAI,mBCdhC,OACA,aACA,gBACA,WACA,eACA,kBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,cACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,mBACA,gBACA,aACA,gBACA,YACA,eACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,mBACA,gBACA,mBACA,gBACA,aACA,gBACA,aACA,gBACA,gBACA,mBACA,gBACA,mBACA,eACA,kBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,aACA,gBACA,aACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,cACA,iBACA,aACA,gBACA,aACA,gBACA,mBACA,gBACA,mBACA,gBACA,WACA,cACA,aACA,gBACA,aACA,gBACA,YACA,eACA,mBACA,sBACA,kBACA,qBACA,aACA,gBACA,aACA,gBACA,WACA,cACA,aACA,gBACA,aACA,gBACA,gBACA,mBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,mBACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,mBACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,mBACA,gBACA,aACA,gBACA,iBACA,oBACA,gBACA,mBACA,aACA,gBACA,aACA,gBACA,mBACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,kBACA,qBACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,cACA,iBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,gBACA,mBACA,cACA,iBACA,aACA,gBACA,cACA,iBACA,cACA,kBACA,qBACA,iBACA,gBACA,mBACA,aACA,gBACA,aACA,gBACA,aACA,kBACA,qBACA,gBACA,aACA,gBACA,mBACA,sBACA,aACA,gBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,oBAIA,cACA,WACA,WACA,CACA,cACA,cACA,8CACA,gCACAgP,CACA,CACA,WACA,CACAugB,kBACA,qBACA,EACAA,YACAC,YACAD","names":["environment","production","igo","app","forceCoordsNA","install","enabled","promote","manifestPath","pwa","catalog","sources","id","title","url","showLegend","depot","importExport","configFileToGeoDBService","clientSideFileSizeMaxMb","allowToStoreLayer","language","prefix","interactiveTour","tourInMobile","pathToConfigFile","searchSources","nominatim","available","storedqueries","icherche","searchUrl","order","params","limit","coordinatesreverse","showInPointerSummary","icherchereverse","ilayer","projections","code","alias","def","extent","searchOverlayStyle","base","markerColor","markerOpacity","markerOutlineColor","fillColor","fillOpacity","strokeColor","strokeOpacity","strokeWidth","focus","selection","queryOverlayStyle","MapOverlayModule","common","AppExpansionPanelModule","fesm2015_button","icon","menu","list","fesm2015_select","tooltip","igo2_core","igo2_common","AppToastPanelModule","badge","igo2_geo","AppSidenavModule","sidenav","igo2_context","AppToastPanelForExpansionModule","IgoWelcomeWindowModule","fesm2015_forms","dialog","toolbar","PortalModule","igo2_integration","PwaService","constructor","updates","languageService","confirmDialogService","this","isEnabled","handleVersionUpdates","checkForUpdates","interval","pipe","skip","subscribe","__awaiter","updateFound","checkForUpdate","console","log","err","error","modalUpdatePWA","confirmOpened","message","translate","instant","open","tap","confirm","window","navigator","onLine","document","location","reload","alert","setTimeout","versionUpdates","evt","type","version","hash","currentVersion","latestVersion","core","factory","WelcomeWindowService","configService","storageService","igoVersionDifferentFromStorage","isVersionDifferentFromStorage","setStorageConfig","nbVisit","Number","get","set","getConfig","hasWelcomeWindow","remove","dialogConfig","disableClose","autoFocus","maxWidth","afterClosedWelcomeWindow","showAgain","WelcomeWindowComponent","welcomeWindowService","of","BehaviorSubject","ngOnInit","computeHtml","closeWelcomeWindow","closeAll","deltaDay","isDateParsable","releaseDate","Date","releaseDateAppConfig","releaseDateApp","isNaN","getDate","releaseDateString","day","month","getMonth","getFullYear","title$$","map","description","r","html$","next","setShowAgain","ngOnDestroy","unsubscribe","selectors","ExpansionPanelHeaderComponent","expanded","_expanded","value","expandedChange","emit","hasExpandedClass","onToggleClick","ctx","ExpansionPanelComponent","backdropShown","_backdropShown","maximized","hasExpandedFullClass","onBackdropClick","showContent","duration","delay","easing","fesm2015_animations","opacity","changeDetection","ToastPanelComponent","mediaService","storageState","queryState","fullExtent","GeoJSON","tabsMode","opened","zoomAuto","setResizeWindowIcon","_map","store","_store","entities$","_entities","unselectResult","_opened","openedChange","_zoomAuto","zoomAuto$","_fullExtent","fullExtent$","fullExtentEvent","getClassPanel","isHtmlDisplay","resultSelected$","setHeighPanelTabsMode","displayStyle","results","length","initialized","selectResult","onEscapeHandler","event","clear","onBackHandler","onZoomHandler","isResultSelected$","getValue","localOlFeature","format","readFeature","data","dataProjection","projection","featureProjection","all","multiple","multiple$","monitorResultOutOfView","isSelectedResultOutOfView$$","combineLatest","viewController","state$","debounceTime","bunch","selectedResult","isSelectedResultOutOfView$","selectedOlFeature","selectedOlFeatureExtent","latestResult","trigger","hasFeatureEmphasisOnSelection","resultOrResolution$$","focusedResult$","res","resolution$","buildResultEmphasis","storageChange$$","storageChange$","skipWhile","storageChange","key","change","currentValue","actionStore","load","display","handler","availability","olFeatures","result","push","checkbox","checkCondition","v","isDesktop","clearFeatureEmphasis","olGeometry","getGeometry","getExtent","x","y","feature1","Feature","name","geometry","Point","abstractFocusedOrSelectedResult","meta","style","Object","assign","feature","queryOverlayStyleSelection","queryOverlayStyleFocus","setZIndex","queryResultsOverlay","addFeature","removeFeature","getTitle","focusResult","unfocusResult","force","state","focused","update","selected","properties","target","setHtmlDisplay","features","removeFeatures","addFeatures","setFeatures","isMobile","getMedia","handleKeyboardEvent","keyCode","previousResult","nextResult","i","indexOf","zoomTo","swipe","action","SWIPE_ACTION","RIGHT","LEFT","UP","DOWN","e","className","onTriggerAction","args","windowHtmlDisplayEvent","isHtmlAndDesktop","iconResizeWindows","resizeWindows","reduceWindow","enlargeWindows","ToastPanelForExpansionComponent","hasOpenedClass","withHeader","toast_panel_for_expansion_animations_showContent","SidenavComponent","toolState","catalogState","toolbox","activeTool$$","activeTool$","tool","sidenavTitle","catalogStore","title$","layer","layers","options","active","toolChange","onPreviousButtonClick","activatePreviousTool","onUnselectButtonClick","deactivateTool","MapOverlayComponent","contextService","ngAfterViewInit","context$$","context$","context","handleContextChange","media$$","media$","media","mapOverlay","overlay","includes","PortalComponent","route","workspaceState","authService","layerService","dataSourceService","cdRef","capabilitiesService","contextState","mapState","searchState","searchSourceService","importService","http","messageService","dialogWindow","queryService","editionWorkspaceService","directionState","pageSize","pageSizeOptions","hasExpansionPanel","hasHomeExtentButton","hasGeolocateButton","showRotationButtonIfNoRotation","showMenuButton","showSearchBar","showOfflineButton","showWakeLockButton","igoSearchPointerSummaryEnabled","igoReverseSearchCoordsFormatEnabled","sidenavOpened","sidenavOpened$","auth","toastPanelOpened","_toastPanelOpened","detectChanges","isTablet","isLandscape","getOrientation","isPortrait","expansionPanelExpanded","workspacePanelExpanded","setPadding","bottom","contextUri","_a","uri","toastPanelShown","expansionPanelBackdropShown","toastPanelForExpansionOpened","actionbarMode","actionbarWithTitle","searchStore","searchResultsGeometryEnabled","searchResultsGeometryEnabled$","queryStore","toastPanelContent","content","workspace","hasWidget","workspaceStore","workspace$","IGO","searchTermSplitter$","termSplitter","initWelcomeWindow","queryParams","readLanguageParam","authenticate$","authenticated","contextLoaded","onChangeContext","contextActions","searchCoordinate","contextMenuCoord","openGoogleMaps","openGoogleStreetView","contextMenuStore","count$","pairwise","prevCnt","currentCnt","padding","ol","once","readQueryParams","geolocationController","tracking","onSettingsChange$","setSearchSettingsChange","selectedResult$","closeSidenav","workspaceEnabled$","empty$","workspaceEmpty","updateMapBrowserClass","workspaceMaximize$$","workspaceMaximize$","workspaceMaximize","activeWks","selectedWorkspace$","_b","paginatorOptions","_c","_d","activeWidget$$","activeWorkspaceWidget$","widget","openToastPanelForExpansion","showToastPanelForExpansionToggle","closeToastPanelForExpansion","openSidenav$$","openSidenav$","openSidenav","sidenavMediaAndOrientation$$","orientation$","sidenavMediaAndOrientation","computeToastPanelOffsetX","setToastPanelHtmlDisplay","toastPanelHtmlDisplay","Promise","resolve","then","toastPanelOffsetX$","getToastPanelExtent","workspaceVisibility","wks","inResolutionRange$","entityStore","visible","workspaceNotAvailableMessage","isEditionWorkspace","createFeatureProperties","rowsInMapExtentCheckCondition$","editFeature","sourceOptions","sourceFields","forEach","field","primary","paginatorChange","matPaginator","workspacePaginator","entitySortChange","workspaceEntitySortChange$","entitySelectChange","getQuerySearchSource","querySearchSourceArray","getLayerWksOptionTabQuery","added","getProperties","_featureStore","featureStoreLayer","getAllowedFieldsAndAlias","getQueryTitle","querySearchSource","find","s","sourceTitle","queryResults","f","cancelOngoingAddLayer","addedLayers$$","sub","onToggleSidenavClick","toggleSidenav","onDeactivateWorkspaceWidget","onMapQuery","filteredResults","getFeatureIsSameActiveWks","getWksActiveOpenInResolution","getLayerWksOptionMapQuery","filter","onSearchTermChange","term","routeParams","search","deactivateCustomFilterTermStrategy","searchBarTerm","setSearchTerm","replace","trim","onClearSearch","onBeforeSearch","onSearch","isReverseSearch","research","source","enabledSources","getEnabledSources","newResults","concat","updateMany","onSearchResultsGeometryStatusChange","setSearchResultsGeometryStatus","onReverseCoordsFormatStatusChange","onSearchSettingsChange","toolChanged","searchBar","nativeElement","getElementsByTagName","computeHomeExtentValues","view","homeExtent","homeCenter","center","homeZoom","zoom","empty","softClear","qParams","readLayersQueryParams","contextManager","getTool","toolToOpen","toolToOpenOnContextChange","toolOrderToOpen","toolName","activateTool","toastOpenedChange","handleExpansionAndToastOnMobile","searchResultsOverlay","setSelectedResult","getSources","searchSource","onContextMenuOpen","getClickCoordinate","contextmenuPoint","boundingMapBrowser","mapBrowser","getBoundingClientRect","top","scrollY","pageYOffset","left","scrollX","pageXOffset","pixel","coord","getCoordinateFromPixel","proj","ol_proj","reverse","c","toFixed","join","header","classList","add","onPointerSummaryStatusChange","getExpansionPanelStatus","getToastPanelOffsetY","status","getToastPanelStatus","getControlsOffsetY","getBaselayersSwitcherStatus","readToolParams","readSearchParams","readFocusFirst","computeZoomToExtent","lang","languageForce","setLanguage","zoomExtent","extentParams","split","olExtent","zoomToExtent","computeFocusFirst","resultItem","item","click","sf","termDefinedInUrl","entities$$","stateView","all$","entities","take","termDefinedInUrlTriggered","exactMatch","activateCustomFilterTermStrategy","searchResultsOlFeatures","entity","dataType","totalExtent","searchGeom","matDialogRef$","first","matDialogOpened","routing","routingCoordLoaded","stopCoords","routingOptions","resultSelection","parseInt","stopsStore","storeInitialized$","init","stop","position","text","coordinates","routesFeatureStore","zoomToActiveRoute$","d","readLayersQueryParamsByType","readVectorQueryParams","getQueryParam","paramValue","fromString","nameParamLayersKey","urlsKey","wmsLayers","wmsUrl","wmtsLayers","wmtsUrl","arcgisLayers","arcgisUrl","iarcgisLayers","iarcgisUrl","tarcgisLayers","tarcgisUrl","layersByService","urls","cnt","urlSrc","endsWith","substring","extractLayersByService","layerFromUrl","layerOptions","igo2_utils","LAYERS","visibility","computeLayerVisibilityFromUrl","addLayerFromURL","vector","lastIndex","lastIndexOf","fileName","slice","responseType","file","File","lastModified","now","import","onFileImportSuccess","onFileImportError","outLayersByService","startsWith","substr","zIndex","commonSourceOptions","optionsFromCapabilities","optionsFromApi","crossOrigin","arcgisClause","queryable","queryFormat","VERSION","createAsyncLayer","l","addLayer","currentLayerid","visibleOnLayersParams","visibleOffLayersParams","visiblelayers","invisiblelayers","toString","logged$","logged","createWelcomeWindow","welcomWindowConfig","afterClosed","featureTitle","refreshRelationsWorkspace","relationLayers","relationWorkspace","workspaceId","tableTemplate","columns","col","getDomainValues","relation","domainValues","zoomToSelectedFeatureWks","featuresSelected","workspaceSelection","rec","olFeaturesSelected","feat","expansionPanelAnimation","toastPanelAnimation","controlsAnimations","controlSlideX","controlSlideY","mapSlideX","mapSlideY","HeaderComponent","computeHeader","headerLogo","headerLogoPrint","FooterComponent","AppComponent","analyticsListenerService","renderer","titleService","metaService","pwaService","authConfig","readTitleConfig","readThemeConfig","readDescriptionConfig","listen","detectOldBrowser","hasHeader","hasFooter","setManifest","installPrompt","setTitle","addTag","appConfig","querySelector","setAttribute","addEventListener","preventDefault","promptEvent","prompt","theme","themeClass","addClass","body","ie","chrome","firefox","safari","timeOut","HeaderModule","FooterModule","AppModule","bootstrap","default","path","provide","useFactory","appInitializerFactory","injector","applicationRef","isStable","concatMap","getLanguage","getTranslation","translations","setTranslation","deps","multi","useValue","showDelay","hideDelay","touchendHideDelay","disableTooltipInteractivity","imports","platform_browser","animations","router","igo2_auth","service_worker","registrationStrategy","bootstrapModule","catch","webpackContext","module"],"sourceRoot":"webpack:///","sources":["./src/environments/environment.github.ts","./src/app/pages/portal/map-overlay/map-overlay.module.ts","./src/app/pages/portal/expansion-panel/expansion-panel.module.ts","./src/app/pages/portal/toast-panel/toast-panel.module.ts","./src/app/pages/portal/sidenav/sidenav.module.ts","./src/app/pages/portal/toast-panel-for-expansion/toast-panel-for-expansion.module.ts","./src/app/pages/portal/welcome-window/welcome-window.module.ts","./src/app/pages/portal/portal.module.ts","./src/app/services/pwa.service.ts","./src/app/pages/portal/welcome-window/welcome-window.service.ts","./src/app/pages/portal/welcome-window/welcome-window.component.html","./src/app/pages/portal/welcome-window/welcome-window.component.ts","./src/app/pages/portal/expansion-panel/expansion-panel-header.component.html","./src/app/pages/portal/expansion-panel/expansion-panel-header.component.ts","./src/app/pages/portal/expansion-panel/expansion-panel.component.ts","./src/app/pages/portal/expansion-panel/expansion-panel.component.html","./src/app/pages/portal/expansion-panel/expansion-panel.animations.ts","./src/app/pages/portal/toast-panel/toast-panel.component.html","./src/app/pages/portal/toast-panel/toast-panel.component.ts","./src/app/pages/portal/toast-panel-for-expansion/toast-panel-for-expansion.component.ts","./src/app/pages/portal/sidenav/sidenav.component.html","./src/app/pages/portal/toast-panel-for-expansion/toast-panel-for-expansion.component.html","./src/app/pages/portal/toast-panel-for-expansion/toast-panel-for-expansion.animations.ts","./src/app/pages/portal/sidenav/sidenav.component.ts","./src/app/pages/portal/map-overlay/map-overlay.component.html","./src/app/pages/portal/map-overlay/map-overlay.component.ts","./src/app/pages/portal/portal.component.html","./src/app/pages/portal/portal.component.ts","./src/app/pages/portal/portal.animation.ts","./src/app/pages/header/header.component.ts","./src/app/pages/header/header.component.html","./src/app/pages/footer/footer.component.ts","./src/app/app.component.html","./src/app/pages/footer/footer.component.html","./src/app/app.component.ts","./src/app/pages/header/header.module.ts","./src/app/pages/footer/footer.module.ts","./src/app/app.module.ts","./src/main.ts","./node_modules/moment/locale/ sync ^\\.\\/.*$"],"sourcesContent":["import { LanguageOptions } from '@igo2/core';\r\nimport {\r\n  SearchSourceOptions,\r\n  ImportExportServiceOptions,\r\n  CatalogServiceOptions,\r\n  Projection,\r\n  CommonVectorStyleOptions\r\n} from '@igo2/geo';\r\n\r\nimport { AppOptions, InteractiveTourConfigOptions } from './environnement.interface';\r\ninterface Environment {\r\n  production: boolean;\r\n  igo: {\r\n    app: AppOptions,\r\n    catalog?: CatalogServiceOptions;\r\n    importExport?: ImportExportServiceOptions;\r\n    language?: LanguageOptions;\r\n    searchSources?: { [key: string]: SearchSourceOptions };\r\n    projections?: Projection[];\r\n    interactiveTour?: InteractiveTourConfigOptions;\r\n    depot?: { url: string; trainingGuides?: string[]; };\r\n    queryOverlayStyle?: {\r\n      base?: CommonVectorStyleOptions,\r\n      selection?: CommonVectorStyleOptions,\r\n      focus?: CommonVectorStyleOptions\r\n    };\r\n    searchOverlayStyle?: {\r\n      base?: CommonVectorStyleOptions,\r\n      selection?: CommonVectorStyleOptions,\r\n      focus?: CommonVectorStyleOptions\r\n    };\r\n  };\r\n}\r\n\r\nexport const environment: Environment = {\r\n  production: true,\r\n  igo: {\r\n    app: {\r\n      forceCoordsNA: false,\r\n      install: {\r\n        enabled: true,\r\n        promote: true,\r\n        manifestPath: './config/github.webmanifest'\r\n      },\r\n      pwa: {\r\n        enabled: false,\r\n      }\r\n    },\r\n    catalog: {\r\n      sources: [\r\n        {\r\n          id: 'Gououvert',\r\n          title: 'Gouvouvert',\r\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi'\r\n        },\r\n        {\r\n          id: 'glace',\r\n          title: 'Carte de glace',\r\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/radarsat.fcgi',\r\n          showLegend: true\r\n        }\r\n      ]\r\n    },\r\n    depot: {\r\n      url: '/apis/depot'\r\n    },\r\n    importExport: {\r\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/ogre',\r\n      configFileToGeoDBService: './data/geoDataToIDB.json',\r\n      clientSideFileSizeMaxMb: 30,\r\n      allowToStoreLayer: true\r\n    },\r\n    language: {\r\n      prefix: './locale/'\r\n    },\r\n    interactiveTour: {\r\n      tourInMobile: true,\r\n      pathToConfigFile: './config/interactiveTour.json'\r\n    },\r\n    searchSources: {\r\n      nominatim: {\r\n        available: false\r\n      },\r\n      storedqueries: {\r\n        available: false\r\n      },\r\n      icherche: {\r\n        searchUrl: 'https://geoegl.msp.gouv.qc.ca/apis/icherche',\r\n        order: 2,\r\n        params: {\r\n          limit: '8'\r\n        }\r\n      },\r\n      coordinatesreverse: {\r\n        showInPointerSummary: true\r\n      },\r\n      icherchereverse: {\r\n        showInPointerSummary: true,\r\n        searchUrl: 'https://geoegl.msp.gouv.qc.ca/apis/terrapi',\r\n        order: 3,\r\n        enabled: true\r\n      },\r\n      ilayer: {\r\n        searchUrl: 'https://geoegl.msp.gouv.qc.ca/apis/icherche/layers',\r\n        order: 4,\r\n        params: {\r\n          limit: '5'\r\n        }\r\n      }\r\n    },\r\n    projections: [\r\n      {\r\n        code: 'EPSG:32198',\r\n        alias: 'Quebec Lambert',\r\n        def:\r\n          '+proj=lcc +lat_1=60 +lat_2=46 +lat_0=44 +lon_0=-68.5 +x_0=0 +y_0=0 \\\r\n          +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs',\r\n        extent: [-799574, 45802, 891595.4, 1849567.5]\r\n      },\r\n      {\r\n        code: 'EPSG:3798',\r\n        alias: 'MTQ Lambert',\r\n        def:\r\n          '+proj=lcc +lat_1=50 +lat_2=46 +lat_0=44 +lon_0=-70 +x_0=800000 +y_0=0 \\\r\n          +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs',\r\n        extent: [31796.5834, 158846.2231, 1813323.4284, 2141241.0978]\r\n      }\r\n    ],\r\n    searchOverlayStyle: {\r\n      base: {\r\n        markerColor: '#5ed0fb', // marker fill\r\n        markerOpacity: 0.8, // marker opacity not applied if a rgba markerColor is provided\r\n        markerOutlineColor: '#a7e7ff', // marker contour\r\n        fillColor: '#5ed0fb', // poly\r\n        fillOpacity: 0.2, // poly fill opacity not applied if a rgba fillColor is provided\r\n        strokeColor: '#5ed0fb', // line and poly\r\n        strokeOpacity: 0.7, // line and poly not applied if a rgba strokeColor is provided\r\n        strokeWidth: 2 // line and poly\r\n      },\r\n      focus: {\r\n        markerColor: '#5ed0fb', // marker fill\r\n        markerOpacity: 1, // marker opacity not applied if a rgba markerColor is provided\r\n        markerOutlineColor: '#DFF7FF', // marker contour\r\n        fillColor: '#5ed0fb', // poly\r\n        fillOpacity: 0.3, // poly fill opacity not applied if a rgba fillColor is provided\r\n        strokeColor: '#DFF7FF', // line and poly\r\n        strokeOpacity: 1, // line and poly not applied if a rgba strokeColor is provided\r\n        strokeWidth: 2 // line and poly\r\n      },\r\n      selection: {\r\n        markerColor: '#00a1de', // marker fill\r\n        markerOpacity: 1, // marker opacity not applied if a rgba markerColor is provided\r\n        markerOutlineColor: '#ffffff', // marker contour\r\n        fillColor: '#00a1de', // poly\r\n        fillOpacity: 0.3, // poly fill opacity not applied if a rgba fillColor is provided\r\n        strokeColor: '#00A1DE', // line and poly\r\n        strokeOpacity: 1, // line and poly not applied if a rgba strokeColor is provided\r\n        strokeWidth: 2 // line and poly\r\n      }\r\n    },\r\n    queryOverlayStyle: {\r\n      base: {\r\n        markerColor: '#5ed0fb', // marker fill\r\n        markerOpacity: 0.8, // marker opacity not applied if a rgba markerColor is provided\r\n        markerOutlineColor: '#a7e7ff', // marker contour\r\n        fillColor: '#5ed0fb', // poly\r\n        fillOpacity: 0.2, // poly fill opacity not applied if a rgba fillColor is provided\r\n        strokeColor: '#5ed0fb', // line and poly\r\n        strokeOpacity: 0.7, // line and poly not applied if a rgba strokeColor is provided\r\n        strokeWidth: 2 // line and poly\r\n      },\r\n      focus: {\r\n        markerColor: '#5ed0fb', // marker fill\r\n        markerOpacity: 1, // marker opacity not applied if a rgba markerColor is provided\r\n        markerOutlineColor: '#DFF7FF', // marker contour\r\n        fillColor: '#5ed0fb', // poly\r\n        fillOpacity: 0.3, // poly fill opacity not applied if a rgba fillColor is provided\r\n        strokeColor: '#DFF7FF', // line and poly\r\n        strokeOpacity: 1, // line and poly not applied if a rgba strokeColor is provided\r\n        strokeWidth: 2 // line and poly\r\n      },\r\n      selection: {\r\n        markerColor: '#00a1de', // marker fill\r\n        markerOpacity: 1, // marker opacity not applied if a rgba markerColor is provided\r\n        markerOutlineColor: '#ffffff', // marker contour\r\n        fillColor: '#00a1de', // poly\r\n        fillOpacity: 0.3, // poly fill opacity not applied if a rgba fillColor is provided\r\n        strokeColor: '#00A1DE', // line and poly\r\n        strokeOpacity: 1, // line and poly not applied if a rgba strokeColor is provided\r\n        strokeWidth: 2 // line and poly\r\n      }\r\n    }\r\n  }\r\n};\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\n\r\nimport { MapOverlayComponent } from './map-overlay.component';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule\r\n  ],\r\n  exports: [MapOverlayComponent],\r\n  declarations: [MapOverlayComponent]\r\n})\r\nexport class MapOverlayModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatListModule } from '@angular/material/list';\r\nimport { MatMenuModule } from '@angular/material/menu';\r\nimport { MatSelectModule } from '@angular/material/select';\r\n\r\nimport { IgoLanguageModule } from '@igo2/core';\r\nimport { IgoBackdropModule } from '@igo2/common';\r\n\r\nimport { ExpansionPanelComponent } from './expansion-panel.component';\r\nimport { ExpansionPanelHeaderComponent } from './expansion-panel-header.component';\r\nimport { MatTooltipModule } from '@angular/material/tooltip';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    MatButtonModule,\r\n    MatIconModule,\r\n    MatMenuModule,\r\n    MatListModule,\r\n    MatSelectModule,\r\n    MatTooltipModule,\r\n    IgoLanguageModule,\r\n    IgoBackdropModule\r\n  ],\r\n  exports: [ExpansionPanelComponent],\r\n  declarations: [ExpansionPanelComponent, ExpansionPanelHeaderComponent]\r\n})\r\nexport class AppExpansionPanelModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatMenuModule } from '@angular/material/menu';\r\nimport { MatTooltipModule } from '@angular/material/tooltip';\r\n\r\nimport { IgoPanelModule, IgoStopPropagationModule, IgoActionModule } from '@igo2/common';\r\nimport { IgoLanguageModule } from '@igo2/core';\r\nimport { IgoFeatureModule, IgoSearchResultsModule } from '@igo2/geo';\r\n\r\nimport { ToastPanelComponent } from './toast-panel.component';\r\nimport { MatBadgeModule } from '@angular/material/badge';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    MatBadgeModule,\r\n    MatIconModule,\r\n    MatButtonModule,\r\n    MatTooltipModule,\r\n    MatMenuModule,\r\n    IgoLanguageModule,\r\n    IgoPanelModule,\r\n    IgoStopPropagationModule,\r\n    IgoActionModule,\r\n    IgoFeatureModule,\r\n    IgoSearchResultsModule\r\n  ],\r\n  exports: [ToastPanelComponent],\r\n  declarations: [ToastPanelComponent]\r\n})\r\nexport class AppToastPanelModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatSidenavModule } from '@angular/material/sidenav';\r\nimport { MatTooltipModule } from '@angular/material/tooltip';\r\n\r\nimport { IgoLanguageModule } from '@igo2/core';\r\nimport {\r\n  IgoPanelModule,\r\n  IgoFlexibleModule,\r\n  IgoToolModule,\r\n  IgoInteractiveTourModule,\r\n  IgoHomeButtonModule\r\n} from '@igo2/common';\r\nimport { IgoFeatureModule } from '@igo2/geo';\r\nimport { IgoContextManagerModule } from '@igo2/context';\r\n\r\nimport { SidenavComponent } from './sidenav.component';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    MatIconModule,\r\n    MatButtonModule,\r\n    MatSidenavModule,\r\n    MatTooltipModule,\r\n    IgoLanguageModule,\r\n    IgoPanelModule,\r\n    IgoFlexibleModule,\r\n    IgoContextManagerModule,\r\n    IgoToolModule,\r\n    IgoFeatureModule,\r\n    IgoInteractiveTourModule,\r\n    IgoHomeButtonModule\r\n  ],\r\n  exports: [SidenavComponent],\r\n  declarations: [SidenavComponent]\r\n})\r\nexport class AppSidenavModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatIconModule } from '@angular/material/icon';\r\n\r\nimport { IgoPanelModule, IgoStopPropagationModule } from '@igo2/common';\r\nimport { IgoLanguageModule } from '@igo2/core';\r\n\r\nimport { ToastPanelForExpansionComponent } from './toast-panel-for-expansion.component';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    MatIconModule,\r\n    MatButtonModule,\r\n    IgoLanguageModule,\r\n    IgoPanelModule,\r\n    IgoStopPropagationModule\r\n  ],\r\n  exports: [ToastPanelForExpansionComponent],\r\n  declarations: [ToastPanelForExpansionComponent]\r\n})\r\nexport class AppToastPanelForExpansionModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatToolbarModule } from '@angular/material/toolbar';\r\nimport { MatTooltipModule } from '@angular/material/tooltip';\r\nimport { MatDialogModule } from '@angular/material/dialog';\r\n\r\nimport { WelcomeWindowComponent } from './welcome-window.component';\r\nimport { IgoLanguageModule } from '@igo2/core';\r\nimport { IgoInteractiveTourModule, IgoCustomHtmlModule } from '@igo2/common';\r\n\r\n@NgModule({\r\n  imports: [\r\n    IgoLanguageModule,\r\n    CommonModule,\r\n    FormsModule,\r\n    MatDialogModule,\r\n    IgoInteractiveTourModule,\r\n    IgoCustomHtmlModule,\r\n    MatButtonModule,\r\n    MatTooltipModule,\r\n    MatIconModule,\r\n    MatToolbarModule\r\n  ],\r\n  declarations: [WelcomeWindowComponent],\r\n  exports: [WelcomeWindowComponent]\r\n})\r\nexport class IgoWelcomeWindowModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatSidenavModule } from '@angular/material/sidenav';\r\nimport { MatTooltipModule } from '@angular/material/tooltip';\r\nimport { MatDialogModule } from '@angular/material/dialog';\r\n\r\nimport { IgoCoreModule } from '@igo2/core';\r\nimport {\r\n  IgoActionModule,\r\n  IgoWorkspaceModule,\r\n  IgoEntityModule,\r\n  IgoPanelModule,\r\n  IgoBackdropModule,\r\n  IgoFlexibleModule,\r\n  IgoContextMenuModule,\r\n  IgoToolModule,\r\n  IgoEntityTableModule,\r\n  IgoEntityTablePaginatorModule,\r\n  IgoInteractiveTourModule\r\n} from '@igo2/common';\r\n\r\nimport {\r\n  IgoGeoWorkspaceModule,\r\n  IgoFeatureModule,\r\n  IgoImportExportModule,\r\n  IgoMapModule,\r\n  IgoQueryModule,\r\n  IgoSearchModule\r\n} from '@igo2/geo';\r\nimport {\r\n  IgoContextManagerModule,\r\n  IgoContextMapButtonModule\r\n} from '@igo2/context';\r\n\r\nimport { IgoIntegrationModule } from '@igo2/integration';\r\n\r\nimport { MapOverlayModule } from './map-overlay/map-overlay.module';\r\nimport { AppExpansionPanelModule } from './expansion-panel/expansion-panel.module';\r\nimport { AppToastPanelModule } from './toast-panel/toast-panel.module';\r\nimport { AppSidenavModule } from './sidenav/sidenav.module';\r\n\r\nimport { PortalComponent } from './portal.component';\r\nimport { AppToastPanelForExpansionModule } from './toast-panel-for-expansion/toast-panel-for-expansion.module';\r\n\r\nimport { IgoWelcomeWindowModule } from './welcome-window/welcome-window.module';\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        MatTooltipModule,\r\n        MatButtonModule,\r\n        MatIconModule,\r\n        MatSidenavModule,\r\n        MatDialogModule,\r\n        IgoCoreModule,\r\n        IgoFeatureModule,\r\n        IgoImportExportModule,\r\n        IgoMapModule,\r\n        IgoQueryModule.forRoot(),\r\n        IgoSearchModule.forRoot(),\r\n        IgoActionModule,\r\n        IgoWorkspaceModule,\r\n        IgoEntityModule,\r\n        IgoGeoWorkspaceModule,\r\n        IgoPanelModule,\r\n        IgoToolModule,\r\n        IgoContextMenuModule,\r\n        IgoBackdropModule,\r\n        IgoFlexibleModule,\r\n        IgoIntegrationModule,\r\n        AppExpansionPanelModule,\r\n        AppToastPanelModule,\r\n        AppToastPanelForExpansionModule,\r\n        AppSidenavModule,\r\n        MapOverlayModule,\r\n        IgoContextManagerModule,\r\n        IgoContextMapButtonModule,\r\n        IgoEntityTableModule,\r\n        IgoEntityTablePaginatorModule,\r\n        IgoInteractiveTourModule,\r\n        IgoWelcomeWindowModule\r\n    ],\r\n    exports: [PortalComponent],\r\n    declarations: [PortalComponent]\r\n})\r\nexport class PortalModule {}\r\n","import { Injectable } from '@angular/core';\r\nimport { LanguageService } from '@igo2/core';\r\nimport { SwUpdate } from '@angular/service-worker';\r\nimport { interval } from 'rxjs';\r\nimport { ConfirmDialogService } from '@igo2/common';\r\nimport { skip, tap } from 'rxjs/operators';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class PwaService {\r\n  private confirmOpened: boolean = false;\r\n  constructor(\r\n    private updates: SwUpdate,\r\n    private languageService: LanguageService,\r\n    private confirmDialogService: ConfirmDialogService\r\n  ) {\r\n    if (updates.isEnabled) {\r\n      this.handleVersionUpdates();\r\n    }\r\n  }\r\n\r\n  checkForUpdates() {\r\n    if (this.updates.isEnabled) {\r\n      interval(60 * 1000 * 2).pipe(skip(1)).subscribe(async () => {\r\n        try {\r\n          const updateFound = await this.updates.checkForUpdate();\r\n          console.log(updateFound ? 'A new version is available.' : 'Already on the latest version.');\r\n        } catch (err) {\r\n          console.error('Failed to check for updates:', err);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  private modalUpdatePWA() {\r\n    if (this.confirmOpened) {\r\n      return;\r\n    }\r\n    const title = this.languageService.translate.instant('pwa.new-version-title');\r\n    const body = this.languageService.translate.instant('pwa.new-version');\r\n    const message = `${title} ${body}`;\r\n    this.confirmDialogService.open(message).pipe(tap(() => this.confirmOpened = true)).subscribe((confirm) => {\r\n      if (confirm) {\r\n        this.confirmOpened = false;\r\n        if (window.navigator.onLine) {\r\n          document.location.reload();\r\n        } else {\r\n          alert(`Hors-ligne / Offline. Vous devez être en ligne pour mettre à jour l\\'application. You must be online to update the application.`);\r\n          setTimeout(() => {\r\n            this.modalUpdatePWA();\r\n          }, 900000);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  private handleVersionUpdates(): void {\r\n    this.updates.versionUpdates.subscribe(evt => {\r\n      switch (evt.type) {\r\n        case 'VERSION_DETECTED':\r\n          console.log(`Downloading new app version: ${evt.version.hash}`);\r\n          break;\r\n        case 'VERSION_READY':\r\n          console.log(`Current app version: ${evt.currentVersion.hash}`);\r\n          console.log(`New app version ready for use: ${evt.latestVersion.hash}`);\r\n          this.modalUpdatePWA();\r\n          break;\r\n        case 'VERSION_INSTALLATION_FAILED':\r\n          console.error(`Failed to install app version '${evt.version.hash}': ${evt.error}`);\r\n          break;\r\n      }\r\n    });\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\nimport { ConfigService, StorageService } from '@igo2/core';\r\nimport { MatDialogConfig } from '@angular/material/dialog';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class WelcomeWindowService {\r\n  nbVisit: number;\r\n  showAgain: boolean;\r\n  igoVersionDifferentFromStorage = false;\r\n\r\n  constructor(\r\n    private configService: ConfigService,\r\n    private storageService: StorageService\r\n  ) {\r\n    this.igoVersionDifferentFromStorage = this.isVersionDifferentFromStorage();\r\n    this.setStorageConfig();\r\n  }\r\n\r\n  setStorageConfig() {\r\n    this.nbVisit = Number(this.storageService.get('welcomeWindow_nbVisit'));\r\n    if (!this.nbVisit) {\r\n      this.nbVisit = 0;\r\n    }\r\n\r\n    this.storageService.set('welcomeWindow_nbVisit', (this.nbVisit += 1));\r\n    this.storageService.set(\r\n      'version',\r\n      this.configService.getConfig('version.lib')\r\n    );\r\n  }\r\n\r\n  isVersionDifferentFromStorage(): boolean {\r\n    if (\r\n      this.storageService.get('version') &&\r\n      this.storageService.get('version') !==\r\n        this.configService.getConfig('version.lib')\r\n    ) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  hasWelcomeWindow(): boolean {\r\n    if (\r\n      this.storageService.get('welcomeWindow_showAgain') === false ||\r\n      this.storageService.get('welcomeWindow_showAgain') === 'false'\r\n    ) {\r\n      if (\r\n        this.nbVisit >=\r\n        this.configService.getConfig('welcomeWindow.nbVisitToShowAgain')\r\n      ) {\r\n        this.storageService.set('welcomeWindow_nbVisit', 0);\r\n        this.storageService.remove('welcomeWindow_showAgain');\r\n        return true;\r\n      } else if (\r\n        this.configService.getConfig('welcomeWindow.showAgainOnNewIGOVersion')\r\n      ) {\r\n        if (this.igoVersionDifferentFromStorage) {\r\n          this.storageService.set('welcomeWindow_nbVisit', 0);\r\n          this.storageService.remove('welcomeWindow_showAgain');\r\n          return true;\r\n        }\r\n      }\r\n      return false;\r\n    }\r\n\r\n    if (typeof this.configService.getConfig('welcomeWindow.nbVisitToShow') !== 'undefined' ) {\r\n      if (this.nbVisit > this.configService.getConfig('welcomeWindow.nbVisitToShow') ) {\r\n        this.storageService.set('welcomeWindow_showAgain', false);\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return this.configService.getConfig('welcomeWindow');\r\n  }\r\n\r\n  getConfig(): MatDialogConfig {\r\n    const dialogConfig = new MatDialogConfig();\r\n\r\n    dialogConfig.disableClose = true;\r\n    dialogConfig.autoFocus = true;\r\n    dialogConfig.maxWidth = '500px';\r\n\r\n    return dialogConfig;\r\n  }\r\n\r\n  afterClosedWelcomeWindow() {\r\n    this.storageService.set('welcomeWindow_showAgain', this.showAgain);\r\n  }\r\n}\r\n","<div class=\"welcome-window\"  *ngIf=\"html$ | async\">\r\n\r\n  <mat-toolbar color=\"primary\">\r\n    <h2>{{'welcomeWindow.title' | translate}}</h2>\r\n    <span class=\"spacer\"></span>\r\n\r\n    <label>\r\n      <input id=\"doNotShowCheck\" type=\"checkbox\" [(ngModel)]=\"showAgain\" (click)=\"setShowAgain()\">\r\n      {{'welcomeWindow.notShowCheck' | translate}}\r\n    </label>\r\n  </mat-toolbar>\r\n\r\n  <div mat-dialog-content class=\"text\">\r\n    <igo-custom-html class=\"mat-typography\"\r\n    [html]=\"html$ | async\">\r\n    </igo-custom-html>\r\n  </div>\r\n\r\n  <p></p>\r\n  <div class=\"button-container\">\r\n    <igo-interactive-tour\r\n      id=\"tour-button\"\r\n      styleButton = \"raised\"\r\n      [discoverTitleInLocale$]=\"discoverTitleInLocale$\"\r\n      (click)= \"closeWelcomeWindow()\">\r\n    </igo-interactive-tour>\r\n\r\n  <button mat-raised-button class=\"button-close\" color=\"primary\" mat-dialog-close>{{'welcomeWindow.closeButton' | translate}}</button>\r\n  </div>\r\n\r\n</div>\r\n","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { ConfigService, LanguageService } from '@igo2/core';\r\nimport { BehaviorSubject, Observable, of, Subscription } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport { WelcomeWindowService } from './welcome-window.service';\r\n\r\n@Component({\r\n  selector: 'app-welcome-window',\r\n  templateUrl: './welcome-window.component.html',\r\n  styleUrls: ['./welcome-window.component.scss']\r\n})\r\nexport class WelcomeWindowComponent implements OnInit, OnDestroy {\r\n  // isVisible = true;\r\n  showAgain = false;\r\n  public discoverTitleInLocale$: Observable<string> =\r\n    of(this.configService.getConfig('welcomeWindow.discoverTitleInLocale') || this.configService.getConfig('title'));\r\n  private title$$: Subscription;\r\n  public html$: BehaviorSubject<string> = new BehaviorSubject(undefined);\r\n\r\n  constructor(\r\n    public dialog: MatDialog,\r\n    private welcomeWindowService: WelcomeWindowService,\r\n    private configService: ConfigService,\r\n    protected languageService: LanguageService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.computeHtml();\r\n  }\r\n\r\n  closeWelcomeWindow() {\r\n    this.dialog.closeAll();\r\n  }\r\n\r\n  private computeHtml() {\r\n    let deltaDay = 0;\r\n    let isDateParsable = true;\r\n    let releaseDate = new Date(this.configService.getConfig('version.releaseDate'));\r\n\r\n    const releaseDateAppConfig = this.configService.getConfig('version.releaseDateApp');\r\n\r\n\r\n    if (releaseDateAppConfig) {\r\n      const releaseDateApp = new Date(releaseDateAppConfig);\r\n      if (isNaN(releaseDateApp.getDate())) {\r\n        console.log('The releaseDateApp config is not a valid date format');\r\n        isDateParsable = false;\r\n      } else {\r\n        deltaDay = 1;\r\n        releaseDate = releaseDateApp;\r\n      }\r\n    }\r\n\r\n    let releaseDateString = '';\r\n\r\n    if (isDateParsable) {\r\n      let day: any = releaseDate.getDate() + deltaDay;\r\n      if (day < 10) {\r\n        day = '0' + day;\r\n      }\r\n      let month: any = releaseDate.getMonth() + 1;\r\n      if (month < 10) {\r\n        month = '0' + month;\r\n      }\r\n      const year = releaseDate.getFullYear();\r\n      releaseDateString = `${year}-${month}-${day}`;\r\n    } else {\r\n      releaseDateString = releaseDateAppConfig;\r\n    }\r\n\r\n    this.title$$ = this.languageService.translate.get(this.configService.getConfig('title') || '')\r\n      .pipe(\r\n        map(title => {\r\n          return this.languageService.translate.instant('welcomeWindow.html', {\r\n            title,\r\n            description: this.configService.getConfig('description') || '',\r\n            version: this.configService.getConfig('version.app') || this.configService.getConfig('version.lib') || '',\r\n            releaseDate: releaseDateString || ''\r\n          });\r\n        })\r\n      ).subscribe((r) => this.html$.next(r));\r\n\r\n    return this.html$;\r\n\r\n  }\r\n\r\n  setShowAgain() {\r\n    this.welcomeWindowService.showAgain = this.showAgain;\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    if (this.title$$) {\r\n      this.title$$.unsubscribe();\r\n    }\r\n  }\r\n}\r\n","<div>\r\n  <div class=\"app-expansion-panel-trigger-container\">\r\n    <button mat-icon-button (click)=\"onToggleClick()\" \r\n    [matTooltip]=\"(!expanded ? 'workspace.open' : 'workspace.close') | translate\"\r\n    color=\"primary\">\r\n      <mat-icon *ngIf=\"!expanded\" svgIcon=\"launch\"></mat-icon>\r\n      <mat-icon *ngIf=\"expanded\" style=\"transform: rotate(180deg)\" svgIcon=\"launch\"></mat-icon>\r\n    </button>\r\n  </div>\r\n\r\n  <div class=\"app-expansion-panel-content\">\r\n    <ng-content></ng-content>\r\n  </div>\r\n</div>\r\n","import {\r\n  Component,\r\n  Input,\r\n  Output,\r\n  EventEmitter,\r\n  HostBinding,\r\n  ChangeDetectionStrategy\r\n} from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-expansion-panel-header',\r\n  templateUrl: './expansion-panel-header.component.html',\r\n  styleUrls: ['./expansion-panel-header.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class ExpansionPanelHeaderComponent {\r\n  @Input()\r\n  get expanded(): boolean {\r\n    return this._expanded;\r\n  }\r\n  set expanded(value: boolean) {\r\n    if (value === this._expanded) {\r\n      return;\r\n    }\r\n\r\n    this._expanded = value;\r\n    this.expandedChange.emit(this._expanded);\r\n  }\r\n  private _expanded: boolean;\r\n\r\n  @Output() expandedChange = new EventEmitter<boolean>();\r\n\r\n  @HostBinding('class.app-expansion-panel-header-expanded')\r\n  get hasExpandedClass() {\r\n    return this.expanded;\r\n  }\r\n\r\n  constructor() {}\r\n\r\n  onToggleClick() {\r\n    this.expanded = !this.expanded;\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  Input,\r\n  Output,\r\n  EventEmitter,\r\n  HostBinding,\r\n  ChangeDetectionStrategy\r\n} from '@angular/core';\r\n\r\nimport { showContent } from './expansion-panel.animations';\r\n\r\n@Component({\r\n  selector: 'app-expansion-panel',\r\n  templateUrl: './expansion-panel.component.html',\r\n  styleUrls: ['./expansion-panel.component.scss'],\r\n  animations: [showContent()],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class ExpansionPanelComponent {\r\n  @Input()\r\n  get expanded(): boolean {\r\n    return this._expanded;\r\n  }\r\n  set expanded(value: boolean) {\r\n    if (value === this._expanded) {\r\n      return;\r\n    }\r\n\r\n    this._expanded = value;\r\n    this.expandedChange.emit(this._expanded);\r\n  }\r\n  private _expanded: boolean;\r\n\r\n  @Input() maximized: Boolean = false;\r\n\r\n  @Input()\r\n  get backdropShown(): boolean {\r\n    return this._backdropShown;\r\n  }\r\n  set backdropShown(value: boolean) {\r\n    this._backdropShown = value;\r\n  }\r\n  private _backdropShown: boolean;\r\n\r\n  @Output() expandedChange = new EventEmitter<boolean>();\r\n\r\n  @HostBinding('class.app-expansion-panel-expanded')\r\n  get hasExpandedClass() {\r\n    return this.expanded && !this.maximized;\r\n  }\r\n\r\n  @HostBinding('class.app-expansion-panel-expanded-maximized')\r\n  get hasExpandedFullClass() {\r\n    return this.expanded && this.maximized;\r\n  }\r\n\r\n  constructor() {}\r\n\r\n  onBackdropClick() {\r\n    this.expanded = false;\r\n    this.backdropShown = false;\r\n  }\r\n}\r\n","<div>\r\n\r\n  <div class=\"app-expansion-panel-container\">\r\n    <igo-backdrop\r\n      [shown]=\"backdropShown\"\r\n      (click)=\"onBackdropClick()\">\r\n    </igo-backdrop>\r\n\r\n    <app-expansion-panel-header [(expanded)]=\"expanded\">\r\n      <ng-content select=\"[expansionPanelHeader]\"></ng-content>\r\n    </app-expansion-panel-header>\r\n\r\n    <div\r\n      class=\"app-expansion-panel-content mat-elevation-z4\"\r\n      [@showContent]=\"expanded\">\r\n      <ng-content></ng-content>\r\n    </div>\r\n  </div>\r\n\r\n</div>\r\n","import {\r\n  trigger,\r\n  state,\r\n  style,\r\n  transition,\r\n  animate,\r\n  AnimationTriggerMetadata\r\n} from '@angular/animations';\r\n\r\nexport function showContent(\r\n  duration = '150ms',\r\n  delay = '300ms',\r\n  easing = 'ease-in-out'\r\n): AnimationTriggerMetadata {\r\n  return trigger('showContent', [\r\n    state(\r\n      'true',\r\n      style({\r\n        opacity: 1\r\n      })\r\n    ),\r\n    state(\r\n      'false',\r\n      style({\r\n        opacity: 0\r\n      })\r\n    ),\r\n    transition('false => true', animate(`${duration} ${delay} ${easing}`)),\r\n    transition('true => false', animate('0ms'))\r\n  ]);\r\n}\r\n","<ng-template #toast>\r\n  <igo-panel\r\n    *ngIf=\"store.entities$ | async\"\r\n    [ngClass] = \"getClassPanel()\"\r\n    [id]=\"setHeighPanelTabsMode()\"\r\n    [title]=\"resultSelected$.value ? getTitle(resultSelected$.value) : ('toastPanel.title' | translate )\"\r\n    (click)=\"onToggleClick($event)\"\r\n    tabindex=\"0\"\r\n    (keydown)=\"handleKeyboardEvent($event)\">\r\n\r\n    <igo-actionbar\r\n      id=\"igo-actionbar\"\r\n      panelLeftButton\r\n      [store]=\"actionStore\"\r\n      [withIcon]=\"true\"\r\n      [icon]=\"icon\"\r\n      [withTitle]=\"actionbarMode === 'overlay'\"\r\n      [horizontal]=\"true\"\r\n      [mode]=\"actionbarMode\">\r\n    </igo-actionbar>\r\n\r\n    <button\r\n      *ngIf=\"resultSelected$.value\"\r\n      mat-icon-button\r\n      igoStopPropagation\r\n      panelLeftButton\r\n      [matTooltip]=\"((isSelectedResultOutOfView$ | async) ? 'toastPanel.zoomOnFeatureTooltipOutOfView' : 'toastPanel.zoomOnFeatureTooltip') | translate\"\r\n      matTooltipShowDelay=\"500\"\r\n      (click)=\"zoomTo()\">\r\n      <mat-icon\r\n      [matBadge]=\"(isSelectedResultOutOfView$ | async) ? '!' : ''\"\r\n      matBadgeColor=\"accent\"\r\n      matBadgeSize=\"small\"\r\n      [matBadgeHidden]=\"(isSelectedResultOutOfView$ | async)!==true\"     \r\n      svgIcon=\"magnify-plus-outline\"></mat-icon>\r\n    </button>\r\n\r\n    <button\r\n      *ngIf=\"resultSelected$.value\"\r\n      [disabled]=\"results[0].meta.id === resultSelected$.value.meta.id\"\r\n      mat-icon-button\r\n      igoStopPropagation\r\n      panelLeftButton\r\n      [matTooltip]=\"'toastPanel.previousFeatureTooltip' | translate\"\r\n      matTooltipShowDelay=\"500\"\r\n      (click)=\"previousResult()\">\r\n      <mat-icon svgIcon=\"chevron-left\"></mat-icon>\r\n    </button>\r\n\r\n    <button\r\n      *ngIf=\"resultSelected$.value\"\r\n      [disabled]=\"results[results.length-1].meta.id === resultSelected$.value.meta.id\"\r\n      mat-icon-button\r\n      igoStopPropagation\r\n      panelRightButton\r\n      [matTooltip]=\"'toastPanel.nextFeatureTooltip' | translate\"\r\n      matTooltipShowDelay=\"500\"\r\n      (click)=\"nextResult()\">\r\n      <mat-icon svgIcon=\"chevron-right\"></mat-icon>\r\n    </button>\r\n\r\n    <button\r\n     *ngIf = \"isDesktop()\"\r\n      mat-icon-button\r\n      igoStopPropagation\r\n      panelRightButton\r\n      (click)=\"resizeWindows()\"\r\n      [matTooltip]=\"((this.fullExtent$ | async) ? 'toastPanel.standardExtentTooltip' : 'toastPanel.fullExtentTooltip') | translate\"\r\n      matTooltipShowDelay=\"500\">\r\n      <mat-icon svgIcon={{iconResizeWindows}}></mat-icon>\r\n    </button>\r\n    <button\r\n      mat-icon-button\r\n      igoStopPropagation\r\n      panelRightButton\r\n      (click)=\"clear()\">\r\n      <mat-icon svgIcon=\"close\"></mat-icon>\r\n    </button>\r\n\r\n    <div #content class=\"toast-content\">\r\n\r\n      <igo-feature-details\r\n        *ngIf=\"resultSelected$.value\"\r\n        [feature]=\"resultSelected$.value.data\"\r\n        (htmlDisplayEvent)=setHtmlDisplay($event)>\r\n      </igo-feature-details>\r\n\r\n      <igo-search-results\r\n        *ngIf=\"!resultSelected$.value\"\r\n        [map]=\"map\"\r\n        [store]=\"store\"\r\n        [showIcons]=\"true\"\r\n        [withZoomButton]=\"withZoomButton\"\r\n        (resultFocus)=\"focusResult($event)\"\r\n        (resultUnfocus)=\"unfocusResult($event, true)\"\r\n        (resultSelect)=\"selectResult($event)\"\r\n        [tabsMode]=\"tabsMode\">\r\n      </igo-search-results>\r\n    </div>\r\n  </igo-panel>\r\n</ng-template>\r\n\r\n<div *ngIf=\"isMobile(); else toast\"\r\nclass=\"swipe-fix\"\r\n(swipeleft)=\"swipe($event.type)\"\r\n(swiperight)=\"swipe($event.type)\"\r\n(swipeup)=\"swipe($event.type)\"\r\n(swipedown)=\"swipe($event.type)\">\r\n\r\n<ng-template [ngTemplateOutlet]=\"toast\"></ng-template>\r\n</div>\r\n","import {\r\n  Component,\r\n  Input,\r\n  Output,\r\n  EventEmitter,\r\n  HostBinding,\r\n  HostListener,\r\n  ChangeDetectionStrategy,\r\n  OnInit,\r\n  OnDestroy\r\n} from '@angular/core';\r\nimport { BehaviorSubject, Observable, combineLatest, Subscription } from 'rxjs';\r\nimport { debounceTime, map, skipWhile, tap } from 'rxjs/operators';\r\nimport olFormatGeoJSON from 'ol/format/GeoJSON';\r\nimport olFeature from 'ol/Feature';\r\nimport olPoint from 'ol/geom/Point';\r\n\r\nimport {\r\n  getEntityTitle,\r\n  EntityStore,\r\n  ActionStore,\r\n  Action,\r\n  ActionbarMode\r\n} from '@igo2/common';\r\nimport {\r\n  Feature,\r\n  SearchResult,\r\n  IgoMap,\r\n  FeatureMotion,\r\n  moveToOlFeatures,\r\n  featureToOl,\r\n  featuresAreTooDeepInView,\r\n  featureFromOl,\r\n  getCommonVectorStyle,\r\n  getCommonVectorSelectedStyle,\r\n  featuresAreOutOfView,\r\n  computeOlFeaturesExtent\r\n} from '@igo2/geo';\r\nimport {\r\n  Media,\r\n  MediaService,\r\n  LanguageService,\r\n  StorageService,\r\n  StorageScope,\r\n  StorageServiceEvent,\r\n  ConfigService\r\n} from '@igo2/core';\r\nimport { QueryState, StorageState } from '@igo2/integration';\r\n\r\n@Component({\r\n  selector: 'app-toast-panel',\r\n  templateUrl: './toast-panel.component.html',\r\n  styleUrls: ['./toast-panel.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class ToastPanelComponent implements OnInit, OnDestroy {\r\n  static SWIPE_ACTION = {\r\n    RIGHT: 'swiperight',\r\n    LEFT: 'swipeleft',\r\n    UP: 'swipeup',\r\n    DOWN: 'swipedown'\r\n  };\r\n\r\n  public tabsMode = false;\r\n\r\n  get storageService(): StorageService {\r\n    return this.storageState.storageService;\r\n  }\r\n\r\n  @Input()\r\n  get map(): IgoMap {\r\n    return this._map;\r\n  }\r\n  set map(value: IgoMap) {\r\n    this._map = value;\r\n  }\r\n  private _map: IgoMap;\r\n\r\n  @Input()\r\n  get store(): EntityStore<SearchResult<Feature>> {\r\n    return this._store;\r\n  }\r\n  set store(value: EntityStore<SearchResult<Feature>>) {\r\n    this._store = value;\r\n    this.store.entities$.subscribe((_entities) => {\r\n      this.unselectResult();\r\n    });\r\n  }\r\n  private _store: EntityStore<SearchResult<Feature>>;\r\n\r\n  @Input()\r\n  get opened(): boolean {\r\n    return this._opened;\r\n  }\r\n  set opened(value: boolean) {\r\n    if (value !== !this._opened) {\r\n      return;\r\n    }\r\n    this._opened = value;\r\n    this.storageService.set('toastOpened', value, StorageScope.SESSION);\r\n    this.openedChange.emit(value);\r\n  }\r\n  private _opened = true;\r\n\r\n  @Input() hasFeatureEmphasisOnSelection: Boolean = false;\r\n\r\n  get zoomAuto(): boolean {\r\n    return this._zoomAuto;\r\n  }\r\n  set zoomAuto(value) {\r\n    if (value !== !this._zoomAuto) {\r\n      return;\r\n    }\r\n    this._zoomAuto = value;\r\n    this.zoomAuto$.next(value);\r\n    this.storageService.set('zoomAuto', value);\r\n  }\r\n  private _zoomAuto = false;\r\n\r\n  // To allow the toast to use much larger extent on the map\r\n  get fullExtent(): boolean {\r\n    return this._fullExtent;\r\n  }\r\n  set fullExtent(value) {\r\n    if (value !== !this._fullExtent) {\r\n      return;\r\n    }\r\n    this._fullExtent = value;\r\n    this.fullExtent$.next(value);\r\n    this.fullExtentEvent.emit(value);\r\n    this.storageService.set('fullExtent', value);\r\n  }\r\n  private _fullExtent = false;\r\n\r\n  public fullExtent$: BehaviorSubject<boolean> = new BehaviorSubject(\r\n    this.fullExtent\r\n  );\r\n  public isHtmlDisplay = false;\r\n  public iconResizeWindows = '';\r\n\r\n  public icon = 'menu';\r\n\r\n  public actionStore = new ActionStore([]);\r\n  public actionbarMode = ActionbarMode.Overlay;\r\n\r\n  private multiple$ = new BehaviorSubject(false);\r\n  private isResultSelected$ = new BehaviorSubject(false);\r\n  public isSelectedResultOutOfView$ = new BehaviorSubject(false);\r\n  private isSelectedResultOutOfView$$: Subscription;\r\n  private storageChange$$: Subscription;\r\n  private initialized = true;\r\n\r\n  private format = new olFormatGeoJSON();\r\n\r\n  private resultOrResolution$$: Subscription;\r\n  private focusedResult$: BehaviorSubject<\r\n    SearchResult<Feature>\r\n  > = new BehaviorSubject(undefined);\r\n  private abstractFocusedOrSelectedResult: Feature;\r\n\r\n  public withZoomButton = true;\r\n  zoomAuto$: BehaviorSubject<boolean> = new BehaviorSubject(false);\r\n\r\n  @Output() openedChange = new EventEmitter<boolean>();\r\n\r\n  @Output() fullExtentEvent = new EventEmitter<boolean>();\r\n  @Output() windowHtmlDisplayEvent = new EventEmitter<boolean>();\r\n\r\n  resultSelected$ = new BehaviorSubject<SearchResult<Feature>>(undefined);\r\n\r\n  // @HostBinding('class.app-toast-panel-opened')\r\n  // get hasOpenedClass() {\r\n  //   return this.opened;\r\n  // }\r\n\r\n  // @HostBinding('class.app-full-toast-panel-collapsed')\r\n  // get hasFullCollapsedClass() {\r\n  //   return !this.opened && this.fullExtent;\r\n  // }\r\n\r\n  getClassPanel() {\r\n\r\n    return {\r\n      'app-toast-panel-opened' : this.opened && !this.fullExtent && !this.isHtmlDisplay,\r\n      'app-full-toast-panel-opened' :\r\n        this.opened && this.fullExtent &&\r\n        !this.isHtmlDisplay,\r\n\r\n      'app-toast-panel-html' :\r\n        this.opened &&\r\n        !this.fullExtent &&\r\n        this.resultSelected$.value &&\r\n        this.isHtmlDisplay,\r\n\r\n      'app-toast-panel-html-large' :\r\n        this.opened &&\r\n        this.fullExtent &&\r\n        this.resultSelected$.value &&\r\n        this.isHtmlDisplay,\r\n\r\n      'app-toast-panel-collapsed': !this.opened && !this.fullExtent && !this.isHtmlDisplay,\r\n      'app-full-toast-panel-collapsed' : !this.opened && this.fullExtent && !this.isHtmlDisplay,\r\n      'app-toast-panel-html-collapsed' : !this.opened && this.isHtmlDisplay\r\n    };\r\n  }\r\n\r\n  // if query tabs mode activated\r\n  // fix Heigh of igo-panel\r\n  setHeighPanelTabsMode() {\r\n    if(this.resultSelected$.value || !this.opened){\r\n      return '';\r\n    }\r\n\r\n    if(this.tabsMode && !this.fullExtent && !this.isHtmlDisplay) {\r\n      return 'app-toast-panel-opened-max-height';\r\n    } else if(this.tabsMode && this.opened &&\r\n      this.fullExtent && !this.isHtmlDisplay) {\r\n      return 'app-full-toast-panel-opened-max-height';\r\n    }\r\n  }\r\n\r\n  @HostBinding('style.visibility')\r\n  get displayStyle() {\r\n    if (this.results.length) {\r\n      if (this.results.length === 1 && this.initialized) {\r\n        this.selectResult(this.results[0]);\r\n      }\r\n      return 'visible';\r\n    }\r\n    return 'hidden';\r\n  }\r\n\r\n  // @HostBinding('class.app-full-toast-panel-opened')\r\n  // get hasFullOpenedClass() {\r\n  //   return this.opened && this.fullExtent;\r\n  // }\r\n\r\n  @HostListener('document:keydown.escape', ['$event']) onEscapeHandler(\r\n    event: KeyboardEvent\r\n  ) {\r\n    this.clear();\r\n  }\r\n\r\n  @HostListener('document:keydown.backspace', ['$event']) onBackHandler(\r\n    event: KeyboardEvent\r\n  ) {\r\n    this.unselectResult();\r\n  }\r\n\r\n  @HostListener('document:keydown.z', ['$event']) onZoomHandler(\r\n    event: KeyboardEvent\r\n  ) {\r\n    if (this.isResultSelected$.getValue() === true) {\r\n      const localOlFeature = this.format.readFeature(\r\n        this.resultSelected$.getValue().data,\r\n        {\r\n          dataProjection: this.resultSelected$.getValue().data.projection,\r\n          featureProjection: this.map.projection\r\n        }\r\n      );\r\n      moveToOlFeatures(this.map, [localOlFeature], FeatureMotion.Default);\r\n    }\r\n  }\r\n\r\n  get results(): SearchResult<Feature>[] {\r\n    // return this.store.view.filter((e) => e.meta.dataType === FEATURE).all();\r\n    return this.store.all();\r\n  }\r\n\r\n  get multiple(): Observable<boolean> {\r\n    this.results.length\r\n      ? this.multiple$.next(true)\r\n      : this.multiple$.next(false);\r\n    return this.multiple$;\r\n  }\r\n\r\n  constructor(\r\n    public mediaService: MediaService,\r\n    public languageService: LanguageService,\r\n    private storageState: StorageState,\r\n    private queryState: QueryState,\r\n    private configService: ConfigService\r\n  ) {\r\n    this.tabsMode = this.configService.getConfig('queryTabs')\r\n      ? this.configService.getConfig('queryTabs')\r\n      : false;\r\n    this.opened = this.storageService.get('toastOpened') as boolean;\r\n    this.zoomAuto = this.storageService.get('zoomAuto') as boolean;\r\n    this.fullExtent = this.storageService.get('fullExtent') as boolean;\r\n    this.setResizeWindowIcon();\r\n  }\r\n\r\n  private monitorResultOutOfView() {\r\n    this.isSelectedResultOutOfView$$ = combineLatest([\r\n      this.map.viewController.state$,\r\n      this.resultSelected$\r\n    ])\r\n      .pipe(debounceTime(100))\r\n      .subscribe((bunch) => {\r\n        const selectedResult = bunch[1];\r\n        if (!selectedResult) {\r\n          this.isSelectedResultOutOfView$.next(false);\r\n          return;\r\n        }\r\n        const selectedOlFeature = featureToOl(selectedResult.data, this.map.projection);\r\n        const selectedOlFeatureExtent = computeOlFeaturesExtent(this.map, [selectedOlFeature]);\r\n        this.isSelectedResultOutOfView$.next(featuresAreOutOfView(this.map, selectedOlFeatureExtent));\r\n      });\r\n  }\r\n\r\n\r\n  ngOnInit() {\r\n    this.store.entities$.subscribe(() => {\r\n      this.initialized = true;\r\n    });\r\n    this.monitorResultOutOfView();\r\n\r\n    let latestResult;\r\n    let trigger;\r\n    if (this.hasFeatureEmphasisOnSelection) {\r\n      this.resultOrResolution$$ = combineLatest([\r\n        this.focusedResult$.pipe(\r\n          tap((res) => {\r\n            latestResult = res;\r\n            trigger = 'focused';\r\n          })\r\n        ),\r\n        this.resultSelected$.pipe(\r\n          tap((res) => {\r\n            latestResult = res;\r\n            trigger = 'selected';\r\n          })\r\n        ),\r\n        this.map.viewController.resolution$,\r\n        this.store.entities$\r\n      ]).subscribe(() => this.buildResultEmphasis(latestResult, trigger));\r\n    }\r\n\r\n    this.storageChange$$ = this.storageService.storageChange$\r\n      .pipe(skipWhile((storageChange: StorageServiceEvent) => storageChange.key !== 'zoomAuto'))\r\n      .subscribe((change) => {\r\n        this.zoomAuto = change.currentValue;\r\n      });\r\n\r\n    this.actionStore.load([\r\n      {\r\n        id: 'list',\r\n        title: this.languageService.translate.instant('toastPanel.backToList'),\r\n        icon: 'format-list-bulleted-square',\r\n        tooltip: this.languageService.translate.instant(\r\n          'toastPanel.listButton'\r\n        ),\r\n        display: () => {\r\n          return this.isResultSelected$;\r\n        },\r\n        handler: () => {\r\n          this.unselectResult();\r\n        }\r\n      },\r\n      {\r\n        id: 'zoomFeature',\r\n        title: this.languageService.translate.instant(\r\n          'toastPanel.zoomOnFeature'\r\n        ),\r\n        icon: 'magnify-plus-outline',\r\n        tooltip: this.languageService.translate.instant(\r\n          'toastPanel.zoomOnFeatureTooltip'\r\n        ),\r\n        display: () => {\r\n          return this.isResultSelected$;\r\n        },\r\n        handler: () => {\r\n          const localOlFeature = this.format.readFeature(\r\n            this.resultSelected$.getValue().data,\r\n            {\r\n              dataProjection: this.resultSelected$.getValue().data.projection,\r\n              featureProjection: this.map.projection\r\n            }\r\n          );\r\n          moveToOlFeatures(this.map, [localOlFeature], FeatureMotion.Zoom);\r\n        }\r\n      },\r\n      {\r\n        id: 'zoomResults',\r\n        title: this.languageService.translate.instant(\r\n          'toastPanel.zoomOnFeatures'\r\n        ),\r\n        tooltip: this.languageService.translate.instant(\r\n          'toastPanel.zoomOnFeaturesTooltip'\r\n        ),\r\n        icon: 'magnify-scan',\r\n        availability: () => {\r\n          return this.multiple;\r\n        },\r\n        handler: () => {\r\n          const olFeatures = [];\r\n          for (const result of this.store.all()) {\r\n            const localOlFeature = this.format.readFeature(result.data, {\r\n              dataProjection: result.data.projection,\r\n              featureProjection: this.map.projection\r\n            });\r\n            olFeatures.push(localOlFeature);\r\n          }\r\n          moveToOlFeatures(this.map, olFeatures, FeatureMotion.Zoom);\r\n        }\r\n      },\r\n      {\r\n        id: 'zoomAuto',\r\n        title: this.languageService.translate.instant('toastPanel.zoomAuto'),\r\n        tooltip: this.languageService.translate.instant(\r\n          'toastPanel.zoomAutoTooltip'\r\n        ),\r\n        checkbox: true,\r\n        checkCondition: this.zoomAuto$,\r\n        handler: () => {\r\n          this.zoomAuto = !this.zoomAuto;\r\n          if (this.zoomAuto && this.isResultSelected$.value === true) {\r\n            this.selectResult(this.resultSelected$.getValue());\r\n          }\r\n        }\r\n      },\r\n      {\r\n        id: 'fullExtent',\r\n        title: this.languageService.translate.instant('toastPanel.fullExtent'),\r\n        tooltip: this.languageService.translate.instant(\r\n          'toastPanel.fullExtentTooltip'\r\n        ),\r\n        icon: 'arrow-expand',\r\n        display: () => {\r\n          return this.fullExtent$.pipe(map((v) => !v && !this.isDesktop()));\r\n        },\r\n        handler: () => {\r\n          this.fullExtent = true;\r\n        }\r\n      },\r\n      {\r\n        id: 'standardExtent',\r\n        title: this.languageService.translate.instant(\r\n          'toastPanel.standardExtent'\r\n        ),\r\n        tooltip: this.languageService.translate.instant(\r\n          'toastPanel.standardExtentTooltip'\r\n        ),\r\n        icon: 'arrow-collapse',\r\n        display: () => {\r\n          return this.fullExtent$.pipe(map((v) => v && !this.isDesktop()));\r\n        },\r\n        handler: () => {\r\n          this.fullExtent = false;\r\n        }\r\n      }\r\n    ]);\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    if (this.resultOrResolution$$) {\r\n      this.resultOrResolution$$.unsubscribe();\r\n    }\r\n    if (this.isSelectedResultOutOfView$$) {\r\n      this.isSelectedResultOutOfView$$.unsubscribe();\r\n    }\r\n    if (this.storageChange$$) {\r\n      this.storageChange$$.unsubscribe();\r\n    }\r\n  }\r\n\r\n  private buildResultEmphasis(\r\n    result: SearchResult<Feature>,\r\n    trigger: 'selected' | 'focused' | undefined\r\n  ) {\r\n    this.clearFeatureEmphasis();\r\n    if (!result || (trigger === 'selected' && this.zoomAuto)) {\r\n      return;\r\n    }\r\n    const myOlFeature = featureToOl(result.data, this.map.projection);\r\n    const olGeometry = myOlFeature.getGeometry();\r\n    if (featuresAreTooDeepInView(this.map, olGeometry.getExtent() as [number, number, number, number], 0.0025)) {\r\n      const extent = olGeometry.getExtent();\r\n      const x = extent[0] + (extent[2] - extent[0]) / 2;\r\n      const y = extent[1] + (extent[3] - extent[1]) / 2;\r\n      const feature1 = new olFeature({\r\n        name: 'abstractFocusedOrSelectedResult',\r\n        geometry: new olPoint([x, y])\r\n      });\r\n      this.abstractFocusedOrSelectedResult = featureFromOl(\r\n        feature1,\r\n        this.map.projection\r\n      );\r\n      this.abstractFocusedOrSelectedResult.meta.style =\r\n        getCommonVectorSelectedStyle(\r\n          Object.assign({},\r\n            { feature: this.abstractFocusedOrSelectedResult },\r\n            trigger === 'selected' ?\r\n              this.queryState.queryOverlayStyleSelection :\r\n              this.queryState.queryOverlayStyleFocus));\r\n      this.abstractFocusedOrSelectedResult.meta.style.setZIndex(2000);\r\n      this.map.queryResultsOverlay.addFeature(\r\n        this.abstractFocusedOrSelectedResult,\r\n        FeatureMotion.None\r\n      );\r\n    }\r\n  }\r\n\r\n  private clearFeatureEmphasis() {\r\n    if (this.abstractFocusedOrSelectedResult) {\r\n      this.map.queryResultsOverlay.removeFeature(this.abstractFocusedOrSelectedResult);\r\n      this.abstractFocusedOrSelectedResult = undefined;\r\n    }\r\n  }\r\n\r\n  getTitle(result: SearchResult) {\r\n    return getEntityTitle(result);\r\n  }\r\n\r\n  focusResult(result: SearchResult<Feature>) {\r\n    this.focusedResult$.next(result);\r\n    this.map.queryResultsOverlay.removeFeature(result.data);\r\n\r\n    result.data.meta.style = getCommonVectorSelectedStyle(\r\n      Object.assign({},\r\n        { feature: result.data },\r\n        this.queryState.queryOverlayStyleFocus));\r\n    result.data.meta.style.setZIndex(2000);\r\n    this.map.queryResultsOverlay.addFeature(result.data, FeatureMotion.None);\r\n  }\r\n\r\n  unfocusResult(result: SearchResult<Feature>, force?) {\r\n    this.focusedResult$.next(undefined);\r\n    if (!force && this.store.state.get(result).focused) {\r\n      return;\r\n    }\r\n    this.map.queryResultsOverlay.removeFeature(result.data);\r\n\r\n    result.data.meta.style = getCommonVectorStyle(\r\n      Object.assign({},\r\n        { feature: result.data },\r\n        this.queryState.queryOverlayStyle));\r\n    result.data.meta.style.setZIndex(undefined);\r\n    this.map.queryResultsOverlay.addFeature(result.data, FeatureMotion.None);\r\n  }\r\n\r\n  selectResult(result: SearchResult<Feature>) {\r\n    this.store.state.update(\r\n      result,\r\n      {\r\n        focused: true,\r\n        selected: true\r\n      },\r\n      true\r\n    );\r\n    this.resultSelected$.next(result);\r\n    if (result.data.properties && result.data.properties.target === 'iframe') {\r\n      this.setHtmlDisplay(true);\r\n    } else {\r\n      this.setHtmlDisplay(false);\r\n    }\r\n\r\n    const features = [];\r\n    for (const feature of this.store.all()) {\r\n      if (feature.meta.id === result.meta.id) {\r\n        feature.data.meta.style = getCommonVectorSelectedStyle(\r\n          Object.assign({}, { feature: feature.data },\r\n            this.queryState.queryOverlayStyleSelection));\r\n        feature.data.meta.style.setZIndex(2000);\r\n      } else {\r\n        feature.data.meta.style = getCommonVectorStyle(\r\n          Object.assign({},\r\n            { feature: feature.data },\r\n            this.queryState.queryOverlayStyle));\r\n      }\r\n      features.push(feature.data);\r\n    }\r\n    this.map.queryResultsOverlay.removeFeatures(features);\r\n    this.map.queryResultsOverlay.addFeatures(features, FeatureMotion.None);\r\n\r\n    if (this.zoomAuto) {\r\n      const localOlFeature = this.format.readFeature(\r\n        this.resultSelected$.getValue().data,\r\n        {\r\n          dataProjection: this.resultSelected$.getValue().data.projection,\r\n          featureProjection: this.map.projection\r\n        }\r\n      );\r\n      moveToOlFeatures(this.map, [localOlFeature], FeatureMotion.Default);\r\n    }\r\n\r\n    this.isResultSelected$.next(true);\r\n    this.initialized = false;\r\n  }\r\n\r\n  unselectResult() {\r\n    this.resultSelected$.next(undefined);\r\n    this.isResultSelected$.next(false);\r\n    this.setHtmlDisplay(false);\r\n    this.store.state.clear();\r\n\r\n    const features = [];\r\n    for (const feature of this.store.all()) {\r\n      feature.data.meta.style = getCommonVectorStyle(\r\n        Object.assign({},\r\n          { feature: feature.data },\r\n          this.queryState.queryOverlayStyle));\r\n      features.push(feature.data);\r\n    }\r\n    this.map.queryResultsOverlay.setFeatures(features, FeatureMotion.None, 'map');\r\n  }\r\n\r\n  clear() {\r\n    this.clearFeatureEmphasis();\r\n    this.map.queryResultsOverlay.clear();\r\n    this.store.clear();\r\n    this.unselectResult();\r\n    this.setHtmlDisplay(false);\r\n  }\r\n\r\n  isMobile(): boolean {\r\n    return this.mediaService.getMedia() === Media.Mobile;\r\n  }\r\n  isDesktop(): boolean {\r\n    return this.mediaService.isDesktop();\r\n  }\r\n\r\n  handleKeyboardEvent(event) {\r\n    if (event.keyCode === 37) {\r\n      this.previousResult();\r\n    } else if (event.keyCode === 39) {\r\n      this.nextResult();\r\n    }\r\n  }\r\n\r\n  previousResult() {\r\n    if (!this.resultSelected$.value) {\r\n      return;\r\n    }\r\n    let i = this.results.indexOf(this.resultSelected$.value);\r\n    const previousResult = this.results[--i];\r\n    if (previousResult) {\r\n      this.selectResult(previousResult);\r\n    }\r\n  }\r\n\r\n  nextResult() {\r\n    if (!this.resultSelected$.value) {\r\n      return;\r\n    }\r\n    let i = this.results.indexOf(this.resultSelected$.value);\r\n    const nextResult = this.results[++i];\r\n    if (nextResult) {\r\n      this.selectResult(nextResult);\r\n    }\r\n  }\r\n\r\n  zoomTo() {\r\n    const localOlFeature = this.format.readFeature(\r\n      this.resultSelected$.getValue().data,\r\n      {\r\n        dataProjection: this.resultSelected$.getValue().data.projection,\r\n        featureProjection: this.map.projection\r\n      }\r\n    );\r\n    moveToOlFeatures(this.map, [localOlFeature], FeatureMotion.Zoom);\r\n  }\r\n\r\n  swipe(action: string) {\r\n    if (action === ToastPanelComponent.SWIPE_ACTION.RIGHT) {\r\n      this.previousResult();\r\n    } else if (action === ToastPanelComponent.SWIPE_ACTION.LEFT) {\r\n      this.nextResult();\r\n    } else if (action === ToastPanelComponent.SWIPE_ACTION.UP) {\r\n      this.opened = true;\r\n    } else if (action === ToastPanelComponent.SWIPE_ACTION.DOWN) {\r\n      this.opened = false;\r\n    }\r\n  }\r\n\r\n  onToggleClick(e: MouseEvent) {\r\n    if ((e.target as any).className !== 'igo-panel-title') {\r\n      return;\r\n    }\r\n    this.opened = !this.opened;\r\n  }\r\n\r\n  /**\r\n   * Invoke the action handler\r\n   * @internal\r\n   */\r\n  onTriggerAction(action: Action) {\r\n    const args = action.args || [];\r\n    action.handler(...args);\r\n  }\r\n\r\n  setHtmlDisplay(value: boolean) {\r\n    if (value === true) {\r\n      this.isHtmlDisplay = true;\r\n      this.windowHtmlDisplayEvent.emit(true);\r\n    } else {\r\n      this.isHtmlDisplay = false;\r\n      this.windowHtmlDisplayEvent.emit(false);\r\n    }\r\n  }\r\n\r\n  isHtmlAndDesktop(): boolean {\r\n    if (this.isHtmlDisplay && this.isDesktop()) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  setResizeWindowIcon() {\r\n    if (this.fullExtent) {\r\n      this.iconResizeWindows = 'arrow-collapse';\r\n      // this.iconResizeWindows = 'vector-arrange-below';\r\n    } else {\r\n      this.iconResizeWindows = 'arrow-expand';\r\n      // this.iconResizeWindows = 'crop-square';\r\n    }\r\n  }\r\n\r\n  resizeWindows() {\r\n    this.storageService.set('fullExtent', !this.fullExtent);\r\n\r\n    if (this.fullExtent) {\r\n      this.reduceWindow();\r\n    } else {\r\n      this.enlargeWindows();\r\n    }\r\n  }\r\n\r\n  reduceWindow() {\r\n    this.fullExtent = false;\r\n    this.setResizeWindowIcon();\r\n  }\r\n\r\n  enlargeWindows() {\r\n    this.fullExtent = true;\r\n    this.setResizeWindowIcon();\r\n  }\r\n\r\n}\r\n","import {\r\n  Component,\r\n  Input,\r\n  Output,\r\n  EventEmitter,\r\n  HostBinding,\r\n  ChangeDetectionStrategy\r\n} from '@angular/core';\r\nimport { showContent } from './toast-panel-for-expansion.animations';\r\n\r\n\r\n@Component({\r\n  selector: 'app-toast-panel-for-expansion',\r\n  templateUrl: './toast-panel-for-expansion.component.html',\r\n  styleUrls: ['./toast-panel-for-expansion.component.scss'],\r\n  animations: [showContent()],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class ToastPanelForExpansionComponent {\r\n\r\n  @Input()\r\n  set opened(value: boolean) {\r\n    if (value === this._opened) {\r\n      return;\r\n    }\r\n    this._opened = value;\r\n    this.openedChange.emit(this._opened);\r\n  }\r\n  get opened(): boolean { return this._opened; }\r\n  private _opened: boolean;\r\n\r\n  @Input() title: string;\r\n\r\n  @Input() withHeader: boolean;\r\n\r\n  @Output() openedChange = new EventEmitter<boolean>();\r\n\r\n  @HostBinding('class.toast-panel-for-expansion-opened')\r\n  get hasOpenedClass() {\r\n    return this.opened;\r\n  }\r\n\r\n  @HostBinding('style.visibility')\r\n  get displayStyle() {\r\n    return (this.withHeader || this.opened) ? 'visible' : 'hidden';\r\n  }\r\n\r\n  constructor() {}\r\n\r\n}\r\n","<mat-sidenav\r\n  mode=\"side\"\r\n  [autoFocus]=\"false\"\r\n  [(opened)]=\"opened\">\r\n\r\n  <div class=\"app-sidenav-content\">\r\n\r\n      <div #content class=\"app-content\" [ngClass]=\"{toolActivated: toolbox.activeTool$ | async}\">\r\n\r\n        <igo-home-button\r\n          *ngIf=\"toolbox.activeTool$ | async\"\r\n          (unselectButton)=\"onUnselectButtonClick()\">\r\n        </igo-home-button>\r\n\r\n        <igo-panel [title]=\"title$ | async | translate\">\r\n          <button *ngIf=\"toolbox.activeTool$ | async\"\r\n            mat-icon-button\r\n            panelLeftButton\r\n            tooltip-position=\"below\"\r\n            matTooltipShowDelay=\"500\"\r\n            [matTooltip]=\"'igo.context.sidenav.goBack' | translate\"\r\n            (click)=\"onPreviousButtonClick()\">\r\n            <mat-icon svgIcon=\"arrow-left\"></mat-icon>\r\n          </button>\r\n\r\n          <igo-interactive-tour\r\n            panelRightButton\r\n            styleButton = 'icon'>\r\n          </igo-interactive-tour>\r\n\r\n          <!-- <button *ngIf=\"toolbox.activeTool$ | async\"\r\n            mat-icon-button\r\n            panelRightButton\r\n            tooltip-position=\"below\"\r\n            matTooltipShowDelay=\"500\"\r\n            [matTooltip]=\"'igo.context.sidenav.mainMenu' | translate\"\r\n            (click)=\"onUnselectButtonClick()\">\r\n            <mat-icon svgIcon=\"close\"></mat-icon>\r\n          </button> -->\r\n\r\n          <igo-toolbox\r\n            class=\"igo-toolbox\"\r\n            color=\"primary\"\r\n            [animate]=\"true\"\r\n            [toolbox]=\"toolbox\">\r\n          </igo-toolbox>\r\n\r\n        </igo-panel>\r\n    </div>\r\n  </div>\r\n</mat-sidenav>\r\n","<igo-panel [title]=\"title\" [withHeader]=\"withHeader\">\r\n\r\n  <div #content [@showContent]=\"opened\">\r\n    <ng-content></ng-content>\r\n  </div>\r\n</igo-panel>\r\n","import {\r\n  trigger,\r\n  state,\r\n  style,\r\n  transition,\r\n  animate,\r\n  AnimationTriggerMetadata\r\n} from '@angular/animations';\r\n\r\nexport function showContent(\r\n  duration = '50ms',\r\n  delay = '280ms',\r\n  easing = 'ease-in-out'\r\n): AnimationTriggerMetadata {\r\n  return trigger('showContent', [\r\n    state('true', style({\r\n      opacity: 1,\r\n      display: 'block'\r\n    })),\r\n    state('false', style({\r\n      opacity: 0,\r\n      display: 'none'\r\n    })),\r\n    transition('false => true', animate(`${duration} ${delay} ${easing}`)),\r\n    transition('true => false', animate('0ms'))\r\n  ]);\r\n}\r\n","import {\r\n  Component,\r\n  Input,\r\n  Output,\r\n  OnInit,\r\n  OnDestroy,\r\n  EventEmitter,\r\n  ChangeDetectionStrategy\r\n} from '@angular/core';\r\n\r\nimport { BehaviorSubject, Subscription } from 'rxjs';\r\n\r\nimport { Tool, Toolbox } from '@igo2/common';\r\nimport { IgoMap } from '@igo2/geo';\r\nimport { ToolState, CatalogState } from '@igo2/integration';\r\nimport { ConfigService } from '@igo2/core';\r\n\r\n@Component({\r\n  selector: 'app-sidenav',\r\n  templateUrl: './sidenav.component.html',\r\n  styleUrls: ['./sidenav.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class SidenavComponent implements OnInit, OnDestroy {\r\n  title$: BehaviorSubject<string> = new BehaviorSubject<string>(undefined);\r\n\r\n  private activeTool$$: Subscription;\r\n\r\n  @Input()\r\n  get map(): IgoMap {\r\n    return this._map;\r\n  }\r\n  set map(value: IgoMap) {\r\n    this._map = value;\r\n  }\r\n  private _map: IgoMap;\r\n\r\n  @Input()\r\n  get opened(): boolean {\r\n    return this._opened;\r\n  }\r\n  set opened(value: boolean) {\r\n    if (value === this._opened) {\r\n      return;\r\n    }\r\n\r\n    this._opened = value;\r\n    this.openedChange.emit(this._opened);\r\n  }\r\n  private _opened: boolean;\r\n\r\n  @Output() openedChange = new EventEmitter<boolean>();\r\n  @Output() toolChange = new EventEmitter<Tool>();\r\n\r\n  get toolbox(): Toolbox {\r\n    return this.toolState.toolbox;\r\n  }\r\n\r\n  constructor(\r\n    private toolState: ToolState,\r\n    private configService: ConfigService,\r\n    private catalogState: CatalogState) {}\r\n\r\n  ngOnInit() {\r\n    this.activeTool$$ = this.toolbox.activeTool$.subscribe((tool: Tool) => {\r\n      const sidenavTitle = this.configService.getConfig('sidenavTitle') || 'IGO';\r\n      if (tool) {\r\n        if (tool.name === 'catalogBrowser') {\r\n          for (const catalog of this.catalogState.catalogStore.all()) {\r\n            if (this.catalogState.catalogStore.state.get(catalog).selected === true) {\r\n              this.title$.next(catalog.title);\r\n            }\r\n          }\r\n        } else if (tool.name === 'activeTimeFilter' || tool.name === 'activeOgcFilter') {\r\n          for (const layer of this.map.layers) {\r\n            if (layer.options.active === true) {\r\n              this.title$.next(layer.title);\r\n            }\r\n          }\r\n        } else {\r\n          this.title$.next(tool.title);\r\n        }\r\n      } else {\r\n        this.title$.next(sidenavTitle);\r\n      }\r\n      this.toolChange.emit(tool);\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.activeTool$$.unsubscribe();\r\n  }\r\n\r\n  onPreviousButtonClick() {\r\n    this.toolbox.activatePreviousTool();\r\n  }\r\n\r\n  onUnselectButtonClick() {\r\n    this.toolbox.deactivateTool();\r\n  }\r\n}\r\n","<ng-container *ngFor=\"let element of mapOverlay; let i = index\">\r\n  <div class=\"mapOverlayDefault\" [ngClass]=\"element.cssClass\"\r\n       [style.position]=\"element.fixed ? 'fixed' : 'absolute'\"\r\n       [style.marginLeft]=\"element.marginLeft\"\r\n       [style.marginRight]=\"element.marginRight\"\r\n       [style.marginTop]=\"element.marginTop\"\r\n       [style.marginBottom]=\"element.marginBottom\"\r\n       [style.fontSize]=\"element.fontSize\">\r\n    <a *ngIf=\"element.link; else templateNoLink\"\r\n        target=\"_blank\" [href]='element.link'>\r\n        {{ element.text }}\r\n        <ng-container *ngIf=\"element.imgSrc\">\r\n          <img [src]=\"element.imgSrc\"\r\n               [alt]=\"element.alt\"\r\n               [ngStyle]=\"{ 'width': element.imgSize }\">\r\n        </ng-container>\r\n    </a>\r\n\r\n\r\n  <ng-template #templateNoLink>\r\n    {{ element.text }}\r\n    <ng-container *ngIf=\"element.imgSrc\">\r\n      <img [src]=\"element.imgSrc\" [alt]=\"element.alt\" [ngStyle]=\"{ 'width': element.imgSize }\">\r\n    </ng-container>\r\n\r\n  </ng-template>\r\n  </div>\r\n</ng-container>\r\n","import { Component, AfterViewInit, OnDestroy } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { Context, ContextService } from '@igo2/context';\r\nimport { MediaService, ConfigService } from '@igo2/core';\r\nimport { MapOverlay } from './map-overlay.interface';\r\n\r\n@Component({\r\n  selector: 'app-map-overlay',\r\n  templateUrl: './map-overlay.component.html',\r\n  styleUrls: ['./map-overlay.component.scss']\r\n})\r\n\r\nexport class MapOverlayComponent implements AfterViewInit, OnDestroy {\r\n  public mapOverlay: MapOverlay[] = [];\r\n  private context$$: Subscription;\r\n  private media$$: Subscription;\r\n  private context: Context;\r\n\r\n  constructor(\r\n    private contextService: ContextService,\r\n    private mediaService: MediaService,\r\n    private configService: ConfigService\r\n  ) { }\r\n\r\n  ngAfterViewInit() {\r\n    this.context$$ = this.contextService.context$.subscribe(context => {\r\n        this.handleContextChange(context);\r\n        this.context = context;\r\n        }\r\n    );\r\n    this.media$$ = this.mediaService.media$.subscribe(media =>\r\n      this.handleContextChange(this.context)\r\n    );\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.context$$.unsubscribe();\r\n    this.media$$.unsubscribe();\r\n  }\r\n\r\n  private handleContextChange(context: Context) {\r\n    let mapOverlay = [];\r\n    if (context !== undefined) {\r\n      this.mapOverlay = [];\r\n\r\n      if (context['mapOverlay']) {\r\n        mapOverlay = context['mapOverlay'];\r\n      } else if (this.configService.getConfig('mapOverlay')) {\r\n        mapOverlay = this.configService.getConfig('mapOverlay');\r\n      }\r\n      for (const overlay of mapOverlay) {\r\n\r\n        // If no media define use default to desktop, display only if current media is on context definition\r\n        if ((!overlay.media && this.mediaService.getMedia() === 'desktop') ||\r\n        (overlay.media && overlay.media.includes(this.mediaService.getMedia()))) {\r\n          this.mapOverlay.push(overlay);\r\n        }\r\n      }\r\n    }\r\n\r\n  }\r\n}\r\n","<mat-sidenav-container class=\"app-main-container\">\r\n  <mat-sidenav-content>\r\n\r\n    <igo-backdrop\r\n      [shown]=\"backdropShown\"\r\n      (click)=\"onBackdropClick()\">\r\n    </igo-backdrop>\r\n\r\n    <igo-menu-button *ngIf=\"showMenuButton\"\r\n      [sidenavOpened]=\"sidenavOpened\"\r\n      (openSidenav)=\"onToggleSidenavClick()\">\r\n    </igo-menu-button>\r\n\r\n    <igo-search-bar *ngIf=\"showSearchBar\"\r\n      #searchBar\r\n      [term]=\"searchBarTerm\"\r\n      [termSplitter]=\"termSplitter\"\r\n      [minLength]=\"minSearchTermLength\"\r\n      [searchSettings]=\"true\"\r\n      [forceNA]=\"forceCoordsNA\"\r\n      [store]=\"searchStore\"\r\n      (searchTermChange)=\"onSearchTermChange($event)\"\r\n      [pointerSummaryEnabled]=\"igoSearchPointerSummaryEnabled\"\r\n      (pointerSummaryStatus)=\"onPointerSummaryStatusChange($event)\"\r\n      [searchResultsGeometryEnabled]=\"searchResultsGeometryEnabled\"\r\n      (searchResultsGeometryStatus)=\"onSearchResultsGeometryStatusChange($event)\"\r\n      [reverseSearchCoordsFormatEnabled]=\"igoReverseSearchCoordsFormatEnabled\"\r\n      (reverseSearchCoordsFormatStatus)=\"onReverseCoordsFormatStatusChange($event)\"\r\n      (search)=\"onSearch($event)\"\r\n      (clearFeature)=\"onClearSearch()\"\r\n      (searchSettingsChange)=\"onSearchSettingsChange()\">\r\n    </igo-search-bar>\r\n\r\n    <app-sidenav\r\n      [map]=\"map\"\r\n      [(opened)]=\"sidenavOpened\"\r\n      (toolChange)=\"toolChanged($event)\">\r\n    </app-sidenav>\r\n\r\n    <igo-map-browser\r\n      igoMapOffline\r\n      igoWorkspaceUpdator\r\n      [workspaceStore]=\"workspaceStore\"\r\n      igoLongPress\r\n      igoSearchPointerSummary\r\n      [igoSearchPointerSummaryDelay]=\"500\"\r\n      [igoSearchPointerSummaryEnabled]=\"igoSearchPointerSummaryEnabled\"\r\n      igoHoverFeature\r\n      [igoHoverFeatureDelay]=\"250\"\r\n      [igoHoverFeatureEnabled]=\"true\"\r\n      #mapBrowser\r\n      igoQuery\r\n      [waitForAllQueries]=\"true\"\r\n      [queryFeatures]=\"true\"\r\n      [queryFeaturesHitTolerance]=\"15\"\r\n      igoMapContext\r\n      igoLayerContext\r\n      igoDropGeoFile\r\n      [contextUri]=\"contextUri\"\r\n      (query)=\"onMapQuery($event)\"\r\n      [map]=\"map\"\r\n      [igoContextMenu]=contextMenu\r\n      (menuPosition)=\"onContextMenuOpen($event)\"\r\n      [ngClass]=\"{'igo-attribution-offset': map.getBaseLayers().length > 1}\"\r\n      [@mapStateX]=\"sidenavOpened ? 'right' : 'left'\"\r\n      (@mapStateX.start)=\"updateMapBrowserClass()\"\r\n      [@mapStateY]=\"getControlsOffsetY()\"\r\n      (@mapStateY.start)=\"updateMapBrowserClass()\">\r\n\r\n      <igo-zoom-button [map]=\"map\" color=\"primary\"\r\n        [@controlsOffsetY]=\"getControlsOffsetY()\">\r\n      </igo-zoom-button>\r\n      <igo-swipe-control [map]=\"map\"></igo-swipe-control>\r\n      <igo-map-center [map]=\"map\"></igo-map-center>\r\n      <igo-wake-lock-button *ngIf=\"showWakeLockButton\"></igo-wake-lock-button>\r\n      <igo-offline-button [map]=\"map\" color=\"primary\"\r\n        *ngIf=\"showOfflineButton\"\r\n        [@controlsOffsetY]=\"getControlsOffsetY()\"\r\n        [@mobileOffsetY]=\"getToastPanelStatus()\">\r\n      </igo-offline-button>\r\n      <igo-geolocate-button\r\n        *ngIf=\"hasGeolocateButton\"\r\n        [map]=\"map\" color=\"primary\"\r\n        [@controlsOffsetY]=\"getControlsOffsetY()\"\r\n        [@mobileOffsetY]=\"getToastPanelStatus()\">\r\n      </igo-geolocate-button>\r\n      <igo-rotation-button [showIfNoRotation]=\"showRotationButtonIfNoRotation\" [map]=\"map\" color=\"primary\"></igo-rotation-button>\r\n      <igo-home-extent-button\r\n        *ngIf=\"hasHomeExtentButton\"\r\n        [map]=\"map\"\r\n        [extentOverride]=\"homeExtent\"\r\n        [centerOverride]=\"homeCenter\"\r\n        [zoomOverride]=\"homeZoom\"\r\n        color=\"primary\">\r\n      </igo-home-extent-button>\r\n      <igo-user-button\r\n        *ngIf=\"auth.url\"\r\n        [map]=\"map\" color=\"primary\"\r\n        [@controlsOffsetY]=\"getControlsOffsetY()\"\r\n        [@mobileOffsetY]=\"getToastPanelStatus()\">\r\n      </igo-user-button>\r\n      <igo-baselayers-switcher [map]=\"map\"\r\n        [@controlsOffsetY]=\"getBaselayersSwitcherStatus()\"\r\n        [useStaticIcon]=\"true\">\r\n      </igo-baselayers-switcher>\r\n    </igo-map-browser>\r\n\r\n    <app-map-overlay\r\n      [@controlStateY]=\"getControlsOffsetY()\"\r\n      [@controlStateX]=\"(mediaService.media$ | async) !== 'mobile' &&\r\n                              sidenavOpened ? 'right' : 'left'\">\r\n    </app-map-overlay>\r\n\r\n  </mat-sidenav-content>\r\n</mat-sidenav-container>\r\n\r\n<app-expansion-panel\r\n  *ngIf=\"hasExpansionPanel && (workspaceState.workspaceEnabled$ | async)\"\r\n  [backdropShown]=\"expansionPanelBackdropShown\"\r\n  [(expanded)]=\"expansionPanelExpanded\"\r\n  [maximized]=\"workspaceMaximize$ | async\"\r\n  [@expansionPanelSize]=\"getExpansionPanelStatus()\"\r\n  [@toastOffsetY]=\"(isMobile() && !toastPanelOpened && queryState.store.entities$.value.length > 0 && !expansionPanelExpanded) ? 'true' : 'false'\">\r\n\r\n  <ng-container expansionPanelHeader>\r\n    <igo-workspace-selector\r\n      igoWorkspaceSelector\r\n      (toolToActivate)=\"toolToActivateFromWorkspace($event)\"\r\n      (changeWorkspace)=\"workspaceState.setActiveWorkspaceByTitle($event)\"\r\n      (disableSwitch)=\"workspaceSwitchDisabled = $event\"\r\n      (relationLayers)=\"refreshRelationsWorkspace($event)\"\r\n      (rowsInMapExtentCheckCondition)=\"workspaceState.rowsInMapExtentCheckCondition$.next($event)\"\r\n      [store]=\"workspaceStore\"\r\n      [disabled]=\"workspaceSwitchDisabled\"\r\n      [map]=\"map\">\r\n    </igo-workspace-selector>\r\n\r\n    <ng-container *ngIf=\"selectedWorkspace$ | async as workspace\">\r\n      <button\r\n        class=\"eye-workspace\"\r\n        mat-icon-button\r\n        [color]=\"workspace.layer.visible ? 'primary' : 'default'\"\r\n        collapsibleButton\r\n        tooltip-position=\"below\"\r\n        matTooltipShowDelay=\"500\"\r\n        [matTooltip]=\"workspace.layer.visible ?\r\n                      ('igo.geo.layer.hideLayer' | translate) :\r\n                      ('igo.geo.layer.showLayer' | translate)\"\r\n        (click)=\"workspace.layer.visible = !workspace.layer.visible\">\r\n        <mat-icon\r\n          [ngClass]=\"{disabled: (workspace.inResolutionRange$ | async)!==true}\"\r\n          [svgIcon]=\"workspace.layer.visible ? 'eye' : 'eye-off'\">\r\n        </mat-icon>\r\n      </button>\r\n      <button\r\n        *ngIf=\"isEditionWorkspace(workspace)\"\r\n        class=\"add-feature\"\r\n        mat-icon-button\r\n        color=\"primary\"\r\n        collapsibleButton\r\n        tooltip-position=\"below\"\r\n        matTooltipShowDelay=\"500\"\r\n        [disabled]=\"workspace.layer.options.sourceOptions.edition.addButton === false ? true : false\"\r\n        [matTooltip]=\"('workspace.addFeature') | translate\"\r\n        (click)=\"addFeature(workspace)\">\r\n        <mat-icon\r\n          svgIcon=\"plus\">\r\n        </mat-icon>\r\n      </button>\r\n      <igo-actionbar\r\n        class=\"actionbar-workspace\"\r\n        *ngIf=\"workspace.actionStore\"\r\n        [store]=\"workspace.actionStore\"\r\n        [withIcon]=\"true\"\r\n        [withTitle]=\"actionbarWithTitle\"\r\n        [horizontal]=\"true\"\r\n        [withToggleButton]=\"actionbarMode === 'overlay'\"\r\n        [iconColor]=\"'primary'\"\r\n        [color]=\"'primary'\"\r\n        [mode]=\"actionbarMode\"\r\n        [overlayClass]=\"workspaceMenuClass\">\r\n      </igo-actionbar>\r\n      <button\r\n        class=\"zoom-workspace\"\r\n        *ngIf=\"workspaceVisibility()\"\r\n        [disabled]= \"(workspaceState.workspaceSelection$ | async).length === 0 ? true : false\"\r\n        mat-icon-button\r\n        color=\"primary\"\r\n        collapsibleButton\r\n        tooltip-position=\"below\"\r\n        matTooltipShowDelay=\"500\"\r\n        [matTooltip]=\"('toastPanel.zoomOnFeaturesTooltip') | translate\"\r\n        (click)=\"zoomToSelectedFeatureWks()\">\r\n        <mat-icon\r\n        svgIcon=\"{{(workspaceState.workspaceSelection$ | async).length > 1 ?  'magnify-scan' : 'magnify-plus-outline'}}\">\r\n        </mat-icon>\r\n      </button>\r\n      <div class=\"spacer\"></div>\r\n      <igo-entity-table-paginator\r\n        *ngIf=\"workspaceVisibility()\"\r\n        [store]=\"workspace.entityStore\"\r\n        [entitySortChange$]=\"workspaceEntitySortChange$\"\r\n        [paginatorOptions]=\"paginatorOptions\"\r\n        (paginatorChange)=\"paginatorChange($event)\">\r\n      </igo-entity-table-paginator>\r\n    </ng-container>\r\n  </ng-container>\r\n\r\n  <ng-container *ngIf=\"selectedWorkspace$ | async as workspace\">\r\n    <igo-entity-table\r\n      [class]=\"isEditionWorkspace(workspace) ? 'edition-table' : ''\"\r\n      [paginator]=\"workspacePaginator\"\r\n      *ngIf=\"workspace.entityStore && workspace.meta && workspace.meta.tableTemplate && workspaceVisibility()\"\r\n      [store]=\"workspace.entityStore\"\r\n      (entitySortChange)=\"entitySortChange()\"\r\n      (entitySelectChange)=\"entitySelectChange($event)\"\r\n      [template]=\"workspace.meta.tableTemplate\">\r\n    </igo-entity-table>\r\n    <span class=\"mat-typography\">{{workspaceNotAvailableMessage | translate}}</span>\r\n  </ng-container>\r\n\r\n</app-expansion-panel>\r\n\r\n<app-toast-panel-for-expansion\r\n  [withHeader]=\"false\"\r\n  [(opened)]=\"toastPanelForExpansionOpened\">\r\n\r\n  <div class=\"toast-panel-for-expansion-close-button-container\">\r\n    <button\r\n      mat-icon-button\r\n      color=\"warn\"\r\n      (click)=\"toastPanelForExpansionOpened = false\">\r\n      <mat-icon svgIcon=\"close\"></mat-icon>\r\n    </button>\r\n  </div>\r\n\r\n  <igo-workspace-widget-outlet\r\n    *ngIf=\"selectedWorkspace$ | async as workspace\"\r\n    [workspace]=\"workspace\"\r\n    (deactivateWidget)=\"onDeactivateWorkspaceWidget()\">\r\n  </igo-workspace-widget-outlet>\r\n\r\n</app-toast-panel-for-expansion >\r\n\r\n<app-toast-panel *ngIf=\"(queryStore.empty$ | async)!==true\"\r\n  [map]=\"map\"\r\n  [store]=\"queryStore\"\r\n  [hasFeatureEmphasisOnSelection]=\"hasFeatureEmphasisOnSelection\"\r\n  [@toastPanelOffsetX]=\"toastPanelOffsetX$ | async\"\r\n  [@toastPanelOffsetY]=\"getToastPanelOffsetY()\"\r\n  [@toastPanelMobileSidenav]=\"(isMobile() && sidenavOpened) || (isTablet() && isPortrait() && sidenavOpened)\"\r\n  [opened]=\"toastPanelOpened\"\r\n  (openedChange)=\"toastOpenedChange($event)\"\r\n  (fullExtentEvent)=\"fullExtent = $event\"\r\n  (windowHtmlDisplayEvent)=\"setToastPanelHtmlDisplay($event)\">\r\n</app-toast-panel>\r\n\r\n<ng-template #contextMenu>\r\n  <igo-actionbar\r\n    [store]=\"contextMenuStore\"\r\n    [withIcon]=\"false\"\r\n    [horizontal]=\"true\"\r\n    mode=\"context\">\r\n  </igo-actionbar>\r\n</ng-template>\r\n","import {\r\n  Component,\r\n  OnInit,\r\n  OnDestroy,\r\n  ChangeDetectorRef,\r\n  ViewChild,\r\n  ElementRef\r\n} from '@angular/core';\r\nimport { ActivatedRoute, Params } from '@angular/router';\r\nimport { Subscription, of, BehaviorSubject, combineLatest } from 'rxjs';\r\nimport { debounceTime, take, pairwise, skipWhile, first } from 'rxjs/operators';\r\nimport { MatDialog, MatDialogConfig, MatDialogRef } from '@angular/material/dialog';\r\nimport MapBrowserEvent from 'ol/MapBrowserEvent';\r\nimport * as olProj from 'ol/proj';\r\nimport olFeature from 'ol/Feature';\r\nimport type { default as OlGeometry } from 'ol/geom/Geometry';\r\n\r\nimport {\r\n  MediaService,\r\n  Media,\r\n  MediaOrientation,\r\n  ConfigService,\r\n  LanguageService,\r\n  MessageService,\r\n  StorageService\r\n} from '@igo2/core';\r\nimport {\r\n  ActionbarMode,\r\n  Workspace,\r\n  WorkspaceStore,\r\n  ActionStore,\r\n  EntityStore,\r\n  // getEntityTitle,\r\n  Toolbox,\r\n  Tool,\r\n  Widget,\r\n  EntityTablePaginatorOptions,\r\n  EntityRecord\r\n} from '@igo2/common';\r\nimport { AuthOptions, AuthService } from '@igo2/auth';\r\nimport { DetailedContext } from '@igo2/context';\r\nimport {\r\n  DataSourceService,\r\n  Feature,\r\n  FEATURE,\r\n  featureToSearchResult,\r\n  GoogleLinks,\r\n  IgoMap,\r\n  LayerService,\r\n  QuerySearchSource,\r\n  Research,\r\n  SearchResult,\r\n  SearchSource,\r\n  SearchSourceService,\r\n  CapabilitiesService,\r\n  sourceCanSearch,\r\n  sourceCanReverseSearch,\r\n  ImportService,\r\n  handleFileImportError,\r\n  handleFileImportSuccess,\r\n  featureFromOl,\r\n  QueryService,\r\n  WfsWorkspace,\r\n  FeatureWorkspace,\r\n  EditionWorkspace,\r\n  EditionWorkspaceService,\r\n  generateIdFromSourceOptions,\r\n  computeOlFeaturesExtent,\r\n  addStopToStore,\r\n  ImageLayer,\r\n  VectorLayer,\r\n  MapExtent,\r\n  moveToOlFeatures,\r\n  FeatureMotion,\r\n  ConfigFileToGeoDBService\r\n} from '@igo2/geo';\r\n\r\nimport {\r\n  ToolState,\r\n  MapState,\r\n  SearchState,\r\n  QueryState,\r\n  ContextState,\r\n  WorkspaceState,\r\n  DirectionState\r\n} from '@igo2/integration';\r\n\r\nimport {\r\n  expansionPanelAnimation,\r\n  toastPanelAnimation,\r\n  controlsAnimations,\r\n  controlSlideX,\r\n  controlSlideY,\r\n  mapSlideX,\r\n  mapSlideY\r\n} from './portal.animation';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\n\r\nimport { WelcomeWindowComponent } from './welcome-window/welcome-window.component';\r\nimport { WelcomeWindowService } from './welcome-window/welcome-window.service';\r\nimport { MatPaginator } from '@angular/material/paginator';\r\nimport { ObjectUtils } from '@igo2/utils';\r\nimport olFormatGeoJSON from 'ol/format/GeoJSON';\r\n\r\n@Component({\r\n  selector: 'app-portal',\r\n  templateUrl: './portal.component.html',\r\n  styleUrls: ['./portal.component.scss'],\r\n  animations: [\r\n    expansionPanelAnimation(),\r\n    toastPanelAnimation(),\r\n    controlsAnimations(),\r\n    controlSlideX(),\r\n    controlSlideY(),\r\n    mapSlideX(),\r\n    mapSlideY()\r\n  ]\r\n})\r\nexport class PortalComponent implements OnInit, OnDestroy {\r\n  public toastPanelOffsetX$: BehaviorSubject<string> = new BehaviorSubject(undefined);\r\n  public sidenavOpened$: BehaviorSubject<boolean> = new BehaviorSubject(false);\r\n  public minSearchTermLength = 2;\r\n  public hasExpansionPanel = false;\r\n  public hasGeolocateButton = true;\r\n  public hasHomeExtentButton = false;\r\n  public showMenuButton = true;\r\n  public showSearchBar = true;\r\n  public showOfflineButton = false;\r\n  public showWakeLockButton = false;\r\n  public showRotationButtonIfNoRotation = false;\r\n  public hasFeatureEmphasisOnSelection: Boolean = false;\r\n  public workspaceNotAvailableMessage: String = 'workspace.disabled.resolution';\r\n  public workspacePaginator: MatPaginator;\r\n  public workspaceEntitySortChange$: BehaviorSubject<boolean> = new BehaviorSubject(false);\r\n  public workspaceSwitchDisabled = false;\r\n  public paginatorOptions: EntityTablePaginatorOptions = {\r\n    pageSize: 50, // Number of items to display on a page.\r\n    pageSizeOptions: [1, 5, 10, 20, 50, 100, 500] // The set of provided page size options to display to the user.\r\n  };\r\n  public workspaceMenuClass = 'workspace-menu';\r\n\r\n  public fullExtent = this.storageService.get('fullExtent') as boolean;\r\n  private workspaceMaximize$$: Subscription[] = [];\r\n  readonly workspaceMaximize$: BehaviorSubject<boolean> = new BehaviorSubject(\r\n    this.storageService.get('workspaceMaximize') as boolean\r\n  );\r\n\r\n  public matDialogRef$ = new BehaviorSubject<MatDialogRef<any>>(undefined);\r\n  public searchBarTerm = '';\r\n  public onSettingsChange$ = new BehaviorSubject<boolean>(undefined);\r\n  public termDefinedInUrl = false;\r\n  public termSplitter = '|';\r\n  public termDefinedInUrlTriggered = false;\r\n  private addedLayers$$: Subscription[] = [];\r\n  public forceCoordsNA = false;\r\n\r\n  public contextMenuStore = new ActionStore([]);\r\n  private contextMenuCoord: [number, number];\r\n\r\n  private contextLoaded = false;\r\n\r\n  private context$$: Subscription;\r\n  private openSidenav$$: Subscription;\r\n  private sidenavMediaAndOrientation$$: Subscription;\r\n\r\n  public igoSearchPointerSummaryEnabled: boolean;\r\n  public igoReverseSearchCoordsFormatEnabled: boolean;\r\n\r\n  public toastPanelForExpansionOpened = true;\r\n  private activeWidget$$: Subscription;\r\n  public showToastPanelForExpansionToggle = false;\r\n  public selectedWorkspace$: BehaviorSubject<Workspace> = new BehaviorSubject(\r\n    undefined\r\n  );\r\n  private routeParams: Params;\r\n  public toastPanelHtmlDisplay = false;\r\n\r\n  public homeExtent: MapExtent;\r\n  public homeCenter: [number, number];\r\n  public homeZoom: number;\r\n  @ViewChild('mapBrowser', { read: ElementRef, static: true })\r\n  mapBrowser: ElementRef;\r\n  @ViewChild('searchBar', { read: ElementRef, static: true })\r\n  searchBar: ElementRef;\r\n\r\n  get map(): IgoMap {\r\n    return this.mapState.map;\r\n  }\r\n\r\n  get sidenavOpened(): boolean {\r\n    return this.sidenavOpened$.value;\r\n  }\r\n\r\n  set sidenavOpened(value: boolean) {\r\n    this.sidenavOpened$.next(value);\r\n  }\r\n\r\n  get auth(): AuthOptions {\r\n    return this.configService.getConfig('auth') || [];\r\n  }\r\n\r\n  get toastPanelOpened(): boolean {\r\n    return this._toastPanelOpened;\r\n  }\r\n  set toastPanelOpened(value: boolean) {\r\n    if (value !== !this._toastPanelOpened) {\r\n      return;\r\n    }\r\n    this._toastPanelOpened = value;\r\n    this.cdRef.detectChanges();\r\n  }\r\n  private _toastPanelOpened =\r\n    (this.storageService.get('toastOpened') as boolean) !== false;\r\n\r\n  isMobile(): boolean {\r\n    return this.mediaService.getMedia() === Media.Mobile;\r\n  }\r\n\r\n  isTablet(): boolean {\r\n    return this.mediaService.getMedia() === Media.Tablet;\r\n  }\r\n\r\n  isLandscape(): boolean {\r\n    return this.mediaService.getOrientation() === MediaOrientation.Landscape;\r\n  }\r\n\r\n  isPortrait(): boolean {\r\n    return this.mediaService.getOrientation() === MediaOrientation.Portrait;\r\n  }\r\n\r\n  get backdropShown(): boolean {\r\n    return (\r\n      (this.isMobile() || (this.isTablet() && this.isPortrait())) &&\r\n      this.sidenavOpened\r\n    );\r\n  }\r\n\r\n  get expansionPanelExpanded(): boolean {\r\n    return this.workspaceState.workspacePanelExpanded;\r\n  }\r\n  set expansionPanelExpanded(value: boolean) {\r\n    this.workspaceState.workspacePanelExpanded = value;\r\n    if (value === true) {\r\n      this.map.viewController.setPadding({bottom: 280});\r\n    } else {\r\n      this.map.viewController.setPadding({bottom: 0});\r\n    }\r\n  }\r\n\r\n  get contextUri(): string {\r\n    return this.contextState.context$?.getValue() ? this.contextState.context$.getValue().uri : undefined;\r\n  }\r\n\r\n  get toastPanelShown(): boolean {\r\n    return true;\r\n  }\r\n\r\n  get expansionPanelBackdropShown(): boolean {\r\n    return this.expansionPanelExpanded && this.toastPanelForExpansionOpened;\r\n  }\r\n\r\n  get actionbarMode(): ActionbarMode {\r\n    return ActionbarMode.Overlay;\r\n  }\r\n\r\n  get actionbarWithTitle(): boolean {\r\n    return this.actionbarMode === ActionbarMode.Overlay;\r\n  }\r\n\r\n  get searchStore(): EntityStore<SearchResult> {\r\n    return this.searchState.store;\r\n  }\r\n\r\n  get searchResultsGeometryEnabled(): boolean {\r\n    return this.searchState.searchResultsGeometryEnabled$.value;\r\n  }\r\n\r\n  get queryStore(): EntityStore<SearchResult> {\r\n    return this.queryState.store;\r\n  }\r\n\r\n  get toolbox(): Toolbox {\r\n    return this.toolState.toolbox;\r\n  }\r\n\r\n  get toastPanelContent(): string {\r\n    let content;\r\n    if (this.workspace !== undefined && this.workspace.hasWidget) {\r\n      content = 'workspace';\r\n    } /*else if (this.searchResult !== undefined) {\r\n      content = this.searchResult.meta.dataType.toLowerCase();\r\n    }*/\r\n    return content;\r\n  }\r\n\r\n  // get toastPanelTitle(): string {\r\n  //   let title;\r\n  //   if (\r\n  //     this.toastPanelContent !== 'workspace' &&\r\n  //     this.searchResult !== undefined\r\n  //   ) {\r\n  //     title = getEntityTitle(this.searchResult);\r\n  //   }\r\n  //   return title;\r\n  // }\r\n\r\n  get workspaceStore(): WorkspaceStore {\r\n    return this.workspaceState.store;\r\n  }\r\n\r\n  get workspace(): Workspace {\r\n    return this.workspaceState.workspace$.value;\r\n  }\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    public workspaceState: WorkspaceState,\r\n    public authService: AuthService,\r\n    public mediaService: MediaService,\r\n    public layerService: LayerService,\r\n    public dataSourceService: DataSourceService,\r\n    public cdRef: ChangeDetectorRef,\r\n    public capabilitiesService: CapabilitiesService,\r\n    private contextState: ContextState,\r\n    private mapState: MapState,\r\n    private searchState: SearchState,\r\n    private queryState: QueryState,\r\n    private toolState: ToolState,\r\n    private searchSourceService: SearchSourceService,\r\n    private configService: ConfigService,\r\n    private importService: ImportService,\r\n    private http: HttpClient,\r\n    private languageService: LanguageService,\r\n    private messageService: MessageService,\r\n    private welcomeWindowService: WelcomeWindowService,\r\n    public dialogWindow: MatDialog,\r\n    private queryService: QueryService,\r\n    private storageService: StorageService,\r\n    private editionWorkspaceService: EditionWorkspaceService,\r\n    private directionState: DirectionState,\r\n    private configFileToGeoDBService: ConfigFileToGeoDBService\r\n  ) {\r\n    this.hasExpansionPanel = this.configService.getConfig('hasExpansionPanel');\r\n    this.hasHomeExtentButton =\r\n      this.configService.getConfig('homeExtentButton') === undefined ? false : true;\r\n    this.hasGeolocateButton = this.configService.getConfig('hasGeolocateButton') === undefined ? true :\r\n      this.configService.getConfig('hasGeolocateButton');\r\n    this.showRotationButtonIfNoRotation = this.configService.getConfig('showRotationButtonIfNoRotation') === undefined ? false :\r\n      this.configService.getConfig('showRotationButtonIfNoRotation');\r\n    this.showMenuButton = this.configService.getConfig('showMenuButton') === undefined ? true :\r\n      this.configService.getConfig('showMenuButton');\r\n    this.showSearchBar = this.configService.getConfig('searchBar.showSearchBar') === undefined ? true :\r\n      this.configService.getConfig('searchBar.showSearchBar');\r\n    this.showOfflineButton = this.configService.getConfig('offlineButton') === undefined ? false :\r\n      this.configService.getConfig('offlineButton');\r\n    this.showWakeLockButton = this.configService.getConfig('wakeLockApiButton') === undefined ? false :\r\n      this.configService.getConfig('wakeLockApiButton');\r\n\r\n    this.forceCoordsNA = this.configService.getConfig('app.forceCoordsNA');\r\n    this.hasFeatureEmphasisOnSelection = this.configService.getConfig('hasFeatureEmphasisOnSelection');\r\n\r\n\r\n    this.igoSearchPointerSummaryEnabled = this.configService.getConfig('hasSearchPointerSummary');\r\n    if (this.igoSearchPointerSummaryEnabled === undefined) {\r\n      this.igoSearchPointerSummaryEnabled = this.storageService.get('searchPointerSummaryEnabled') as boolean || false;\r\n    }\r\n\r\n    this.igoReverseSearchCoordsFormatEnabled = this.storageService.get('reverseSearchCoordsFormatEnabled') as boolean || false;\r\n  }\r\n\r\n  ngOnInit() {\r\n    window['IGO'] = this;\r\n    this.searchState.searchTermSplitter$.next(this.termSplitter);\r\n\r\n    this.initWelcomeWindow();\r\n\r\n    this.route.queryParams.subscribe((params) => {\r\n      this.readLanguageParam(params);\r\n    });\r\n\r\n    this.authService.authenticate$.subscribe((authenticated) => {\r\n      this.contextLoaded = false;\r\n    });\r\n\r\n    this.context$$ = this.contextState.context$.subscribe(\r\n      (context: DetailedContext) => this.onChangeContext(context)\r\n    );\r\n\r\n    const contextActions = [{\r\n      id: 'coordinates',\r\n      title: 'coordinates',\r\n      handler: () => this.searchCoordinate(this.contextMenuCoord)\r\n    },\r\n    {\r\n      id: 'googleMaps',\r\n      title: 'googleMap',\r\n      handler: () => this.openGoogleMaps(this.contextMenuCoord)\r\n    },\r\n    {\r\n      id: 'googleStreetView',\r\n      title: 'googleStreetView',\r\n      handler: () => this.openGoogleStreetView(this.contextMenuCoord)\r\n    }];\r\n\r\n    this.contextMenuStore.load(contextActions);\r\n\r\n    this.queryStore.count$\r\n      .pipe(pairwise())\r\n      .subscribe(([prevCnt, currentCnt]) => {\r\n        this.map.viewController.padding[2] = currentCnt ? 280 : 0;\r\n        // on mobile. Close the toast if workspace is opened, on new query\r\n        if (\r\n          prevCnt === 0 &&\r\n          currentCnt !== prevCnt &&\r\n          this.isMobile() &&\r\n          this.hasExpansionPanel &&\r\n          this.expansionPanelExpanded &&\r\n          this.toastPanelOpened\r\n        ) {\r\n          this.toastPanelOpened = false;\r\n        }\r\n      });\r\n    this.map.ol.once('rendercomplete', () => {\r\n      this.readQueryParams();\r\n      if (this.configService.getConfig('geolocate.activateDefault') !== undefined) {\r\n        this.map.geolocationController.tracking = this.configService.getConfig('geolocate.activateDefault');\r\n      }\r\n    });\r\n\r\n    this.onSettingsChange$.subscribe(() => {\r\n      this.searchState.setSearchSettingsChange();\r\n    });\r\n\r\n    this.searchState.selectedResult$.subscribe((result) => {\r\n      if (result && this.isMobile()) {\r\n        this.closeSidenav();\r\n      }\r\n    });\r\n\r\n    this.workspaceState.workspaceEnabled$.next(this.hasExpansionPanel);\r\n    this.workspaceState.store.empty$.subscribe((workspaceEmpty) => {\r\n      if (!this.hasExpansionPanel) {\r\n        return;\r\n      }\r\n      this.workspaceState.workspaceEnabled$.next(workspaceEmpty ? false : true);\r\n      if (workspaceEmpty) {\r\n        this.expansionPanelExpanded = false;\r\n      }\r\n      this.updateMapBrowserClass();\r\n    });\r\n\r\n    this.workspaceMaximize$$.push(this.workspaceState.workspaceMaximize$.subscribe((workspaceMaximize) => {\r\n      this.workspaceMaximize$.next(workspaceMaximize);\r\n      this.updateMapBrowserClass();\r\n    }));\r\n    this.workspaceMaximize$$.push(\r\n      this.workspaceMaximize$.subscribe(() => this.updateMapBrowserClass())\r\n    );\r\n\r\n    this.workspaceState.workspace$.subscribe((activeWks: WfsWorkspace | FeatureWorkspace | EditionWorkspace) => {\r\n      if (activeWks) {\r\n        this.selectedWorkspace$.next(activeWks);\r\n        this.expansionPanelExpanded = true;\r\n\r\n        if (activeWks.layer.options.workspace?.pageSize && activeWks.layer.options.workspace?.pageSizeOptions) {\r\n          this.paginatorOptions = {\r\n            pageSize: activeWks.layer.options.workspace?.pageSize,\r\n            pageSizeOptions: activeWks.layer.options.workspace?.pageSizeOptions\r\n          };\r\n        } else {\r\n          this.paginatorOptions = {\r\n            pageSize: 50,\r\n            pageSizeOptions: [1, 5, 10, 20, 50, 100, 500]\r\n          };\r\n        }\r\n      } else {\r\n        this.expansionPanelExpanded = false;\r\n      }\r\n    });\r\n\r\n    this.activeWidget$$ = this.workspaceState.activeWorkspaceWidget$.subscribe(\r\n      (widget: Widget) => {\r\n        if (widget !== undefined) {\r\n          this.openToastPanelForExpansion();\r\n          this.showToastPanelForExpansionToggle = true;\r\n        } else {\r\n          this.closeToastPanelForExpansion();\r\n          this.showToastPanelForExpansionToggle = false;\r\n        }\r\n      }\r\n    );\r\n\r\n    this.openSidenav$$ = this.toolState.openSidenav$.subscribe(\r\n      (openSidenav: boolean) => {\r\n        if (openSidenav) {\r\n          this.openSidenav();\r\n          this.toolState.openSidenav$.next(false);\r\n        }\r\n      }\r\n    );\r\n\r\n    this.sidenavMediaAndOrientation$$ =\r\n      combineLatest([\r\n        this.sidenavOpened$,\r\n        this.mediaService.media$,\r\n        this.mediaService.orientation$]\r\n      ).pipe(\r\n        debounceTime(50)\r\n      ).subscribe((sidenavMediaAndOrientation: [boolean, string, string]) => {\r\n        this.computeToastPanelOffsetX();\r\n      });\r\n\r\n    if (this.configService.getConfig('importExport')) {\r\n      const configFileToGeoDBService = this.configService.getConfig('importExport.configFileToGeoDBService');\r\n      if (configFileToGeoDBService) {\r\n        this.configFileToGeoDBService.load(configFileToGeoDBService);\r\n      }\r\n    }\r\n  }\r\n\r\n  setToastPanelHtmlDisplay(value) {\r\n    this.toastPanelHtmlDisplay = value;\r\n    this.computeToastPanelOffsetX();\r\n  }\r\n\r\n  computeToastPanelOffsetX() {\r\n    if (this.isMobile() || !this.isLandscape()) {\r\n      Promise.resolve().then(() => this.toastPanelOffsetX$.next(undefined));\r\n    } else {\r\n      Promise.resolve().then(() => this.toastPanelOffsetX$.next(this.getToastPanelExtent()));\r\n    }\r\n  }\r\n\r\n  workspaceVisibility(): boolean {\r\n    const wks = (this.selectedWorkspace$.value as WfsWorkspace | FeatureWorkspace | EditionWorkspace);\r\n    if (wks.inResolutionRange$.value) {\r\n      if (wks.entityStore.empty$.value && !wks.layer.visible) {\r\n        this.workspaceNotAvailableMessage = 'workspace.disabled.visible';\r\n      } else {\r\n        this.workspaceNotAvailableMessage = '';\r\n      }\r\n    } else {\r\n      this.workspaceNotAvailableMessage = 'workspace.disabled.resolution';\r\n    }\r\n    return wks.inResolutionRange$.value;\r\n  }\r\n\r\n  isEditionWorkspace(workspace) {\r\n    if (workspace instanceof EditionWorkspace) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  addFeature(workspace: EditionWorkspace) {\r\n    let feature = {\r\n      type: \"Feature\",\r\n      properties: {}\r\n    };\r\n    feature.properties = this.createFeatureProperties(workspace.layer);\r\n    this.workspaceState.rowsInMapExtentCheckCondition$.next(false);\r\n    workspace.editFeature(feature, workspace);\r\n  }\r\n\r\n  createFeatureProperties(layer: ImageLayer | VectorLayer) {\r\n    let properties = {};\r\n    layer.options.sourceOptions.sourceFields.forEach(field => {\r\n      if (!field.primary && field.visible) {\r\n        properties[field.name] = '';\r\n      }\r\n    });\r\n    return properties;\r\n  }\r\n\r\n  paginatorChange(matPaginator: MatPaginator) {\r\n    this.workspacePaginator = matPaginator;\r\n  }\r\n\r\n  entitySortChange() {\r\n    this.workspaceEntitySortChange$.next(true);\r\n  }\r\n\r\n  entitySelectChange(result: { added: Feature[] }) {\r\n    const baseQuerySearchSource = this.getQuerySearchSource();\r\n    const querySearchSourceArray: QuerySearchSource[] = [];\r\n\r\n    if (this.selectedWorkspace$.value instanceof WfsWorkspace || this.selectedWorkspace$.value instanceof FeatureWorkspace) {\r\n      if (!this.selectedWorkspace$.value.getLayerWksOptionTabQuery()) {return;}\r\n    }\r\n    if (result && result.added) {\r\n      const results = result.added.map((res) => {\r\n        if (\r\n          res &&\r\n          res.ol &&\r\n          res.ol.getProperties()._featureStore.layer &&\r\n          res.ol.getProperties()._featureStore.layer.visible\r\n        ) {\r\n          const ol = res.ol as olFeature<OlGeometry>;\r\n          const featureStoreLayer = res.ol.getProperties()._featureStore.layer;\r\n          const feature = featureFromOl(\r\n            ol,\r\n            featureStoreLayer.map.projection,\r\n            featureStoreLayer.ol\r\n          );\r\n\r\n          feature.meta.alias = this.queryService.getAllowedFieldsAndAlias(\r\n            featureStoreLayer\r\n          );\r\n          feature.meta.title =\r\n            this.queryService.getQueryTitle(feature, featureStoreLayer) ||\r\n            feature.meta.title;\r\n          let querySearchSource = querySearchSourceArray.find(\r\n            (s) => s.title === feature.meta.sourceTitle\r\n          );\r\n          if (!querySearchSource) {\r\n            querySearchSource = new QuerySearchSource({\r\n              title: feature.meta.sourceTitle\r\n            });\r\n            querySearchSourceArray.push(querySearchSource);\r\n          }\r\n          return featureToSearchResult(feature, querySearchSource);\r\n        }\r\n      });\r\n\r\n      const research = {\r\n        request: of(results),\r\n        reverse: false,\r\n        source: baseQuerySearchSource\r\n      };\r\n      research.request.subscribe((queryResults: SearchResult<Feature>[]) => {\r\n        this.queryStore.load(queryResults);\r\n      });\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.context$$.unsubscribe();\r\n    this.activeWidget$$.unsubscribe();\r\n    this.openSidenav$$.unsubscribe();\r\n    this.workspaceMaximize$$.map(f => f.unsubscribe());\r\n    this.sidenavMediaAndOrientation$$.unsubscribe();\r\n  }\r\n\r\n  /**\r\n   * Cancel ongoing add layer, if any\r\n   */\r\n  private cancelOngoingAddLayer() {\r\n    this.addedLayers$$.forEach((sub: Subscription) => sub.unsubscribe());\r\n    this.addedLayers$$ = [];\r\n  }\r\n\r\n  onBackdropClick() {\r\n    this.closeSidenav();\r\n  }\r\n\r\n  onToggleSidenavClick() {\r\n    this.toggleSidenav();\r\n  }\r\n\r\n  onDeactivateWorkspaceWidget() {\r\n    this.closeToastPanelForExpansion();\r\n  }\r\n\r\n  closeToastPanelForExpansion() {\r\n    this.toastPanelForExpansionOpened = false;\r\n  }\r\n\r\n  openToastPanelForExpansion() {\r\n    this.toastPanelForExpansionOpened = true;\r\n  }\r\n\r\n  onMapQuery(event: { features: Feature[]; event: MapBrowserEvent<any> }) {\r\n    const baseQuerySearchSource = this.getQuerySearchSource();\r\n    const querySearchSourceArray: QuerySearchSource[] = [];\r\n    const results = event.features.map((feature: Feature) => {\r\n      let querySearchSource = querySearchSourceArray.find(\r\n        (s) => s.title === feature.meta.sourceTitle\r\n      );\r\n      if (this.getFeatureIsSameActiveWks(feature)) {\r\n        if (this.getWksActiveOpenInResolution() && !(this.workspace as WfsWorkspace).getLayerWksOptionMapQuery()) {\r\n          return;\r\n        }\r\n      }\r\n      if (!querySearchSource) {\r\n        querySearchSource = new QuerySearchSource({\r\n          title: feature.meta.sourceTitle\r\n        });\r\n        querySearchSourceArray.push(querySearchSource);\r\n      }\r\n      return featureToSearchResult(feature, querySearchSource);\r\n    });\r\n    const filteredResults = results.filter(x => x !== undefined);\r\n    const research = {\r\n      request: of(filteredResults),\r\n      reverse: false,\r\n      source: baseQuerySearchSource\r\n    };\r\n    research.request.subscribe((queryResults: SearchResult<Feature>[]) => {\r\n      this.queryStore.load(queryResults);\r\n    });\r\n  }\r\n\r\n  onSearchTermChange(term?: string) {\r\n    if (this.routeParams?.search && term !== this.routeParams.search) {\r\n      this.searchState.deactivateCustomFilterTermStrategy();\r\n    }\r\n    this.searchBarTerm = term;\r\n    this.searchState.setSearchTerm(term);\r\n    const termWithoutHashtag = term.replace(/(#[^\\s]*)/g, '').trim();\r\n    if (termWithoutHashtag.length < 2) {\r\n      this.onClearSearch();\r\n      return;\r\n    }\r\n    this.onBeforeSearch();\r\n  }\r\n\r\n  onSearch(event: { research: Research; results: SearchResult[] }) {\r\n    const results = event.results;\r\n\r\n    const isReverseSearch = !sourceCanSearch(event.research.source);\r\n\r\n    let enabledSources;\r\n    if (isReverseSearch) {\r\n      enabledSources = this.searchSourceService\r\n        .getEnabledSources()\r\n        .filter(sourceCanReverseSearch);\r\n    } else {\r\n      enabledSources = this.searchSourceService\r\n        .getEnabledSources()\r\n        .filter(sourceCanSearch);\r\n    }\r\n\r\n    const newResults = this.searchStore.entities$.value\r\n      .filter(\r\n        (result: SearchResult) =>\r\n          result.source !== event.research.source &&\r\n          enabledSources.includes(result.source)\r\n      )\r\n      .concat(results);\r\n    this.searchStore.updateMany(newResults);\r\n  }\r\n\r\n  onSearchResultsGeometryStatusChange(value) {\r\n    this.searchState.setSearchResultsGeometryStatus(value);\r\n  }\r\n\r\n  onReverseCoordsFormatStatusChange(value) {\r\n    this.storageService.set('reverseSearchCoordsFormatEnabled', value);\r\n    this.igoReverseSearchCoordsFormatEnabled = value;\r\n  }\r\n\r\n  onSearchSettingsChange() {\r\n    this.onSettingsChange$.next(true);\r\n  }\r\n\r\n  private closeSidenav() {\r\n    this.sidenavOpened = false;\r\n    this.map.viewController.padding[3] = 0;\r\n  }\r\n\r\n  private openSidenav() {\r\n    this.sidenavOpened = true;\r\n    this.map.viewController.padding[3] = this.isMobile() ? 0 : 400;\r\n  }\r\n\r\n  private toggleSidenav() {\r\n    this.sidenavOpened ? this.closeSidenav() : this.openSidenav();\r\n    this.computeToastPanelOffsetX();\r\n  }\r\n\r\n  public toolChanged(tool: Tool) {\r\n    if (tool && tool.name === 'searchResults' && this.searchBar) {\r\n      this.searchBar.nativeElement.getElementsByTagName('input')[0].focus();\r\n    }\r\n  }\r\n\r\n  private computeHomeExtentValues(context: DetailedContext) {\r\n    if (context?.map?.view?.homeExtent) {\r\n      this.homeExtent = context.map.view.homeExtent.extent;\r\n      this.homeCenter = context.map.view.homeExtent.center;\r\n      this.homeZoom = context.map.view.homeExtent.zoom;\r\n    } else {\r\n      this.homeExtent = undefined;\r\n      this.homeCenter = undefined;\r\n      this.homeZoom = undefined;\r\n    }\r\n\r\n  }\r\n\r\n  private onChangeContext(context: DetailedContext) {\r\n    this.cancelOngoingAddLayer();\r\n    if (context === undefined) {\r\n      return;\r\n    }\r\n    if (this.workspace && !this.workspace.entityStore.empty) {\r\n      this.workspace.entityStore.clear();\r\n    }\r\n    if (!this.queryState.store.empty) {\r\n      this.queryState.store.softClear();\r\n    }\r\n\r\n    this.computeHomeExtentValues(context);\r\n\r\n    this.route.queryParams.pipe(debounceTime(250)).subscribe((qParams) => {\r\n      if (!qParams['context'] || qParams['context'] === context.uri) {\r\n        this.readLayersQueryParams(qParams);\r\n      }\r\n    });\r\n\r\n    if (this.contextLoaded) {\r\n      const contextManager = this.toolbox.getTool('contextManager');\r\n      const contextManagerOptions = contextManager\r\n        ? contextManager.options\r\n        : {};\r\n      let toolToOpen = contextManagerOptions.toolToOpenOnContextChange;\r\n\r\n      if (!toolToOpen) {\r\n        const toolOrderToOpen = ['mapTools', 'map', 'mapDetails', 'mapLegend'];\r\n        for (const toolName of toolOrderToOpen) {\r\n          if (this.toolbox.getTool(toolName)) {\r\n            toolToOpen = toolName;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n      if (toolToOpen) {\r\n        this.toolbox.activateTool(toolToOpen);\r\n      }\r\n    }\r\n\r\n    this.contextLoaded = true;\r\n  }\r\n\r\n  private onBeforeSearch() {\r\n    if (\r\n      !this.toolbox.activeTool$.value ||\r\n      this.toolbox.activeTool$.value.name !== 'searchResults'\r\n    ) {\r\n      this.toolbox.activateTool('searchResults');\r\n    }\r\n    this.openSidenav();\r\n  }\r\n\r\n  toastOpenedChange(opened: boolean) {\r\n    this.map.viewController.padding[2] = opened ? 280 : 0;\r\n    this.handleExpansionAndToastOnMobile();\r\n    this.toastPanelOpened = opened;\r\n  }\r\n\r\n  private handleExpansionAndToastOnMobile() {\r\n    if (\r\n      this.isMobile() &&\r\n      this.hasExpansionPanel &&\r\n      this.expansionPanelExpanded &&\r\n      this.toastPanelOpened\r\n    ) {\r\n      this.expansionPanelExpanded = false;\r\n    }\r\n  }\r\n\r\n  public onClearSearch() {\r\n    this.map.searchResultsOverlay.clear();\r\n    this.searchStore.clear();\r\n    this.searchState.setSelectedResult(undefined);\r\n    this.searchState.deactivateCustomFilterTermStrategy();\r\n  }\r\n\r\n  private getQuerySearchSource(): SearchSource {\r\n    return this.searchSourceService\r\n      .getSources()\r\n      .find(\r\n        (searchSource: SearchSource) =>\r\n          searchSource instanceof QuerySearchSource\r\n      );\r\n  }\r\n\r\n  onContextMenuOpen(event: { x: number; y: number }) {\r\n    this.contextMenuCoord = this.getClickCoordinate(event) as [number, number];\r\n  }\r\n\r\n  private getClickCoordinate(event: { x: number; y: number }) {\r\n    const contextmenuPoint = event;\r\n    const boundingMapBrowser = this.mapBrowser.nativeElement.getBoundingClientRect();\r\n    contextmenuPoint.y =\r\n      contextmenuPoint.y -\r\n      boundingMapBrowser.top +\r\n      (window.scrollY || window.pageYOffset);\r\n    contextmenuPoint.x =\r\n      contextmenuPoint.x -\r\n      boundingMapBrowser.left +\r\n      (window.scrollX || window.pageXOffset);\r\n    const pixel = [contextmenuPoint.x, contextmenuPoint.y];\r\n\r\n    const coord = this.map.ol.getCoordinateFromPixel(pixel);\r\n    const proj = this.map.projection;\r\n    return olProj.transform(coord, proj, 'EPSG:4326');\r\n  }\r\n\r\n  private openGoogleMaps(coord: [number, number]) {\r\n    window.open(GoogleLinks.getGoogleMapsCoordLink(coord[0], coord[1]));\r\n  }\r\n\r\n  private openGoogleStreetView(coord: [number, number]) {\r\n    window.open(GoogleLinks.getGoogleStreetViewLink(coord[0], coord[1]));\r\n  }\r\n\r\n  searchCoordinate(coord: [number, number]) {\r\n    this.searchBarTerm = (!this.igoReverseSearchCoordsFormatEnabled) ?\r\n    coord.map((c) => c.toFixed(6)).join(', ') : coord.reverse().map((c) => c.toFixed(6)).join(', ');\r\n  }\r\n\r\n  updateMapBrowserClass() {\r\n    const header = this.queryState.store.entities$.value.length > 0;\r\n    if (this.hasExpansionPanel && this.workspaceState.workspaceEnabled$.value) {\r\n      this.mapBrowser.nativeElement.classList.add('has-expansion-panel');\r\n    } else {\r\n      this.mapBrowser.nativeElement.classList.remove('has-expansion-panel');\r\n    }\r\n\r\n    if (this.hasExpansionPanel && this.expansionPanelExpanded) {\r\n      if (this.workspaceMaximize$.value) {\r\n        this.mapBrowser.nativeElement.classList.add('expansion-offset-maximized');\r\n        this.mapBrowser.nativeElement.classList.remove('expansion-offset');\r\n      } else {\r\n        this.mapBrowser.nativeElement.classList.add('expansion-offset');\r\n        this.mapBrowser.nativeElement.classList.remove('expansion-offset-maximized');\r\n      }\r\n    } else {\r\n      if (this.workspaceMaximize$.value) {\r\n        this.mapBrowser.nativeElement.classList.remove('expansion-offset-maximized');\r\n      } else {\r\n        this.mapBrowser.nativeElement.classList.remove('expansion-offset');\r\n      }\r\n    }\r\n\r\n    if (this.sidenavOpened) {\r\n      this.mapBrowser.nativeElement.classList.add('sidenav-offset');\r\n    } else {\r\n      this.mapBrowser.nativeElement.classList.remove('sidenav-offset');\r\n    }\r\n\r\n    if (this.sidenavOpened && !this.isMobile()) {\r\n      this.mapBrowser.nativeElement.classList.add('sidenav-offset-baselayers');\r\n    } else {\r\n      this.mapBrowser.nativeElement.classList.remove(\r\n        'sidenav-offset-baselayers'\r\n      );\r\n    }\r\n\r\n    if (!this.toastPanelOpened && header && !this.expansionPanelExpanded) {\r\n      this.mapBrowser.nativeElement.classList.add('toast-offset-scale-line');\r\n    } else {\r\n      this.mapBrowser.nativeElement.classList.remove('toast-offset-scale-line');\r\n    }\r\n\r\n    if (\r\n      !this.toastPanelOpened &&\r\n      header &&\r\n      (this.isMobile() || this.isTablet() || this.sidenavOpened) &&\r\n      !this.expansionPanelExpanded\r\n    ) {\r\n      this.mapBrowser.nativeElement.classList.add('toast-offset-attribution');\r\n    } else {\r\n      this.mapBrowser.nativeElement.classList.remove(\r\n        'toast-offset-attribution'\r\n      );\r\n    }\r\n  }\r\n\r\n  getToastPanelExtent() {\r\n    if (!this.sidenavOpened) {\r\n      if (this.toastPanelHtmlDisplay && this.mediaService.isDesktop()) {\r\n        return 'htmlDisplay';\r\n      }\r\n      if (this.fullExtent) {\r\n        return 'fullStandard';\r\n      } else {\r\n        return 'standard';\r\n      }\r\n    } else if (this.sidenavOpened) {\r\n      if (this.toastPanelHtmlDisplay && this.mediaService.isDesktop()) {\r\n        return 'htmlDisplayOffsetX';\r\n      }\r\n      if (this.fullExtent) {\r\n        return 'fullOffsetX';\r\n      } else {\r\n        return 'standardOffsetX';\r\n      }\r\n    }\r\n  }\r\n\r\n  onPointerSummaryStatusChange(value) {\r\n    this.storageService.set('searchPointerSummaryEnabled', value);\r\n    this.igoSearchPointerSummaryEnabled = value;\r\n  }\r\n\r\n  getExpansionPanelStatus() {\r\n    if (this.sidenavOpened === false) {\r\n      if (this.expansionPanelExpanded === true) {\r\n        return 'full';\r\n      }\r\n      return 'notTriggered';\r\n    }\r\n    if (this.sidenavOpened === true && this.isMobile() === false) {\r\n      if (this.expansionPanelExpanded === true) {\r\n        return 'reduced';\r\n      }\r\n      return 'reducedNotTriggered';\r\n    }\r\n    if (this.sidenavOpened === true && this.isMobile() === true) {\r\n      if (this.expansionPanelExpanded === true) {\r\n        return 'mobile';\r\n      } else {\r\n        return 'notVisible';\r\n      }\r\n    }\r\n  }\r\n\r\n  getToastPanelOffsetY() {\r\n    let status = 'noExpansion';\r\n    if (this.expansionPanelExpanded) {\r\n      if (this.workspaceMaximize$.value) {\r\n        if (this.toastPanelOpened) {\r\n          status = 'expansionMaximizedAndToastOpened';\r\n        } else {\r\n          status = 'expansionMaximizedAndToastClosed';\r\n        }\r\n      } else {\r\n        if (this.toastPanelOpened) {\r\n          status = 'expansionAndToastOpened';\r\n        } else {\r\n          status = 'expansionAndToastClosed';\r\n        }\r\n      }\r\n    } else {\r\n      status = 'noExpansion';\r\n    }\r\n    return status;\r\n  }\r\n\r\n  getToastPanelStatus() {\r\n    if (this.isMobile() === true && this.toastPanelOpened === false) {\r\n      if (this.sidenavOpened === false) {\r\n        if (this.expansionPanelExpanded === false) {\r\n          if (this.queryState.store.entities$.value.length > 0) {\r\n            return 'low';\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  getControlsOffsetY() {\r\n    return this.expansionPanelExpanded ?\r\n      this.workspaceMaximize$.value ? 'firstRowFromBottom-expanded-maximized' : 'firstRowFromBottom-expanded' :\r\n      'firstRowFromBottom';\r\n  }\r\n\r\n  getBaselayersSwitcherStatus() {\r\n    let status;\r\n    if (this.isMobile()) {\r\n\r\n      if (this.workspaceState.workspaceEnabled$.value) {\r\n        if (this.expansionPanelExpanded === false) {\r\n          if (this.queryState.store.entities$.value.length === 0) {\r\n            status = 'secondRowFromBottom';\r\n          } else {\r\n            status = 'thirdRowFromBottom';\r\n          }\r\n        } else {\r\n          if (this.queryState.store.entities$.value.length === 0) {\r\n            status = 'firstRowFromBottom-expanded';\r\n          } else {\r\n            status = 'secondRowFromBottom-expanded';\r\n          }\r\n        }\r\n\r\n      } else {\r\n        if (this.queryState.store.entities$.value.length === 0) {\r\n          status = 'firstRowFromBottom';\r\n        } else {\r\n          status = 'secondRowFromBottom';\r\n        }\r\n      }\r\n    } else {\r\n      if (this.workspaceState.workspaceEnabled$.value) {\r\n        if (this.expansionPanelExpanded) {\r\n          if (this.workspaceMaximize$.value) {\r\n            status = 'firstRowFromBottom-expanded-maximized';\r\n          } else {\r\n            status = 'firstRowFromBottom-expanded';\r\n          }\r\n        } else {\r\n          status = 'secondRowFromBottom';\r\n        }\r\n      } else {\r\n        status = 'firstRowFromBottom';\r\n      }\r\n    }\r\n    return status;\r\n  }\r\n\r\n  private readQueryParams() {\r\n    this.route.queryParams.subscribe((params) => {\r\n      this.routeParams = params;\r\n      this.readToolParams();\r\n      this.readSearchParams();\r\n      this.readFocusFirst();\r\n      this.computeZoomToExtent();\r\n    });\r\n  }\r\n\r\n  private readLanguageParam(params) {\r\n    if (params['lang']) {\r\n      this.authService.languageForce = true;\r\n      this.languageService.setLanguage(params['lang']);\r\n    }\r\n  }\r\n\r\n  private computeZoomToExtent() {\r\n    if (this.routeParams['zoomExtent']) {\r\n      const extentParams = this.routeParams['zoomExtent'].split(',');\r\n      const olExtent = olProj.transformExtent(\r\n        extentParams,\r\n        'EPSG:4326',\r\n        this.map.projection\r\n      );\r\n      this.map.viewController.zoomToExtent(olExtent as [number, number, number, number]);\r\n    }\r\n  }\r\n\r\n  private computeFocusFirst() {\r\n    setTimeout(() => {\r\n      const resultItem: any = document\r\n        .getElementsByTagName('igo-search-results-item')\r\n        .item(0);\r\n      if (resultItem) {\r\n        resultItem.click();\r\n      }\r\n    }, 1);\r\n  }\r\n\r\n  private readFocusFirst() {\r\n    if (this.routeParams['sf'] === '1' && this.termDefinedInUrl) {\r\n      const entities$$ = this.searchStore.stateView.all$()\r\n        .pipe(\r\n          skipWhile((entities) => entities.length === 0),\r\n          debounceTime(1000),\r\n          take(1)\r\n        )\r\n        .subscribe((entities) => {\r\n          entities$$.unsubscribe();\r\n          if (entities.length && !this.termDefinedInUrlTriggered) {\r\n            this.computeFocusFirst();\r\n            this.termDefinedInUrlTriggered = true;\r\n          }\r\n        });\r\n    }\r\n  }\r\n\r\n  private readSearchParams() {\r\n    if (this.routeParams['search']) {\r\n      this.termDefinedInUrl = true;\r\n      if (this.routeParams['exactMatch'] === '1') {\r\n        this.searchState.activateCustomFilterTermStrategy();\r\n      }\r\n      if (this.routeParams['search'] && !this.routeParams['zoom'] && this.routeParams['sf'] !== '1') {\r\n        const entities$$ = this.searchStore.stateView.all$()\r\n          .pipe(\r\n            skipWhile((entities) => entities.length === 0),\r\n            debounceTime(500),\r\n            take(1)\r\n          )\r\n          .subscribe((entities) => {\r\n            entities$$.unsubscribe();\r\n            const searchResultsOlFeatures = entities\r\n              .filter(e => e.entity.meta.dataType === FEATURE)\r\n              .map((entity: EntityRecord<SearchResult>) =>\r\n                new olFormatGeoJSON().readFeature(entity.entity.data, {\r\n                  dataProjection: entity.entity.data.projection,\r\n                  featureProjection: this.map.projection\r\n                })\r\n              );\r\n            const totalExtent = computeOlFeaturesExtent(this.map, searchResultsOlFeatures);\r\n            this.map.viewController.zoomToExtent(totalExtent);\r\n          });\r\n      }\r\n      this.searchBarTerm = this.routeParams['search'];\r\n    }\r\n    if (this.routeParams['searchGeom'] === '1') {\r\n      this.searchState.searchResultsGeometryEnabled$.next(true);\r\n    }\r\n  }\r\n\r\n  private readToolParams() {\r\n    if (this.routeParams['tool']) {\r\n      this.matDialogRef$.pipe(\r\n        skipWhile(r => r !== undefined),\r\n        first()\r\n      ).subscribe(matDialogOpened => {\r\n        if (!matDialogOpened) {\r\n          this.toolbox.activateTool(this.routeParams['tool']);\r\n        }\r\n      });\r\n    }\r\n\r\n    if (this.routeParams['sidenav'] === '1') {\r\n      setTimeout(() => {\r\n        this.openSidenav();\r\n      }, 250);\r\n    }\r\n\r\n    if (this.routeParams['routing']) {\r\n      let routingCoordLoaded = false;\r\n      const stopCoords = this.routeParams['routing'].split(';');\r\n      const routingOptions = this.routeParams['routingOptions'];\r\n      let resultSelection: number;\r\n      if (routingOptions) {\r\n        resultSelection = parseInt(routingOptions.split('result:')[1], 10);\r\n      }\r\n      this.directionState.stopsStore.storeInitialized$\r\n        .pipe(skipWhile(init => !init), first())\r\n        .subscribe((init: boolean) => {\r\n          if (init && !routingCoordLoaded) {\r\n            routingCoordLoaded = true;\r\n            stopCoords.map((coord, i) => {\r\n              if (i > 1) {\r\n                addStopToStore(this.directionState.stopsStore);\r\n              }\r\n            });\r\n            setTimeout(() => {\r\n              stopCoords.map((coord, i) => {\r\n                const stop = this.directionState.stopsStore.all().find(e => e.position === i);\r\n                stop.text = coord;\r\n                stop.coordinates = coord.split(',');\r\n                this.directionState.stopsStore.update(stop);\r\n              });\r\n            }, this.directionState.debounceTime * 1.25); // this delay is due to the default component debounce time\r\n          }\r\n        });\r\n      // zoom to active route\r\n      this.directionState.routesFeatureStore.count$\r\n        .pipe(skipWhile(c => c < 1), first())\r\n        .subscribe(c => {\r\n          if (c >= 1) {\r\n            this.directionState.zoomToActiveRoute$.next();\r\n          }\r\n        });\r\n      // select the active route by url controls\r\n      this.directionState.routesFeatureStore.count$\r\n        .pipe(skipWhile(c => c < 2), first())\r\n        .subscribe(() => {\r\n          if (resultSelection) {\r\n            this.directionState.routesFeatureStore.entities$.value.map(d => d.properties.active = false);\r\n            this.directionState.routesFeatureStore.entities$.value[resultSelection].properties.active = true;\r\n            this.directionState.zoomToActiveRoute$.next();\r\n          }\r\n        });\r\n    }\r\n  }\r\n\r\n  private readLayersQueryParams(params: Params) {\r\n    this.readLayersQueryParamsByType(params, 'wms');\r\n    this.readLayersQueryParamsByType(params, 'wmts');\r\n    this.readLayersQueryParamsByType(params, 'arcgisrest');\r\n    this.readLayersQueryParamsByType(params, 'imagearcgisrest');\r\n    this.readLayersQueryParamsByType(params, 'tilearcgisrest');\r\n    this.readVectorQueryParams(params);\r\n  }\r\n\r\n  getQueryParam(name, url) {\r\n    let paramValue;\r\n    if (url.includes('?')) {\r\n      const httpParams = new HttpParams({ fromString: url.split('?')[1] });\r\n      paramValue = httpParams.get(name);\r\n    }\r\n    return paramValue;\r\n  }\r\n\r\n  private readLayersQueryParamsByType(params: Params, type) {\r\n    let nameParamLayersKey;\r\n    let urlsKey;\r\n    switch (type) {\r\n      case 'wms':\r\n        if ((params['layers'] || params['wmsLayers']) && params['wmsUrl']) {\r\n          urlsKey = 'wmsUrl';\r\n          nameParamLayersKey = params['wmsLayers'] ? 'wmsLayers' : 'layers'; // for maintain compatibility\r\n        }\r\n        break;\r\n      case 'wmts':\r\n        if (params['wmtsLayers'] && params['wmtsUrl']) {\r\n          urlsKey = 'wmtsUrl';\r\n          nameParamLayersKey = 'wmtsLayers';\r\n        }\r\n        break;\r\n      case 'arcgisrest':\r\n        if (params['arcgisLayers'] && params['arcgisUrl']) {\r\n          urlsKey = 'arcgisUrl';\r\n          nameParamLayersKey = 'arcgisLayers';\r\n        }\r\n        break;\r\n      case 'imagearcgisrest':\r\n        if (params['iarcgisLayers'] && params['iarcgisUrl']) {\r\n          urlsKey = 'iarcgisUrl';\r\n          nameParamLayersKey = 'iarcgisLayers';\r\n        }\r\n        break;\r\n      case 'tilearcgisrest':\r\n        if (params['tarcgisLayers'] && params['tarcgisUrl']) {\r\n          urlsKey = 'tarcgisUrl';\r\n          nameParamLayersKey = 'tarcgisLayers';\r\n        }\r\n        break;\r\n    }\r\n    if (!nameParamLayersKey || !urlsKey) {\r\n      return;\r\n    }\r\n    const layersByService = params[nameParamLayersKey].split('),(');\r\n    const urls = params[urlsKey].split(',');\r\n\r\n    let cnt = 0;\r\n    urls.forEach((urlSrc) => {\r\n      let url = urlSrc;\r\n      const version =\r\n        this.getQueryParam('VERSION', url) ||\r\n        this.getQueryParam('version', url) ||\r\n        undefined;\r\n      if (version) {\r\n        url = url.replace('VERSION=' + version, '').replace('version=' + version, '');\r\n      }\r\n      if (url.endsWith('?')) {\r\n        url = url.substring(0, url.length - 1);\r\n      }\r\n\r\n      const currentLayersByService = this.extractLayersByService(\r\n        layersByService[cnt]\r\n      );\r\n      currentLayersByService.forEach((layer) => {\r\n        const layerFromUrl = layer.split(':igoz');\r\n        const layerOptions = ObjectUtils.removeUndefined({\r\n          type,\r\n          url: url,\r\n          layer: layerFromUrl[0],\r\n          params: type === 'wms' ? { LAYERS: layerFromUrl[0] } : undefined\r\n        });\r\n        const id = generateIdFromSourceOptions(layerOptions);\r\n        const visibility = this.computeLayerVisibilityFromUrl(params, id);\r\n        this.addLayerFromURL(\r\n          url,\r\n          layerFromUrl[0],\r\n          type,\r\n          version,\r\n          visibility,\r\n          layerFromUrl[1] ? parseInt(layerFromUrl[1], 10) : undefined\r\n        );\r\n      });\r\n      cnt += 1;\r\n    });\r\n  }\r\n\r\n  private readVectorQueryParams(params: Params) {\r\n    if (params['vector']) {\r\n      const url = params['vector'] as string;\r\n      const lastIndex = url.lastIndexOf('/');\r\n      const fileName = url.slice(lastIndex + 1, url.length);\r\n\r\n      this.http.get(`${url}`, { responseType: 'blob' }).subscribe((data) => {\r\n        const file = new File([data], fileName, {\r\n          type: data.type,\r\n          lastModified: Date.now()\r\n        });\r\n        this.importService.import(file).subscribe(\r\n          (features: Feature[]) => this.onFileImportSuccess(file, features),\r\n          (error: Error) => this.onFileImportError(file, error)\r\n        );\r\n      });\r\n    }\r\n  }\r\n\r\n  private onFileImportSuccess(file: File, features: Feature[]) {\r\n    handleFileImportSuccess(\r\n      file,\r\n      features,\r\n      this.map,\r\n      this.contextState.context$.value.uri,\r\n      this.messageService,\r\n      this.layerService\r\n    );\r\n  }\r\n\r\n  private onFileImportError(file: File, error: Error) {\r\n    handleFileImportError(\r\n      file,\r\n      error,\r\n      this.messageService\r\n    );\r\n  }\r\n\r\n  private extractLayersByService(layersByService: string): any[] {\r\n    let outLayersByService = layersByService;\r\n    outLayersByService = outLayersByService.startsWith('(')\r\n      ? outLayersByService.substr(1)\r\n      : outLayersByService;\r\n    outLayersByService = outLayersByService.endsWith(')')\r\n      ? outLayersByService.slice(0, -1)\r\n      : outLayersByService;\r\n    return outLayersByService.split(',');\r\n  }\r\n  private addLayerFromURL(\r\n    url: string,\r\n    name: string,\r\n    type: 'wms' | 'wmts' | 'arcgisrest' | 'imagearcgisrest' | 'tilearcgisrest',\r\n    version: string,\r\n    visibility: boolean = true,\r\n    zIndex: number\r\n  ) {\r\n    if (!this.contextLoaded) {\r\n      return;\r\n    }\r\n    const commonSourceOptions = {\r\n      optionsFromCapabilities: true,\r\n      optionsFromApi: true,\r\n      crossOrigin: true,\r\n      type,\r\n      url\r\n    };\r\n    const arcgisClause = (type === 'arcgisrest' || type === 'imagearcgisrest' || type === 'tilearcgisrest');\r\n    let sourceOptions = {\r\n      version: type === 'wmts' ? '1.0.0' : undefined,\r\n      queryable: arcgisClause ? true : false,\r\n      queryFormat: arcgisClause ? 'esrijson' : undefined,\r\n      layer: name\r\n    };\r\n    if (type === 'wms') {\r\n      sourceOptions = { params: { LAYERS: name, VERSION: version } } as any;\r\n    }\r\n\r\n    sourceOptions = ObjectUtils.removeUndefined(Object.assign({}, sourceOptions, commonSourceOptions));\r\n\r\n    this.addedLayers$$.push(\r\n      this.layerService\r\n        .createAsyncLayer({\r\n          zIndex: zIndex,\r\n          visible: visibility,\r\n          sourceOptions\r\n        })\r\n        .subscribe((l) => {\r\n          this.map.addLayer(l);\r\n        })\r\n    );\r\n  }\r\n\r\n  private computeLayerVisibilityFromUrl(\r\n    params: Params,\r\n    currentLayerid: string\r\n  ): boolean {\r\n    const queryParams = params;\r\n    let visible = true;\r\n    if (!queryParams || !currentLayerid) {\r\n      return visible;\r\n    }\r\n    let visibleOnLayersParams = '';\r\n    let visibleOffLayersParams = '';\r\n    let visiblelayers: string[] = [];\r\n    let invisiblelayers: string[] = [];\r\n    if (queryParams['visiblelayers']) {\r\n      visibleOnLayersParams = queryParams['visiblelayers'];\r\n    }\r\n    if (queryParams['invisiblelayers']) {\r\n      visibleOffLayersParams = queryParams['invisiblelayers'];\r\n    }\r\n\r\n    /* This order is important because to control whichever\r\n     the order of * param. First whe open and close everything.*/\r\n    if (visibleOnLayersParams === '*') {\r\n      visible = true;\r\n    }\r\n    if (visibleOffLayersParams === '*') {\r\n      visible = false;\r\n    }\r\n\r\n    // After, managing named layer by id (context.json OR id from datasource)\r\n    visiblelayers = visibleOnLayersParams.split(',');\r\n    invisiblelayers = visibleOffLayersParams.split(',');\r\n    if (visiblelayers.indexOf(currentLayerid) > -1 || visiblelayers.indexOf(currentLayerid.toString()) > -1) {\r\n      visible = true;\r\n    }\r\n    if (invisiblelayers.indexOf(currentLayerid) > -1 || invisiblelayers.indexOf(currentLayerid.toString()) > -1) {\r\n      visible = false;\r\n    }\r\n    return visible;\r\n  }\r\n\r\n  private initWelcomeWindow(): void {\r\n    if (this.auth?.url) {\r\n      this.authService.logged$.subscribe((logged) => {\r\n        if (logged) {\r\n          this.createWelcomeWindow();\r\n        }\r\n      });\r\n    } else {\r\n      this.createWelcomeWindow();\r\n    }\r\n  }\r\n\r\n  private createWelcomeWindow(): void {\r\n    if (this.welcomeWindowService.hasWelcomeWindow()) {\r\n      const welcomWindowConfig: MatDialogConfig = this.welcomeWindowService.getConfig();\r\n\r\n      this.matDialogRef$.next(\r\n          this.dialogWindow.open(\r\n          WelcomeWindowComponent,\r\n          welcomWindowConfig\r\n        ));\r\n\r\n        this.matDialogRef$.value.afterClosed().subscribe((result) => {\r\n        this.welcomeWindowService.afterClosedWelcomeWindow();\r\n        this.matDialogRef$.next(undefined);\r\n      });\r\n    }\r\n  }\r\n\r\n  private getFeatureIsSameActiveWks(feature: Feature): boolean {\r\n    if (this.workspace) {\r\n      const featureTitle = feature.meta.sourceTitle;\r\n      const wksTitle = this.workspace.title;\r\n      if (wksTitle === featureTitle) {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private getWksActiveOpenInResolution(): boolean {\r\n    if(this.workspace) {\r\n      const activeWks = this.workspace as WfsWorkspace;\r\n      if(activeWks.active && activeWks.inResolutionRange$.value && this.workspaceState.workspacePanelExpanded) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n   }\r\n\r\n  refreshRelationsWorkspace(relationLayers: ImageLayer[] | VectorLayer[]) {\r\n    if (relationLayers?.length) {\r\n      for (const layer of relationLayers) {\r\n        const relationWorkspace = this.workspaceStore.all().find(workspace => layer.options.workspace.workspaceId.includes(workspace.id));\r\n        relationWorkspace?.meta.tableTemplate.columns.forEach(col => {\r\n          // Update domain list\r\n          if (col.type === 'list' || col.type === 'autocomplete') {\r\n            this.editionWorkspaceService.getDomainValues(col.relation).subscribe(result => {\r\n              col.domainValues = result;\r\n            });\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  zoomToSelectedFeatureWks() {\r\n    let format = new olFormatGeoJSON();\r\n    const featuresSelected = this.workspaceState.workspaceSelection.map(rec => (rec.entity as Feature));\r\n    if (featuresSelected.length === 0) {\r\n      return;\r\n    }\r\n    const olFeaturesSelected = [];\r\n    for (const feat of featuresSelected) {\r\n      let localOlFeature = format.readFeature(feat,\r\n        {\r\n          dataProjection: feat.projection,\r\n          featureProjection: this.map.projection\r\n        });\r\n        olFeaturesSelected.push(localOlFeature);\r\n    }\r\n    moveToOlFeatures(this.map, olFeaturesSelected, FeatureMotion.Zoom);\r\n  }\r\n\r\n}\r\n","import './portal.variables.scss';\r\n\r\nimport {\r\n  trigger,\r\n  state,\r\n  style,\r\n  transition,\r\n  animate,\r\n  AnimationTriggerMetadata\r\n} from '@angular/animations';\r\n\r\nexport function expansionPanelAnimation(): AnimationTriggerMetadata[] {\r\n  return [\r\n    trigger('expansionPanelSize', [\r\n      state(\r\n        'full',\r\n        style({\r\n          left: '5px',\r\n          'max-width': '100%'\r\n        })\r\n      ),\r\n      state(\r\n        'notTriggered',\r\n        style({\r\n          left: '5px',\r\n          bottom: '5px',\r\n          'max-width': '100%'\r\n        })\r\n      ),\r\n      state(\r\n        'notVisible',\r\n        style({\r\n          display: 'none'\r\n        })\r\n      ),\r\n      state(\r\n        'mobile',\r\n        style({\r\n          left: 'calc(100% - 40px)',\r\n        })\r\n      ),\r\n      state(\r\n        'reduced',\r\n        style({\r\n          left: '405px',\r\n          'max-width': 'calc(100% - 405px)'\r\n        })\r\n      ),\r\n      state(\r\n        'reducedNotTriggered',\r\n        style({\r\n          left: '405px',\r\n          bottom: '5px',\r\n          'max-width': 'calc(100% - 405px)'\r\n        })\r\n      ),\r\n      transition('* => *', animate('100ms'))\r\n    ]),\r\n    trigger('toastOffsetY', [\r\n      state(\r\n        'true',\r\n        style({\r\n          bottom: '50px'\r\n        })\r\n      ),\r\n      state(\r\n        'false',\r\n        style({\r\n          bottom: '5px'\r\n        })\r\n      )\r\n    ])\r\n  ];\r\n}\r\n\r\nexport function toastPanelAnimation(): AnimationTriggerMetadata[] {\r\n  return [\r\n    trigger('toastPanelMobileSidenav', [\r\n      state(\r\n        'true',\r\n        style({\r\n          display: 'none'\r\n        })\r\n      ),\r\n      transition('* => void', animate('0ms')),\r\n      transition('* => *', animate('200ms'))\r\n    ]),\r\n    trigger('toastPanelOffsetX', [\r\n      state(\r\n        'fullStandard',\r\n        style({\r\n          left: '45%'\r\n        })\r\n      ),\r\n      state(\r\n        'standard',\r\n        style({\r\n          left: '50%'\r\n        })\r\n      ),\r\n      state(\r\n        'htmlDisplay',\r\n        style({\r\n          left: '40%'\r\n        })\r\n      ),\r\n      state(\r\n        'fullOffsetX',\r\n        style({\r\n          left: 'calc(45% + 202px)'\r\n        })\r\n      ),\r\n      state(\r\n        'standardOffsetX',\r\n        style({\r\n          left: 'calc(50% + 202px)'\r\n        })\r\n      ),\r\n      state(\r\n        'htmlDisplayOffsetX',\r\n        style({\r\n          left: 'calc(40% + 160px)'\r\n        })\r\n    ),\r\n      transition('fullStandard => fullOffsetX', animate('200ms')),\r\n      transition('fullOffsetX => fullStandard', animate('200ms')),\r\n      transition('standard => standardOffsetX', animate('200ms')),\r\n      transition('standardOffsetX => standard', animate('200ms')),\r\n      transition('htmlDisplay => htmlDisplayOffsetX', animate('200ms')),\r\n      transition('htmlDisplayOffsetX => htmlDisplay', animate('200ms')),\r\n      // transition('standard => htmlDisplay', animate('200ms')),\r\n      // transition('htmlDisplay => standard', animate('200ms')),\r\n    ]),\r\n    trigger('toastPanelOffsetY', [\r\n      state(\r\n        'noExpansion',\r\n        style({\r\n          bottom: '0'\r\n        })\r\n      ),\r\n      state(\r\n        'expansionAndToastOpened',\r\n        style({\r\n          bottom: '285px',\r\n          zIndex: '999'\r\n        })\r\n      ),\r\n      state(\r\n        'expansionAndToastClosed',\r\n        style({\r\n          bottom: '285px',\r\n          zIndex: '5'\r\n        })\r\n      ),\r\n      state(\r\n        'expansionMaximizedAndToastOpened',\r\n        style({\r\n          bottom: '500px', // workspace full size\r\n          zIndex: '999'\r\n        })\r\n      ),\r\n      state(\r\n        'expansionMaximizedAndToastClosed',\r\n        style({\r\n          bottom: '500px', // workspace full size\r\n          zIndex: '5'\r\n        })\r\n      ),\r\n    transition('noExpansion => noExpansion', animate('10ms')),\r\n    transition('expansionAndToastOpened => expansionAndToastOpened', animate('200ms')),\r\n    transition('expansionAndToastClosed => expansionAndToastClosed', animate('200ms')),\r\n    transition('expansionMaximizedAndToastOpened => expansionMaximizedAndToastOpened', animate('200ms')),\r\n    transition('expansionMaximizedAndToastClosed => expansionMaximizedAndToastClosed', animate('200ms')),\r\n       ])\r\n  ];\r\n}\r\n\r\nexport function controlsAnimations(): AnimationTriggerMetadata[] {\r\n  return [\r\n    trigger('controlsOffsetY', [\r\n      state('close', style({})),\r\n      state(\r\n        'firstRowFromBottom',\r\n        style({\r\n          bottom: '5px'\r\n        })\r\n      ),\r\n      state(\r\n        'firstRowFromBottom-expanded',\r\n        style({\r\n          bottom: '285px'\r\n        })\r\n      ),\r\n      state(\r\n        'firstRowFromBottom-expanded-maximized',\r\n        style({\r\n          bottom: '500px'\r\n        })\r\n      ),\r\n      state(\r\n        'secondRowFromBottom',\r\n        style({\r\n          bottom: '47px'\r\n        })\r\n      ),\r\n      state(\r\n        'thirdRowFromBottom',\r\n        style({\r\n          bottom: '104px'\r\n        })\r\n      ),\r\n      state(\r\n        '',\r\n        style({\r\n          bottom: 'calc(285px)'\r\n        })\r\n      ),\r\n      state(\r\n        'secondRowFromBottom-expanded',\r\n        style({\r\n          bottom: 'calc(285px + 52px)'\r\n        })\r\n      ),\r\n      state(\r\n        'thirdRowFromBottom-expanded',\r\n        style({\r\n          bottom: 'calc(285px + 104px)'\r\n        })\r\n      ),\r\n      transition('* => *', animate('200ms'))\r\n    ]),\r\n    trigger('mobileOffsetY', [\r\n      state(\r\n        'low',\r\n        style({\r\n          bottom: '50px'\r\n        })\r\n      ),\r\n      transition('* => *', animate('200ms'))\r\n    ])\r\n  ];\r\n}\r\n\r\nexport function controlSlideX(): AnimationTriggerMetadata {\r\n  return trigger('controlStateX', [\r\n    state(\r\n      'left',\r\n      style({\r\n        left: '60px'\r\n      })\r\n    ),\r\n    state(\r\n      'right',\r\n      style({\r\n        left: '465px'\r\n      })\r\n    ),\r\n    transition('* => *', animate('200ms'))\r\n  ]);\r\n}\r\n\r\nexport function controlSlideY(): AnimationTriggerMetadata {\r\n  return trigger('controlStateY', [\r\n    state('close', style({})),\r\n    state(\r\n      'firstRowFromBottom',\r\n      style({\r\n        bottom: '2px',\r\n        'margin-left': '0px'\r\n      })\r\n    ),\r\n    state(\r\n      'firstRowFromBottom-expanded',\r\n      style({\r\n        bottom: '285px',\r\n        'margin-left': '-55px'\r\n      })\r\n    ),\r\n    state(\r\n      'firstRowFromBottom-expanded-maximized',\r\n      style({\r\n        bottom: '500px', // workspace full size\r\n        'margin-left': '-55px'\r\n      })\r\n    ),\r\n    transition('* => *', animate('200ms'))\r\n  ]);\r\n}\r\n\r\nexport function mapSlideX(): AnimationTriggerMetadata {\r\n  return trigger('mapStateX', [\r\n    state(\r\n      'left',\r\n      style({\r\n        left: '0'\r\n      })\r\n    ),\r\n    state(\r\n      'right',\r\n      style({\r\n        left: '0'\r\n      })\r\n    ),\r\n    transition('* => *', animate('200ms'))\r\n  ]);\r\n}\r\nexport function mapSlideY(): AnimationTriggerMetadata {\r\n  return trigger('mapStateY', [\r\n    state(\r\n      '*',\r\n      style({\r\n        bottom: '0'\r\n      })\r\n    ),\r\n    transition('* => *', animate('200ms'))\r\n  ]);\r\n}\r\n","import { Component } from '@angular/core';\r\nimport { ConfigService, LanguageService } from '@igo2/core';\r\n\r\n@Component({\r\n  selector: 'app-header',\r\n  templateUrl: './header.component.html',\r\n  styleUrls: ['./header.component.scss']\r\n})\r\nexport class HeaderComponent {\r\n\r\n  public headerLogo: string;\r\n  public headerLogoPrint: string;\r\n\r\n  constructor(\r\n    private configService: ConfigService,\r\n    protected languageService: LanguageService) {\r\n      this.computeHeader();\r\n    }\r\n\r\n  computeHeader() {\r\n    this.headerLogo = this.configService.getConfig('header.logo');\r\n    this.headerLogoPrint = this.configService.getConfig('header.logoPrint');\r\n  }\r\n\r\n  // Future translation system\r\n  /*changeLanguage() {\r\n    if (this.languageService.getLanguage() === 'fr'){\r\n      this.languageService.setLanguage('en');\r\n    } else {\r\n      this.languageService.setLanguage('fr');\r\n    }\r\n  }*/\r\n\r\n}\r\n","<mat-toolbar class = banner role = banner color=\"primary\">\r\n\t<div class=\"container\">\r\n\t\t<div class=\"row\">\r\n\t\t\t<div class=\"col-6 col-md-10 d-flex flex-wrap align-items-center zone-logo-title\">\r\n\t\t\t\t<a class=\"logo\" tabindex=\"5\" routerLink=\"\">\r\n                    <img id=\"header-logo\" alt=\"Logo\" src=\"{{headerLogo}}\">\r\n                </a>\r\n\t\t\t\t<img id=\"header-logo-print\" alt=\"Logo\" src=\"{{headerLogoPrint}}\" width=\"199\" height=\"60\" />\r\n\t\t\t\t<p lang=\"fr\" id=\"title-desktop\" class=\"zone-title  d-none d-md-block\">{{'header.title' | translate}}</p>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"col-6 col-md-2 d-flex justify-content-end zone-links\">\r\n\t\t\t\t<ul class=\"nav flex-column\">\r\n\t\t\t\t\t<!--<li><button class=\"buttonLanguage\" disabled (click)=\"changeLanguage()\">{{'header.language'}}</button></li>-->\r\n\t\t\t\t\t<li><a rel=\"noopener noreferrer\" alt=\"('header.contactUsUrl' | translate)\" href=\"{{'header.contactUsUrl' | translate}}\" target=\"_blank\">{{'header.contactUs' | translate}}</a></li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t\t<p lang=\"fr\" id=\"title-mobile\" class=\"zone-title d-md-none col-12\"><a>{{'header.title' | translate}}</a></p>\r\n\t\t</div>\r\n\t</div>\r\n</mat-toolbar>\r\n\r\n","import { Component } from '@angular/core';\r\nimport { LanguageService } from '@igo2/core';\r\n\r\n@Component({\r\n  selector: 'app-footer',\r\n  templateUrl: './footer.component.html',\r\n  styleUrls: ['./footer.component.scss']\r\n})\r\nexport class FooterComponent {\r\n\r\n  constructor(protected languageService: LanguageService) {}\r\n\r\n}\r\n","<igo-spinner igoSpinnerActivity></igo-spinner>\r\n\r\n<igo-auth-form *ngIf=\"authConfig && authConfig.url\"></igo-auth-form>\r\n\r\n<app-header *ngIf=\"hasHeader\" #header></app-header>\r\n\r\n<app-portal [ngClass]=\" hasHeader? (hasFooter? 'portal-with-header-footer' : 'portal-with-header') : (hasFooter? 'portal-with-footer' : 'portal') \" igoStopDropPropagation></app-portal>\r\n\r\n<app-footer *ngIf=\"hasFooter\"></app-footer>\r\n","<div class=\"footer-right\" id=\"footer-id\">\r\n    <span class=\"order2\">\r\n        <span class=\"footer-text\">\r\n            <a rel=\"noopener noreferrer\" alt=\"('externallinks' | translate)\" href=\"{{'footer.url-conditions' | translate}}\"\r\n            target=\"_blank\">{{'footer.conditions' | translate}}</a>\r\n        </span>\r\n        <span class=\"footer-text\">  |  </span>\r\n        <span class=\"footer-text\">\r\n            <a rel=\"noopener noreferrer\" alt=\"('externallinks' | translate)\" href=\"{{'footer.url-ministry' | translate}}\"\r\n            target=\"_blank\">{{'footer.ministry' | translate}}</a>\r\n        </span>\r\n        <span class=\"footer-text\">  |  </span>\r\n        <span class=\"footer-text\">\r\n            <a rel=\"noopener noreferrer\" alt=\"('externallinks' | translate)\" href=\"{{'footer.url-gov' | translate}}\"\r\n            target=\"_blank\">{{'footer.gov' | translate}}</a>\r\n        </span>\r\n    </span>\r\n</div>\r\n","import { Component, Renderer2 } from '@angular/core';\r\nimport { Title, Meta } from '@angular/platform-browser';\r\nimport { userAgent } from '@igo2/utils';\r\nimport {\r\n  LanguageService,\r\n  ConfigService,\r\n  MessageService\r\n} from '@igo2/core';\r\nimport { AuthOptions } from '@igo2/auth';\r\nimport { AnalyticsListenerService } from '@igo2/integration';\r\nimport { PwaService } from './services/pwa.service';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss']\r\n})\r\nexport class AppComponent {\r\n  public authConfig: AuthOptions;\r\n  private themeClass = 'blue-theme';\r\n  public hasHeader = true;\r\n  public hasFooter = true;\r\n  private promptEvent: any;\r\n  constructor(\r\n    protected languageService: LanguageService,\r\n    private configService: ConfigService,\r\n    private analyticsListenerService: AnalyticsListenerService,\r\n    private renderer: Renderer2,\r\n    private titleService: Title,\r\n    private metaService: Meta,\r\n    private messageService: MessageService,\r\n    private pwaService: PwaService\r\n  ) {\r\n    this.authConfig = this.configService.getConfig('auth');\r\n\r\n    this.readTitleConfig();\r\n    this.readThemeConfig();\r\n    this.readDescriptionConfig();\r\n\r\n    this.analyticsListenerService.listen();\r\n\r\n    this.detectOldBrowser();\r\n\r\n    this.hasHeader = this.configService.getConfig('header.hasHeader') === undefined ? false :\r\n    this.configService.getConfig('header.hasHeader');\r\n\r\n    this.hasFooter = this.configService.getConfig('hasFooter') === undefined ? false :\r\n    this.configService.getConfig('hasFooter');\r\n\r\n    this.setManifest();\r\n    this.installPrompt();\r\n    this.pwaService.checkForUpdates();\r\n  }\r\n\r\n  private readTitleConfig() {\r\n    this.languageService.translate.get(this.configService.getConfig('title')).subscribe(title => {\r\n      if (title) {\r\n        this.titleService.setTitle(title);\r\n        this.metaService.addTag({ name: 'title', content: title });\r\n      }\r\n    });\r\n  }\r\n\r\n  private setManifest() {\r\n    const appConfig = this.configService.getConfig('app');\r\n    if (appConfig?.install?.enabled) {\r\n      const manifestPath = appConfig.install.manifestPath || 'manifest.webmanifest';\r\n      document.querySelector('#igoManifestByConfig').setAttribute('href', manifestPath);\r\n    }\r\n  }\r\n\r\n  private installPrompt() {\r\n    const appConfig = this.configService.getConfig('app');\r\n    if (appConfig?.install?.enabled && appConfig?.install?.promote) {\r\n      if (userAgent.getOSName() !== 'iOS') {\r\n        window.addEventListener('beforeinstallprompt', (event: any) => {\r\n          event.preventDefault();\r\n          this.promptEvent = event;\r\n          window.addEventListener('click', () => {\r\n            setTimeout(() => {\r\n              this.promptEvent.prompt();\r\n              this.promptEvent = undefined;\r\n            }, 750);\r\n          }, { once: true });\r\n        }, { once: true });\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  private readThemeConfig() {\r\n    const theme = this.configService.getConfig('theme') || this.themeClass;\r\n    if (theme) {\r\n      this.renderer.addClass(document.body, theme);\r\n    }\r\n  }\r\n\r\n  private readDescriptionConfig() {\r\n    const description = this.configService.getConfig('description');\r\n    if (description) {\r\n      this.metaService.addTag({ name: 'description', content: description });\r\n    }\r\n  }\r\n\r\n  private detectOldBrowser() {\r\n    const oldBrowser = userAgent.satisfies({\r\n      ie: '<=11',\r\n      chrome: '<64',\r\n      firefox: '<60',\r\n      safari: '<=11'\r\n    });\r\n\r\n    if (oldBrowser) {\r\n      this.messageService.alert('oldBrowser.message', 'oldBrowser.title', {\r\n        timeOut: 15000\r\n      });\r\n    }\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { HeaderComponent } from './header.component';\r\nimport { IgoLanguageModule } from '@igo2/core';\r\nimport { MatToolbarModule } from '@angular/material/toolbar';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    HeaderComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    IgoLanguageModule,\r\n    MatToolbarModule\r\n    ],\r\n  exports: [\r\n    HeaderComponent\r\n  ]\r\n})\r\nexport class HeaderModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FooterComponent } from './footer.component';\r\nimport { IgoLanguageModule } from '@igo2/core';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    FooterComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    IgoLanguageModule\r\n  ],\r\n  exports: [\r\n    FooterComponent\r\n  ]\r\n})\r\nexport class FooterModule { }\r\n","import { BrowserModule, HammerModule } from '@angular/platform-browser';\r\nimport { APP_INITIALIZER, ApplicationRef, Injector, NgModule } from '@angular/core';\r\nimport { RouterModule } from '@angular/router';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport {\r\n  provideConfigOptions,\r\n  IgoMessageModule,\r\n  IgoGestureModule,\r\n  RouteService,\r\n  LanguageService\r\n} from '@igo2/core';\r\nimport { IgoSpinnerModule, IgoStopPropagationModule } from '@igo2/common';\r\nimport { IgoAuthModule } from '@igo2/auth';\r\nimport {\r\n  provideWorkspaceSearchSource,\r\n  provideIChercheSearchSource,\r\n  provideIChercheReverseSearchSource,\r\n  provideNominatimSearchSource,\r\n  provideCoordinatesReverseSearchSource,\r\n  provideILayerSearchSource,\r\n  provideStoredQueriesSearchSource,\r\n  provideOsrmDirectionsSource,\r\n  provideOptionsApi,\r\n  provideStyleListOptions\r\n} from '@igo2/geo';\r\n\r\n\r\nimport { environment } from '../environments/environment';\r\nimport { PortalModule } from './pages';\r\nimport { AppComponent } from './app.component';\r\nimport { HeaderModule } from './pages/header/header.module';\r\nimport { FooterModule } from './pages/footer/footer.module';\r\nimport { ServiceWorkerModule } from '@angular/service-worker';\r\n\r\nimport { MAT_TOOLTIP_DEFAULT_OPTIONS, MatTooltipDefaultOptions } from '@angular/material/tooltip';\r\nimport { concatMap, first } from 'rxjs';\r\n\r\nexport const defaultTooltipOptions: MatTooltipDefaultOptions = {\r\n  showDelay: 500,\r\n  hideDelay: 0,\r\n  touchendHideDelay: 0,\r\n  disableTooltipInteractivity: true\r\n};\r\n\r\n@NgModule({\r\n  declarations: [AppComponent],\r\n  imports: [\r\n    BrowserModule,\r\n    BrowserAnimationsModule,\r\n    RouterModule.forRoot([]),\r\n    IgoAuthModule.forRoot(),\r\n    IgoGestureModule.forRoot(),\r\n    IgoMessageModule,\r\n    IgoSpinnerModule,\r\n    IgoStopPropagationModule,\r\n    PortalModule,\r\n    HammerModule,\r\n    HeaderModule,\r\n    FooterModule,\r\n    ServiceWorkerModule.register('ngsw-worker.js', {\r\n      enabled: environment.igo.app.pwa.enabled,\r\n      registrationStrategy: 'registerWithDelay:5000'\r\n    })\r\n  ],\r\n  providers: [\r\n    provideConfigOptions({\r\n      default: environment.igo,\r\n      path: './config/config.json'\r\n    }),\r\n    RouteService,\r\n    provideNominatimSearchSource(),\r\n    provideIChercheSearchSource(),\r\n    provideWorkspaceSearchSource(),\r\n    provideIChercheReverseSearchSource(),\r\n    provideCoordinatesReverseSearchSource(),\r\n    provideILayerSearchSource(),\r\n    provideStoredQueriesSearchSource(),\r\n    provideOsrmDirectionsSource(),\r\n    provideOptionsApi(),\r\n    {\r\n      provide: APP_INITIALIZER,\r\n      useFactory: appInitializerFactory,\r\n      deps: [Injector, ApplicationRef],\r\n      multi: true\r\n    },\r\n    provideStyleListOptions({\r\n      path: './assets/list-style.json'\r\n    }),\r\n    { provide: MAT_TOOLTIP_DEFAULT_OPTIONS, useValue: defaultTooltipOptions }\r\n  ],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n\r\nfunction appInitializerFactory(\r\n  injector: Injector,\r\n  applicationRef: ApplicationRef\r\n) {\r\n  // ensure to have the proper translations loaded once, whe the app is stable.\r\n  return () => new Promise<any>((resolve: any) => {\r\n    applicationRef.isStable.pipe(\r\n      first(isStable => isStable === true),\r\n      concatMap(() => {\r\n        const languageService = injector.get(LanguageService);\r\n        const lang = languageService.getLanguage();\r\n        return languageService.translate.getTranslation(lang);\r\n      }))\r\n      .subscribe((translations) => {\r\n        const languageService = injector.get(LanguageService);\r\n        const lang = languageService.getLanguage();\r\n        languageService.translate.setTranslation(lang, translations);\r\n        resolve();\r\n      });\r\n  });\r\n}\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nimport 'hammerjs';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic()\r\n  .bootstrapModule(AppModule)\r\n  .catch(err => console.log(err));\r\n","var map = {\n\t\"./af\": 58685,\n\t\"./af.js\": 58685,\n\t\"./ar\": 254,\n\t\"./ar-dz\": 4312,\n\t\"./ar-dz.js\": 4312,\n\t\"./ar-kw\": 32614,\n\t\"./ar-kw.js\": 32614,\n\t\"./ar-ly\": 18630,\n\t\"./ar-ly.js\": 18630,\n\t\"./ar-ma\": 28674,\n\t\"./ar-ma.js\": 28674,\n\t\"./ar-sa\": 49032,\n\t\"./ar-sa.js\": 49032,\n\t\"./ar-tn\": 24730,\n\t\"./ar-tn.js\": 24730,\n\t\"./ar.js\": 254,\n\t\"./az\": 53052,\n\t\"./az.js\": 53052,\n\t\"./be\": 60150,\n\t\"./be.js\": 60150,\n\t\"./bg\": 63069,\n\t\"./bg.js\": 63069,\n\t\"./bm\": 13466,\n\t\"./bm.js\": 13466,\n\t\"./bn\": 18516,\n\t\"./bn-bd\": 90557,\n\t\"./bn-bd.js\": 90557,\n\t\"./bn.js\": 18516,\n\t\"./bo\": 26273,\n\t\"./bo.js\": 26273,\n\t\"./br\": 9588,\n\t\"./br.js\": 9588,\n\t\"./bs\": 19815,\n\t\"./bs.js\": 19815,\n\t\"./ca\": 83331,\n\t\"./ca.js\": 83331,\n\t\"./cs\": 21320,\n\t\"./cs.js\": 21320,\n\t\"./cv\": 72219,\n\t\"./cv.js\": 72219,\n\t\"./cy\": 68266,\n\t\"./cy.js\": 68266,\n\t\"./da\": 66427,\n\t\"./da.js\": 66427,\n\t\"./de\": 67435,\n\t\"./de-at\": 52871,\n\t\"./de-at.js\": 52871,\n\t\"./de-ch\": 12994,\n\t\"./de-ch.js\": 12994,\n\t\"./de.js\": 67435,\n\t\"./dv\": 82357,\n\t\"./dv.js\": 82357,\n\t\"./el\": 95649,\n\t\"./el.js\": 95649,\n\t\"./en-au\": 59961,\n\t\"./en-au.js\": 59961,\n\t\"./en-ca\": 19878,\n\t\"./en-ca.js\": 19878,\n\t\"./en-gb\": 3924,\n\t\"./en-gb.js\": 3924,\n\t\"./en-ie\": 70864,\n\t\"./en-ie.js\": 70864,\n\t\"./en-il\": 91579,\n\t\"./en-il.js\": 91579,\n\t\"./en-in\": 30940,\n\t\"./en-in.js\": 30940,\n\t\"./en-nz\": 16181,\n\t\"./en-nz.js\": 16181,\n\t\"./en-sg\": 44301,\n\t\"./en-sg.js\": 44301,\n\t\"./eo\": 85291,\n\t\"./eo.js\": 85291,\n\t\"./es\": 54529,\n\t\"./es-do\": 53764,\n\t\"./es-do.js\": 53764,\n\t\"./es-mx\": 12584,\n\t\"./es-mx.js\": 12584,\n\t\"./es-us\": 63425,\n\t\"./es-us.js\": 63425,\n\t\"./es.js\": 54529,\n\t\"./et\": 35203,\n\t\"./et.js\": 35203,\n\t\"./eu\": 70678,\n\t\"./eu.js\": 70678,\n\t\"./fa\": 83483,\n\t\"./fa.js\": 83483,\n\t\"./fi\": 96262,\n\t\"./fi.js\": 96262,\n\t\"./fil\": 52521,\n\t\"./fil.js\": 52521,\n\t\"./fo\": 34555,\n\t\"./fo.js\": 34555,\n\t\"./fr\": 63131,\n\t\"./fr-ca\": 88239,\n\t\"./fr-ca.js\": 88239,\n\t\"./fr-ch\": 21702,\n\t\"./fr-ch.js\": 21702,\n\t\"./fr.js\": 63131,\n\t\"./fy\": 267,\n\t\"./fy.js\": 267,\n\t\"./ga\": 23821,\n\t\"./ga.js\": 23821,\n\t\"./gd\": 71753,\n\t\"./gd.js\": 71753,\n\t\"./gl\": 4074,\n\t\"./gl.js\": 4074,\n\t\"./gom-deva\": 92762,\n\t\"./gom-deva.js\": 92762,\n\t\"./gom-latn\": 5969,\n\t\"./gom-latn.js\": 5969,\n\t\"./gu\": 82809,\n\t\"./gu.js\": 82809,\n\t\"./he\": 45402,\n\t\"./he.js\": 45402,\n\t\"./hi\": 315,\n\t\"./hi.js\": 315,\n\t\"./hr\": 10410,\n\t\"./hr.js\": 10410,\n\t\"./hu\": 38288,\n\t\"./hu.js\": 38288,\n\t\"./hy-am\": 67928,\n\t\"./hy-am.js\": 67928,\n\t\"./id\": 71334,\n\t\"./id.js\": 71334,\n\t\"./is\": 86959,\n\t\"./is.js\": 86959,\n\t\"./it\": 34864,\n\t\"./it-ch\": 51124,\n\t\"./it-ch.js\": 51124,\n\t\"./it.js\": 34864,\n\t\"./ja\": 36141,\n\t\"./ja.js\": 36141,\n\t\"./jv\": 29187,\n\t\"./jv.js\": 29187,\n\t\"./ka\": 42136,\n\t\"./ka.js\": 42136,\n\t\"./kk\": 94332,\n\t\"./kk.js\": 94332,\n\t\"./km\": 18607,\n\t\"./km.js\": 18607,\n\t\"./kn\": 84305,\n\t\"./kn.js\": 84305,\n\t\"./ko\": 70234,\n\t\"./ko.js\": 70234,\n\t\"./ku\": 16003,\n\t\"./ku.js\": 16003,\n\t\"./ky\": 75061,\n\t\"./ky.js\": 75061,\n\t\"./lb\": 32786,\n\t\"./lb.js\": 32786,\n\t\"./lo\": 66183,\n\t\"./lo.js\": 66183,\n\t\"./lt\": 50029,\n\t\"./lt.js\": 50029,\n\t\"./lv\": 24169,\n\t\"./lv.js\": 24169,\n\t\"./me\": 68577,\n\t\"./me.js\": 68577,\n\t\"./mi\": 68177,\n\t\"./mi.js\": 68177,\n\t\"./mk\": 50337,\n\t\"./mk.js\": 50337,\n\t\"./ml\": 65260,\n\t\"./ml.js\": 65260,\n\t\"./mn\": 52325,\n\t\"./mn.js\": 52325,\n\t\"./mr\": 14695,\n\t\"./mr.js\": 14695,\n\t\"./ms\": 75334,\n\t\"./ms-my\": 37151,\n\t\"./ms-my.js\": 37151,\n\t\"./ms.js\": 75334,\n\t\"./mt\": 63570,\n\t\"./mt.js\": 63570,\n\t\"./my\": 97963,\n\t\"./my.js\": 97963,\n\t\"./nb\": 88028,\n\t\"./nb.js\": 88028,\n\t\"./ne\": 86638,\n\t\"./ne.js\": 86638,\n\t\"./nl\": 50302,\n\t\"./nl-be\": 66782,\n\t\"./nl-be.js\": 66782,\n\t\"./nl.js\": 50302,\n\t\"./nn\": 33501,\n\t\"./nn.js\": 33501,\n\t\"./oc-lnc\": 50563,\n\t\"./oc-lnc.js\": 50563,\n\t\"./pa-in\": 50869,\n\t\"./pa-in.js\": 50869,\n\t\"./pl\": 65302,\n\t\"./pl.js\": 65302,\n\t\"./pt\": 49687,\n\t\"./pt-br\": 74884,\n\t\"./pt-br.js\": 74884,\n\t\"./pt.js\": 49687,\n\t\"./ro\": 79107,\n\t\"./ro.js\": 79107,\n\t\"./ru\": 33627,\n\t\"./ru.js\": 33627,\n\t\"./sd\": 30355,\n\t\"./sd.js\": 30355,\n\t\"./se\": 83427,\n\t\"./se.js\": 83427,\n\t\"./si\": 11848,\n\t\"./si.js\": 11848,\n\t\"./sk\": 54590,\n\t\"./sk.js\": 54590,\n\t\"./sl\": 20184,\n\t\"./sl.js\": 20184,\n\t\"./sq\": 56361,\n\t\"./sq.js\": 56361,\n\t\"./sr\": 78965,\n\t\"./sr-cyrl\": 81287,\n\t\"./sr-cyrl.js\": 81287,\n\t\"./sr.js\": 78965,\n\t\"./ss\": 25456,\n\t\"./ss.js\": 25456,\n\t\"./sv\": 70451,\n\t\"./sv.js\": 70451,\n\t\"./sw\": 77558,\n\t\"./sw.js\": 77558,\n\t\"./ta\": 51356,\n\t\"./ta.js\": 51356,\n\t\"./te\": 73693,\n\t\"./te.js\": 73693,\n\t\"./tet\": 21243,\n\t\"./tet.js\": 21243,\n\t\"./tg\": 42500,\n\t\"./tg.js\": 42500,\n\t\"./th\": 55768,\n\t\"./th.js\": 55768,\n\t\"./tk\": 77761,\n\t\"./tk.js\": 77761,\n\t\"./tl-ph\": 35780,\n\t\"./tl-ph.js\": 35780,\n\t\"./tlh\": 29590,\n\t\"./tlh.js\": 29590,\n\t\"./tr\": 33807,\n\t\"./tr.js\": 33807,\n\t\"./tzl\": 93857,\n\t\"./tzl.js\": 93857,\n\t\"./tzm\": 60654,\n\t\"./tzm-latn\": 8806,\n\t\"./tzm-latn.js\": 8806,\n\t\"./tzm.js\": 60654,\n\t\"./ug-cn\": 30845,\n\t\"./ug-cn.js\": 30845,\n\t\"./uk\": 19232,\n\t\"./uk.js\": 19232,\n\t\"./ur\": 47052,\n\t\"./ur.js\": 47052,\n\t\"./uz\": 77967,\n\t\"./uz-latn\": 32233,\n\t\"./uz-latn.js\": 32233,\n\t\"./uz.js\": 77967,\n\t\"./vi\": 98615,\n\t\"./vi.js\": 98615,\n\t\"./x-pseudo\": 12320,\n\t\"./x-pseudo.js\": 12320,\n\t\"./yo\": 31313,\n\t\"./yo.js\": 31313,\n\t\"./zh-cn\": 64490,\n\t\"./zh-cn.js\": 64490,\n\t\"./zh-hk\": 55910,\n\t\"./zh-hk.js\": 55910,\n\t\"./zh-mo\": 98262,\n\t\"./zh-mo.js\": 98262,\n\t\"./zh-tw\": 44223,\n\t\"./zh-tw.js\": 44223\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 46700;"],"x_google_ignoreList":[39]}