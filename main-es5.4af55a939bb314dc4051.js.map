{"version":3,"sources":["webpack:///node_modules/@igo2/core/locale sync ^\\.\\/.*\\.json$","webpack:///node_modules/moment/locale sync ^\\.\\/.*$","webpack:///src/$_lazy_route_resource lazy namespace object","webpack:///src/environments/environment.ts","webpack:///src/app/pages/portal/map-overlay/map-overlay.component.html","webpack:///src/app/pages/portal/map-overlay/map-overlay.component.ts","webpack:///src/app/pages/portal/map-overlay/map-overlay.module.ts","webpack:///src/app/pages/portal/expansion-panel/expansion-panel-header.component.html","webpack:///src/app/pages/portal/expansion-panel/expansion-panel-header.component.ts","webpack:///src/app/pages/portal/expansion-panel/expansion-panel.component.ts","webpack:///src/app/pages/portal/expansion-panel/expansion-panel.component.html","webpack:///src/app/pages/portal/expansion-panel/expansion-panel.animations.ts","webpack:///src/app/pages/portal/expansion-panel/expansion-panel.module.ts","webpack:///src/app/pages/portal/toast-panel/toast-panel.component.html","webpack:///src/app/pages/portal/toast-panel/toast-panel.component.ts","webpack:///src/app/pages/portal/toast-panel/toast-panel.module.ts","webpack:///src/app/pages/portal/sidenav/sidenav.component.html","webpack:///src/app/pages/portal/sidenav/sidenav.component.ts","webpack:///src/app/pages/portal/sidenav/sidenav.module.ts","webpack:///src/app/pages/portal/welcome-window/welcome-window.service.ts","webpack:///src/app/pages/portal/welcome-window/welcome-window.component.html","webpack:///src/app/pages/portal/welcome-window/welcome-window.component.ts","webpack:///src/app/pages/portal/toast-panel-for-expansion/toast-panel-for-expansion.component.ts","webpack:///src/app/pages/portal/toast-panel-for-expansion/toast-panel-for-expansion.component.html","webpack:///src/app/pages/portal/toast-panel-for-expansion/toast-panel-for-expansion.animations.ts","webpack:///src/app/pages/portal/portal.component.html","webpack:///src/app/pages/portal/portal.component.ts","webpack:///src/app/pages/portal/portal.animation.ts","webpack:///src/app/pages/portal/toast-panel-for-expansion/toast-panel-for-expansion.module.ts","webpack:///src/app/pages/portal/welcome-window/welcome-window.module.ts","webpack:///src/app/pages/portal/portal.module.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.component.ts","webpack:///src/app/app.module.ts","webpack:///src/main.ts"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","webpackEmptyAsyncContext","Promise","then","environment","production","igo","app","forceCoordsNA","catalog","sources","title","url","showLegend","depot","importExport","language","prefix","interactiveTour","tourInMobile","pathToConfigFile","searchSources","nominatim","available","storedqueries","icherche","searchUrl","order","params","limit","coordinatesreverse","showInPointerSummary","icherchereverse","enabled","ilayer","cadastre","projections","alias","def","extent","searchOverlayStyle","base","markerColor","markerOpacity","markerOutlineColor","fillColor","fillOpacity","strokeColor","strokeOpacity","strokeWidth","focus","selection","queryOverlayStyle","MapOverlayComponent","contextService","mediaService","configService","mapOverlay","this","context$$","context$","subscribe","context","handleContextChange","media$$","media$","media","unsubscribe","getConfig","overlay","getMedia","includes","push","MapOverlayModule","expandedChange","_expanded","value","emit","expanded","onToggleClick","maximized","_backdropShown","backdropShown","onBackdropClick","duration","delay","easing","opacity","display","showContent","AppExpansionPanelModule","languageService","storageState","queryState","_opened","hasFeatureEmphasisOnSelection","_zoomAuto","_fullExtent","fullExtent$","BehaviorSubject","fullExtent","isHtmlDisplay","iconResizeWindows","icon","actionStore","actionbarMode","Overlay","multiple$","isResultSelected$","isSelectedResultOutOfView$","initialized","format","focusedResult$","withZoomButton","zoomAuto$","openedChange","fullExtentEvent","windowHtmlDisplayEvent","resultSelected$","opened","storageService","get","zoomAuto","setResizeWindowIcon","_map","_store","store","entities$","_entities","unselectResult","set","SESSION","next","results","length","selectResult","event","clear","getValue","localOlFeature","readFeature","data","dataProjection","projection","featureProjection","Default","all","isSelectedResultOutOfView$$","combineLatest","viewController","state$","pipe","debounceTime","bunch","selectedResult","selectedOlFeature","selectedOlFeatureExtent","latestResult","trigger","monitorResultOutOfView","resultOrResolution$$","tap","res","resolution$","buildResultEmphasis","storageChange$$","storageChange$","skipWhile","storageChange","key","change","currentValue","load","translate","instant","tooltip","handler","Zoom","availability","multiple","olFeatures","result","checkbox","checkCondition","v","isDesktop","clearFeatureEmphasis","olGeometry","getGeometry","getExtent","x","y","feature1","name","geometry","abstractFocusedOrSelectedResult","meta","style","assign","feature","queryOverlayStyleSelection","queryOverlayStyleFocus","setZIndex","queryResultsOverlay","addFeature","None","removeFeature","force","state","focused","update","selected","properties","target","setHtmlDisplay","features","removeFeatures","addFeatures","setFeatures","Mobile","preventDefault","keyCode","previousResult","nextResult","i","indexOf","action","SWIPE_ACTION","RIGHT","LEFT","UP","DOWN","className","args","reduceWindow","enlargeWindows","AppToastPanelModule","toolState","catalogState","title$","toolChange","toolbox","activeTool$$","activeTool$","tool","sidenavTitle","catalogStore","layers","layer","options","active","activatePreviousTool","deactivateTool","AppSidenavModule","igoVersionDifferentFromStorage","isVersionDifferentFromStorage","setStorageConfig","nbVisit","Number","remove","dialogConfig","disableClose","autoFocus","maxWidth","showAgain","dialog","welcomeWindowService","discoverTitleInLocale$","of","html$","computeHtml","closeAll","deltaDay","isDateParsable","releaseDate","Date","releaseDateAppConfig","releaseDateApp","isNaN","getDate","console","log","releaseDateString","day","month","getMonth","year","getFullYear","title$$","description","version","r","withHeader","route","workspaceState","authService","layerService","dataSourceService","cdRef","capabilitiesService","contextState","mapState","searchState","searchSourceService","importService","http","messageService","dialogWindow","queryService","directionState","toastPanelOffsetX$","sidenavOpened$","minSearchTermLength","hasExpansionPanel","hasGeolocateButton","showRotationButtonIfNoRotation","workspaceNotAvailableMessage","workspaceEntitySortChange$","paginatorOptions","pageSize","pageSizeOptions","workspaceMenuClass","workspaceMaximize$$","workspaceMaximize$","searchBarTerm","onSettingsChange$","termDefinedInUrl","termSplitter","termDefinedInUrlTriggered","addedLayers$$","contextMenuStore","contextLoaded","toastPanelForExpansionOpened","showToastPanelForExpansionToggle","selectedWorkspace$","toastPanelHtmlDisplay","_toastPanelOpened","igoSearchPointerSummaryEnabled","detectChanges","Tablet","getOrientation","Landscape","Portrait","isMobile","isTablet","isPortrait","sidenavOpened","workspacePanelExpanded","expansionPanelExpanded","searchResultsGeometryEnabled$","content","workspace","hasWidget","workspace$","window","searchTermSplitter$","initWelcomeWindow","authenticate$","authenticated","onChangeContext","searchCoordinate","contextMenuCoord","openGoogleMaps","openGoogleStreetView","queryStore","count$","pairwise","currentCnt","prevCnt","padding","toastPanelOpened","ol","once","readQueryParams","setSearchSettingsChange","selectedResult$","closeSidenav","workspaceEnabled$","empty$","workspaceEmpty","updateMapBrowserClass","workspaceMaximize","activeWks","activeWidget$$","activeWorkspaceWidget$","widget","openToastPanelForExpansion","closeToastPanelForExpansion","openSidenav$$","openSidenav$","openSidenav","sidenavMediaAndOrientation$$","orientation$","sidenavMediaAndOrientation","computeToastPanelOffsetX","isLandscape","getToastPanelExtent","wks","inResolutionRange$","entityStore","visible","matPaginator","workspacePaginator","querySearchSourceArray","getQuerySearchSource","added","getProperties","_featureStore","featureStoreLayer","getAllowedFieldsAndAlias","getQueryTitle","querySearchSource","find","s","sourceTitle","queryResults","f","forEach","sub","toggleSidenav","term","routeParams","search","deactivateCustomFilterTermStrategy","setSearchTerm","replace","trim","onClearSearch","onBeforeSearch","enabledSources","isReverseSearch","research","source","getEnabledSources","filter","newResults","searchStore","concat","updateMany","setSearchResultsGeometryStatus","searchBar","nativeElement","getElementsByTagName","cancelOngoingAddLayer","queryParams","qParams","uri","readLayersQueryParams","contextManager","getTool","toolToOpen","toolToOpenOnContextChange","toolName","activateTool","handleExpansionAndToastOnMobile","searchResultsOverlay","setSelectedResult","getSources","searchSource","getClickCoordinate","contextmenuPoint","boundingMapBrowser","mapBrowser","getBoundingClientRect","top","scrollY","pageYOffset","left","scrollX","pageXOffset","pixel","coord","getCoordinateFromPixel","proj","open","getGoogleMapsCoordLink","getGoogleStreetViewLink","c","toFixed","join","header","classList","add","readToolParams","readSearchParams","readFocusFirst","setTimeout","resultItem","document","item","click","entities$$","stateView","all$","entities","take","computeFocusFirst","activateCustomFilterTermStrategy","searchResultsOlFeatures","entity","dataType","totalExtent","zoomToExtent","resultSelection","routingCoordLoaded","stopCoords","split","routingOptions","parseInt","stopsStore","storeInitialized$","init","first","stop","position","text","coordinates","routesFeatureStore","zoomToActiveRoute$","d","readLayersQueryParamsByType","readVectorQueryParams","paramValue","fromString","type","nameParamLayersKey","urlsKey","layersByService","urls","cnt","urlSrc","getQueryParam","extractLayersByService","layerFromUrl","layerOptions","removeUndefined","LAYERS","visibility","computeLayerVisibilityFromUrl","addLayerFromURL","lastIndex","lastIndexOf","fileName","slice","responseType","file","File","lastModified","now","onFileImportSuccess","error","onFileImportError","outLayersByService","startsWith","substr","endsWith","zIndex","commonSourceOptions","optionsFromCapabilities","optionsFromApi","crossOrigin","arcgisClause","sourceOptions","queryable","queryFormat","VERSION","createAsyncLayer","l","addLayer","currentLayerid","visibleOnLayersParams","visibleOffLayersParams","visiblelayers","invisiblelayers","toString","auth","logged$","logged","createWelcomeWindow","hasWelcomeWindow","welcomWindowConfig","afterClosed","afterClosedWelcomeWindow","onToggleSidenavClick","onSearchTermChange","onPointerSummaryStatusChange","onSearchResultsGeometryStatusChange","onSearch","onSearchSettingsChange","toolChanged","onMapQuery","onContextMenuOpen","bottom","AppToastPanelForExpansionModule","IgoWelcomeWindowModule","PortalModule","forRoot","analyticsService","analyticsListenerService","renderer","titleService","metaService","themeClass","authConfig","readTitleConfig","readThemeConfig","readDescriptionConfig","listen","detectOldBrowser","setTitle","addTag","theme","addClass","body","satisfies","ie","chrome","firefox","message$","zip","message","rep","alert","timeOut","AppModule","default","path","err"],"mappings":"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","file":"x","sourcesContent":["var map = {\n\t\"./en.auth.json\": \"4FNE\",\n\t\"./en.common.json\": \"MoB1\",\n\t\"./en.context.json\": \"N2Ms\",\n\t\"./en.core.json\": \"mPxz\",\n\t\"./en.geo.json\": \"/7uZ\",\n\t\"./en.integration.json\": \"TSY2\",\n\t\"./en.json\": \"Oh3F\",\n\t\"./fr.auth.json\": \"qcjx\",\n\t\"./fr.common.json\": \"O94P\",\n\t\"./fr.context.json\": \"Z1WX\",\n\t\"./fr.core.json\": \"wpjW\",\n\t\"./fr.geo.json\": \"8ktl\",\n\t\"./fr.integration.json\": \"Tzk/\",\n\t\"./fr.json\": \"+etH\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"I74T\";","var map = {\n\t\"./af\": \"K/tc\",\n\t\"./af.js\": \"K/tc\",\n\t\"./ar\": \"jnO4\",\n\t\"./ar-dz\": \"o1bE\",\n\t\"./ar-dz.js\": \"o1bE\",\n\t\"./ar-kw\": \"Qj4J\",\n\t\"./ar-kw.js\": \"Qj4J\",\n\t\"./ar-ly\": \"HP3h\",\n\t\"./ar-ly.js\": \"HP3h\",\n\t\"./ar-ma\": \"CoRJ\",\n\t\"./ar-ma.js\": \"CoRJ\",\n\t\"./ar-sa\": \"gjCT\",\n\t\"./ar-sa.js\": \"gjCT\",\n\t\"./ar-tn\": \"bYM6\",\n\t\"./ar-tn.js\": \"bYM6\",\n\t\"./ar.js\": \"jnO4\",\n\t\"./az\": \"SFxW\",\n\t\"./az.js\": \"SFxW\",\n\t\"./be\": \"H8ED\",\n\t\"./be.js\": \"H8ED\",\n\t\"./bg\": \"hKrs\",\n\t\"./bg.js\": \"hKrs\",\n\t\"./bm\": \"p/rL\",\n\t\"./bm.js\": \"p/rL\",\n\t\"./bn\": \"kEOa\",\n\t\"./bn-bd\": \"loYQ\",\n\t\"./bn-bd.js\": \"loYQ\",\n\t\"./bn.js\": \"kEOa\",\n\t\"./bo\": \"0mo+\",\n\t\"./bo.js\": \"0mo+\",\n\t\"./br\": \"aIdf\",\n\t\"./br.js\": \"aIdf\",\n\t\"./bs\": \"JVSJ\",\n\t\"./bs.js\": \"JVSJ\",\n\t\"./ca\": \"1xZ4\",\n\t\"./ca.js\": \"1xZ4\",\n\t\"./cs\": \"PA2r\",\n\t\"./cs.js\": \"PA2r\",\n\t\"./cv\": \"A+xa\",\n\t\"./cv.js\": \"A+xa\",\n\t\"./cy\": \"l5ep\",\n\t\"./cy.js\": \"l5ep\",\n\t\"./da\": \"DxQv\",\n\t\"./da.js\": \"DxQv\",\n\t\"./de\": \"tGlX\",\n\t\"./de-at\": \"s+uk\",\n\t\"./de-at.js\": \"s+uk\",\n\t\"./de-ch\": \"u3GI\",\n\t\"./de-ch.js\": \"u3GI\",\n\t\"./de.js\": \"tGlX\",\n\t\"./dv\": \"WYrj\",\n\t\"./dv.js\": \"WYrj\",\n\t\"./el\": \"jUeY\",\n\t\"./el.js\": \"jUeY\",\n\t\"./en-au\": \"Dmvi\",\n\t\"./en-au.js\": \"Dmvi\",\n\t\"./en-ca\": \"OIYi\",\n\t\"./en-ca.js\": \"OIYi\",\n\t\"./en-gb\": \"Oaa7\",\n\t\"./en-gb.js\": \"Oaa7\",\n\t\"./en-ie\": \"4dOw\",\n\t\"./en-ie.js\": \"4dOw\",\n\t\"./en-il\": \"czMo\",\n\t\"./en-il.js\": \"czMo\",\n\t\"./en-in\": \"7C5Q\",\n\t\"./en-in.js\": \"7C5Q\",\n\t\"./en-nz\": \"b1Dy\",\n\t\"./en-nz.js\": \"b1Dy\",\n\t\"./en-sg\": \"t+mt\",\n\t\"./en-sg.js\": \"t+mt\",\n\t\"./eo\": \"Zduo\",\n\t\"./eo.js\": \"Zduo\",\n\t\"./es\": \"iYuL\",\n\t\"./es-do\": \"CjzT\",\n\t\"./es-do.js\": \"CjzT\",\n\t\"./es-mx\": \"tbfe\",\n\t\"./es-mx.js\": \"tbfe\",\n\t\"./es-us\": \"Vclq\",\n\t\"./es-us.js\": \"Vclq\",\n\t\"./es.js\": \"iYuL\",\n\t\"./et\": \"7BjC\",\n\t\"./et.js\": \"7BjC\",\n\t\"./eu\": \"D/JM\",\n\t\"./eu.js\": \"D/JM\",\n\t\"./fa\": \"jfSC\",\n\t\"./fa.js\": \"jfSC\",\n\t\"./fi\": \"gekB\",\n\t\"./fi.js\": \"gekB\",\n\t\"./fil\": \"1ppg\",\n\t\"./fil.js\": \"1ppg\",\n\t\"./fo\": \"ByF4\",\n\t\"./fo.js\": \"ByF4\",\n\t\"./fr\": \"nyYc\",\n\t\"./fr-ca\": \"2fjn\",\n\t\"./fr-ca.js\": \"2fjn\",\n\t\"./fr-ch\": \"Dkky\",\n\t\"./fr-ch.js\": \"Dkky\",\n\t\"./fr.js\": \"nyYc\",\n\t\"./fy\": \"cRix\",\n\t\"./fy.js\": \"cRix\",\n\t\"./ga\": \"USCx\",\n\t\"./ga.js\": \"USCx\",\n\t\"./gd\": \"9rRi\",\n\t\"./gd.js\": \"9rRi\",\n\t\"./gl\": \"iEDd\",\n\t\"./gl.js\": \"iEDd\",\n\t\"./gom-deva\": \"qvJo\",\n\t\"./gom-deva.js\": \"qvJo\",\n\t\"./gom-latn\": \"DKr+\",\n\t\"./gom-latn.js\": \"DKr+\",\n\t\"./gu\": \"4MV3\",\n\t\"./gu.js\": \"4MV3\",\n\t\"./he\": \"x6pH\",\n\t\"./he.js\": \"x6pH\",\n\t\"./hi\": \"3E1r\",\n\t\"./hi.js\": \"3E1r\",\n\t\"./hr\": \"S6ln\",\n\t\"./hr.js\": \"S6ln\",\n\t\"./hu\": \"WxRl\",\n\t\"./hu.js\": \"WxRl\",\n\t\"./hy-am\": \"1rYy\",\n\t\"./hy-am.js\": \"1rYy\",\n\t\"./id\": \"UDhR\",\n\t\"./id.js\": \"UDhR\",\n\t\"./is\": \"BVg3\",\n\t\"./is.js\": \"BVg3\",\n\t\"./it\": \"bpih\",\n\t\"./it-ch\": \"bxKX\",\n\t\"./it-ch.js\": \"bxKX\",\n\t\"./it.js\": \"bpih\",\n\t\"./ja\": \"B55N\",\n\t\"./ja.js\": \"B55N\",\n\t\"./jv\": \"tUCv\",\n\t\"./jv.js\": \"tUCv\",\n\t\"./ka\": \"IBtZ\",\n\t\"./ka.js\": \"IBtZ\",\n\t\"./kk\": \"bXm7\",\n\t\"./kk.js\": \"bXm7\",\n\t\"./km\": \"6B0Y\",\n\t\"./km.js\": \"6B0Y\",\n\t\"./kn\": \"PpIw\",\n\t\"./kn.js\": \"PpIw\",\n\t\"./ko\": \"Ivi+\",\n\t\"./ko.js\": \"Ivi+\",\n\t\"./ku\": \"JCF/\",\n\t\"./ku.js\": \"JCF/\",\n\t\"./ky\": \"lgnt\",\n\t\"./ky.js\": \"lgnt\",\n\t\"./lb\": \"RAwQ\",\n\t\"./lb.js\": \"RAwQ\",\n\t\"./lo\": \"sp3z\",\n\t\"./lo.js\": \"sp3z\",\n\t\"./lt\": \"JvlW\",\n\t\"./lt.js\": \"JvlW\",\n\t\"./lv\": \"uXwI\",\n\t\"./lv.js\": \"uXwI\",\n\t\"./me\": \"KTz0\",\n\t\"./me.js\": \"KTz0\",\n\t\"./mi\": \"aIsn\",\n\t\"./mi.js\": \"aIsn\",\n\t\"./mk\": \"aQkU\",\n\t\"./mk.js\": \"aQkU\",\n\t\"./ml\": \"AvvY\",\n\t\"./ml.js\": \"AvvY\",\n\t\"./mn\": \"lYtQ\",\n\t\"./mn.js\": \"lYtQ\",\n\t\"./mr\": \"Ob0Z\",\n\t\"./mr.js\": \"Ob0Z\",\n\t\"./ms\": \"6+QB\",\n\t\"./ms-my\": \"ZAMP\",\n\t\"./ms-my.js\": \"ZAMP\",\n\t\"./ms.js\": \"6+QB\",\n\t\"./mt\": \"G0Uy\",\n\t\"./mt.js\": \"G0Uy\",\n\t\"./my\": \"honF\",\n\t\"./my.js\": \"honF\",\n\t\"./nb\": \"bOMt\",\n\t\"./nb.js\": \"bOMt\",\n\t\"./ne\": \"OjkT\",\n\t\"./ne.js\": \"OjkT\",\n\t\"./nl\": \"+s0g\",\n\t\"./nl-be\": \"2ykv\",\n\t\"./nl-be.js\": \"2ykv\",\n\t\"./nl.js\": \"+s0g\",\n\t\"./nn\": \"uEye\",\n\t\"./nn.js\": \"uEye\",\n\t\"./oc-lnc\": \"Fnuy\",\n\t\"./oc-lnc.js\": \"Fnuy\",\n\t\"./pa-in\": \"8/+R\",\n\t\"./pa-in.js\": \"8/+R\",\n\t\"./pl\": \"jVdC\",\n\t\"./pl.js\": \"jVdC\",\n\t\"./pt\": \"8mBD\",\n\t\"./pt-br\": \"0tRk\",\n\t\"./pt-br.js\": \"0tRk\",\n\t\"./pt.js\": \"8mBD\",\n\t\"./ro\": \"lyxo\",\n\t\"./ro.js\": \"lyxo\",\n\t\"./ru\": \"lXzo\",\n\t\"./ru.js\": \"lXzo\",\n\t\"./sd\": \"Z4QM\",\n\t\"./sd.js\": \"Z4QM\",\n\t\"./se\": \"//9w\",\n\t\"./se.js\": \"//9w\",\n\t\"./si\": \"7aV9\",\n\t\"./si.js\": \"7aV9\",\n\t\"./sk\": \"e+ae\",\n\t\"./sk.js\": \"e+ae\",\n\t\"./sl\": \"gVVK\",\n\t\"./sl.js\": \"gVVK\",\n\t\"./sq\": \"yPMs\",\n\t\"./sq.js\": \"yPMs\",\n\t\"./sr\": \"zx6S\",\n\t\"./sr-cyrl\": \"E+lV\",\n\t\"./sr-cyrl.js\": \"E+lV\",\n\t\"./sr.js\": \"zx6S\",\n\t\"./ss\": \"Ur1D\",\n\t\"./ss.js\": \"Ur1D\",\n\t\"./sv\": \"X709\",\n\t\"./sv.js\": \"X709\",\n\t\"./sw\": \"dNwA\",\n\t\"./sw.js\": \"dNwA\",\n\t\"./ta\": \"PeUW\",\n\t\"./ta.js\": \"PeUW\",\n\t\"./te\": \"XLvN\",\n\t\"./te.js\": \"XLvN\",\n\t\"./tet\": \"V2x9\",\n\t\"./tet.js\": \"V2x9\",\n\t\"./tg\": \"Oxv6\",\n\t\"./tg.js\": \"Oxv6\",\n\t\"./th\": \"EOgW\",\n\t\"./th.js\": \"EOgW\",\n\t\"./tk\": \"Wv91\",\n\t\"./tk.js\": \"Wv91\",\n\t\"./tl-ph\": \"Dzi0\",\n\t\"./tl-ph.js\": \"Dzi0\",\n\t\"./tlh\": \"z3Vd\",\n\t\"./tlh.js\": \"z3Vd\",\n\t\"./tr\": \"DoHr\",\n\t\"./tr.js\": \"DoHr\",\n\t\"./tzl\": \"z1FC\",\n\t\"./tzl.js\": \"z1FC\",\n\t\"./tzm\": \"wQk9\",\n\t\"./tzm-latn\": \"tT3J\",\n\t\"./tzm-latn.js\": \"tT3J\",\n\t\"./tzm.js\": \"wQk9\",\n\t\"./ug-cn\": \"YRex\",\n\t\"./ug-cn.js\": \"YRex\",\n\t\"./uk\": \"raLr\",\n\t\"./uk.js\": \"raLr\",\n\t\"./ur\": \"UpQW\",\n\t\"./ur.js\": \"UpQW\",\n\t\"./uz\": \"Loxo\",\n\t\"./uz-latn\": \"AQ68\",\n\t\"./uz-latn.js\": \"AQ68\",\n\t\"./uz.js\": \"Loxo\",\n\t\"./vi\": \"KSF8\",\n\t\"./vi.js\": \"KSF8\",\n\t\"./x-pseudo\": \"/X5v\",\n\t\"./x-pseudo.js\": \"/X5v\",\n\t\"./yo\": \"fzPg\",\n\t\"./yo.js\": \"fzPg\",\n\t\"./zh-cn\": \"XDpg\",\n\t\"./zh-cn.js\": \"XDpg\",\n\t\"./zh-hk\": \"SatO\",\n\t\"./zh-hk.js\": \"SatO\",\n\t\"./zh-mo\": \"OmwH\",\n\t\"./zh-mo.js\": \"OmwH\",\n\t\"./zh-tw\": \"kOpN\",\n\t\"./zh-tw.js\": \"kOpN\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"RnhZ\";","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"crnd\";","import { LanguageOptions } from '@igo2/core';\r\nimport {\r\n  SearchSourceOptions,\r\n  ImportExportServiceOptions,\r\n  CatalogServiceOptions,\r\n  Projection,\r\n  CommonVectorStyleOptions\r\n} from '@igo2/geo';\r\n\r\ninterface Environment {\r\n  production: boolean;\r\n  igo: {\r\n    app: {\r\n      forceCoordsNA: boolean;\r\n    };\r\n    catalog?: CatalogServiceOptions;\r\n    importExport?: ImportExportServiceOptions;\r\n    language?: LanguageOptions;\r\n    searchSources?: { [key: string]: SearchSourceOptions };\r\n    projections?: Projection[];\r\n    interactiveTour?: { tourInMobile: boolean; pathToConfigFile: string };\r\n    depot?: { url: string; trainingGuides?: string[]; };\r\n    queryOverlayStyle?: {\r\n      base?: CommonVectorStyleOptions,\r\n      selection?: CommonVectorStyleOptions,\r\n      focus?: CommonVectorStyleOptions\r\n    };\r\n    searchOverlayStyle?: {\r\n      base?: CommonVectorStyleOptions,\r\n      selection?: CommonVectorStyleOptions,\r\n      focus?: CommonVectorStyleOptions\r\n    };\r\n  };\r\n}\r\n\r\nexport const environment: Environment = {\r\n  production: true,\r\n  igo: {\r\n    app: {\r\n      forceCoordsNA: false\r\n    },\r\n    catalog: {\r\n      sources: [\r\n        {\r\n          id: 'Gououvert',\r\n          title: 'Gouvouvert',\r\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi'\r\n        },\r\n        {\r\n          id: 'glace',\r\n          title: 'Carte de glace',\r\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/radarsat.fcgi',\r\n          showLegend: true\r\n        }\r\n      ]\r\n    },\r\n    depot: {\r\n      url: '/apis/depot'\r\n    },\r\n    importExport: {\r\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/ogre'\r\n    },\r\n    language: {\r\n      prefix: './locale/'\r\n    },\r\n    interactiveTour: {\r\n      tourInMobile: true,\r\n      pathToConfigFile: './config/interactiveTour.json'\r\n    },\r\n    searchSources: {\r\n      nominatim: {\r\n        available: false\r\n      },\r\n      storedqueries: {\r\n        available: false\r\n      },\r\n      icherche: {\r\n        searchUrl: 'https://geoegl.msp.gouv.qc.ca/apis/icherche',\r\n        order: 2,\r\n        params: {\r\n          limit: '8'\r\n        }\r\n      },\r\n      coordinatesreverse: {\r\n        showInPointerSummary: true\r\n      },\r\n      icherchereverse: {\r\n        showInPointerSummary: true,\r\n        searchUrl: 'https://geoegl.msp.gouv.qc.ca/apis/terrapi',\r\n        order: 3,\r\n        enabled: true\r\n      },\r\n      ilayer: {\r\n        searchUrl: 'https://geoegl.msp.gouv.qc.ca/apis/icherche/layers',\r\n        order: 4,\r\n        params: {\r\n          limit: '5'\r\n        }\r\n      },\r\n      cadastre: {\r\n        enabled: false\r\n      }\r\n    },\r\n    projections: [\r\n      {\r\n        code: 'EPSG:32198',\r\n        alias: 'Quebec Lambert',\r\n        def:\r\n          '+proj=lcc +lat_1=60 +lat_2=46 +lat_0=44 +lon_0=-68.5 +x_0=0 +y_0=0 \\\r\n          +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs',\r\n        extent: [-799574, 45802, 891595.4, 1849567.5]\r\n      },\r\n      {\r\n        code: 'EPSG:3798',\r\n        alias: 'MTQ Lambert',\r\n        def:\r\n          '+proj=lcc +lat_1=50 +lat_2=46 +lat_0=44 +lon_0=-70 +x_0=800000 +y_0=0 \\\r\n          +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs',\r\n        extent: [31796.5834, 158846.2231, 1813323.4284, 2141241.0978]\r\n      }\r\n    ],\r\n    searchOverlayStyle: {\r\n      base: {\r\n        markerColor: '#5ed0fb', // marker fill\r\n        markerOpacity: 0.8, // marker opacity not applied if a rgba markerColor is provided\r\n        markerOutlineColor: '#a7e7ff', // marker contour\r\n        fillColor: '#5ed0fb', // poly\r\n        fillOpacity: 0.2, // poly fill opacity not applied if a rgba fillColor is provided\r\n        strokeColor: '#5ed0fb', // line and poly\r\n        strokeOpacity: 0.7, // line and poly not applied if a rgba strokeColor is provided\r\n        strokeWidth: 2 // line and poly\r\n      },\r\n      focus: {\r\n        markerColor: '#5ed0fb', // marker fill\r\n        markerOpacity: 1, // marker opacity not applied if a rgba markerColor is provided\r\n        markerOutlineColor: '#DFF7FF', // marker contour\r\n        fillColor: '#5ed0fb', // poly\r\n        fillOpacity: 0.3, // poly fill opacity not applied if a rgba fillColor is provided\r\n        strokeColor: '#DFF7FF', // line and poly\r\n        strokeOpacity: 1, // line and poly not applied if a rgba strokeColor is provided\r\n        strokeWidth: 2 // line and poly\r\n      },\r\n      selection: {\r\n        markerColor: '#00a1de', // marker fill\r\n        markerOpacity: 1, // marker opacity not applied if a rgba markerColor is provided\r\n        markerOutlineColor: '#ffffff', // marker contour\r\n        fillColor: '#00a1de', // poly\r\n        fillOpacity: 0.3, // poly fill opacity not applied if a rgba fillColor is provided\r\n        strokeColor: '#00A1DE', // line and poly\r\n        strokeOpacity: 1, // line and poly not applied if a rgba strokeColor is provided\r\n        strokeWidth: 2 // line and poly\r\n      }\r\n    },\r\n    queryOverlayStyle: {\r\n      base: {\r\n        markerColor: '#5ed0fb', // marker fill\r\n        markerOpacity: 0.8, // marker opacity not applied if a rgba markerColor is provided\r\n        markerOutlineColor: '#a7e7ff', // marker contour\r\n        fillColor: '#5ed0fb', // poly\r\n        fillOpacity: 0.2, // poly fill opacity not applied if a rgba fillColor is provided\r\n        strokeColor: '#5ed0fb', // line and poly\r\n        strokeOpacity: 0.7, // line and poly not applied if a rgba strokeColor is provided\r\n        strokeWidth: 2 // line and poly\r\n      },\r\n      focus: {\r\n        markerColor: '#5ed0fb', // marker fill\r\n        markerOpacity: 1, // marker opacity not applied if a rgba markerColor is provided\r\n        markerOutlineColor: '#DFF7FF', // marker contour\r\n        fillColor: '#5ed0fb', // poly\r\n        fillOpacity: 0.3, // poly fill opacity not applied if a rgba fillColor is provided\r\n        strokeColor: '#DFF7FF', // line and poly\r\n        strokeOpacity: 1, // line and poly not applied if a rgba strokeColor is provided\r\n        strokeWidth: 2 // line and poly\r\n      },\r\n      selection: {\r\n        markerColor: '#00a1de', // marker fill\r\n        markerOpacity: 1, // marker opacity not applied if a rgba markerColor is provided\r\n        markerOutlineColor: '#ffffff', // marker contour\r\n        fillColor: '#00a1de', // poly\r\n        fillOpacity: 0.3, // poly fill opacity not applied if a rgba fillColor is provided\r\n        strokeColor: '#00A1DE', // line and poly\r\n        strokeOpacity: 1, // line and poly not applied if a rgba strokeColor is provided\r\n        strokeWidth: 2 // line and poly\r\n      }\r\n    }\r\n  }\r\n};\r\n","<ng-container *ngFor=\"let element of mapOverlay; let i = index\">\r\n  <div class=\"mapOverlayDefault\" [ngClass]=\"element.cssClass\"\r\n       [style.position]=\"element.fixed ? 'fixed' : 'absolute'\"\r\n       [style.marginLeft]=\"element.marginLeft\"\r\n       [style.marginRight]=\"element.marginRight\"\r\n       [style.marginTop]=\"element.marginTop\"\r\n       [style.marginBottom]=\"element.marginBottom\"\r\n       [style.fontSize]=\"element.fontSize\">\r\n    <a *ngIf=\"element.link; else templateNoLink\"\r\n        target=\"_blank\" [href]='element.link'>\r\n        {{ element.text }}\r\n        <ng-container *ngIf=\"element.imgSrc\">\r\n          <img [src]=\"element.imgSrc\"\r\n               [alt]=\"element.alt\"\r\n               [ngStyle]=\"{ 'width': element.imgSize }\">\r\n        </ng-container>\r\n    </a>\r\n\r\n\r\n  <ng-template #templateNoLink>\r\n    {{ element.text }}\r\n    <ng-container *ngIf=\"element.imgSrc\">\r\n      <img [src]=\"element.imgSrc\" [alt]=\"element.alt\" [ngStyle]=\"{ 'width': element.imgSize }\">\r\n    </ng-container>\r\n\r\n  </ng-template>\r\n  </div>\r\n</ng-container>\r\n","import { Component, AfterViewInit, OnDestroy } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { Context, ContextService } from '@igo2/context';\r\nimport { MediaService, ConfigService } from '@igo2/core';\r\nimport { MapOverlay } from './map-overlay.interface';\r\n\r\n@Component({\r\n  selector: 'app-map-overlay',\r\n  templateUrl: './map-overlay.component.html',\r\n  styleUrls: ['./map-overlay.component.scss']\r\n})\r\n\r\nexport class MapOverlayComponent implements AfterViewInit, OnDestroy {\r\n  public mapOverlay: MapOverlay[] = [];\r\n  private context$$: Subscription;\r\n  private media$$: Subscription;\r\n  private context: Context;\r\n\r\n  constructor(\r\n    private contextService: ContextService,\r\n    private mediaService: MediaService,\r\n    private configService: ConfigService\r\n  ) { }\r\n\r\n  ngAfterViewInit() {\r\n    this.context$$ = this.contextService.context$.subscribe(context => {\r\n        this.handleContextChange(context);\r\n        this.context = context;\r\n        }\r\n    );\r\n    this.media$$ = this.mediaService.media$.subscribe(media =>\r\n      this.handleContextChange(this.context)\r\n    );\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.context$$.unsubscribe();\r\n    this.media$$.unsubscribe();\r\n  }\r\n\r\n  private handleContextChange(context: Context) {\r\n    let mapOverlay = [];\r\n    if (context !== undefined) {\r\n      this.mapOverlay = [];\r\n\r\n      if (context['mapOverlay']) {\r\n        mapOverlay = context['mapOverlay'];\r\n      } else if (this.configService.getConfig('mapOverlay')) {\r\n        mapOverlay = this.configService.getConfig('mapOverlay');\r\n      }\r\n      for (const overlay of mapOverlay) {\r\n\r\n        // If no media define use default to desktop, display only if current media is on context definition\r\n        if ((!overlay.media && this.mediaService.getMedia() === 'desktop') ||\r\n        (overlay.media && overlay.media.includes(this.mediaService.getMedia()))) {\r\n          this.mapOverlay.push(overlay);\r\n        }\r\n      }\r\n    }\r\n\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\n\r\nimport { MapOverlayComponent } from './map-overlay.component';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule\r\n  ],\r\n  exports: [MapOverlayComponent],\r\n  declarations: [MapOverlayComponent]\r\n})\r\nexport class MapOverlayModule {}\r\n","<div>\r\n  <div class=\"app-expansion-panel-trigger-container\">\r\n    <button mat-icon-button (click)=\"onToggleClick()\" \r\n    [matTooltip]=\"(!expanded ? 'workspace.open' : 'workspace.close') | translate\"\r\n    color=\"primary\">\r\n      <mat-icon *ngIf=\"!expanded\" svgIcon=\"launch\"></mat-icon>\r\n      <mat-icon *ngIf=\"expanded\" style=\"transform: rotate(180deg)\" svgIcon=\"launch\"></mat-icon>\r\n    </button>\r\n  </div>\r\n\r\n  <div class=\"app-expansion-panel-content\">\r\n    <ng-content></ng-content>\r\n  </div>\r\n</div>\r\n","import {\r\n  Component,\r\n  Input,\r\n  Output,\r\n  EventEmitter,\r\n  HostBinding,\r\n  ChangeDetectionStrategy\r\n} from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-expansion-panel-header',\r\n  templateUrl: './expansion-panel-header.component.html',\r\n  styleUrls: ['./expansion-panel-header.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class ExpansionPanelHeaderComponent {\r\n  @Input()\r\n  get expanded(): boolean {\r\n    return this._expanded;\r\n  }\r\n  set expanded(value: boolean) {\r\n    if (value === this._expanded) {\r\n      return;\r\n    }\r\n\r\n    this._expanded = value;\r\n    this.expandedChange.emit(this._expanded);\r\n  }\r\n  private _expanded: boolean;\r\n\r\n  @Output() expandedChange = new EventEmitter<boolean>();\r\n\r\n  @HostBinding('class.app-expansion-panel-header-expanded')\r\n  get hasExpandedClass() {\r\n    return this.expanded;\r\n  }\r\n\r\n  constructor() {}\r\n\r\n  onToggleClick() {\r\n    this.expanded = !this.expanded;\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  Input,\r\n  Output,\r\n  EventEmitter,\r\n  HostBinding,\r\n  ChangeDetectionStrategy\r\n} from '@angular/core';\r\n\r\nimport { showContent } from './expansion-panel.animations';\r\n\r\n@Component({\r\n  selector: 'app-expansion-panel',\r\n  templateUrl: './expansion-panel.component.html',\r\n  styleUrls: ['./expansion-panel.component.scss'],\r\n  animations: [showContent()],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class ExpansionPanelComponent {\r\n  @Input()\r\n  get expanded(): boolean {\r\n    return this._expanded;\r\n  }\r\n  set expanded(value: boolean) {\r\n    if (value === this._expanded) {\r\n      return;\r\n    }\r\n\r\n    this._expanded = value;\r\n    this.expandedChange.emit(this._expanded);\r\n  }\r\n  private _expanded: boolean;\r\n\r\n  @Input() maximized: Boolean = false;\r\n\r\n  @Input()\r\n  get backdropShown(): boolean {\r\n    return this._backdropShown;\r\n  }\r\n  set backdropShown(value: boolean) {\r\n    this._backdropShown = value;\r\n  }\r\n  private _backdropShown: boolean;\r\n\r\n  @Output() expandedChange = new EventEmitter<boolean>();\r\n\r\n  @HostBinding('class.app-expansion-panel-expanded')\r\n  get hasExpandedClass() {\r\n    return this.expanded && !this.maximized;\r\n  }\r\n\r\n  @HostBinding('class.app-expansion-panel-expanded-maximized')\r\n  get hasExpandedFullClass() {\r\n    return this.expanded && this.maximized;\r\n  }\r\n\r\n  constructor() {}\r\n\r\n  onBackdropClick() {\r\n    this.expanded = false;\r\n    this.backdropShown = false;\r\n  }\r\n}\r\n","<div>\r\n\r\n  <div class=\"app-expansion-panel-container\">\r\n    <igo-backdrop\r\n      [shown]=\"backdropShown\"\r\n      (click)=\"onBackdropClick()\">\r\n    </igo-backdrop>\r\n\r\n    <app-expansion-panel-header [(expanded)]=\"expanded\">\r\n      <ng-content select=\"[expansionPanelHeader]\"></ng-content>\r\n    </app-expansion-panel-header>\r\n\r\n    <div\r\n      class=\"app-expansion-panel-content mat-elevation-z4\"\r\n      [@showContent]=\"expanded\">\r\n      <ng-content></ng-content>\r\n    </div>\r\n  </div>\r\n\r\n</div>\r\n","import {\r\n  trigger,\r\n  state,\r\n  style,\r\n  transition,\r\n  animate,\r\n  AnimationTriggerMetadata\r\n} from '@angular/animations';\r\n\r\nexport function showContent(\r\n  duration = '150ms',\r\n  delay = '300ms',\r\n  easing = 'ease-in-out'\r\n): AnimationTriggerMetadata {\r\n  return trigger('showContent', [\r\n    state(\r\n      'true',\r\n      style({\r\n        opacity: 1,\r\n        display: 'block'\r\n      })\r\n    ),\r\n    state(\r\n      'false',\r\n      style({\r\n        opacity: 0,\r\n        display: 'none'\r\n      })\r\n    ),\r\n    transition('false => true', animate(`${duration} ${delay} ${easing}`)),\r\n    transition('true => false', animate('0ms'))\r\n  ]);\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatListModule } from '@angular/material/list';\r\nimport { MatMenuModule } from '@angular/material/menu';\r\nimport { MatSelectModule } from '@angular/material/select';\r\n\r\nimport { IgoLanguageModule } from '@igo2/core';\r\nimport { IgoBackdropModule } from '@igo2/common';\r\n\r\nimport { ExpansionPanelComponent } from './expansion-panel.component';\r\nimport { ExpansionPanelHeaderComponent } from './expansion-panel-header.component';\r\nimport { MatTooltipModule } from '@angular/material/tooltip';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    MatButtonModule,\r\n    MatIconModule,\r\n    MatMenuModule,\r\n    MatListModule,\r\n    MatSelectModule,\r\n    MatTooltipModule,\r\n    IgoLanguageModule,\r\n    IgoBackdropModule\r\n  ],\r\n  exports: [ExpansionPanelComponent],\r\n  declarations: [ExpansionPanelComponent, ExpansionPanelHeaderComponent]\r\n})\r\nexport class AppExpansionPanelModule {}\r\n","<ng-template #toast>\r\n  <igo-panel\r\n    *ngIf=\"store.entities$ | async\"\r\n    [ngClass] = \"getClassPanel()\"\r\n    [title]=\"resultSelected$.value ? getTitle(resultSelected$.value) :('toastPanel.title' | translate )\"\r\n    (click)=\"onToggleClick($event)\"\r\n    tabindex=\"0\"\r\n    (keydown)=\"handleKeyboardEvent($event)\">\r\n\r\n    <igo-actionbar\r\n      id=\"igo-actionbar\"\r\n      panelLeftButton\r\n      [store]=\"actionStore\"\r\n      [withIcon]=\"true\"\r\n      [icon]=\"icon\"\r\n      [withTitle]=\"actionbarMode === 'overlay'\"\r\n      [horizontal]=\"true\"\r\n      [mode]=\"actionbarMode\">\r\n    </igo-actionbar>\r\n\r\n    <button\r\n      *ngIf=\"resultSelected$.value\"\r\n      mat-icon-button\r\n      igoStopPropagation\r\n      panelLeftButton\r\n      [matTooltip]=\"((isSelectedResultOutOfView$ | async) ? 'toastPanel.zoomOnFeatureTooltipOutOfView' : 'toastPanel.zoomOnFeatureTooltip') | translate\"\r\n      matTooltipShowDelay=\"500\"\r\n      (click)=\"zoomTo()\">\r\n      <mat-icon\r\n      [matBadge]=\"(isSelectedResultOutOfView$ | async) ? '!' : ''\"\r\n      matBadgeColor=\"accent\"\r\n      matBadgeSize=\"small\"\r\n      [matBadgeHidden]=\"(isSelectedResultOutOfView$ | async)!==true\"     \r\n      svgIcon=\"magnify-plus-outline\"></mat-icon>\r\n    </button>\r\n\r\n    <button\r\n      *ngIf=\"resultSelected$.value\"\r\n      [disabled]=\"results[0].meta.id === resultSelected$.value.meta.id\"\r\n      mat-icon-button\r\n      igoStopPropagation\r\n      panelLeftButton\r\n      [matTooltip]=\"'toastPanel.previousFeatureTooltip' | translate\"\r\n      matTooltipShowDelay=\"500\"\r\n      (click)=\"previousResult()\">\r\n      <mat-icon svgIcon=\"chevron-left\"></mat-icon>\r\n    </button>\r\n\r\n    <button\r\n      *ngIf=\"resultSelected$.value\"\r\n      [disabled]=\"results[results.length-1].meta.id === resultSelected$.value.meta.id\"\r\n      mat-icon-button\r\n      igoStopPropagation\r\n      panelRightButton\r\n      [matTooltip]=\"'toastPanel.nextFeatureTooltip' | translate\"\r\n      matTooltipShowDelay=\"500\"\r\n      (click)=\"nextResult()\">\r\n      <mat-icon svgIcon=\"chevron-right\"></mat-icon>\r\n    </button>\r\n\r\n    <button\r\n     *ngIf = \"isDesktop()\"\r\n      mat-icon-button\r\n      igoStopPropagation\r\n      panelRightButton\r\n      (click)=\"resizeWindows()\"\r\n      [matTooltip]=\"((this.fullExtent$ | async) ? 'toastPanel.standardExtentTooltip' : 'toastPanel.fullExtentTooltip') | translate\"\r\n      matTooltipShowDelay=\"500\">\r\n      <mat-icon svgIcon={{iconResizeWindows}}></mat-icon>\r\n    </button>\r\n    <button\r\n      mat-icon-button\r\n      igoStopPropagation\r\n      panelRightButton\r\n      (click)=\"clear()\">\r\n      <mat-icon svgIcon=\"close\"></mat-icon>\r\n    </button>\r\n\r\n    <div #content class=\"toast-content\">\r\n\r\n      <igo-feature-details\r\n        *ngIf=\"resultSelected$.value\"\r\n        [feature]=\"resultSelected$.value.data\"\r\n        (htmlDisplayEvent)=setHtmlDisplay($event)>\r\n      </igo-feature-details>\r\n\r\n      <igo-search-results\r\n        *ngIf=\"!resultSelected$.value\"\r\n        [map]=\"map\"\r\n        [store]=\"store\"\r\n        [showIcons]=\"true\"\r\n        [withZoomButton]=\"withZoomButton\"\r\n        (resultFocus)=\"focusResult($event)\"\r\n        (resultUnfocus)=\"unfocusResult($event, true)\"\r\n        (resultSelect)=\"selectResult($event)\">\r\n      </igo-search-results>\r\n    </div>\r\n  </igo-panel>\r\n</ng-template>\r\n\r\n<div *ngIf=\"isMobile(); else toast\"\r\nclass=\"swipe-fix\"\r\n(swipeleft)=\"swipe($event.type)\"\r\n(swiperight)=\"swipe($event.type)\"\r\n(swipeup)=\"swipe($event.type)\"\r\n(swipedown)=\"swipe($event.type)\">\r\n\r\n<ng-template [ngTemplateOutlet]=\"toast\"></ng-template>\r\n</div>\r\n","import {\r\n  Component,\r\n  Input,\r\n  Output,\r\n  EventEmitter,\r\n  HostBinding,\r\n  HostListener,\r\n  ChangeDetectionStrategy,\r\n  OnInit,\r\n  OnDestroy\r\n} from '@angular/core';\r\nimport { BehaviorSubject, Observable, combineLatest, Subscription } from 'rxjs';\r\nimport { debounceTime, map, skipWhile, tap } from 'rxjs/operators';\r\nimport olFormatGeoJSON from 'ol/format/GeoJSON';\r\nimport olFeature from 'ol/Feature';\r\nimport olPoint from 'ol/geom/Point';\r\n\r\nimport {\r\n  getEntityTitle,\r\n  EntityStore,\r\n  ActionStore,\r\n  Action,\r\n  ActionbarMode\r\n} from '@igo2/common';\r\nimport {\r\n  Feature,\r\n  SearchResult,\r\n  IgoMap,\r\n  FeatureMotion,\r\n  moveToOlFeatures,\r\n  featureToOl,\r\n  featuresAreTooDeepInView,\r\n  featureFromOl,\r\n  getCommonVectorStyle,\r\n  getCommonVectorSelectedStyle,\r\n  featuresAreOutOfView,\r\n  computeOlFeaturesExtent\r\n} from '@igo2/geo';\r\nimport {\r\n  Media,\r\n  MediaService,\r\n  LanguageService,\r\n  StorageService,\r\n  StorageScope,\r\n  StorageServiceEvent\r\n} from '@igo2/core';\r\nimport { QueryState, StorageState } from '@igo2/integration';\r\n\r\n@Component({\r\n  selector: 'app-toast-panel',\r\n  templateUrl: './toast-panel.component.html',\r\n  styleUrls: ['./toast-panel.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class ToastPanelComponent implements OnInit, OnDestroy {\r\n  static SWIPE_ACTION = {\r\n    RIGHT: 'swiperight',\r\n    LEFT: 'swipeleft',\r\n    UP: 'swipeup',\r\n    DOWN: 'swipedown'\r\n  };\r\n\r\n  get storageService(): StorageService {\r\n    return this.storageState.storageService;\r\n  }\r\n\r\n  @Input()\r\n  get map(): IgoMap {\r\n    return this._map;\r\n  }\r\n  set map(value: IgoMap) {\r\n    this._map = value;\r\n  }\r\n  private _map: IgoMap;\r\n\r\n  @Input()\r\n  get store(): EntityStore<SearchResult<Feature>> {\r\n    return this._store;\r\n  }\r\n  set store(value: EntityStore<SearchResult<Feature>>) {\r\n    this._store = value;\r\n    this.store.entities$.subscribe((_entities) => {\r\n      this.unselectResult();\r\n    });\r\n  }\r\n  private _store: EntityStore<SearchResult<Feature>>;\r\n\r\n  @Input()\r\n  get opened(): boolean {\r\n    return this._opened;\r\n  }\r\n  set opened(value: boolean) {\r\n    if (value !== !this._opened) {\r\n      return;\r\n    }\r\n    this._opened = value;\r\n    this.storageService.set('toastOpened', value, StorageScope.SESSION);\r\n    this.openedChange.emit(value);\r\n  }\r\n  private _opened = true;\r\n\r\n  @Input() hasFeatureEmphasisOnSelection: Boolean = false;\r\n\r\n  get zoomAuto(): boolean {\r\n    return this._zoomAuto;\r\n  }\r\n  set zoomAuto(value) {\r\n    if (value !== !this._zoomAuto) {\r\n      return;\r\n    }\r\n    this._zoomAuto = value;\r\n    this.zoomAuto$.next(value);\r\n    this.storageService.set('zoomAuto', value);\r\n  }\r\n  private _zoomAuto = false;\r\n\r\n  // To allow the toast to use much larger extent on the map\r\n  get fullExtent(): boolean {\r\n    return this._fullExtent;\r\n  }\r\n  set fullExtent(value) {\r\n    if (value !== !this._fullExtent) {\r\n      return;\r\n    }\r\n    this._fullExtent = value;\r\n    this.fullExtent$.next(value);\r\n    this.fullExtentEvent.emit(value);\r\n    this.storageService.set('fullExtent', value);\r\n  }\r\n  private _fullExtent = false;\r\n\r\n  public fullExtent$: BehaviorSubject<boolean> = new BehaviorSubject(\r\n    this.fullExtent\r\n  );\r\n  public isHtmlDisplay = false;\r\n  public iconResizeWindows = '';\r\n\r\n  public icon = 'menu';\r\n\r\n  public actionStore = new ActionStore([]);\r\n  public actionbarMode = ActionbarMode.Overlay;\r\n\r\n  private multiple$ = new BehaviorSubject(false);\r\n  private isResultSelected$ = new BehaviorSubject(false);\r\n  public isSelectedResultOutOfView$ = new BehaviorSubject(false);\r\n  private isSelectedResultOutOfView$$: Subscription;\r\n  private storageChange$$: Subscription;\r\n  private initialized = true;\r\n\r\n  private format = new olFormatGeoJSON();\r\n\r\n  private resultOrResolution$$: Subscription;\r\n  private focusedResult$: BehaviorSubject<\r\n    SearchResult<Feature>\r\n  > = new BehaviorSubject(undefined);\r\n  private abstractFocusedOrSelectedResult: Feature;\r\n\r\n  public withZoomButton = true;\r\n  zoomAuto$: BehaviorSubject<boolean> = new BehaviorSubject(false);\r\n\r\n  @Output() openedChange = new EventEmitter<boolean>();\r\n\r\n  @Output() fullExtentEvent = new EventEmitter<boolean>();\r\n  @Output() windowHtmlDisplayEvent = new EventEmitter<boolean>();\r\n\r\n  resultSelected$ = new BehaviorSubject<SearchResult<Feature>>(undefined);\r\n\r\n  // @HostBinding('class.app-toast-panel-opened')\r\n  // get hasOpenedClass() {\r\n  //   return this.opened;\r\n  // }\r\n\r\n  // @HostBinding('class.app-full-toast-panel-collapsed')\r\n  // get hasFullCollapsedClass() {\r\n  //   return !this.opened && this.fullExtent;\r\n  // }\r\n  getClassPanel() {\r\n    return {\r\n      'app-toast-panel-opened' : this.opened && !this.fullExtent && !this.isHtmlDisplay,\r\n      'app-full-toast-panel-opened' :\r\n        this.opened && this.fullExtent &&\r\n        !this.isHtmlDisplay,\r\n\r\n      'app-toast-panel-html' :\r\n        this.opened &&\r\n        !this.fullExtent &&\r\n        this.resultSelected$.value &&\r\n        this.isHtmlDisplay,\r\n\r\n      'app-toast-panel-html-large' :\r\n        this.opened &&\r\n        this.fullExtent &&\r\n        this.resultSelected$.value &&\r\n        this.isHtmlDisplay,\r\n\r\n      'app-toast-panel-collapsed': !this.opened && !this.fullExtent && !this.isHtmlDisplay,\r\n      'app-full-toast-panel-collapsed' : !this.opened && this.fullExtent && !this.isHtmlDisplay,\r\n      'app-toast-panel-html-collapsed' : !this.opened && this.isHtmlDisplay\r\n    };\r\n  }\r\n\r\n\r\n  @HostBinding('style.visibility')\r\n  get displayStyle() {\r\n    if (this.results.length) {\r\n      if (this.results.length === 1 && this.initialized) {\r\n        this.selectResult(this.results[0]);\r\n      }\r\n      return 'visible';\r\n    }\r\n    return 'hidden';\r\n  }\r\n\r\n  // @HostBinding('class.app-full-toast-panel-opened')\r\n  // get hasFullOpenedClass() {\r\n  //   return this.opened && this.fullExtent;\r\n  // }\r\n\r\n  @HostListener('document:keydown.escape', ['$event']) onEscapeHandler(\r\n    event: KeyboardEvent\r\n  ) {\r\n    this.clear();\r\n  }\r\n\r\n  @HostListener('document:keydown.backspace', ['$event']) onBackHandler(\r\n    event: KeyboardEvent\r\n  ) {\r\n    this.unselectResult();\r\n  }\r\n\r\n  @HostListener('document:keydown.z', ['$event']) onZoomHandler(\r\n    event: KeyboardEvent\r\n  ) {\r\n    if (this.isResultSelected$.getValue() === true) {\r\n      const localOlFeature = this.format.readFeature(\r\n        this.resultSelected$.getValue().data,\r\n        {\r\n          dataProjection: this.resultSelected$.getValue().data.projection,\r\n          featureProjection: this.map.projection\r\n        }\r\n      );\r\n      moveToOlFeatures(this.map, [localOlFeature], FeatureMotion.Default);\r\n    }\r\n  }\r\n\r\n  get results(): SearchResult<Feature>[] {\r\n    // return this.store.view.filter((e) => e.meta.dataType === FEATURE).all();\r\n    return this.store.all();\r\n  }\r\n\r\n  get multiple(): Observable<boolean> {\r\n    this.results.length\r\n      ? this.multiple$.next(true)\r\n      : this.multiple$.next(false);\r\n    return this.multiple$;\r\n  }\r\n\r\n  constructor(\r\n    public mediaService: MediaService,\r\n    public languageService: LanguageService,\r\n    private storageState: StorageState,\r\n    private queryState: QueryState\r\n  ) {\r\n    this.opened = this.storageService.get('toastOpened') as boolean;\r\n    this.zoomAuto = this.storageService.get('zoomAuto') as boolean;\r\n    this.fullExtent = this.storageService.get('fullExtent') as boolean;\r\n    this.setResizeWindowIcon();\r\n  }\r\n\r\n  private monitorResultOutOfView() {\r\n    this.isSelectedResultOutOfView$$ = combineLatest([\r\n      this.map.viewController.state$,\r\n      this.resultSelected$\r\n    ])\r\n      .pipe(debounceTime(100))\r\n      .subscribe((bunch) => {\r\n        const selectedResult = bunch[1];\r\n        if (!selectedResult) {\r\n          this.isSelectedResultOutOfView$.next(false);\r\n          return;\r\n        }\r\n        const selectedOlFeature = featureToOl(selectedResult.data, this.map.projection);\r\n        const selectedOlFeatureExtent = computeOlFeaturesExtent(this.map, [selectedOlFeature]);\r\n        this.isSelectedResultOutOfView$.next(featuresAreOutOfView(this.map, selectedOlFeatureExtent));\r\n      });\r\n  }\r\n\r\n\r\n  ngOnInit() {\r\n    this.store.entities$.subscribe(() => {\r\n      this.initialized = true;\r\n    });\r\n    this.monitorResultOutOfView();\r\n\r\n    let latestResult;\r\n    let trigger;\r\n    if (this.hasFeatureEmphasisOnSelection) {\r\n      this.resultOrResolution$$ = combineLatest([\r\n        this.focusedResult$.pipe(\r\n          tap((res) => {\r\n            latestResult = res;\r\n            trigger = 'focused';\r\n          })\r\n        ),\r\n        this.resultSelected$.pipe(\r\n          tap((res) => {\r\n            latestResult = res;\r\n            trigger = 'selected';\r\n          })\r\n        ),\r\n        this.map.viewController.resolution$,\r\n        this.store.entities$\r\n      ]).subscribe(() => this.buildResultEmphasis(latestResult, trigger));\r\n    }\r\n\r\n    this.storageChange$$ = this.storageService.storageChange$\r\n      .pipe(skipWhile((storageChange: StorageServiceEvent) => storageChange.key !== 'zoomAuto'))\r\n      .subscribe((change) => {\r\n        this.zoomAuto = change.currentValue;\r\n      });\r\n\r\n    this.actionStore.load([\r\n      {\r\n        id: 'list',\r\n        title: this.languageService.translate.instant('toastPanel.backToList'),\r\n        icon: 'format-list-bulleted-square',\r\n        tooltip: this.languageService.translate.instant(\r\n          'toastPanel.listButton'\r\n        ),\r\n        display: () => {\r\n          return this.isResultSelected$;\r\n        },\r\n        handler: () => {\r\n          this.unselectResult();\r\n        }\r\n      },\r\n      {\r\n        id: 'zoomFeature',\r\n        title: this.languageService.translate.instant(\r\n          'toastPanel.zoomOnFeature'\r\n        ),\r\n        icon: 'magnify-plus-outline',\r\n        tooltip: this.languageService.translate.instant(\r\n          'toastPanel.zoomOnFeatureTooltip'\r\n        ),\r\n        display: () => {\r\n          return this.isResultSelected$;\r\n        },\r\n        handler: () => {\r\n          const localOlFeature = this.format.readFeature(\r\n            this.resultSelected$.getValue().data,\r\n            {\r\n              dataProjection: this.resultSelected$.getValue().data.projection,\r\n              featureProjection: this.map.projection\r\n            }\r\n          );\r\n          moveToOlFeatures(this.map, [localOlFeature], FeatureMotion.Zoom);\r\n        }\r\n      },\r\n      {\r\n        id: 'zoomResults',\r\n        title: this.languageService.translate.instant(\r\n          'toastPanel.zoomOnFeatures'\r\n        ),\r\n        tooltip: this.languageService.translate.instant(\r\n          'toastPanel.zoomOnFeaturesTooltip'\r\n        ),\r\n        icon: 'magnify-scan',\r\n        availability: () => {\r\n          return this.multiple;\r\n        },\r\n        handler: () => {\r\n          const olFeatures = [];\r\n          for (const result of this.store.all()) {\r\n            const localOlFeature = this.format.readFeature(result.data, {\r\n              dataProjection: result.data.projection,\r\n              featureProjection: this.map.projection\r\n            });\r\n            olFeatures.push(localOlFeature);\r\n          }\r\n          moveToOlFeatures(this.map, olFeatures, FeatureMotion.Zoom);\r\n        }\r\n      },\r\n      {\r\n        id: 'zoomAuto',\r\n        title: this.languageService.translate.instant('toastPanel.zoomAuto'),\r\n        tooltip: this.languageService.translate.instant(\r\n          'toastPanel.zoomAutoTooltip'\r\n        ),\r\n        checkbox: true,\r\n        checkCondition: this.zoomAuto$,\r\n        handler: () => {\r\n          this.zoomAuto = !this.zoomAuto;\r\n          if (this.zoomAuto && this.isResultSelected$.value === true) {\r\n            this.selectResult(this.resultSelected$.getValue());\r\n          }\r\n        }\r\n      },\r\n      {\r\n        id: 'fullExtent',\r\n        title: this.languageService.translate.instant('toastPanel.fullExtent'),\r\n        tooltip: this.languageService.translate.instant(\r\n          'toastPanel.fullExtentTooltip'\r\n        ),\r\n        icon: 'arrow-expand',\r\n        display: () => {\r\n          return this.fullExtent$.pipe(map((v) => !v && !this.isDesktop()));\r\n        },\r\n        handler: () => {\r\n          this.fullExtent = true;\r\n        }\r\n      },\r\n      {\r\n        id: 'standardExtent',\r\n        title: this.languageService.translate.instant(\r\n          'toastPanel.standardExtent'\r\n        ),\r\n        tooltip: this.languageService.translate.instant(\r\n          'toastPanel.standardExtentTooltip'\r\n        ),\r\n        icon: 'arrow-collapse',\r\n        display: () => {\r\n          return this.fullExtent$.pipe(map((v) => v && !this.isDesktop()));\r\n        },\r\n        handler: () => {\r\n          this.fullExtent = false;\r\n        }\r\n      }\r\n    ]);\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    if (this.resultOrResolution$$) {\r\n      this.resultOrResolution$$.unsubscribe();\r\n    }\r\n    if (this.isSelectedResultOutOfView$$) {\r\n      this.isSelectedResultOutOfView$$.unsubscribe();\r\n    }\r\n    if (this.storageChange$$) {\r\n      this.storageChange$$.unsubscribe();\r\n    }\r\n  }\r\n\r\n  private buildResultEmphasis(\r\n    result: SearchResult<Feature>,\r\n    trigger: 'selected' | 'focused' | undefined\r\n  ) {\r\n    this.clearFeatureEmphasis();\r\n    if (!result || (trigger === 'selected' && this.zoomAuto)) {\r\n      return;\r\n    }\r\n    const myOlFeature = featureToOl(result.data, this.map.projection);\r\n    const olGeometry = myOlFeature.getGeometry();\r\n    if (featuresAreTooDeepInView(this.map, olGeometry.getExtent() as [number, number, number, number], 0.0025)) {\r\n      const extent = olGeometry.getExtent();\r\n      const x = extent[0] + (extent[2] - extent[0]) / 2;\r\n      const y = extent[1] + (extent[3] - extent[1]) / 2;\r\n      const feature1 = new olFeature({\r\n        name: 'abstractFocusedOrSelectedResult',\r\n        geometry: new olPoint([x, y])\r\n      });\r\n      this.abstractFocusedOrSelectedResult = featureFromOl(\r\n        feature1,\r\n        this.map.projection\r\n      );\r\n      this.abstractFocusedOrSelectedResult.meta.style =\r\n        getCommonVectorSelectedStyle(\r\n          Object.assign({},\r\n            { feature: this.abstractFocusedOrSelectedResult },\r\n            trigger === 'selected' ?\r\n              this.queryState.queryOverlayStyleSelection :\r\n              this.queryState.queryOverlayStyleFocus));\r\n      this.abstractFocusedOrSelectedResult.meta.style.setZIndex(2000);\r\n      this.map.queryResultsOverlay.addFeature(\r\n        this.abstractFocusedOrSelectedResult,\r\n        FeatureMotion.None\r\n      );\r\n    }\r\n  }\r\n\r\n  private clearFeatureEmphasis() {\r\n    if (this.abstractFocusedOrSelectedResult) {\r\n      this.map.queryResultsOverlay.removeFeature(this.abstractFocusedOrSelectedResult);\r\n      this.abstractFocusedOrSelectedResult = undefined;\r\n    }\r\n  }\r\n\r\n  getTitle(result: SearchResult) {\r\n    return getEntityTitle(result);\r\n  }\r\n\r\n  focusResult(result: SearchResult<Feature>) {\r\n    this.focusedResult$.next(result);\r\n    this.map.queryResultsOverlay.removeFeature(result.data);\r\n\r\n    result.data.meta.style = getCommonVectorSelectedStyle(\r\n      Object.assign({},\r\n        { feature: result.data },\r\n        this.queryState.queryOverlayStyleFocus));\r\n    result.data.meta.style.setZIndex(2000);\r\n    this.map.queryResultsOverlay.addFeature(result.data, FeatureMotion.None);\r\n  }\r\n\r\n  unfocusResult(result: SearchResult<Feature>, force?) {\r\n    this.focusedResult$.next(undefined);\r\n    if (!force && this.store.state.get(result).focused) {\r\n      return;\r\n    }\r\n    this.map.queryResultsOverlay.removeFeature(result.data);\r\n\r\n    result.data.meta.style = getCommonVectorStyle(\r\n      Object.assign({},\r\n        { feature: result.data },\r\n        this.queryState.queryOverlayStyle));\r\n    result.data.meta.style.setZIndex(undefined);\r\n    this.map.queryResultsOverlay.addFeature(result.data, FeatureMotion.None);\r\n  }\r\n\r\n  selectResult(result: SearchResult<Feature>) {\r\n    this.store.state.update(\r\n      result,\r\n      {\r\n        focused: true,\r\n        selected: true\r\n      },\r\n      true\r\n    );\r\n    this.resultSelected$.next(result);\r\n    if (result.data.properties && result.data.properties.target === 'iframe') {\r\n      this.setHtmlDisplay(true);\r\n    } else {\r\n      this.setHtmlDisplay(false);\r\n    }\r\n\r\n    const features = [];\r\n    for (const feature of this.store.all()) {\r\n      if (feature.meta.id === result.meta.id) {\r\n        feature.data.meta.style = getCommonVectorSelectedStyle(\r\n          Object.assign({}, { feature: feature.data },\r\n            this.queryState.queryOverlayStyleSelection));\r\n        feature.data.meta.style.setZIndex(2000);\r\n      } else {\r\n        feature.data.meta.style = getCommonVectorStyle(\r\n          Object.assign({},\r\n            { feature: feature.data },\r\n            this.queryState.queryOverlayStyle));\r\n      }\r\n      features.push(feature.data);\r\n    }\r\n    this.map.queryResultsOverlay.removeFeatures(features);\r\n    this.map.queryResultsOverlay.addFeatures(features, FeatureMotion.None);\r\n\r\n    if (this.zoomAuto) {\r\n      const localOlFeature = this.format.readFeature(\r\n        this.resultSelected$.getValue().data,\r\n        {\r\n          dataProjection: this.resultSelected$.getValue().data.projection,\r\n          featureProjection: this.map.projection\r\n        }\r\n      );\r\n      moveToOlFeatures(this.map, [localOlFeature], FeatureMotion.Default);\r\n    }\r\n\r\n    this.isResultSelected$.next(true);\r\n    this.initialized = false;\r\n  }\r\n\r\n  unselectResult() {\r\n    this.resultSelected$.next(undefined);\r\n    this.isResultSelected$.next(false);\r\n    this.setHtmlDisplay(false);\r\n    this.store.state.clear();\r\n\r\n    const features = [];\r\n    for (const feature of this.store.all()) {\r\n      feature.data.meta.style = getCommonVectorStyle(\r\n        Object.assign({},\r\n          { feature: feature.data },\r\n          this.queryState.queryOverlayStyle));\r\n      features.push(feature.data);\r\n    }\r\n    this.map.queryResultsOverlay.setFeatures(features, FeatureMotion.None, 'map');\r\n  }\r\n\r\n  clear() {\r\n    this.clearFeatureEmphasis();\r\n    this.map.queryResultsOverlay.clear();\r\n    this.store.clear();\r\n    this.unselectResult();\r\n    this.setHtmlDisplay(false);\r\n  }\r\n\r\n  isMobile(): boolean {\r\n    return this.mediaService.getMedia() === Media.Mobile;\r\n  }\r\n  isDesktop(): boolean {\r\n    return this.mediaService.isDesktop();\r\n  }\r\n\r\n  handleKeyboardEvent(event) {\r\n    event.preventDefault();\r\n    if (event.keyCode === 37) {\r\n      this.previousResult();\r\n    } else if (event.keyCode === 39) {\r\n      this.nextResult();\r\n    }\r\n  }\r\n\r\n  previousResult() {\r\n    if (!this.resultSelected$.value) {\r\n      return;\r\n    }\r\n    let i = this.results.indexOf(this.resultSelected$.value);\r\n    const previousResult = this.results[--i];\r\n    if (previousResult) {\r\n      this.selectResult(previousResult);\r\n    }\r\n  }\r\n\r\n  nextResult() {\r\n    if (!this.resultSelected$.value) {\r\n      return;\r\n    }\r\n    let i = this.results.indexOf(this.resultSelected$.value);\r\n    const nextResult = this.results[++i];\r\n    if (nextResult) {\r\n      this.selectResult(nextResult);\r\n    }\r\n  }\r\n\r\n  zoomTo() {\r\n    const localOlFeature = this.format.readFeature(\r\n      this.resultSelected$.getValue().data,\r\n      {\r\n        dataProjection: this.resultSelected$.getValue().data.projection,\r\n        featureProjection: this.map.projection\r\n      }\r\n    );\r\n    moveToOlFeatures(this.map, [localOlFeature], FeatureMotion.Zoom);\r\n  }\r\n\r\n  swipe(action: string) {\r\n    if (action === ToastPanelComponent.SWIPE_ACTION.RIGHT) {\r\n      this.previousResult();\r\n    } else if (action === ToastPanelComponent.SWIPE_ACTION.LEFT) {\r\n      this.nextResult();\r\n    } else if (action === ToastPanelComponent.SWIPE_ACTION.UP) {\r\n      this.opened = true;\r\n    } else if (action === ToastPanelComponent.SWIPE_ACTION.DOWN) {\r\n      this.opened = false;\r\n    }\r\n  }\r\n\r\n  onToggleClick(e: MouseEvent) {\r\n    if ((e.target as any).className !== 'igo-panel-title') {\r\n      return;\r\n    }\r\n    this.opened = !this.opened;\r\n  }\r\n\r\n  /**\r\n   * Invoke the action handler\r\n   * @internal\r\n   */\r\n  onTriggerAction(action: Action) {\r\n    const args = action.args || [];\r\n    action.handler(...args);\r\n  }\r\n\r\n  setHtmlDisplay(value: boolean) {\r\n    if (value === true) {\r\n      this.isHtmlDisplay = true;\r\n      this.windowHtmlDisplayEvent.emit(true);\r\n    } else {\r\n      this.isHtmlDisplay = false;\r\n      this.windowHtmlDisplayEvent.emit(false);\r\n    }\r\n  }\r\n\r\n  isHtmlAndDesktop(): boolean {\r\n    if (this.isHtmlDisplay && this.isDesktop()) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  setResizeWindowIcon() {\r\n    if (this.fullExtent) {\r\n      this.iconResizeWindows = 'arrow-collapse';\r\n      // this.iconResizeWindows = 'vector-arrange-below';\r\n    } else {\r\n      this.iconResizeWindows = 'arrow-expand';\r\n      // this.iconResizeWindows = 'crop-square';\r\n    }\r\n  }\r\n\r\n  resizeWindows() {\r\n    this.storageService.set('fullExtent', !this.fullExtent);\r\n    if (this.fullExtent) {\r\n        this.reduceWindow();\r\n    } else {\r\n        this.enlargeWindows();\r\n      }\r\n  }\r\n\r\n  reduceWindow() {\r\n    this.fullExtent = false;\r\n    this.setResizeWindowIcon();\r\n  }\r\n\r\n  enlargeWindows() {\r\n    this.fullExtent = true;\r\n    this.setResizeWindowIcon();\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatMenuModule } from '@angular/material/menu';\r\nimport { MatTooltipModule } from '@angular/material/tooltip';\r\n\r\nimport { IgoPanelModule, IgoStopPropagationModule, IgoActionModule } from '@igo2/common';\r\nimport { IgoLanguageModule } from '@igo2/core';\r\nimport { IgoFeatureModule, IgoSearchResultsModule } from '@igo2/geo';\r\n\r\nimport { ToastPanelComponent } from './toast-panel.component';\r\nimport { MatBadgeModule } from '@angular/material/badge';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    MatBadgeModule,\r\n    MatIconModule,\r\n    MatButtonModule,\r\n    MatTooltipModule,\r\n    MatMenuModule,\r\n    IgoLanguageModule,\r\n    IgoPanelModule,\r\n    IgoStopPropagationModule,\r\n    IgoActionModule,\r\n    IgoFeatureModule,\r\n    IgoSearchResultsModule\r\n  ],\r\n  exports: [ToastPanelComponent],\r\n  declarations: [ToastPanelComponent]\r\n})\r\nexport class AppToastPanelModule {}\r\n","<mat-sidenav\r\n  mode=\"side\"\r\n  [autoFocus]=\"false\"\r\n  [(opened)]=\"opened\">\r\n\r\n  <div class=\"app-sidenav-content\">\r\n\r\n      <div #content class=\"app-content\" [ngClass]=\"{toolActivated: toolbox.activeTool$ | async}\">\r\n\r\n        <igo-home-button\r\n          *ngIf=\"toolbox.activeTool$ | async\"\r\n          (unselectButton)=\"onUnselectButtonClick()\">\r\n        </igo-home-button>\r\n\r\n        <igo-panel [title]=\"title$ | async | translate\">\r\n          <button *ngIf=\"toolbox.activeTool$ | async\"\r\n            mat-icon-button\r\n            panelLeftButton\r\n            tooltip-position=\"below\"\r\n            matTooltipShowDelay=\"500\"\r\n            [matTooltip]=\"'igo.context.sidenav.goBack' | translate\"\r\n            (click)=\"onPreviousButtonClick()\">\r\n            <mat-icon svgIcon=\"arrow-left\"></mat-icon>\r\n          </button>\r\n\r\n          <igo-interactive-tour\r\n            panelRightButton\r\n            styleButton = 'icon'>\r\n          </igo-interactive-tour>\r\n\r\n          <!-- <button *ngIf=\"toolbox.activeTool$ | async\"\r\n            mat-icon-button\r\n            panelRightButton\r\n            tooltip-position=\"below\"\r\n            matTooltipShowDelay=\"500\"\r\n            [matTooltip]=\"'igo.context.sidenav.mainMenu' | translate\"\r\n            (click)=\"onUnselectButtonClick()\">\r\n            <mat-icon svgIcon=\"close\"></mat-icon>\r\n          </button> -->\r\n\r\n          <igo-toolbox\r\n            class=\"igo-toolbox\"\r\n            color=\"primary\"\r\n            [animate]=\"true\"\r\n            [toolbox]=\"toolbox\">\r\n          </igo-toolbox>\r\n\r\n        </igo-panel>\r\n    </div>\r\n  </div>\r\n</mat-sidenav>\r\n","import {\r\n  Component,\r\n  Input,\r\n  Output,\r\n  OnInit,\r\n  OnDestroy,\r\n  EventEmitter,\r\n  ChangeDetectionStrategy\r\n} from '@angular/core';\r\n\r\nimport { BehaviorSubject, Subscription } from 'rxjs';\r\n\r\nimport { Tool, Toolbox } from '@igo2/common';\r\nimport { IgoMap } from '@igo2/geo';\r\nimport { ToolState, CatalogState } from '@igo2/integration';\r\nimport { ConfigService } from '@igo2/core';\r\n\r\n@Component({\r\n  selector: 'app-sidenav',\r\n  templateUrl: './sidenav.component.html',\r\n  styleUrls: ['./sidenav.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class SidenavComponent implements OnInit, OnDestroy {\r\n  title$: BehaviorSubject<string> = new BehaviorSubject<string>(undefined);\r\n\r\n  private activeTool$$: Subscription;\r\n\r\n  @Input()\r\n  get map(): IgoMap {\r\n    return this._map;\r\n  }\r\n  set map(value: IgoMap) {\r\n    this._map = value;\r\n  }\r\n  private _map: IgoMap;\r\n\r\n  @Input()\r\n  get opened(): boolean {\r\n    return this._opened;\r\n  }\r\n  set opened(value: boolean) {\r\n    if (value === this._opened) {\r\n      return;\r\n    }\r\n\r\n    this._opened = value;\r\n    this.openedChange.emit(this._opened);\r\n  }\r\n  private _opened: boolean;\r\n\r\n  @Output() openedChange = new EventEmitter<boolean>();\r\n  @Output() toolChange = new EventEmitter<Tool>();\r\n\r\n  get toolbox(): Toolbox {\r\n    return this.toolState.toolbox;\r\n  }\r\n\r\n  constructor(\r\n    private toolState: ToolState,\r\n    private configService: ConfigService,\r\n    private catalogState: CatalogState) {}\r\n\r\n  ngOnInit() {\r\n    this.activeTool$$ = this.toolbox.activeTool$.subscribe((tool: Tool) => {\r\n      const sidenavTitle = this.configService.getConfig('sidenavTitle') || 'IGO';\r\n      if (tool) {\r\n        if (tool.name === 'catalogBrowser') {\r\n          for (const catalog of this.catalogState.catalogStore.all()) {\r\n            if (this.catalogState.catalogStore.state.get(catalog).selected === true) {\r\n              this.title$.next(catalog.title);\r\n            }\r\n          }\r\n        } else if (tool.name === 'activeTimeFilter' || tool.name === 'activeOgcFilter') {\r\n          for (const layer of this.map.layers) {\r\n            if (layer.options.active === true) {\r\n              this.title$.next(layer.title);\r\n            }\r\n          }\r\n        } else {\r\n          this.title$.next(tool.title);\r\n        }\r\n      } else {\r\n        this.title$.next(sidenavTitle);\r\n      }\r\n      this.toolChange.emit(tool);\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.activeTool$$.unsubscribe();\r\n  }\r\n\r\n  onPreviousButtonClick() {\r\n    this.toolbox.activatePreviousTool();\r\n  }\r\n\r\n  onUnselectButtonClick() {\r\n    this.toolbox.deactivateTool();\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatSidenavModule } from '@angular/material/sidenav';\r\nimport { MatTooltipModule } from '@angular/material/tooltip';\r\n\r\nimport { IgoLanguageModule } from '@igo2/core';\r\nimport {\r\n  IgoPanelModule,\r\n  IgoFlexibleModule,\r\n  IgoToolModule,\r\n  IgoInteractiveTourModule,\r\n  IgoHomeButtonModule\r\n} from '@igo2/common';\r\nimport { IgoFeatureModule } from '@igo2/geo';\r\nimport { IgoContextManagerModule } from '@igo2/context';\r\n\r\nimport { SidenavComponent } from './sidenav.component';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    MatIconModule,\r\n    MatButtonModule,\r\n    MatSidenavModule,\r\n    MatTooltipModule,\r\n    IgoLanguageModule,\r\n    IgoPanelModule,\r\n    IgoFlexibleModule,\r\n    IgoContextManagerModule,\r\n    IgoToolModule,\r\n    IgoFeatureModule,\r\n    IgoInteractiveTourModule,\r\n    IgoHomeButtonModule\r\n  ],\r\n  exports: [SidenavComponent],\r\n  declarations: [SidenavComponent]\r\n})\r\nexport class AppSidenavModule {}\r\n","import { Injectable } from '@angular/core';\r\n\r\nimport { ConfigService, StorageService } from '@igo2/core';\r\nimport { MatDialogConfig } from '@angular/material/dialog';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class WelcomeWindowService {\r\n  nbVisit: number;\r\n  showAgain: boolean;\r\n  igoVersionDifferentFromStorage = false;\r\n\r\n  constructor(\r\n    private configService: ConfigService,\r\n    private storageService: StorageService\r\n  ) {\r\n    this.igoVersionDifferentFromStorage = this.isVersionDifferentFromStorage();\r\n    this.setStorageConfig();\r\n  }\r\n\r\n  setStorageConfig() {\r\n    this.nbVisit = Number(this.storageService.get('welcomeWindow_nbVisit'));\r\n    if (!this.nbVisit) {\r\n      this.nbVisit = 0;\r\n    }\r\n\r\n    this.storageService.set('welcomeWindow_nbVisit', (this.nbVisit += 1));\r\n    this.storageService.set(\r\n      'version',\r\n      this.configService.getConfig('version.lib')\r\n    );\r\n  }\r\n\r\n  isVersionDifferentFromStorage(): boolean {\r\n    if (\r\n      this.storageService.get('version') &&\r\n      this.storageService.get('version') !==\r\n        this.configService.getConfig('version.lib')\r\n    ) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  hasWelcomeWindow(): boolean {\r\n    if (\r\n      this.storageService.get('welcomeWindow_showAgain') === false ||\r\n      this.storageService.get('welcomeWindow_showAgain') === 'false'\r\n    ) {\r\n      if (\r\n        this.nbVisit >=\r\n        this.configService.getConfig('welcomeWindow.nbVisitToShowAgain')\r\n      ) {\r\n        this.storageService.set('welcomeWindow_nbVisit', 0);\r\n        this.storageService.remove('welcomeWindow_showAgain');\r\n        return true;\r\n      } else if (\r\n        this.configService.getConfig('welcomeWindow.showAgainOnNewIGOVersion')\r\n      ) {\r\n        if (this.igoVersionDifferentFromStorage) {\r\n          this.storageService.set('welcomeWindow_nbVisit', 0);\r\n          this.storageService.remove('welcomeWindow_showAgain');\r\n          return true;\r\n        }\r\n      }\r\n      return false;\r\n    }\r\n\r\n    if (typeof this.configService.getConfig('welcomeWindow.nbVisitToShow') !== 'undefined' ) {\r\n      if (this.nbVisit > this.configService.getConfig('welcomeWindow.nbVisitToShow') ) {\r\n        this.storageService.set('welcomeWindow_showAgain', false);\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return this.configService.getConfig('welcomeWindow');\r\n  }\r\n\r\n  getConfig(): MatDialogConfig {\r\n    const dialogConfig = new MatDialogConfig();\r\n\r\n    dialogConfig.disableClose = true;\r\n    dialogConfig.autoFocus = true;\r\n    dialogConfig.maxWidth = '500px';\r\n\r\n    return dialogConfig;\r\n  }\r\n\r\n  afterClosedWelcomeWindow() {\r\n    this.storageService.set('welcomeWindow_showAgain', this.showAgain);\r\n  }\r\n}\r\n","<div class=\"welcome-window\"  *ngIf=\"html$ | async\">\r\n\r\n  <mat-toolbar color=\"primary\">\r\n    <h2>{{'welcomeWindow.title' | translate}}</h2>\r\n    <span class=\"spacer\"></span>\r\n\r\n    <label>\r\n      <input id=\"doNotShowCheck\" type=\"checkbox\" [(ngModel)]=\"showAgain\" (click)=\"setShowAgain()\">\r\n      {{'welcomeWindow.notShowCheck' | translate}}\r\n    </label>\r\n  </mat-toolbar>\r\n\r\n  <div mat-dialog-content class=\"text\">\r\n    <igo-custom-html class=\"mat-typography\"\r\n    [html]=\"html$ | async\">\r\n    </igo-custom-html>\r\n  </div>\r\n\r\n  <p></p>\r\n  <div class=\"button-container\">\r\n    <igo-interactive-tour\r\n      id=\"tour-button\"\r\n      styleButton = \"raised\"\r\n      [discoverTitleInLocale$]=\"discoverTitleInLocale$\"\r\n      (click)= \"closeWelcomeWindow()\">\r\n    </igo-interactive-tour>\r\n\r\n  <button mat-raised-button class=\"button-close\" color=\"primary\" mat-dialog-close>{{'welcomeWindow.closeButton' | translate}}</button>\r\n  </div>\r\n\r\n</div>\r\n","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { ConfigService, LanguageService } from '@igo2/core';\r\nimport { BehaviorSubject, Observable, of, Subscription } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport { WelcomeWindowService } from './welcome-window.service';\r\n\r\n@Component({\r\n  selector: 'app-welcome-window',\r\n  templateUrl: './welcome-window.component.html',\r\n  styleUrls: ['./welcome-window.component.scss']\r\n})\r\nexport class WelcomeWindowComponent implements OnInit, OnDestroy {\r\n  // isVisible = true;\r\n  showAgain = false;\r\n  public discoverTitleInLocale$: Observable<string> = of(this.configService.getConfig('title'));\r\n  private title$$: Subscription;\r\n  public html$: BehaviorSubject<string> = new BehaviorSubject(undefined);\r\n\r\n  constructor(\r\n    public dialog: MatDialog,\r\n    private welcomeWindowService: WelcomeWindowService,\r\n    private configService: ConfigService,\r\n    protected languageService: LanguageService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.computeHtml();\r\n  }\r\n\r\n  closeWelcomeWindow() {\r\n    this.dialog.closeAll();\r\n  }\r\n\r\n  private computeHtml() {\r\n    let deltaDay = 0;\r\n    let isDateParsable = true;\r\n    let releaseDate = new Date(this.configService.getConfig('version.releaseDate'));\r\n\r\n    const releaseDateAppConfig = this.configService.getConfig('version.releaseDateApp');\r\n\r\n\r\n    if (releaseDateAppConfig) {\r\n      const releaseDateApp = new Date(releaseDateAppConfig);\r\n      if (isNaN(releaseDateApp.getDate())) {\r\n        console.log('The releaseDateApp config is not a valid date format');\r\n        isDateParsable = false;\r\n      } else {\r\n        deltaDay = 1;\r\n        releaseDate = releaseDateApp;\r\n      }\r\n    }\r\n\r\n    let releaseDateString = '';\r\n\r\n    if (isDateParsable) {\r\n      let day: any = releaseDate.getDate() + deltaDay;\r\n      if (day < 10) {\r\n        day = '0' + day;\r\n      }\r\n      let month: any = releaseDate.getMonth() + 1;\r\n      if (month < 10) {\r\n        month = '0' + month;\r\n      }\r\n      const year = releaseDate.getFullYear();\r\n      releaseDateString = `${year}-${month}-${day}`;\r\n    } else {\r\n      releaseDateString = releaseDateAppConfig;\r\n    }\r\n\r\n    this.title$$ = this.languageService.translate.get(this.configService.getConfig('title') || '')\r\n      .pipe(\r\n        map(title => {\r\n          return this.languageService.translate.instant('welcomeWindow.html', {\r\n            title,\r\n            description: this.configService.getConfig('description') || '',\r\n            version: this.configService.getConfig('version.app') || this.configService.getConfig('version.lib') || '',\r\n            releaseDate: releaseDateString || ''\r\n          });\r\n        })\r\n      ).subscribe((r) => this.html$.next(r));\r\n\r\n    return this.html$;\r\n\r\n  }\r\n\r\n  setShowAgain() {\r\n    this.welcomeWindowService.showAgain = this.showAgain;\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    if (this.title$$) {\r\n      this.title$$.unsubscribe();\r\n    }\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  Input,\r\n  Output,\r\n  EventEmitter,\r\n  HostBinding,\r\n  ChangeDetectionStrategy\r\n} from '@angular/core';\r\nimport { showContent } from './toast-panel-for-expansion.animations';\r\n\r\n\r\n@Component({\r\n  selector: 'app-toast-panel-for-expansion',\r\n  templateUrl: './toast-panel-for-expansion.component.html',\r\n  styleUrls: ['./toast-panel-for-expansion.component.scss'],\r\n  animations: [showContent()],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class ToastPanelForExpansionComponent {\r\n\r\n  @Input()\r\n  set opened(value: boolean) {\r\n    if (value === this._opened) {\r\n      return;\r\n    }\r\n    this._opened = value;\r\n    this.openedChange.emit(this._opened);\r\n  }\r\n  get opened(): boolean { return this._opened; }\r\n  private _opened: boolean;\r\n\r\n  @Input() title: string;\r\n\r\n  @Input() withHeader: boolean;\r\n\r\n  @Output() openedChange = new EventEmitter<boolean>();\r\n\r\n  @HostBinding('class.toast-panel-for-expansion-opened')\r\n  get hasOpenedClass() {\r\n    return this.opened;\r\n  }\r\n\r\n  @HostBinding('style.visibility')\r\n  get displayStyle() {\r\n    return (this.withHeader || this.opened) ? 'visible' : 'hidden';\r\n  }\r\n\r\n  constructor() {}\r\n\r\n}\r\n","<igo-panel [title]=\"title\" [withHeader]=\"withHeader\">\r\n\r\n  <div #content [@showContent]=\"opened\">\r\n    <ng-content></ng-content>\r\n  </div>\r\n</igo-panel>\r\n","import {\r\n  trigger,\r\n  state,\r\n  style,\r\n  transition,\r\n  animate,\r\n  AnimationTriggerMetadata\r\n} from '@angular/animations';\r\n\r\nexport function showContent(\r\n  duration = '50ms',\r\n  delay = '280ms',\r\n  easing = 'ease-in-out'\r\n): AnimationTriggerMetadata {\r\n  return trigger('showContent', [\r\n    state('true', style({\r\n      opacity: 1,\r\n      display: 'block'\r\n    })),\r\n    state('false', style({\r\n      opacity: 0,\r\n      display: 'none'\r\n    })),\r\n    transition('false => true', animate(`${duration} ${delay} ${easing}`)),\r\n    transition('true => false', animate('0ms'))\r\n  ]);\r\n}\r\n","<mat-sidenav-container class=\"app-main-container\">\r\n  <mat-sidenav-content>\r\n\r\n    <igo-backdrop\r\n      [shown]=\"backdropShown\"\r\n      (click)=\"onBackdropClick()\">\r\n    </igo-backdrop>\r\n\r\n    <igo-menu-button\r\n      [sidenavOpened]=\"sidenavOpened\"\r\n      (openSidenav)=\"onToggleSidenavClick()\">\r\n    </igo-menu-button>\r\n\r\n    <igo-search-bar\r\n      #searchBar\r\n      [term]=\"searchBarTerm\"\r\n      [termSplitter]=\"termSplitter\"\r\n      [minLength]=\"minSearchTermLength\"\r\n      [searchSettings]=\"true\"\r\n      [forceNA]=\"forceCoordsNA\"\r\n      [store]=\"searchStore\"\r\n      (searchTermChange)=\"onSearchTermChange($event)\"\r\n      [pointerSummaryEnabled]=\"igoSearchPointerSummaryEnabled\"\r\n      (pointerSummaryStatus)=\"onPointerSummaryStatusChange($event)\"\r\n      [searchResultsGeometryEnabled]=\"searchResultsGeometryEnabled\"\r\n      (searchResultsGeometryStatus)=\"onSearchResultsGeometryStatusChange($event)\"\r\n      (search)=\"onSearch($event)\"\r\n      (clearFeature)=\"onClearSearch()\"\r\n      (searchSettingsChange)=\"onSearchSettingsChange()\">\r\n    </igo-search-bar>\r\n\r\n    <app-sidenav\r\n      [map]=\"map\"\r\n      [(opened)]=\"sidenavOpened\"\r\n      (toolChange)=\"toolChanged($event)\">\r\n    </app-sidenav>\r\n\r\n    <igo-map-browser\r\n      igoWorkspaceUpdator\r\n      [workspaceStore]=\"workspaceStore\"\r\n      igoSearchPointerSummary\r\n      [igoSearchPointerSummaryDelay]=\"500\"\r\n      [igoSearchPointerSummaryEnabled]=igoSearchPointerSummaryEnabled\r\n\r\n      #mapBrowser\r\n      igoQuery\r\n      [waitForAllQueries]=\"true\"\r\n      [queryFeatures]=\"true\"\r\n      [queryFeaturesHitTolerance]=\"15\"\r\n      igoMapContext\r\n      igoLayerContext\r\n      igoDropGeoFile\r\n      (query)=\"onMapQuery($event)\"\r\n      [map]=\"map\"\r\n      [igoContextMenu]=contextMenu\r\n      (menuPosition)=\"onContextMenuOpen($event)\"\r\n      [ngClass]=\"{'igo-attribution-offset': map.getBaseLayers().length > 1}\"\r\n      [@mapStateX]=\"sidenavOpened ? 'right' : 'left'\"\r\n      (@mapStateX.start)=\"updateMapBrowserClass()\"\r\n      [@mapStateY]=\"getControlsOffsetY()\"\r\n      (@mapStateY.start)=\"updateMapBrowserClass()\">\r\n\r\n      <igo-zoom-button [map]=\"map\" color=\"primary\"\r\n        [@controlsOffsetY]=\"getControlsOffsetY()\">\r\n      </igo-zoom-button>\r\n      <igo-swipe-control [map]=\"map\"></igo-swipe-control>\r\n      <igo-map-center [map]=\"map\"></igo-map-center>\r\n      <igo-offline-button [map]=\"map\" color=\"primary\"\r\n        [@controlsOffsetY]=\"getControlsOffsetY()\"\r\n        [@mobileOffsetY]=\"getToastPanelStatus()\">\r\n      </igo-offline-button>\r\n      <igo-geolocate-button\r\n        *ngIf=\"hasGeolocateButton\"\r\n        [map]=\"map\" color=\"primary\"\r\n        [@controlsOffsetY]=\"getControlsOffsetY()\"\r\n        [@mobileOffsetY]=\"getToastPanelStatus()\">\r\n      </igo-geolocate-button>\r\n      <igo-rotation-button [showIfNoRotation]=\"showRotationButtonIfNoRotation\" [map]=\"map\" color=\"primary\"></igo-rotation-button>\r\n      <igo-user-button \r\n        *ngIf=\"auth.url\"\r\n        [map]=\"map\" color=\"primary\"\r\n        [@controlsOffsetY]=\"getControlsOffsetY()\"\r\n        [@mobileOffsetY]=\"getToastPanelStatus()\">\r\n      </igo-user-button>\r\n      <igo-baselayers-switcher [map]=\"map\"\r\n        [@controlsOffsetY]=\"getBaselayersSwitcherStatus()\"\r\n        [useStaticIcon]=\"true\">\r\n      </igo-baselayers-switcher>\r\n    </igo-map-browser>\r\n\r\n    <app-map-overlay\r\n      [@controlStateY]=\"getControlsOffsetY()\"\r\n      [@controlStateX]=\"(mediaService.media$ | async) !== 'mobile' &&\r\n                              sidenavOpened ? 'right' : 'left'\">\r\n    </app-map-overlay>\r\n\r\n  </mat-sidenav-content>\r\n</mat-sidenav-container>\r\n\r\n<app-expansion-panel\r\n  *ngIf=\"hasExpansionPanel && (workspaceState.workspaceEnabled$ | async)\"\r\n  [backdropShown]=\"expansionPanelBackdropShown\"\r\n  [(expanded)]=\"expansionPanelExpanded\"\r\n  [maximized]=\"workspaceMaximize$ | async\"\r\n  [@expansionPanelSize]=\"getExpansionPanelStatus()\"\r\n  [@toastOffsetY]=\"(isMobile() && !toastPanelOpened && queryState.store.entities$.value.length > 0 && !expansionPanelExpanded) ? 'true' : 'false'\">\r\n\r\n  <ng-container expansionPanelHeader>\r\n    <igo-workspace-selector\r\n      igoWorkspaceSelector\r\n      (toolToActivate)=\"toolToActivateFromWorkspace($event)\"\r\n      [store]=\"workspaceStore\"\r\n      [map]=\"map\">\r\n    </igo-workspace-selector>\r\n\r\n    <ng-container *ngIf=\"selectedWorkspace$ | async as workspace\">\r\n      <button\r\n        class=\"eye-workspace\"\r\n        mat-icon-button\r\n        [color]=\"workspace.layer.visible ? 'primary' : 'default'\"\r\n        collapsibleButton\r\n        tooltip-position=\"below\"\r\n        matTooltipShowDelay=\"500\"\r\n        [matTooltip]=\"workspace.layer.visible ?\r\n                      ('igo.geo.layer.hideLayer' | translate) :\r\n                      ('igo.geo.layer.showLayer' | translate)\"\r\n        (click)=\"workspace.layer.visible = !workspace.layer.visible\">\r\n        <mat-icon\r\n          [ngClass]=\"{disabled: (workspace.inResolutionRange$ | async)!==true}\"\r\n          [svgIcon]=\"workspace.layer.visible ? 'eye' : 'eye-off'\">\r\n        </mat-icon>\r\n    </button>\r\n    <igo-actionbar\r\n      class=\"actionbar-workspace\"\r\n      *ngIf=\"workspace.actionStore\"\r\n      [store]=\"workspace.actionStore\"\r\n      [withIcon]=\"true\"\r\n      [withTitle]=\"actionbarWithTitle\"\r\n      [horizontal]=\"true\"\r\n      [withToggleButton]=\"actionbarMode === 'overlay'\"\r\n      [iconColor]=\"'primary'\"\r\n      [color]=\"'primary'\"\r\n      [mode]=\"actionbarMode\"\r\n      [overlayClass]=\"workspaceMenuClass\">\r\n    </igo-actionbar>\r\n      <div class=\"spacer\"></div>\r\n      <igo-entity-table-paginator\r\n      *ngIf=\"workspaceVisibility()\"\r\n        [store]=\"workspace.entityStore\"\r\n        [entitySortChange$]=\"workspaceEntitySortChange$\"\r\n        [paginatorOptions]=\"paginatorOptions\"\r\n        (paginatorChange)=\"paginatorChange($event)\">\r\n      </igo-entity-table-paginator>\r\n    </ng-container>\r\n  </ng-container>\r\n\r\n  <ng-container *ngIf=\"selectedWorkspace$ | async as workspace\">\r\n    <igo-entity-table\r\n      [paginator]=\"workspacePaginator\"\r\n      *ngIf=\"workspace.entityStore && workspace.meta && workspace.meta.tableTemplate && workspaceVisibility()\"\r\n      [store]=\"workspace.entityStore\"\r\n      (entitySortChange)=\"entitySortChange()\"\r\n      (entitySelectChange)=\"entitySelectChange($event)\"\r\n      [template]=\"workspace.meta.tableTemplate\">\r\n    </igo-entity-table>\r\n    <span class=\"mat-typography\">{{workspaceNotAvailableMessage | translate}}</span>\r\n  </ng-container>\r\n\r\n</app-expansion-panel>\r\n\r\n<app-toast-panel-for-expansion\r\n  [withHeader]=\"false\"\r\n  [(opened)]=\"toastPanelForExpansionOpened\">\r\n\r\n  <div class=\"toast-panel-for-expansion-close-button-container\">\r\n    <button\r\n      mat-icon-button\r\n      color=\"warn\"\r\n      (click)=\"toastPanelForExpansionOpened = false\">\r\n      <mat-icon svgIcon=\"close\"></mat-icon>\r\n    </button>\r\n  </div>\r\n\r\n  <igo-workspace-widget-outlet\r\n    *ngIf=\"selectedWorkspace$ | async as workspace\"\r\n    [workspace]=\"workspace\"\r\n    (deactivateWidget)=\"onDeactivateWorkspaceWidget()\">\r\n  </igo-workspace-widget-outlet>\r\n\r\n</app-toast-panel-for-expansion >\r\n\r\n<app-toast-panel *ngIf=\"(queryStore.empty$ | async)!==true\"\r\n  [map]=\"map\"\r\n  [store]=\"queryStore\"\r\n  [hasFeatureEmphasisOnSelection]=\"hasFeatureEmphasisOnSelection\"\r\n  [@toastPanelOffsetX]=\"toastPanelOffsetX$ | async\"\r\n  [@toastPanelOffsetY]=\"getToastPanelOffsetY()\"\r\n  [@toastPanelMobileSidenav]=\"(isMobile() && sidenavOpened) || (isTablet() && isPortrait() && sidenavOpened)\"\r\n  [opened]=\"toastPanelOpened\"\r\n  (openedChange)=\"toastOpenedChange($event)\"\r\n  (fullExtentEvent)=\"fullExtent = $event\"\r\n  (windowHtmlDisplayEvent)=\"setToastPanelHtmlDisplay($event)\">\r\n</app-toast-panel>\r\n\r\n<ng-template #contextMenu>\r\n  <igo-actionbar\r\n    [store]=\"contextMenuStore\"\r\n    [withIcon]=\"false\"\r\n    [horizontal]=\"true\"\r\n    mode=\"context\">\r\n  </igo-actionbar>\r\n</ng-template>\r\n","import {\r\n  Component,\r\n  OnInit,\r\n  OnDestroy,\r\n  ChangeDetectorRef,\r\n  ViewChild,\r\n  ElementRef\r\n} from '@angular/core';\r\nimport { ActivatedRoute, Params } from '@angular/router';\r\nimport { Subscription, of, BehaviorSubject, combineLatest } from 'rxjs';\r\nimport { debounceTime, take, pairwise, skipWhile, first } from 'rxjs/operators';\r\nimport { MatDialog, MatDialogConfig } from '@angular/material/dialog';\r\nimport MapBrowserEvent from 'ol/MapBrowserEvent';\r\nimport * as olProj from 'ol/proj';\r\nimport olFeature from 'ol/Feature';\r\nimport type { default as OlGeometry } from 'ol/geom/Geometry';\r\n\r\nimport {\r\n  MediaService,\r\n  Media,\r\n  MediaOrientation,\r\n  ConfigService,\r\n  LanguageService,\r\n  MessageService,\r\n  StorageService\r\n} from '@igo2/core';\r\nimport {\r\n  ActionbarMode,\r\n  Workspace,\r\n  WorkspaceStore,\r\n  ActionStore,\r\n  EntityStore,\r\n  // getEntityTitle,\r\n  Toolbox,\r\n  Tool,\r\n  Widget,\r\n  EntityTablePaginatorOptions,\r\n  EntityRecord\r\n} from '@igo2/common';\r\nimport { AuthOptions, AuthService } from '@igo2/auth';\r\nimport { DetailedContext } from '@igo2/context';\r\nimport {\r\n  DataSourceService,\r\n  Feature,\r\n  FEATURE,\r\n  featureToSearchResult,\r\n  GoogleLinks,\r\n  IgoMap,\r\n  LayerService,\r\n  QuerySearchSource,\r\n  Research,\r\n  SearchResult,\r\n  SearchSource,\r\n  SearchSourceService,\r\n  CapabilitiesService,\r\n  sourceCanSearch,\r\n  sourceCanReverseSearch,\r\n  ImportService,\r\n  handleFileImportError,\r\n  handleFileImportSuccess,\r\n  featureFromOl,\r\n  QueryService,\r\n  WfsWorkspace,\r\n  FeatureWorkspace,\r\n  generateIdFromSourceOptions,\r\n  computeOlFeaturesExtent,\r\n  addStopToStore\r\n} from '@igo2/geo';\r\n\r\nimport {\r\n  ToolState,\r\n  MapState,\r\n  SearchState,\r\n  QueryState,\r\n  ContextState,\r\n  WorkspaceState,\r\n  DirectionState\r\n} from '@igo2/integration';\r\n\r\nimport {\r\n  expansionPanelAnimation,\r\n  toastPanelAnimation,\r\n  controlsAnimations,\r\n  controlSlideX,\r\n  controlSlideY,\r\n  mapSlideX,\r\n  mapSlideY\r\n} from './portal.animation';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\n\r\nimport { WelcomeWindowComponent } from './welcome-window/welcome-window.component';\r\nimport { WelcomeWindowService } from './welcome-window/welcome-window.service';\r\nimport { MatPaginator } from '@angular/material/paginator';\r\nimport { ObjectUtils } from '@igo2/utils';\r\nimport olFormatGeoJSON from 'ol/format/GeoJSON';\r\n\r\n@Component({\r\n  selector: 'app-portal',\r\n  templateUrl: './portal.component.html',\r\n  styleUrls: ['./portal.component.scss'],\r\n  animations: [\r\n    expansionPanelAnimation(),\r\n    toastPanelAnimation(),\r\n    controlsAnimations(),\r\n    controlSlideX(),\r\n    controlSlideY(),\r\n    mapSlideX(),\r\n    mapSlideY()\r\n  ]\r\n})\r\nexport class PortalComponent implements OnInit, OnDestroy {\r\n  public toastPanelOffsetX$: BehaviorSubject<string> = new BehaviorSubject(undefined);\r\n  public sidenavOpened$: BehaviorSubject<boolean> = new BehaviorSubject(false);\r\n  public minSearchTermLength = 2;\r\n  public hasExpansionPanel = false;\r\n  public hasGeolocateButton = true;\r\n  public showRotationButtonIfNoRotation = false;\r\n  public hasFeatureEmphasisOnSelection: Boolean = false;\r\n  public workspaceNotAvailableMessage: String = 'workspace.disabled.resolution';\r\n  public workspacePaginator: MatPaginator;\r\n  public workspaceEntitySortChange$: BehaviorSubject<\r\n    boolean\r\n  > = new BehaviorSubject(false);\r\n  public paginatorOptions: EntityTablePaginatorOptions = {\r\n    pageSize: 50, // Number of items to display on a page.\r\n    pageSizeOptions: [1, 5, 10, 20, 50, 100, 500] // The set of provided page size options to display to the user.\r\n  };\r\n  public workspaceMenuClass = 'workspace-menu';\r\n\r\n  public fullExtent = this.storageService.get('fullExtent') as boolean;\r\n  private workspaceMaximize$$: Subscription[] = [];\r\n  readonly workspaceMaximize$: BehaviorSubject<boolean> = new BehaviorSubject(\r\n    this.storageService.get('workspaceMaximize') as boolean\r\n  );\r\n\r\n  public searchBarTerm = '';\r\n  public onSettingsChange$ = new BehaviorSubject<boolean>(undefined);\r\n  public termDefinedInUrl = false;\r\n  public termSplitter = '|';\r\n  public termDefinedInUrlTriggered = false;\r\n  private addedLayers$$: Subscription[] = [];\r\n  public forceCoordsNA = false;\r\n\r\n  public contextMenuStore = new ActionStore([]);\r\n  private contextMenuCoord: [number, number];\r\n\r\n  private contextLoaded = false;\r\n\r\n  private context$$: Subscription;\r\n  private openSidenav$$: Subscription;\r\n  private sidenavMediaAndOrientation$$: Subscription;\r\n\r\n  public igoSearchPointerSummaryEnabled: boolean;\r\n\r\n  public toastPanelForExpansionOpened = true;\r\n  private activeWidget$$: Subscription;\r\n  public showToastPanelForExpansionToggle = false;\r\n  public selectedWorkspace$: BehaviorSubject<Workspace> = new BehaviorSubject(\r\n    undefined\r\n  );\r\n  private routeParams: Params;\r\n  public toastPanelHtmlDisplay = false;\r\n\r\n  @ViewChild('mapBrowser', { read: ElementRef, static: true })\r\n  mapBrowser: ElementRef;\r\n  @ViewChild('searchBar', { read: ElementRef, static: true })\r\n  searchBar: ElementRef;\r\n\r\n  get map(): IgoMap {\r\n    return this.mapState.map;\r\n  }\r\n\r\n  get sidenavOpened(): boolean {\r\n    return this.sidenavOpened$.value;\r\n  }\r\n\r\n  set sidenavOpened(value: boolean) {\r\n    this.sidenavOpened$.next(value);\r\n  }\r\n\r\n  get auth(): AuthOptions {\r\n    return this.configService.getConfig('auth') || [];\r\n  }\r\n\r\n  get toastPanelOpened(): boolean {\r\n    return this._toastPanelOpened;\r\n  }\r\n  set toastPanelOpened(value: boolean) {\r\n    if (value !== !this._toastPanelOpened) {\r\n      return;\r\n    }\r\n    this._toastPanelOpened = value;\r\n    this.cdRef.detectChanges();\r\n  }\r\n  private _toastPanelOpened =\r\n    (this.storageService.get('toastOpened') as boolean) !== false;\r\n\r\n  isMobile(): boolean {\r\n    return this.mediaService.getMedia() === Media.Mobile;\r\n  }\r\n\r\n  isTablet(): boolean {\r\n    return this.mediaService.getMedia() === Media.Tablet;\r\n  }\r\n\r\n  isLandscape(): boolean {\r\n    return this.mediaService.getOrientation() === MediaOrientation.Landscape;\r\n  }\r\n\r\n  isPortrait(): boolean {\r\n    return this.mediaService.getOrientation() === MediaOrientation.Portrait;\r\n  }\r\n\r\n  get backdropShown(): boolean {\r\n    return (\r\n      (this.isMobile() || (this.isTablet() && this.isPortrait())) &&\r\n      this.sidenavOpened\r\n    );\r\n  }\r\n\r\n  get expansionPanelExpanded(): boolean {\r\n    return this.workspaceState.workspacePanelExpanded;\r\n  }\r\n  set expansionPanelExpanded(value: boolean) {\r\n    this.workspaceState.workspacePanelExpanded = value;\r\n  }\r\n\r\n  get toastPanelShown(): boolean {\r\n    return true;\r\n  }\r\n\r\n  get expansionPanelBackdropShown(): boolean {\r\n    return this.expansionPanelExpanded && this.toastPanelForExpansionOpened;\r\n  }\r\n\r\n  get actionbarMode(): ActionbarMode {\r\n    return ActionbarMode.Overlay;\r\n  }\r\n\r\n  get actionbarWithTitle(): boolean {\r\n    return this.actionbarMode === ActionbarMode.Overlay;\r\n  }\r\n\r\n  get searchStore(): EntityStore<SearchResult> {\r\n    return this.searchState.store;\r\n  }\r\n\r\n  get searchResultsGeometryEnabled(): boolean {\r\n    return this.searchState.searchResultsGeometryEnabled$.value;\r\n  }\r\n\r\n  get queryStore(): EntityStore<SearchResult> {\r\n    return this.queryState.store;\r\n  }\r\n\r\n  get toolbox(): Toolbox {\r\n    return this.toolState.toolbox;\r\n  }\r\n\r\n  get toastPanelContent(): string {\r\n    let content;\r\n    if (this.workspace !== undefined && this.workspace.hasWidget) {\r\n      content = 'workspace';\r\n    } /*else if (this.searchResult !== undefined) {\r\n      content = this.searchResult.meta.dataType.toLowerCase();\r\n    }*/\r\n    return content;\r\n  }\r\n\r\n  // get toastPanelTitle(): string {\r\n  //   let title;\r\n  //   if (\r\n  //     this.toastPanelContent !== 'workspace' &&\r\n  //     this.searchResult !== undefined\r\n  //   ) {\r\n  //     title = getEntityTitle(this.searchResult);\r\n  //   }\r\n  //   return title;\r\n  // }\r\n\r\n  get workspaceStore(): WorkspaceStore {\r\n    return this.workspaceState.store;\r\n  }\r\n\r\n  get workspace(): Workspace {\r\n    return this.workspaceState.workspace$.value;\r\n  }\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    public workspaceState: WorkspaceState,\r\n    public authService: AuthService,\r\n    public mediaService: MediaService,\r\n    public layerService: LayerService,\r\n    public dataSourceService: DataSourceService,\r\n    public cdRef: ChangeDetectorRef,\r\n    public capabilitiesService: CapabilitiesService,\r\n    private contextState: ContextState,\r\n    private mapState: MapState,\r\n    private searchState: SearchState,\r\n    private queryState: QueryState,\r\n    private toolState: ToolState,\r\n    private searchSourceService: SearchSourceService,\r\n    private configService: ConfigService,\r\n    private importService: ImportService,\r\n    private http: HttpClient,\r\n    private languageService: LanguageService,\r\n    private messageService: MessageService,\r\n    private welcomeWindowService: WelcomeWindowService,\r\n    public dialogWindow: MatDialog,\r\n    private queryService: QueryService,\r\n    private storageService: StorageService,\r\n    private directionState: DirectionState\r\n  ) {\r\n    this.hasExpansionPanel = this.configService.getConfig('hasExpansionPanel');\r\n    this.hasGeolocateButton =\r\n    this.configService.getConfig('hasGeolocateButton') === undefined ? true : this.configService.getConfig('hasGeolocateButton') ;\r\n    this.showRotationButtonIfNoRotation =\r\n      this.configService.getConfig('showRotationButtonIfNoRotation') === undefined ?\r\n        false :\r\n        this.configService.getConfig('showRotationButtonIfNoRotation');\r\n    this.forceCoordsNA = this.configService.getConfig('app.forceCoordsNA');\r\n    this.hasFeatureEmphasisOnSelection = this.configService.getConfig(\r\n      'hasFeatureEmphasisOnSelection'\r\n    );\r\n\r\n\r\n    this.igoSearchPointerSummaryEnabled = this.configService.getConfig(\r\n      'hasSearchPointerSummary'\r\n    );\r\n    if (this.igoSearchPointerSummaryEnabled === undefined) {\r\n      this.igoSearchPointerSummaryEnabled = this.storageService.get('searchPointerSummaryEnabled') as boolean || false;\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n    window['IGO'] = this;\r\n    this.searchState.searchTermSplitter$.next(this.termSplitter);\r\n\r\n    this.initWelcomeWindow();\r\n\r\n    this.authService.authenticate$.subscribe((authenticated) => {\r\n      this.contextLoaded = false;\r\n    });\r\n\r\n    this.context$$ = this.contextState.context$.subscribe(\r\n      (context: DetailedContext) => this.onChangeContext(context)\r\n    );\r\n\r\n    this.contextMenuStore.load([\r\n      {\r\n        id: 'coordinates',\r\n        title: 'coordinates',\r\n        handler: () => this.searchCoordinate(this.contextMenuCoord)\r\n      },\r\n      {\r\n        id: 'googleMaps',\r\n        title: 'googleMap',\r\n        handler: () => this.openGoogleMaps(this.contextMenuCoord)\r\n      },\r\n      {\r\n        id: 'googleStreetView',\r\n        title: 'googleStreetView',\r\n        handler: () => this.openGoogleStreetView(this.contextMenuCoord)\r\n      }\r\n    ]);\r\n\r\n    this.queryStore.count$\r\n      .pipe(pairwise())\r\n      .subscribe(([prevCnt, currentCnt]) => {\r\n        this.map.viewController.padding[2] = currentCnt ? 280 : 0;\r\n        // on mobile. Close the toast if workspace is opened, on new query\r\n        if (\r\n          prevCnt === 0 &&\r\n          currentCnt !== prevCnt &&\r\n          this.isMobile() &&\r\n          this.hasExpansionPanel &&\r\n          this.expansionPanelExpanded &&\r\n          this.toastPanelOpened\r\n        ) {\r\n          this.toastPanelOpened = false;\r\n        }\r\n      });\r\n    this.map.ol.once('rendercomplete', () => {\r\n      this.readQueryParams();\r\n    });\r\n\r\n    this.onSettingsChange$.subscribe(() => {\r\n      this.searchState.setSearchSettingsChange();\r\n    });\r\n\r\n    this.searchState.selectedResult$.subscribe((result) => {\r\n      if (result && this.isMobile()) {\r\n        this.closeSidenav();\r\n      }\r\n    });\r\n\r\n    this.workspaceState.workspaceEnabled$.next(this.hasExpansionPanel);\r\n    this.workspaceState.store.empty$.subscribe((workspaceEmpty) => {\r\n      if (!this.hasExpansionPanel) {\r\n        return;\r\n      }\r\n      this.workspaceState.workspaceEnabled$.next(workspaceEmpty ? false : true);\r\n      if (workspaceEmpty) {\r\n        this.expansionPanelExpanded = false;\r\n      }\r\n      this.updateMapBrowserClass();\r\n    });\r\n\r\n    this.workspaceMaximize$$.push(this.workspaceState.workspaceMaximize$.subscribe((workspaceMaximize) => {\r\n      this.workspaceMaximize$.next(workspaceMaximize);\r\n      this.updateMapBrowserClass();\r\n    }));\r\n    this.workspaceMaximize$$.push(\r\n      this.workspaceMaximize$.subscribe(() => this.updateMapBrowserClass())\r\n    );\r\n\r\n    this.workspaceState.workspace$.subscribe((activeWks: WfsWorkspace | FeatureWorkspace) => {\r\n      if (activeWks) {\r\n        this.selectedWorkspace$.next(activeWks);\r\n        this.expansionPanelExpanded = true;\r\n      } else {\r\n        this.expansionPanelExpanded = false;\r\n      }\r\n    });\r\n\r\n    this.activeWidget$$ = this.workspaceState.activeWorkspaceWidget$.subscribe(\r\n      (widget: Widget) => {\r\n        if (widget !== undefined) {\r\n          this.openToastPanelForExpansion();\r\n          this.showToastPanelForExpansionToggle = true;\r\n        } else {\r\n          this.closeToastPanelForExpansion();\r\n          this.showToastPanelForExpansionToggle = false;\r\n        }\r\n      }\r\n    );\r\n\r\n    this.openSidenav$$ = this.toolState.openSidenav$.subscribe(\r\n      (openSidenav: boolean) => {\r\n        if (openSidenav) {\r\n          this.openSidenav();\r\n          this.toolState.openSidenav$.next(false);\r\n        }\r\n      }\r\n    );\r\n\r\n    this.sidenavMediaAndOrientation$$ =\r\n      combineLatest([\r\n        this.sidenavOpened$,\r\n        this.mediaService.media$,\r\n        this.mediaService.orientation$]\r\n      ).pipe(\r\n        debounceTime(50)\r\n      ).subscribe((sidenavMediaAndOrientation: [boolean, string, string]) => {\r\n        this.computeToastPanelOffsetX();\r\n      });\r\n  }\r\n\r\n  setToastPanelHtmlDisplay(value) {\r\n    this.toastPanelHtmlDisplay = value;\r\n    this.computeToastPanelOffsetX();\r\n  }\r\n\r\n  computeToastPanelOffsetX() {\r\n    if (this.isMobile() || !this.isLandscape()) {\r\n      Promise.resolve().then(() => this.toastPanelOffsetX$.next(undefined));\r\n    } else {\r\n      Promise.resolve().then(() => this.toastPanelOffsetX$.next(this.getToastPanelExtent()));\r\n    }\r\n  }\r\n\r\n  workspaceVisibility(): boolean {\r\n    const wks = (this.selectedWorkspace$.value as WfsWorkspace | FeatureWorkspace);\r\n    if (wks.inResolutionRange$.value) {\r\n      if (wks.entityStore.empty$.value && !wks.layer.visible) {\r\n        this.workspaceNotAvailableMessage = 'workspace.disabled.visible';\r\n      } else {\r\n        this.workspaceNotAvailableMessage = '';\r\n      }\r\n    } else {\r\n      this.workspaceNotAvailableMessage = 'workspace.disabled.resolution';\r\n    }\r\n    return wks.inResolutionRange$.value;\r\n  }\r\n\r\n\r\n  paginatorChange(matPaginator: MatPaginator) {\r\n    this.workspacePaginator = matPaginator;\r\n  }\r\n\r\n  entitySortChange() {\r\n    this.workspaceEntitySortChange$.next(true);\r\n  }\r\n\r\n  entitySelectChange(result: { added: Feature[] }) {\r\n    const baseQuerySearchSource = this.getQuerySearchSource();\r\n    const querySearchSourceArray: QuerySearchSource[] = [];\r\n    if (result && result.added) {\r\n      const results = result.added.map((res) => {\r\n        if (\r\n          res &&\r\n          res.ol &&\r\n          res.ol.getProperties()._featureStore.layer &&\r\n          res.ol.getProperties()._featureStore.layer.visible\r\n        ) {\r\n          const ol = res.ol as olFeature<OlGeometry>;\r\n          const featureStoreLayer = res.ol.getProperties()._featureStore.layer;\r\n          const feature = featureFromOl(\r\n            ol,\r\n            featureStoreLayer.map.projection,\r\n            featureStoreLayer.ol\r\n          );\r\n\r\n          feature.meta.alias = this.queryService.getAllowedFieldsAndAlias(\r\n            featureStoreLayer\r\n          );\r\n          feature.meta.title =\r\n            this.queryService.getQueryTitle(feature, featureStoreLayer) ||\r\n            feature.meta.title;\r\n          let querySearchSource = querySearchSourceArray.find(\r\n            (s) => s.title === feature.meta.sourceTitle\r\n          );\r\n          if (!querySearchSource) {\r\n            querySearchSource = new QuerySearchSource({\r\n              title: feature.meta.sourceTitle\r\n            });\r\n            querySearchSourceArray.push(querySearchSource);\r\n          }\r\n          return featureToSearchResult(feature, querySearchSource);\r\n        }\r\n      });\r\n\r\n      const research = {\r\n        request: of(results),\r\n        reverse: false,\r\n        source: baseQuerySearchSource\r\n      };\r\n      research.request.subscribe((queryResults: SearchResult<Feature>[]) => {\r\n        this.queryStore.load(queryResults);\r\n      });\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.context$$.unsubscribe();\r\n    this.activeWidget$$.unsubscribe();\r\n    this.openSidenav$$.unsubscribe();\r\n    this.workspaceMaximize$$.map(f => f.unsubscribe());\r\n    this.sidenavMediaAndOrientation$$.unsubscribe();\r\n  }\r\n\r\n  /**\r\n   * Cancel ongoing add layer, if any\r\n   */\r\n  private cancelOngoingAddLayer() {\r\n    this.addedLayers$$.forEach((sub: Subscription) => sub.unsubscribe());\r\n    this.addedLayers$$ = [];\r\n  }\r\n\r\n  onBackdropClick() {\r\n    this.closeSidenav();\r\n  }\r\n\r\n  onToggleSidenavClick() {\r\n    this.toggleSidenav();\r\n  }\r\n\r\n  onDeactivateWorkspaceWidget() {\r\n    this.closeToastPanelForExpansion();\r\n  }\r\n\r\n  closeToastPanelForExpansion() {\r\n    this.toastPanelForExpansionOpened = false;\r\n  }\r\n\r\n  openToastPanelForExpansion() {\r\n    this.toastPanelForExpansionOpened = true;\r\n  }\r\n\r\n  onMapQuery(event: { features: Feature[]; event: MapBrowserEvent<any> }) {\r\n    const baseQuerySearchSource = this.getQuerySearchSource();\r\n    const querySearchSourceArray: QuerySearchSource[] = [];\r\n\r\n    const results = event.features.map((feature: Feature) => {\r\n      let querySearchSource = querySearchSourceArray.find(\r\n        (s) => s.title === feature.meta.sourceTitle\r\n      );\r\n      if (!querySearchSource) {\r\n        querySearchSource = new QuerySearchSource({\r\n          title: feature.meta.sourceTitle\r\n        });\r\n        querySearchSourceArray.push(querySearchSource);\r\n      }\r\n      return featureToSearchResult(feature, querySearchSource);\r\n    });\r\n\r\n    const research = {\r\n      request: of(results),\r\n      reverse: false,\r\n      source: baseQuerySearchSource\r\n    };\r\n    research.request.subscribe((queryResults: SearchResult<Feature>[]) => {\r\n      this.queryStore.load(queryResults);\r\n    });\r\n  }\r\n\r\n  onSearchTermChange(term?: string) {\r\n    if (this.routeParams?.search && term !== this.routeParams.search) {\r\n      this.searchState.deactivateCustomFilterTermStrategy();\r\n  }\r\n\r\n    this.searchState.setSearchTerm(term);\r\n    const termWithoutHashtag = term.replace(/(#[^\\s]*)/g, '').trim();\r\n    if (termWithoutHashtag.length < 2) {\r\n      this.onClearSearch();\r\n      return;\r\n    }\r\n    this.onBeforeSearch();\r\n  }\r\n\r\n  onSearch(event: { research: Research; results: SearchResult[] }) {\r\n    const results = event.results;\r\n\r\n    const isReverseSearch = !sourceCanSearch(event.research.source);\r\n\r\n    let enabledSources;\r\n    if (isReverseSearch) {\r\n      enabledSources = this.searchSourceService\r\n        .getEnabledSources()\r\n        .filter(sourceCanReverseSearch);\r\n    } else {\r\n      enabledSources = this.searchSourceService\r\n        .getEnabledSources()\r\n        .filter(sourceCanSearch);\r\n    }\r\n\r\n    const newResults = this.searchStore.entities$.value\r\n      .filter(\r\n        (result: SearchResult) =>\r\n          result.source !== event.research.source &&\r\n          enabledSources.includes(result.source)\r\n      )\r\n      .concat(results);\r\n    this.searchStore.updateMany(newResults);\r\n  }\r\n\r\n  onSearchResultsGeometryStatusChange(value) {\r\n    this.searchState.setSearchResultsGeometryStatus(value);\r\n  }\r\n\r\n  onSearchSettingsChange() {\r\n    this.onSettingsChange$.next(true);\r\n  }\r\n\r\n  private closeSidenav() {\r\n    this.sidenavOpened = false;\r\n    this.map.viewController.padding[3] = 0;\r\n  }\r\n\r\n  private openSidenav() {\r\n    this.sidenavOpened = true;\r\n    this.map.viewController.padding[3] = this.isMobile() ? 0 : 400;\r\n  }\r\n\r\n  private toggleSidenav() {\r\n    this.sidenavOpened ? this.closeSidenav() : this.openSidenav();\r\n    this.computeToastPanelOffsetX();\r\n  }\r\n\r\n  public toolChanged(tool: Tool) {\r\n    if (tool && tool.name === 'searchResults') {\r\n      this.searchBar.nativeElement.getElementsByTagName('input')[0].focus();\r\n    }\r\n  }\r\n\r\n  private onChangeContext(context: DetailedContext) {\r\n    this.cancelOngoingAddLayer();\r\n    if (context === undefined) {\r\n      return;\r\n    }\r\n\r\n    this.route.queryParams.pipe(debounceTime(250)).subscribe((qParams) => {\r\n      if (!qParams['context'] || qParams['context'] === context.uri) {\r\n        this.readLayersQueryParams(qParams);\r\n      }\r\n    });\r\n\r\n    if (this.contextLoaded) {\r\n      const contextManager = this.toolbox.getTool('contextManager');\r\n      const contextManagerOptions = contextManager\r\n        ? contextManager.options\r\n        : {};\r\n      let toolToOpen = contextManagerOptions.toolToOpenOnContextChange;\r\n\r\n      if (!toolToOpen) {\r\n        const toolOrderToOpen = ['mapTools', 'map', 'mapDetails', 'mapLegend'];\r\n        for (const toolName of toolOrderToOpen) {\r\n          if (this.toolbox.getTool(toolName)) {\r\n            toolToOpen = toolName;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n      if (toolToOpen) {\r\n        this.toolbox.activateTool(toolToOpen);\r\n      }\r\n    }\r\n\r\n    this.contextLoaded = true;\r\n  }\r\n\r\n  private onBeforeSearch() {\r\n    if (\r\n      !this.toolbox.activeTool$.value ||\r\n      this.toolbox.activeTool$.value.name !== 'searchResults'\r\n    ) {\r\n      this.toolbox.activateTool('searchResults');\r\n    }\r\n    this.openSidenav();\r\n  }\r\n\r\n  toastOpenedChange(opened: boolean) {\r\n    this.map.viewController.padding[2] = opened ? 280 : 0;\r\n    this.handleExpansionAndToastOnMobile();\r\n    this.toastPanelOpened = opened;\r\n  }\r\n\r\n  private handleExpansionAndToastOnMobile() {\r\n    if (\r\n      this.isMobile() &&\r\n      this.hasExpansionPanel &&\r\n      this.expansionPanelExpanded &&\r\n      this.toastPanelOpened\r\n    ) {\r\n      this.expansionPanelExpanded = false;\r\n    }\r\n  }\r\n\r\n  public onClearSearch() {\r\n    this.map.searchResultsOverlay.clear();\r\n    this.searchStore.clear();\r\n    this.searchState.setSelectedResult(undefined);\r\n    this.searchState.deactivateCustomFilterTermStrategy();\r\n  }\r\n\r\n  private getQuerySearchSource(): SearchSource {\r\n    return this.searchSourceService\r\n      .getSources()\r\n      .find(\r\n        (searchSource: SearchSource) =>\r\n          searchSource instanceof QuerySearchSource\r\n      );\r\n  }\r\n\r\n  onContextMenuOpen(event: { x: number; y: number }) {\r\n    this.contextMenuCoord = this.getClickCoordinate(event) as [number, number];\r\n  }\r\n\r\n  private getClickCoordinate(event: { x: number; y: number }) {\r\n    const contextmenuPoint = event;\r\n    const boundingMapBrowser = this.mapBrowser.nativeElement.getBoundingClientRect();\r\n    contextmenuPoint.y =\r\n      contextmenuPoint.y -\r\n      boundingMapBrowser.top +\r\n      (window.scrollY || window.pageYOffset);\r\n    contextmenuPoint.x =\r\n      contextmenuPoint.x -\r\n      boundingMapBrowser.left +\r\n      (window.scrollX || window.pageXOffset);\r\n    const pixel = [contextmenuPoint.x, contextmenuPoint.y];\r\n\r\n    const coord = this.map.ol.getCoordinateFromPixel(pixel);\r\n    const proj = this.map.projection;\r\n    return olProj.transform(coord, proj, 'EPSG:4326');\r\n  }\r\n\r\n  private openGoogleMaps(coord: [number, number]) {\r\n    window.open(GoogleLinks.getGoogleMapsCoordLink(coord[0], coord[1]));\r\n  }\r\n\r\n  private openGoogleStreetView(coord: [number, number]) {\r\n    window.open(GoogleLinks.getGoogleStreetViewLink(coord[0], coord[1]));\r\n  }\r\n\r\n  searchCoordinate(coord: [number, number]) {\r\n    this.searchBarTerm = coord.map((c) => c.toFixed(6)).join(', ');\r\n  }\r\n\r\n  updateMapBrowserClass() {\r\n    const header = this.queryState.store.entities$.value.length > 0;\r\n    if (this.hasExpansionPanel && this.workspaceState.workspaceEnabled$.value) {\r\n      this.mapBrowser.nativeElement.classList.add('has-expansion-panel');\r\n    } else {\r\n      this.mapBrowser.nativeElement.classList.remove('has-expansion-panel');\r\n    }\r\n\r\n    if (this.hasExpansionPanel && this.expansionPanelExpanded) {\r\n      if (this.workspaceMaximize$.value) {\r\n        this.mapBrowser.nativeElement.classList.add('expansion-offset-maximized');\r\n        this.mapBrowser.nativeElement.classList.remove('expansion-offset');\r\n      } else {\r\n        this.mapBrowser.nativeElement.classList.add('expansion-offset');\r\n        this.mapBrowser.nativeElement.classList.remove('expansion-offset-maximized');\r\n      }\r\n    } else {\r\n      if (this.workspaceMaximize$.value) {\r\n        this.mapBrowser.nativeElement.classList.remove('expansion-offset-maximized');\r\n      } else {\r\n        this.mapBrowser.nativeElement.classList.remove('expansion-offset');\r\n      }\r\n    }\r\n\r\n    if (this.sidenavOpened) {\r\n      this.mapBrowser.nativeElement.classList.add('sidenav-offset');\r\n    } else {\r\n      this.mapBrowser.nativeElement.classList.remove('sidenav-offset');\r\n    }\r\n\r\n    if (this.sidenavOpened && !this.isMobile()) {\r\n      this.mapBrowser.nativeElement.classList.add('sidenav-offset-baselayers');\r\n    } else {\r\n      this.mapBrowser.nativeElement.classList.remove(\r\n        'sidenav-offset-baselayers'\r\n      );\r\n    }\r\n\r\n    if (!this.toastPanelOpened && header && !this.expansionPanelExpanded) {\r\n      this.mapBrowser.nativeElement.classList.add('toast-offset-scale-line');\r\n    } else {\r\n      this.mapBrowser.nativeElement.classList.remove('toast-offset-scale-line');\r\n    }\r\n\r\n    if (\r\n      !this.toastPanelOpened &&\r\n      header &&\r\n      (this.isMobile() || this.isTablet() || this.sidenavOpened) &&\r\n      !this.expansionPanelExpanded\r\n    ) {\r\n      this.mapBrowser.nativeElement.classList.add('toast-offset-attribution');\r\n    } else {\r\n      this.mapBrowser.nativeElement.classList.remove(\r\n        'toast-offset-attribution'\r\n      );\r\n    }\r\n  }\r\n\r\n  getToastPanelExtent() {\r\n    if (!this.sidenavOpened) {\r\n      if (this.toastPanelHtmlDisplay && this.mediaService.isDesktop()) {\r\n        return 'htmlDisplay';\r\n      }\r\n      if (this.fullExtent) {\r\n        return 'fullStandard';\r\n      } else {\r\n        return 'standard';\r\n      }\r\n    } else if (this.sidenavOpened) {\r\n      if (this.toastPanelHtmlDisplay && this.mediaService.isDesktop()) {\r\n        return 'htmlDisplayOffsetX';\r\n      }\r\n      if (this.fullExtent) {\r\n        return 'fullOffsetX';\r\n      } else {\r\n        return 'standardOffsetX';\r\n      }\r\n    }\r\n  }\r\n\r\n  onPointerSummaryStatusChange(value) {\r\n    this.storageService.set('searchPointerSummaryEnabled', value);\r\n    this.igoSearchPointerSummaryEnabled = value;\r\n  }\r\n\r\n  getExpansionPanelStatus() {\r\n    if (this.sidenavOpened === false) {\r\n      if (this.expansionPanelExpanded === true) {\r\n        return 'full';\r\n      }\r\n      return 'notTriggered';\r\n    }\r\n    if (this.sidenavOpened === true && this.isMobile() === false) {\r\n      if (this.expansionPanelExpanded === true) {\r\n        return 'reduced';\r\n      }\r\n      return 'reducedNotTriggered';\r\n    }\r\n    if (this.sidenavOpened === true && this.isMobile() === true) {\r\n      if (this.expansionPanelExpanded === true) {\r\n        return 'mobile';\r\n      } else {\r\n        return 'notVisible';\r\n      }\r\n    }\r\n  }\r\n\r\n  getToastPanelOffsetY() {\r\n    let status = 'noExpansion';\r\n    if (this.expansionPanelExpanded) {\r\n      if (this.workspaceMaximize$.value) {\r\n        if (this.toastPanelOpened) {\r\n          status = 'expansionMaximizedAndToastOpened';\r\n        } else {\r\n          status = 'expansionMaximizedAndToastClosed';\r\n        }\r\n      } else {\r\n        if (this.toastPanelOpened) {\r\n          status = 'expansionAndToastOpened';\r\n        } else {\r\n          status = 'expansionAndToastClosed';\r\n        }\r\n      }\r\n    } else {\r\n      status = 'noExpansion';\r\n    }\r\n    return status;\r\n  }\r\n\r\n  getToastPanelStatus() {\r\n    if (this.isMobile() === true && this.toastPanelOpened === false) {\r\n      if (this.sidenavOpened === false) {\r\n        if (this.expansionPanelExpanded === false) {\r\n          if (this.queryState.store.entities$.value.length > 0) {\r\n            return 'low';\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  getControlsOffsetY() {\r\n    return this.expansionPanelExpanded ?\r\n      this.workspaceMaximize$.value ? 'firstRowFromBottom-expanded-maximized' : 'firstRowFromBottom-expanded' :\r\n      'firstRowFromBottom';\r\n  }\r\n\r\n  getBaselayersSwitcherStatus() {\r\n    let status;\r\n    if (this.isMobile()) {\r\n\r\n      if (this.workspaceState.workspaceEnabled$.value) {\r\n        if (this.expansionPanelExpanded === false) {\r\n          if (this.queryState.store.entities$.value.length === 0) {\r\n            status = 'secondRowFromBottom';\r\n           } else {\r\n            status = 'thirdRowFromBottom';\r\n           }\r\n        } else {\r\n          if (this.queryState.store.entities$.value.length === 0) {\r\n            status = 'firstRowFromBottom-expanded';\r\n           } else {\r\n            status = 'secondRowFromBottom-expanded';\r\n           }\r\n        }\r\n\r\n      } else {\r\n        if (this.queryState.store.entities$.value.length === 0) {\r\n          status = 'firstRowFromBottom';\r\n         } else {\r\n          status = 'secondRowFromBottom';\r\n         }\r\n      }\r\n    } else {\r\n      if (this.workspaceState.workspaceEnabled$.value) {\r\n        if (this.expansionPanelExpanded) {\r\n          if (this.workspaceMaximize$.value) {\r\n            status = 'firstRowFromBottom-expanded-maximized';\r\n          } else {\r\n            status = 'firstRowFromBottom-expanded';\r\n          }\r\n        } else {\r\n          status = 'secondRowFromBottom';\r\n        }\r\n      } else {\r\n        status = 'firstRowFromBottom';\r\n      }\r\n    }\r\n    return status;\r\n  }\r\n\r\n  private readQueryParams() {\r\n    this.route.queryParams.subscribe((params) => {\r\n      this.routeParams = params;\r\n      this.readToolParams();\r\n      this.readSearchParams();\r\n      this.readFocusFirst();\r\n    });\r\n  }\r\n\r\n  private computeFocusFirst() {\r\n    setTimeout(() => {\r\n      const resultItem: any = document\r\n        .getElementsByTagName('igo-search-results-item')\r\n        .item(0);\r\n      if (resultItem) {\r\n        resultItem.click();\r\n      }\r\n    }, 1);\r\n  }\r\n\r\n  private readFocusFirst() {\r\n    if (this.routeParams['sf'] === '1' && this.termDefinedInUrl) {\r\n      const entities$$ = this.searchStore.stateView.all$()\r\n        .pipe(\r\n          skipWhile((entities) => entities.length === 0),\r\n          debounceTime(500),\r\n          take(1)\r\n        )\r\n        .subscribe((entities) => {\r\n          entities$$.unsubscribe();\r\n          if (entities.length && !this.termDefinedInUrlTriggered) {\r\n            this.computeFocusFirst();\r\n            this.termDefinedInUrlTriggered = true;\r\n          }\r\n        });\r\n    }\r\n  }\r\n\r\n  private readSearchParams() {\r\n    if (this.routeParams['search']) {\r\n      this.termDefinedInUrl = true;\r\n      if (this.routeParams['exactMatch'] === '1') {\r\n        this.searchState.activateCustomFilterTermStrategy();\r\n      }\r\n      if (this.routeParams['search'] && !this.routeParams['zoom'] && this.routeParams['sf'] !== '1') {\r\n        const entities$$ = this.searchStore.stateView.all$()\r\n        .pipe(\r\n          skipWhile((entities) => entities.length === 0),\r\n          debounceTime(500),\r\n          take(1)\r\n        )\r\n        .subscribe((entities) => {\r\n          entities$$.unsubscribe();\r\n          const searchResultsOlFeatures = entities\r\n            .filter(e => e.entity.meta.dataType === FEATURE)\r\n            .map((entity: EntityRecord<SearchResult>) =>\r\n              new olFormatGeoJSON().readFeature(entity.entity.data, {\r\n                dataProjection: entity.entity.data.projection,\r\n                featureProjection: this.map.projection\r\n              })\r\n            );\r\n            const totalExtent = computeOlFeaturesExtent(this.map, searchResultsOlFeatures);\r\n            this.map.viewController.zoomToExtent(totalExtent);\r\n        });\r\n      }\r\n      this.searchBarTerm = this.routeParams['search'];\r\n    }\r\n    if (this.routeParams['searchGeom'] === '1') {\r\n      this.searchState.searchResultsGeometryEnabled$.next(true);\r\n    }\r\n  }\r\n\r\n  private readToolParams() {\r\n    if (this.routeParams['tool']) {\r\n      this.toolbox.activateTool(this.routeParams['tool']);\r\n    }\r\n\r\n    if (this.routeParams['sidenav'] === '1') {\r\n      setTimeout(() => {\r\n        this.openSidenav();\r\n      }, 250);\r\n    }\r\n\r\n    if (this.routeParams['routing']) {\r\n      let routingCoordLoaded = false;\r\n      const stopCoords = this.routeParams['routing'].split(';');\r\n      const routingOptions = this.routeParams['routingOptions'];\r\n      let resultSelection: number;\r\n      if (routingOptions) {\r\n        resultSelection = parseInt(routingOptions.split('result:')[1], 10);\r\n      }\r\n      this.directionState.stopsStore.storeInitialized$\r\n        .pipe(skipWhile(init => !init), first())\r\n        .subscribe((init: boolean) => {\r\n          if (init && !routingCoordLoaded) {\r\n            routingCoordLoaded = true;\r\n            stopCoords.map((coord, i) => {\r\n              if (i > 1) {\r\n                addStopToStore(this.directionState.stopsStore);\r\n              }\r\n            });\r\n            setTimeout(() => {\r\n              stopCoords.map((coord, i) => {\r\n                const stop = this.directionState.stopsStore.all().find(e => e.position === i);\r\n                stop.text = coord;\r\n                stop.coordinates = coord.split(',');\r\n                this.directionState.stopsStore.update(stop);\r\n              });\r\n            }, this.directionState.debounceTime * 1.25); // this delay is due to the default component debounce time\r\n          }\r\n        });\r\n      // zoom to active route\r\n      this.directionState.routesFeatureStore.count$\r\n        .pipe(skipWhile(c => c < 1), first())\r\n        .subscribe(c => {\r\n          if (c >= 1) {\r\n            this.directionState.zoomToActiveRoute$.next();\r\n          }\r\n        });\r\n      // select the active route by url controls\r\n      this.directionState.routesFeatureStore.count$\r\n        .pipe(skipWhile(c => c < 2), first())\r\n        .subscribe(() => {\r\n          if (resultSelection) {\r\n            this.directionState.routesFeatureStore.entities$.value.map(d => d.properties.active = false);\r\n            this.directionState.routesFeatureStore.entities$.value[resultSelection].properties.active = true;\r\n            this.directionState.zoomToActiveRoute$.next();\r\n          }\r\n        });\r\n    }\r\n  }\r\n\r\n  private readLayersQueryParams(params: Params) {\r\n    this.readLayersQueryParamsByType(params, 'wms');\r\n    this.readLayersQueryParamsByType(params, 'wmts');\r\n    this.readLayersQueryParamsByType(params, 'arcgisrest');\r\n    this.readLayersQueryParamsByType(params, 'imagearcgisrest');\r\n    this.readLayersQueryParamsByType(params, 'tilearcgisrest');\r\n    this.readVectorQueryParams(params);\r\n  }\r\n\r\n  getQueryParam(name, url) {\r\n    let paramValue;\r\n    if (url.includes('?')) {\r\n      const httpParams = new HttpParams({ fromString: url.split('?')[1] });\r\n      paramValue = httpParams.get(name);\r\n    }\r\n    return paramValue;\r\n  }\r\n\r\n  private readLayersQueryParamsByType(params: Params, type) {\r\n    let nameParamLayersKey;\r\n    let urlsKey;\r\n    switch (type) {\r\n      case 'wms':\r\n        if ((params['layers'] || params['wmsLayers']) && params['wmsUrl']) {\r\n          urlsKey = 'wmsUrl';\r\n          nameParamLayersKey = params['wmsLayers'] ? 'wmsLayers' : 'layers'; // for maintain compatibility\r\n        }\r\n        break;\r\n      case 'wmts':\r\n        if (params['wmtsLayers'] && params['wmtsUrl']) {\r\n          urlsKey = 'wmtsUrl';\r\n          nameParamLayersKey = 'wmtsLayers';\r\n        }\r\n        break;\r\n      case 'arcgisrest':\r\n        if (params['arcgisLayers'] && params['arcgisUrl']) {\r\n          urlsKey = 'arcgisUrl';\r\n          nameParamLayersKey = 'arcgisLayers';\r\n        }\r\n        break;\r\n      case 'imagearcgisrest':\r\n        if (params['iarcgisLayers'] && params['iarcgisUrl']) {\r\n          urlsKey = 'iarcgisUrl';\r\n          nameParamLayersKey = 'iarcgisLayers';\r\n        }\r\n        break;\r\n      case 'tilearcgisrest':\r\n        if (params['tarcgisLayers'] && params['tarcgisUrl']) {\r\n          urlsKey = 'tarcgisUrl';\r\n          nameParamLayersKey = 'tarcgisLayers';\r\n        }\r\n        break;\r\n    }\r\n    if (!nameParamLayersKey || !urlsKey) {\r\n      return;\r\n    }\r\n    const layersByService = params[nameParamLayersKey].split('),(');\r\n    const urls = params[urlsKey].split(',');\r\n\r\n    let cnt = 0;\r\n    urls.forEach((urlSrc) => {\r\n      let url = urlSrc;\r\n      const version =\r\n        this.getQueryParam('VERSION', url) ||\r\n        this.getQueryParam('version', url) ||\r\n        undefined;\r\n      if (version) {\r\n        url = url.replace('VERSION=' + version, '').replace('version=' + version, '');\r\n      }\r\n\r\n      const currentLayersByService = this.extractLayersByService(\r\n        layersByService[cnt]\r\n      );\r\n      currentLayersByService.forEach((layer) => {\r\n        const layerFromUrl = layer.split(':igoz');\r\n        const layerOptions = ObjectUtils.removeUndefined({\r\n          type,\r\n          url: url,\r\n          layer: layerFromUrl[0],\r\n          params: type === 'wms' ? { LAYERS: layerFromUrl[0] } : undefined\r\n        });\r\n        const id = generateIdFromSourceOptions(layerOptions);\r\n        const visibility = this.computeLayerVisibilityFromUrl(params, id);\r\n        this.addLayerFromURL(\r\n          url,\r\n          layerFromUrl[0],\r\n          type,\r\n          version,\r\n          visibility,\r\n          layerFromUrl[1] ? parseInt(layerFromUrl[1], 10) : undefined\r\n        );\r\n      });\r\n      cnt += 1;\r\n    });\r\n  }\r\n\r\n  private readVectorQueryParams(params: Params) {\r\n    if (params['vector']) {\r\n      const url = params['vector'] as string;\r\n      const lastIndex = url.lastIndexOf('/');\r\n      const fileName = url.slice(lastIndex + 1, url.length);\r\n\r\n      this.http.get(`${url}`, { responseType: 'blob' }).subscribe((data) => {\r\n        const file = new File([data], fileName, {\r\n          type: data.type,\r\n          lastModified: Date.now()\r\n        });\r\n        this.importService.import(file).subscribe(\r\n          (features: Feature[]) => this.onFileImportSuccess(file, features),\r\n          (error: Error) => this.onFileImportError(file, error)\r\n        );\r\n      });\r\n    }\r\n  }\r\n\r\n  private onFileImportSuccess(file: File, features: Feature[]) {\r\n    handleFileImportSuccess(\r\n      file,\r\n      features,\r\n      this.map,\r\n      this.messageService,\r\n      this.languageService\r\n    );\r\n  }\r\n\r\n  private onFileImportError(file: File, error: Error) {\r\n    handleFileImportError(\r\n      file,\r\n      error,\r\n      this.messageService,\r\n      this.languageService\r\n    );\r\n  }\r\n\r\n  private extractLayersByService(layersByService: string): any[] {\r\n    let outLayersByService = layersByService;\r\n    outLayersByService = outLayersByService.startsWith('(')\r\n      ? outLayersByService.substr(1)\r\n      : outLayersByService;\r\n    outLayersByService = outLayersByService.endsWith(')')\r\n      ? outLayersByService.slice(0, -1)\r\n      : outLayersByService;\r\n    return outLayersByService.split(',');\r\n  }\r\n  private addLayerFromURL(\r\n    url: string,\r\n    name: string,\r\n    type: 'wms' | 'wmts' | 'arcgisrest'| 'imagearcgisrest' | 'tilearcgisrest',\r\n    version: string,\r\n    visibility: boolean = true,\r\n    zIndex: number\r\n  ) {\r\n    if (!this.contextLoaded) {\r\n      return;\r\n    }\r\n    const commonSourceOptions = {\r\n      optionsFromCapabilities: true,\r\n      optionsFromApi: true,\r\n      crossOrigin: true,\r\n      type,\r\n      url\r\n    };\r\n    const arcgisClause = (type === 'arcgisrest' || type === 'imagearcgisrest' || type === 'tilearcgisrest');\r\n    let sourceOptions = {\r\n      version: type === 'wmts' ? '1.0.0' : undefined,\r\n      queryable: arcgisClause ? true : false,\r\n      queryFormat: arcgisClause ? 'esrijson' : undefined,\r\n      layer: name\r\n    };\r\n    if (type === 'wms') {\r\n      sourceOptions = { params: {LAYERS: name, VERSION: version}} as any;\r\n    }\r\n\r\n    sourceOptions = ObjectUtils.removeUndefined(Object.assign({}, sourceOptions, commonSourceOptions));\r\n\r\n    this.addedLayers$$.push(\r\n      this.layerService\r\n        .createAsyncLayer({\r\n          zIndex: zIndex,\r\n          visible: visibility,\r\n          sourceOptions\r\n        })\r\n        .subscribe((l) => {\r\n          this.map.addLayer(l);\r\n        })\r\n    );\r\n  }\r\n\r\n  private computeLayerVisibilityFromUrl(\r\n    params: Params,\r\n    currentLayerid: string\r\n  ): boolean {\r\n    const queryParams = params;\r\n    let visible = true;\r\n    if (!queryParams || !currentLayerid) {\r\n      return visible;\r\n    }\r\n    let visibleOnLayersParams = '';\r\n    let visibleOffLayersParams = '';\r\n    let visiblelayers: string[] = [];\r\n    let invisiblelayers: string[] = [];\r\n    if (queryParams['visiblelayers']) {\r\n      visibleOnLayersParams = queryParams['visiblelayers'];\r\n    }\r\n    if (queryParams['invisiblelayers']) {\r\n      visibleOffLayersParams = queryParams['invisiblelayers'];\r\n    }\r\n\r\n    /* This order is important because to control whichever\r\n     the order of * param. First whe open and close everything.*/\r\n    if (visibleOnLayersParams === '*') {\r\n      visible = true;\r\n    }\r\n    if (visibleOffLayersParams === '*') {\r\n      visible = false;\r\n    }\r\n\r\n    // After, managing named layer by id (context.json OR id from datasource)\r\n    visiblelayers = visibleOnLayersParams.split(',');\r\n    invisiblelayers = visibleOffLayersParams.split(',');\r\n    if (visiblelayers.indexOf(currentLayerid) > -1 || visiblelayers.indexOf(currentLayerid.toString()) > -1) {\r\n      visible = true;\r\n    }\r\n    if (invisiblelayers.indexOf(currentLayerid) > -1 || invisiblelayers.indexOf(currentLayerid.toString()) > -1) {\r\n      visible = false;\r\n    }\r\n    return visible;\r\n  }\r\n\r\n  private initWelcomeWindow(): void {\r\n    if (this.auth?.url) {\r\n      this.authService.logged$.subscribe((logged) => {\r\n        if (logged) {\r\n          this.createWelcomeWindow();\r\n        }\r\n      });\r\n    } else {\r\n      this.createWelcomeWindow();\r\n    }\r\n  }\r\n\r\n  private createWelcomeWindow(): void {\r\n    if (this.welcomeWindowService.hasWelcomeWindow()) {\r\n      const welcomWindowConfig: MatDialogConfig = this.welcomeWindowService.getConfig();\r\n\r\n      const dialogRef = this.dialogWindow.open(\r\n        WelcomeWindowComponent,\r\n        welcomWindowConfig\r\n      );\r\n\r\n      dialogRef.afterClosed().subscribe((result) => {\r\n        this.welcomeWindowService.afterClosedWelcomeWindow();\r\n      });\r\n    }\r\n  }\r\n}\r\n","import './portal.variables.scss';\r\n\r\nimport {\r\n  trigger,\r\n  state,\r\n  style,\r\n  transition,\r\n  animate,\r\n  AnimationTriggerMetadata\r\n} from '@angular/animations';\r\n\r\nexport function expansionPanelAnimation(): AnimationTriggerMetadata[] {\r\n  return [\r\n    trigger('expansionPanelSize', [\r\n      state(\r\n        'full',\r\n        style({\r\n          left: '5px',\r\n          'max-width': '100%'\r\n        })\r\n      ),\r\n      state(\r\n        'notTriggered',\r\n        style({\r\n          left: '5px',\r\n          bottom: '5px',\r\n          'max-width': '100%'\r\n        })\r\n      ),\r\n      state(\r\n        'notVisible',\r\n        style({\r\n          display: 'none'\r\n        })\r\n      ),\r\n      state(\r\n        'mobile',\r\n        style({\r\n          left: 'calc(100% - 40px)',\r\n        })\r\n      ),\r\n      state(\r\n        'reduced',\r\n        style({\r\n          left: '405px',\r\n          'max-width': 'calc(100% - 405px)'\r\n        })\r\n      ),\r\n      state(\r\n        'reducedNotTriggered',\r\n        style({\r\n          left: '405px',\r\n          bottom: '5px',\r\n          'max-width': 'calc(100% - 405px)'\r\n        })\r\n      ),\r\n      transition('* => *', animate('100ms'))\r\n    ]),\r\n    trigger('toastOffsetY', [\r\n      state(\r\n        'true',\r\n        style({\r\n          bottom: '50px'\r\n        })\r\n      ),\r\n      state(\r\n        'false',\r\n        style({\r\n          bottom: '5px'\r\n        })\r\n      )\r\n    ])\r\n  ];\r\n}\r\n\r\nexport function toastPanelAnimation(): AnimationTriggerMetadata[] {\r\n  return [\r\n    trigger('toastPanelMobileSidenav', [\r\n      state(\r\n        'true',\r\n        style({\r\n          display: 'none'\r\n        })\r\n      ),\r\n      transition('* => void', animate('0ms')),\r\n      transition('* => *', animate('200ms'))\r\n    ]),\r\n    trigger('toastPanelOffsetX', [\r\n      state(\r\n        'fullStandard',\r\n        style({\r\n          left: '45%'\r\n        })\r\n      ),\r\n      state(\r\n        'standard',\r\n        style({\r\n          left: '50%'\r\n        })\r\n      ),\r\n      state(\r\n        'htmlDisplay',\r\n        style({\r\n          left: '40%'\r\n        })\r\n      ),\r\n      state(\r\n        'fullOffsetX',\r\n        style({\r\n          left: 'calc(45% + 202px)'\r\n        })\r\n      ),\r\n      state(\r\n        'standardOffsetX',\r\n        style({\r\n          left: 'calc(50% + 202px)'\r\n        })\r\n      ),\r\n      state(\r\n        'htmlDisplayOffsetX',\r\n        style({\r\n          left: 'calc(40% + 160px)'\r\n        })\r\n    ),\r\n      transition('fullStandard => fullOffsetX', animate('200ms')),\r\n      transition('fullOffsetX => fullStandard', animate('200ms')),\r\n      transition('standard => standardOffsetX', animate('200ms')),\r\n      transition('standardOffsetX => standard', animate('200ms')),\r\n      transition('htmlDisplay => htmlDisplayOffsetX', animate('200ms')),\r\n      transition('htmlDisplayOffsetX => htmlDisplay', animate('200ms')),\r\n      // transition('standard => htmlDisplay', animate('200ms')),\r\n      // transition('htmlDisplay => standard', animate('200ms')),\r\n    ]),\r\n    trigger('toastPanelOffsetY', [\r\n      state(\r\n        'noExpansion',\r\n        style({\r\n          bottom: '0'\r\n        })\r\n      ),\r\n      state(\r\n        'expansionAndToastOpened',\r\n        style({\r\n          bottom: '285px',\r\n          zIndex: '999'\r\n        })\r\n      ),\r\n      state(\r\n        'expansionAndToastClosed',\r\n        style({\r\n          bottom: '285px',\r\n          zIndex: '5'\r\n        })\r\n      ),\r\n      state(\r\n        'expansionMaximizedAndToastOpened',\r\n        style({\r\n          bottom: '500px', // workspace full size\r\n          zIndex: '999'\r\n        })\r\n      ),\r\n      state(\r\n        'expansionMaximizedAndToastClosed',\r\n        style({\r\n          bottom: '500px', // workspace full size\r\n          zIndex: '5'\r\n        })\r\n      ),\r\n    transition('noExpansion => noExpansion', animate('10ms')),\r\n    transition('expansionAndToastOpened => expansionAndToastOpened', animate('200ms')),\r\n    transition('expansionAndToastClosed => expansionAndToastClosed', animate('200ms')),\r\n    transition('expansionMaximizedAndToastOpened => expansionMaximizedAndToastOpened', animate('200ms')),\r\n    transition('expansionMaximizedAndToastClosed => expansionMaximizedAndToastClosed', animate('200ms')),\r\n       ])\r\n  ];\r\n}\r\n\r\nexport function controlsAnimations(): AnimationTriggerMetadata[] {\r\n  return [\r\n    trigger('controlsOffsetY', [\r\n      state('close', style({})),\r\n      state(\r\n        'firstRowFromBottom',\r\n        style({\r\n          bottom: '5px'\r\n        })\r\n      ),\r\n      state(\r\n        'firstRowFromBottom-expanded',\r\n        style({\r\n          bottom: '285px'\r\n        })\r\n      ),\r\n      state(\r\n        'firstRowFromBottom-expanded-maximized',\r\n        style({\r\n          bottom: '500px'\r\n        })\r\n      ),\r\n      state(\r\n        'secondRowFromBottom',\r\n        style({\r\n          bottom: '47px'\r\n        })\r\n      ),\r\n      state(\r\n        'thirdRowFromBottom',\r\n        style({\r\n          bottom: '104px'\r\n        })\r\n      ),\r\n      state(\r\n        '',\r\n        style({\r\n          bottom: 'calc(285px)'\r\n        })\r\n      ),\r\n      state(\r\n        'secondRowFromBottom-expanded',\r\n        style({\r\n          bottom: 'calc(285px + 52px)'\r\n        })\r\n      ),\r\n      state(\r\n        'thirdRowFromBottom-expanded',\r\n        style({\r\n          bottom: 'calc(285px + 104px)'\r\n        })\r\n      ),\r\n      transition('* => *', animate('200ms'))\r\n    ]),\r\n    trigger('mobileOffsetY', [\r\n      state(\r\n        'low',\r\n        style({\r\n          bottom: '50px'\r\n        })\r\n      ),\r\n      transition('* => *', animate('200ms'))\r\n    ])\r\n  ];\r\n}\r\n\r\nexport function controlSlideX(): AnimationTriggerMetadata {\r\n  return trigger('controlStateX', [\r\n    state(\r\n      'left',\r\n      style({\r\n        left: '60px'\r\n      })\r\n    ),\r\n    state(\r\n      'right',\r\n      style({\r\n        left: '465px'\r\n      })\r\n    ),\r\n    transition('* => *', animate('200ms'))\r\n  ]);\r\n}\r\n\r\nexport function controlSlideY(): AnimationTriggerMetadata {\r\n  return trigger('controlStateY', [\r\n    state('close', style({})),\r\n    state(\r\n      'firstRowFromBottom',\r\n      style({\r\n        bottom: '2px',\r\n        'margin-left': '0px'\r\n      })\r\n    ),\r\n    state(\r\n      'firstRowFromBottom-expanded',\r\n      style({\r\n        bottom: '285px',\r\n        'margin-left': '-55px'\r\n      })\r\n    ),\r\n    state(\r\n      'firstRowFromBottom-expanded-maximized',\r\n      style({\r\n        bottom: '500px', // workspace full size\r\n        'margin-left': '-55px'\r\n      })\r\n    ),\r\n    transition('* => *', animate('200ms'))\r\n  ]);\r\n}\r\n\r\nexport function mapSlideX(): AnimationTriggerMetadata {\r\n  return trigger('mapStateX', [\r\n    state(\r\n      'left',\r\n      style({\r\n        left: '0'\r\n      })\r\n    ),\r\n    state(\r\n      'right',\r\n      style({\r\n        left: '0'\r\n      })\r\n    ),\r\n    transition('* => *', animate('200ms'))\r\n  ]);\r\n}\r\nexport function mapSlideY(): AnimationTriggerMetadata {\r\n  return trigger('mapStateY', [\r\n    state(\r\n      '*',\r\n      style({\r\n        bottom: '0'\r\n      })\r\n    ),\r\n    transition('* => *', animate('200ms'))\r\n  ]);\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatIconModule } from '@angular/material/icon';\r\n\r\nimport { IgoPanelModule, IgoStopPropagationModule } from '@igo2/common';\r\nimport { IgoLanguageModule } from '@igo2/core';\r\n\r\nimport { ToastPanelForExpansionComponent } from './toast-panel-for-expansion.component';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    MatIconModule,\r\n    MatButtonModule,\r\n    IgoLanguageModule,\r\n    IgoPanelModule,\r\n    IgoStopPropagationModule\r\n  ],\r\n  exports: [ToastPanelForExpansionComponent],\r\n  declarations: [ToastPanelForExpansionComponent]\r\n})\r\nexport class AppToastPanelForExpansionModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatToolbarModule } from '@angular/material/toolbar';\r\nimport { MatTooltipModule } from '@angular/material/tooltip';\r\nimport { MatDialogModule } from '@angular/material/dialog';\r\n\r\nimport { WelcomeWindowComponent } from './welcome-window.component';\r\nimport { IgoLanguageModule } from '@igo2/core';\r\nimport { IgoInteractiveTourModule, IgoCustomHtmlModule } from '@igo2/common';\r\n\r\n@NgModule({\r\n  imports: [\r\n    IgoLanguageModule,\r\n    CommonModule,\r\n    FormsModule,\r\n    MatDialogModule,\r\n    IgoInteractiveTourModule,\r\n    IgoCustomHtmlModule,\r\n    MatButtonModule,\r\n    MatTooltipModule,\r\n    MatIconModule,\r\n    MatToolbarModule\r\n  ],\r\n  declarations: [WelcomeWindowComponent],\r\n  exports: [WelcomeWindowComponent]\r\n})\r\nexport class IgoWelcomeWindowModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatSidenavModule } from '@angular/material/sidenav';\r\nimport { MatTooltipModule } from '@angular/material/tooltip';\r\nimport { MatDialogModule } from '@angular/material/dialog';\r\n\r\nimport { IgoCoreModule } from '@igo2/core';\r\nimport {\r\n  IgoActionModule,\r\n  IgoWorkspaceModule,\r\n  IgoEntityModule,\r\n  IgoPanelModule,\r\n  IgoBackdropModule,\r\n  IgoFlexibleModule,\r\n  IgoContextMenuModule,\r\n  IgoToolModule,\r\n  IgoEntityTableModule,\r\n  IgoEntityTablePaginatorModule,\r\n  IgoInteractiveTourModule\r\n} from '@igo2/common';\r\n\r\nimport {\r\n  IgoGeoWorkspaceModule,\r\n  IgoFeatureModule,\r\n  IgoImportExportModule,\r\n  IgoMapModule,\r\n  IgoQueryModule,\r\n  IgoSearchModule\r\n} from '@igo2/geo';\r\nimport {\r\n  IgoContextManagerModule,\r\n  IgoContextMapButtonModule\r\n} from '@igo2/context';\r\n\r\nimport { IgoIntegrationModule } from '@igo2/integration';\r\n\r\nimport { MapOverlayModule } from './map-overlay/map-overlay.module';\r\nimport { AppExpansionPanelModule } from './expansion-panel/expansion-panel.module';\r\nimport { AppToastPanelModule } from './toast-panel/toast-panel.module';\r\nimport { AppSidenavModule } from './sidenav/sidenav.module';\r\n\r\nimport { PortalComponent } from './portal.component';\r\nimport { AppToastPanelForExpansionModule } from './toast-panel-for-expansion/toast-panel-for-expansion.module';\r\n\r\nimport { WelcomeWindowComponent } from './welcome-window/welcome-window.component';\r\nimport { IgoWelcomeWindowModule } from './welcome-window/welcome-window.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    MatTooltipModule,\r\n    MatButtonModule,\r\n    MatIconModule,\r\n    MatSidenavModule,\r\n    MatDialogModule,\r\n    IgoCoreModule,\r\n    IgoFeatureModule,\r\n    IgoImportExportModule,\r\n    IgoMapModule,\r\n    IgoQueryModule.forRoot(),\r\n    IgoSearchModule.forRoot(),\r\n    IgoActionModule,\r\n    IgoWorkspaceModule,\r\n    IgoEntityModule,\r\n    IgoGeoWorkspaceModule,\r\n    IgoPanelModule,\r\n    IgoToolModule,\r\n    IgoContextMenuModule,\r\n    IgoBackdropModule,\r\n    IgoFlexibleModule,\r\n    IgoIntegrationModule,\r\n    AppExpansionPanelModule,\r\n    AppToastPanelModule,\r\n    AppToastPanelForExpansionModule,\r\n    AppSidenavModule,\r\n    MapOverlayModule,\r\n    IgoContextManagerModule,\r\n    IgoContextMapButtonModule,\r\n    IgoEntityTableModule,\r\n    IgoEntityTablePaginatorModule,\r\n    IgoInteractiveTourModule,\r\n    IgoWelcomeWindowModule\r\n  ],\r\n  exports: [PortalComponent],\r\n  declarations: [PortalComponent],\r\n  entryComponents: [WelcomeWindowComponent]\r\n})\r\nexport class PortalModule {}\r\n","<igo-spinner igoSpinnerActivity></igo-spinner>\r\n<igo-message-center></igo-message-center>\r\n<igo-auth-form *ngIf=\"authConfig && authConfig.url\"></igo-auth-form>\r\n\r\n<app-portal igoStopDropPropagation></app-portal>\r\n","import { Component, Renderer2 } from '@angular/core';\r\nimport { Title, Meta } from '@angular/platform-browser';\r\nimport { zip } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\n\r\nimport { userAgent } from '@igo2/utils';\r\nimport {\r\n  LanguageService,\r\n  ConfigService,\r\n  AnalyticsService,\r\n  MessageService\r\n} from '@igo2/core';\r\nimport { AuthOptions } from '@igo2/auth';\r\nimport { AnalyticsListenerService } from '@igo2/integration';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss']\r\n})\r\nexport class AppComponent {\r\n  public authConfig: AuthOptions;\r\n  private themeClass = 'blue-theme';\r\n\r\n  constructor(\r\n    protected languageService: LanguageService,\r\n    private configService: ConfigService,\r\n    private analyticsService: AnalyticsService,\r\n    private analyticsListenerService: AnalyticsListenerService,\r\n    private renderer: Renderer2,\r\n    private titleService: Title,\r\n    private metaService: Meta,\r\n    private messageService: MessageService\r\n  ) {\r\n    this.authConfig = this.configService.getConfig('auth');\r\n\r\n    this.readTitleConfig();\r\n    this.readThemeConfig();\r\n    this.readDescriptionConfig();\r\n\r\n    this.analyticsListenerService.listen();\r\n\r\n    this.detectOldBrowser();\r\n  }\r\n\r\n  private readTitleConfig() {\r\n    this.languageService.translate.get(this.configService.getConfig('title')).subscribe(title => {\r\n      if (title) {\r\n        this.titleService.setTitle(title);\r\n        this.metaService.addTag({ name: 'title', content: title });\r\n      }\r\n    });\r\n  }\r\n\r\n  private readThemeConfig() {\r\n    const theme = this.configService.getConfig('theme') || this.themeClass;\r\n    if (theme) {\r\n      this.renderer.addClass(document.body, theme);\r\n    }\r\n  }\r\n\r\n  private readDescriptionConfig() {\r\n    const description = this.configService.getConfig('description');\r\n    if (description) {\r\n      this.metaService.addTag({ name: 'description', content: description });\r\n    }\r\n  }\r\n\r\n  private detectOldBrowser() {\r\n    const oldBrowser = userAgent.satisfies({\r\n      ie: '<11',\r\n      chrome: '<64',\r\n      firefox: '<60'\r\n    });\r\n\r\n    if (oldBrowser) {\r\n      const translate = this.languageService.translate;\r\n      const title$ = translate.get('oldBrowser.title');\r\n      const message$ = translate.get('oldBrowser.message');\r\n      zip(title$, message$)\r\n        .pipe(\r\n          map(([title, message]) => ({\r\n            title,\r\n            message\r\n          }))\r\n        )\r\n        .subscribe((rep) =>\r\n          this.messageService.alert(rep.message, rep.title, {\r\n            timeOut: 15000\r\n          })\r\n        );\r\n    }\r\n  }\r\n}\r\n","import { BrowserModule, HammerModule } from '@angular/platform-browser';\r\nimport { NgModule } from '@angular/core';\r\nimport { RouterModule } from '@angular/router';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\n\r\nimport {\r\n  provideConfigOptions,\r\n  IgoMessageModule,\r\n  IgoGestureModule,\r\n  RouteService\r\n} from '@igo2/core';\r\nimport { IgoSpinnerModule, IgoStopPropagationModule } from '@igo2/common';\r\nimport { IgoAuthModule } from '@igo2/auth';\r\nimport {\r\n  provideIChercheSearchSource,\r\n  provideIChercheReverseSearchSource,\r\n  provideNominatimSearchSource,\r\n  provideCoordinatesReverseSearchSource,\r\n  provideILayerSearchSource,\r\n  provideStoredQueriesSearchSource,\r\n  provideOsrmDirectionsSource,\r\n  provideOptionsApi,\r\n  provideCadastreSearchSource\r\n} from '@igo2/geo';\r\n\r\nimport { environment } from '../environments/environment';\r\nimport { PortalModule } from './pages';\r\nimport { AppComponent } from './app.component';\r\n\r\n@NgModule({\r\n  declarations: [AppComponent],\r\n  imports: [\r\n    BrowserModule,\r\n    BrowserAnimationsModule,\r\n    RouterModule.forRoot([]),\r\n    IgoAuthModule.forRoot(),\r\n    IgoGestureModule.forRoot(),\r\n    IgoMessageModule,\r\n    IgoSpinnerModule,\r\n    IgoStopPropagationModule,\r\n    PortalModule,\r\n    HammerModule\r\n  ],\r\n  providers: [\r\n    provideConfigOptions({\r\n      default: environment.igo,\r\n      path: './config/config.json'\r\n    }),\r\n    RouteService,\r\n    provideNominatimSearchSource(),\r\n    provideIChercheSearchSource(),\r\n    provideIChercheReverseSearchSource(),\r\n    provideCoordinatesReverseSearchSource(),\r\n    provideILayerSearchSource(),\r\n    provideStoredQueriesSearchSource(),\r\n    provideOsrmDirectionsSource(),\r\n    provideOptionsApi(),\r\n    provideCadastreSearchSource()\r\n  ],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule {}\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nimport 'hammerjs';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic()\r\n  .bootstrapModule(AppModule)\r\n  .catch(err => console.log(err));\r\n"]}