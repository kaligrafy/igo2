{"version":3,"file":"main.426623857ca74055.js","mappings":"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AAW79B,EAAcU,UAAU,SACzC5E,EAAgBsB,UAAUoD,IAAIq9B,GAAUnhC,UAAWzG,KAQ7D,SAAS6nC,GAAwBlgC,EAAoB3H,GACnD,MAAM8nC,EAAoBngC,EAAS+6B,eAAe,uBAC9CoF,IACFA,EAAkBC,UAAY/nC,EAElC,EAZY6nC,CAAwBlgC,EAAU3H,GAClCsxB,GAAO,EACR,EACF,EAET,SCzIInyB,GAAYC,eACd4oC,SAGFC,OACGC,gBAAgB1D,IAChB2D,MAAOphC,GAAQF,QAAQC,IAAIC,sBCd9B,IAAAoG,EAAA,CACA,aACA,gBACA,YACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,eACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,YACA,eACA,aACA,gBACA,mBACA,gBACA,WACA,cACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,mBACA,gBACA,mBACA,gBACA,aACA,gBACA,aACA,gBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,aACA,gBACA,YACA,gBACA,mBACA,gBACA,mBACA,gBACA,mBACA,eACA,YACA,eACA,YACA,eACA,YACA,eACA,aACA,gBACA,cACA,iBACA,aACA,gBACA,YACA,gBACA,mBACA,gBACA,mBACA,eACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,mBACA,sBACA,kBACA,qBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,YACA,eACA,gBACA,mBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,mBACA,gBACA,YACA,eACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,YACA,eACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,YACA,gBACA,mBACA,eACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,YACA,gBACA,mBACA,eACA,aACA,gBACA,iBACA,oBACA,gBACA,mBACA,aACA,gBACA,aACA,gBACA,mBACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,YACA,eACA,aACA,gBACA,aACA,kBACA,qBACA,gBACA,aACA,gBACA,YACA,eACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,cACA,iBACA,aACA,gBACA,aACA,gBACA,aACA,gBACA,gBACA,mBACA,cACA,iBACA,aACA,gBACA,cACA,iBACA,cACA,mBACA,sBACA,iBACA,gBACA,mBACA,aACA,gBACA,aACA,gBACA,aACA,kBACA,qBACA,gBACA,aACA,gBACA,mBACA,sBACA,aACA,gBACA,gBACA,mBACA,eACA,kBACA,gBACA,mBACA,gBACA,oBAIA,SAAAi7B,EAAAC,GACA,IAAAtoC,EAAAuoC,EAAAD,GACA,OAAAE,EAAAxoC,EACA,CACA,SAAAuoC,EAAAD,GACA,IAAAE,EAAAC,EAAAr7B,EAAAk7B,GAAA,CACA,IAAAxrB,EAAA,IAAA4rB,MAAA,uBAAAJ,EAAA,KACA,MAAAxrB,EAAAjb,KAAA,mBACAib,CACA,CACA,OAAA1P,EAAAk7B,EACA,CACAD,EAAAnqB,KAAA,WACA,OAAA9C,OAAA8C,KAAA9Q,EACA,EACAi7B,EAAA9W,QAAAgX,EACAI,EAAAC,QAAAP,EACAA,EAAAroC,GAAA","names":["environment","production","igo","app","forceCoordsNA","install","enabled","promote","manifestPath","pwa","catalog","sources","id","title","url","showLegend","depot","importExport","configFileToGeoDBService","clientSideFileSizeMaxMb","allowToStoreLayer","language","prefix","interactiveTour","tourInMobile","pathToConfigFile","searchSources","nominatim","available","storedqueries","icherche","searchUrl","order","params","limit","coordinatesreverse","showInPointerSummary","icherchereverse","ilayer","cadastre","projections","code","alias","def","extent","searchOverlayStyle","base","markerColor","markerOpacity","markerOutlineColor","fillColor","fillOpacity","strokeColor","strokeOpacity","strokeWidth","focus","selection","queryOverlayStyle","MapOverlayModule","CommonModule","AppExpansionPanelModule","MatButtonModule","MatIconModule","MatMenuModule","MatListModule","MatSelectModule","MatTooltipModule","IgoLanguageModule","IgoBackdropModule","AppToastPanelModule","MatBadgeModule","IgoPanelModule","IgoStopPropagationModule","IgoActionModule","IgoFeatureModule","IgoSearchResultsModule","AppSidenavModule","MatSidenavModule","IgoFlexibleModule","IgoContextManagerModule","IgoToolModule","IgoInteractiveTourModule","IgoHomeButtonModule","AppToastPanelForExpansionModule","IgoWelcomeWindowModule","FormsModule","MatDialogModule","IgoCustomHtmlModule","MatToolbarModule","PortalModule","IgoCoreModule","IgoImportExportModule","IgoMapModule","IgoQueryModule","forRoot","IgoSearchModule","IgoWorkspaceModule","IgoEntityModule","IgoGeoWorkspaceModule","IgoContextMenuModule","IgoIntegrationModule","IgoContextMapButtonModule","IgoEntityTableModule","IgoEntityTablePaginatorModule","PwaService","updates","languageService","confirmDialogService","confirmOpened","constructor","this","isEnabled","handleVersionUpdates","checkForUpdates","_this","interval","pipe","skip","subscribe","_asyncToGenerator","updateFound","checkForUpdate","console","log","err","error","modalUpdatePWA","message","translate","instant","open","tap","confirm","window","navigator","onLine","document","location","reload","alert","setTimeout","versionUpdates","evt","type","version","hash","currentVersion","latestVersion","i0","i1","i2","i3","factory","ɵfac","providedIn","expansionPanelAnimation","trigger","state","style","left","bottom","display","transition","animate","toastPanelAnimation","zIndex","controlsAnimations","controlSlideX","controlSlideY","mapSlideX","mapSlideY","WelcomeWindowService","configService","storageService","nbVisit","showAgain","igoVersionDifferentFromStorage","isVersionDifferentFromStorage","setStorageConfig","Number","get","set","getConfig","hasWelcomeWindow","remove","dialogConfig","MatDialogConfig","disableClose","autoFocus","maxWidth","afterClosedWelcomeWindow","$event","_r2","ctx_r1","ctx_r3","setShowAgain","ctx_r4","closeWelcomeWindow","ctx_r0","html$","discoverTitleInLocale$","WelcomeWindowComponent","dialog","welcomeWindowService","title$$","BehaviorSubject","undefined","of","ngOnInit","computeHtml","closeAll","deltaDay","isDateParsable","releaseDate","Date","releaseDateAppConfig","releaseDateApp","isNaN","getDate","releaseDateString","day","month","getMonth","getFullYear","map","description","r","next","ngOnDestroy","unsubscribe","selectors","decls","vars","consts","template","rf","ctx","WelcomeWindowComponent_div_0_Template","showContent","duration","delay","easing","opacity","ExpansionPanelHeaderComponent","expanded","_expanded","value","expandedChange","emit","EventEmitter","hasExpandedClass","onToggleClick","hostVars","hostBindings","ExpansionPanelHeaderComponent_mat_icon_3_Template","ExpansionPanelHeaderComponent_mat_icon_4_Template","ExpansionPanelComponent","maximized","backdropShown","_backdropShown","hasExpandedFullClass","onBackdropClick","changeDetection","_r13","ctx_r12","zoomTo","isSelectedResultOutOfView$","_r15","ctx_r14","handleLayer","ctx_r5","potententialLayerisAdded$","_r17","ctx_r16","previousResult","ctx_r6","results","meta","resultSelected$","_r19","ctx_r18","nextResult","ctx_r7","length","_r21","ctx_r20","resizeWindows","ctx_r8","fullExtent$","iconResizeWindows","_r23","ctx_r22","setHtmlDisplay","ctx_r10","data","_r25","ctx_r24","focusResult","ctx_r26","unfocusResult","ctx_r27","selectResult","ctx_r11","store","withZoomButton","tabsMode","_r29","ctx_r28","ctx_r30","handleKeyboardEvent","ToastPanelComponent_ng_template_0_igo_panel_0_button_3_Template","ToastPanelComponent_ng_template_0_igo_panel_0_button_4_Template","ToastPanelComponent_ng_template_0_igo_panel_0_button_5_Template","ToastPanelComponent_ng_template_0_igo_panel_0_button_6_Template","ToastPanelComponent_ng_template_0_igo_panel_0_button_7_Template","ctx_r31","clear","ToastPanelComponent_ng_template_0_igo_panel_0_igo_feature_details_12_Template","ToastPanelComponent_ng_template_0_igo_panel_0_igo_search_results_13_Template","getClassPanel","setHeighPanelTabsMode","getTitle","actionStore","icon","actionbarMode","hasGeoService","opened","isDesktop","ToastPanelComponent_ng_template_0_igo_panel_0_Template","entities$","_r34","ctx_r33","swipe","ctx_r35","ctx_r36","ctx_r37","ToastPanelComponent_div_2_ng_template_1_Template","_r0","ToastPanelComponent","mediaService","storageState","queryState","workspaceState","propertyTypeDetectorService","layerService","static","RIGHT","LEFT","UP","DOWN","_map","_store","_entities","unselectResult","_opened","StorageScope","SESSION","openedChange","hasFeatureEmphasisOnSelection","zoomAuto","_zoomAuto","zoomAuto$","fullExtent","_fullExtent","fullExtentEvent","potententialLayerToAdd$","isHtmlDisplay","ActionStore","ActionbarMode","Overlay","multiple$","isResultSelected$","isSelectedResultOutOfView$$","storageChange$$","initialized","format","olFormatGeoJSON","resultOrResolution$$","focusedResult$","abstractFocusedOrSelectedResult","windowHtmlDisplayEvent","displayStyle","onEscapeHandler","event","onBackHandler","onZoomHandler","getValue","localOlFeature","readFeature","dataProjection","projection","featureProjection","moveToOlFeatures","viewController","FeatureMotion","Default","all","multiple","setResizeWindowIcon","monitorResultOutOfView","combineLatest","state$","debounceTime","bunch","selectedResult","selectedOlFeature","featureToOl","selectedOlFeatureExtent","computeOlFeaturesExtent","viewProjection","featuresAreOutOfView","getExtent","latestResult","res","resolution$","buildResultEmphasis","storageChange$","skipWhile","storageChange","key","change","currentValue","load","tooltip","handler","Zoom","availability","olFeatures","result","push","checkbox","checkCondition","v","computeFeatureGeoServiceStatus","layers$","clearFeatureEmphasis","olGeometry","getGeometry","featuresAreTooDeepInView","x","y","feature1","olFeature","name","geometry","olPoint","featureFromOl","getCommonVectorSelectedStyle","Object","assign","feature","queryOverlayStyleSelection","queryOverlayStyleFocus","setZIndex","queryResultsOverlay","addFeature","None","removeFeature","getEntityTitle","force","focused","getCommonVectorStyle","update","selected","properties","target","features","removeFeatures","addFeatures","setFeatures","handleWksSelection","entities","layersTitle","Set","e","source","workspaces","filter","wks","includes","ws","entityStore","updateMany","view","isMobile","getMedia","Media","Mobile","keyCode","i","indexOf","getGeoServices","resultSelected","hasGeoServiceProperties","keys","entries","forEach","entry","geoService","getGeoService","extendedGeoService","propertyForUrl","layersIds","layers","layer","potententialLayerToAdd","layerToRemove","getLayerById","removeLayer","createAsyncLayer","sourceOptions","layersAddedByClick$","addLayer","geoServices","firstGeoService","so","computeSourceOptionsFromProperties","soId","generateIdFromSourceOptions","l","layerName","p","propertiesForLayerName","arcgisLayerName","appliedLayerName","ObjectUtils","removeUndefined","optionsFromCapabilities","optionsFromApi","LAYERS","LAYER","action","SWIPE_ACTION","className","onTriggerAction","args","isHtmlAndDesktop","reduceWindow","enlargeWindows","ToastPanelComponent_ng_template_0_Template","ToastPanelComponent_div_2_Template","ToastPanelForExpansionComponent","withHeader","hasOpenedClass","_r4","onUnselectButtonClick","_r6","onPreviousButtonClick","SidenavComponent","toolState","catalogState","title$","activeTool$$","toolChange","toolbox","activeTool$","tool","sidenavTitle","catalogStore","options","active","activatePreviousTool","deactivateTool","inputs","outputs","SidenavComponent_igo_home_button_5_Template","SidenavComponent_button_10_Template","_c0","element_r1","imgSrc","alt","imgSize","MapOverlayComponent_ng_container_0_a_2_ng_container_2_Template","link","text","MapOverlayComponent_ng_container_0_ng_template_3_ng_container_1_Template","MapOverlayComponent_ng_container_0_a_2_Template","MapOverlayComponent_ng_container_0_ng_template_3_Template","fixed","marginLeft","marginRight","marginTop","marginBottom","fontSize","cssClass","MapOverlayComponent","contextService","mapOverlay","context$$","media$$","context","ngAfterViewInit","context$","handleContextChange","media$","media","overlay","MapOverlayComponent_ng_container_0_Template","_r14","ctx_r13","onToggleSidenavClick","sidenavOpened","onSearchTermChange","onPointerSummaryStatusChange","ctx_r19","onSearchResultsGeometryStatusChange","onReverseCoordsFormatStatusChange","ctx_r21","onSearch","onClearSearch","ctx_r23","onSearchSettingsChange","searchBarTerm","termSplitter","minSearchTermLength","searchStore","igoSearchPointerSummaryEnabled","searchResultsGeometryEnabled","igoReverseSearchCoordsFormatEnabled","getControlsOffsetY","getToastPanelStatus","homeExtent","homeCenter","homeZoom","_r33","workspace_r26","ngIf","edition","addButton","actionbarWithTitle","workspaceMenuClass","_r37","zoomToSelectedFeatureWks","ctx_r29","workspaceSelection$","_r39","ctx_r38","paginatorChange","workspaceEntitySortChange$","paginatorOptions","_r42","visible","PortalComponent_app_expansion_panel_21_ng_container_4_button_8_Template","PortalComponent_app_expansion_panel_21_ng_container_4_igo_actionbar_9_Template","PortalComponent_app_expansion_panel_21_ng_container_4_button_10_Template","PortalComponent_app_expansion_panel_21_ng_container_4_igo_entity_table_paginator_11_Template","_c2","inResolutionRange$","isEditionWorkspace","workspaceVisibility","_r46","ctx_r45","entitySortChange","ctx_r47","entitySelectChange","ctx_r44","workspace_r43","workspacePaginator","tableTemplate","PortalComponent_app_expansion_panel_21_ng_container_6_igo_entity_table_1_Template","ctx_r25","workspaceNotAvailableMessage","_r50","ctx_r49","expansionPanelExpanded","ctx_r51","setActiveWorkspaceByTitle","ctx_r52","workspaceSwitchDisabled","ctx_r53","refreshRelationsWorkspace","ctx_r54","rowsInMapExtentCheckCondition$","PortalComponent_app_expansion_panel_21_ng_container_4_Template","PortalComponent_app_expansion_panel_21_ng_container_6_Template","expansionPanelBackdropShown","workspaceMaximize$","getExpansionPanelStatus","toastPanelOpened","workspaceStore","selectedWorkspace$","_r57","ctx_r56","onDeactivateWorkspaceWidget","workspace_r55","_r59","ctx_r58","toastOpenedChange","ctx_r60","ctx_r61","setToastPanelHtmlDisplay","queryStore","toastPanelOffsetX$","getToastPanelOffsetY","isTablet","isPortrait","contextMenuStore","PortalComponent","route","authService","dataSourceService","cdRef","capabilitiesService","contextState","mapState","searchState","searchSourceService","importService","http","messageService","dialogWindow","queryService","editionWorkspaceService","directionState","sidenavOpened$","hasExpansionPanel","hasGeolocateButton","hasHomeExtentButton","showMenuButton","showSearchBar","showOfflineButton","showWakeLockButton","showRotationButtonIfNoRotation","pageSize","pageSizeOptions","workspaceMaximize$$","matDialogRef$","onSettingsChange$","termDefinedInUrl","termDefinedInUrlTriggered","addedLayers$$","contextMenuCoord","contextLoaded","openSidenav$$","sidenavMediaAndOrientation$$","toastPanelForExpansionOpened","activeWidget$$","showToastPanelForExpansionToggle","routeParams","toastPanelHtmlDisplay","mapBrowser","searchBar","auth","_toastPanelOpened","detectChanges","Tablet","isLandscape","getOrientation","MediaOrientation","Landscape","Portrait","workspacePanelExpanded","setPadding","contextUri","uri","toastPanelShown","searchResultsGeometryEnabled$","toastPanelContent","content","workspace","hasWidget","workspace$","IGO","searchTermSplitter$","initWelcomeWindow","queryParams","readLanguageParam","authenticate$","authenticated","onChangeContext","contextActions","searchCoordinate","openGoogleMaps","openGoogleStreetView","count$","pairwise","prevCnt","currentCnt","padding","ol","once","readQueryParams","geolocationController","tracking","setSearchSettingsChange","selectedResult$","closeSidenav","workspaceEnabled$","empty$","workspaceEmpty","updateMapBrowserClass","workspaceMaximize","activeWks","activeWorkspaceWidget$","widget","openToastPanelForExpansion","closeToastPanelForExpansion","openSidenav$","openSidenav","orientation$","sidenavMediaAndOrientation","computeToastPanelOffsetX","Promise","resolve","then","getToastPanelExtent","EditionWorkspace","createFeatureProperties","editFeature","sourceFields","field","primary","matPaginator","getQuerySearchSource","querySearchSourceArray","WfsWorkspace","FeatureWorkspace","getLayerWksOptionTabQuery","added","getProperties","_featureStore","featureStoreLayer","getAllowedFieldsAndAlias","getQueryTitle","querySearchSource","find","s","sourceTitle","QuerySearchSource","featureToSearchResult","request","queryResults","f","cancelOngoingAddLayer","sub","toggleSidenav","onMapQuery","filteredResults","getFeatureIsSameActiveWks","getWksActiveOpenInResolution","getLayerWksOptionMapQuery","term","search","deactivateCustomFilterTermStrategy","setSearchTerm","replace","trim","onBeforeSearch","isReverseSearch","sourceCanSearch","research","enabledSources","getEnabledSources","sourceCanReverseSearch","newResults","concat","setSearchResultsGeometryStatus","toolChanged","nativeElement","getElementsByTagName","computeHomeExtentValues","center","zoom","empty","softClear","qParams","readLayersQueryParams","contextManager","getTool","toolToOpen","toolToOpenOnContextChange","toolOrderToOpen","toolName","activateTool","handleExpansionAndToastOnMobile","searchResultsOverlay","setSelectedResult","getSources","searchSource","onContextMenuOpen","getClickCoordinate","contextmenuPoint","boundingMapBrowser","getBoundingClientRect","top","scrollY","pageYOffset","scrollX","pageXOffset","pixel","coord","getCoordinateFromPixel","proj","olProj","GoogleLinks","getGoogleMapsCoordLink","getGoogleStreetViewLink","reverse","c","toFixed","join","header","classList","add","status","getBaselayersSwitcherStatus","readToolParams","readSearchParams","readFocusFirst","computeZoomToExtent","lang","languageForce","setLanguage","zoomExtent","extentParams","split","olExtent","zoomToExtent","computeFocusFirst","resultItem","item","click","sf","entities$$","stateView","all$","take","exactMatch","activateCustomFilterTermStrategy","searchResultsOlFeatures","entity","dataType","FEATURE","totalExtent","searchGeom","first","matDialogOpened","sidenav","routing","routingCoordLoaded","stopCoords","routingOptions","resultSelection","parseInt","stopsStore","storeInitialized$","init","addStopToStore","stop","position","coordinates","routesFeatureStore","zoomToActiveRoute$","d","readLayersQueryParamsByType","readVectorQueryParams","getQueryParam","paramValue","HttpParams","fromString","nameParamLayersKey","urlsKey","wmsLayers","wmsUrl","wmtsLayers","wmtsUrl","arcgisLayers","arcgisUrl","iarcgisLayers","iarcgisUrl","tarcgisLayers","tarcgisUrl","layersByService","urls","cnt","urlSrc","endsWith","substring","extractLayersByService","layerFromUrl","layerOptions","visibility","computeLayerVisibilityFromUrl","addLayerFromURL","vector","lastIndex","lastIndexOf","fileName","slice","responseType","file","File","lastModified","now","import","onFileImportSuccess","onFileImportError","handleFileImportSuccess","handleFileImportError","outLayersByService","startsWith","substr","commonSourceOptions","crossOrigin","arcgisClause","queryable","queryFormat","VERSION","currentLayerid","visibleOnLayersParams","visibleOffLayersParams","visiblelayers","invisiblelayers","toString","logged$","logged","createWelcomeWindow","welcomWindowConfig","afterClosed","featureTitle","relationLayers","workspaceId","columns","col","getDomainValues","relation","domainValues","featuresSelected","workspaceSelection","rec","olFeaturesSelected","feat","i4","i5","i6","i7","i8","viewQuery","ElementRef","PortalComponent_igo_menu_button_4_Template","PortalComponent_igo_search_bar_5_Template","PortalComponent_igo_wake_lock_button_12_Template","PortalComponent_igo_offline_button_13_Template","PortalComponent_igo_geolocate_button_14_Template","PortalComponent_igo_home_extent_button_16_Template","PortalComponent_igo_user_button_17_Template","PortalComponent_app_expansion_panel_21_Template","PortalComponent_igo_workspace_widget_outlet_27_Template","PortalComponent_app_toast_panel_29_Template","PortalComponent_ng_template_31_Template","_r11","_c3","getBaseLayers","HeaderComponent","headerLogo","headerLogoPrint","computeHeader","FooterComponent","AppComponent","analyticsListenerService","titleService","metaService","pwaService","router","authConfig","hasHeader","hasFooter","promptEvent","readTitleConfig","readDescriptionConfig","listen","detectOldBrowser","setManifest","installPrompt","handleSplashScreen","events","NavigationEnd","_removeSplashScreen","intro","getElementById","stylesheet","DomUtils","setTitle","addTag","appConfig","querySelector","setAttribute","userAgent","getOSName","addEventListener","preventDefault","prompt","satisfies","ie","chrome","firefox","safari","timeOut","DOCUMENT","AppComponent_igo_auth_form_1_Template","AppComponent_app_header_2_Template","AppComponent_app_footer_4_Template","HeaderModule","FooterModule","defaultTooltipOptions","showDelay","hideDelay","touchendHideDelay","disableTooltipInteractivity","AppModule","bootstrap","provideConfigOptions","default","path","RouteService","provideNominatimSearchSource","provideIChercheSearchSource","provideWorkspaceSearchSource","provideIChercheReverseSearchSource","provideCoordinatesReverseSearchSource","provideILayerSearchSource","provideStoredQueriesSearchSource","provideOsrmDirectionsSource","provideOptionsApi","provideCadastreSearchSource","provide","APP_INITIALIZER","useFactory","appInitializerFactory","deps","Injector","ApplicationRef","multi","provideStyleListOptions","MAT_TOOLTIP_DEFAULT_OPTIONS","useValue","MAT_FORM_FIELD_DEFAULT_OPTIONS","appearance","imports","BrowserModule","BrowserAnimationsModule","RouterModule","IgoAuthModule","IgoGestureModule","IgoMessageModule","IgoSpinnerModule","ServiceWorkerModule","register","registrationStrategy","injector","applicationRef","isStable","concatMap","LanguageService","getLanguage","getTranslation","translations","setTranslation","ConfigService","theme","loadTheme","titleKey","handleSplashScreenTitle","splashScreenTitle","innerText","enableProdMode","__NgCli_bootstrap_1","bootstrapModule","catch","webpackContext","req","webpackContextResolve","__webpack_require__","o","Error","module","exports"],"sourceRoot":"webpack:///","sources":["./src/environments/environment.github.ts","./src/app/pages/portal/map-overlay/map-overlay.module.ts","./src/app/pages/portal/expansion-panel/expansion-panel.module.ts","./src/app/pages/portal/toast-panel/toast-panel.module.ts","./src/app/pages/portal/sidenav/sidenav.module.ts","./src/app/pages/portal/toast-panel-for-expansion/toast-panel-for-expansion.module.ts","./src/app/pages/portal/welcome-window/welcome-window.module.ts","./src/app/pages/portal/portal.module.ts","./src/app/services/pwa.service.ts","./src/app/pages/portal/portal.animation.ts","./src/app/pages/portal/welcome-window/welcome-window.service.ts","./src/app/pages/portal/welcome-window/welcome-window.component.html","./src/app/pages/portal/welcome-window/welcome-window.component.ts","./src/app/pages/portal/expansion-panel/expansion-panel.animations.ts","./src/app/pages/portal/expansion-panel/expansion-panel-header.component.html","./src/app/pages/portal/expansion-panel/expansion-panel-header.component.ts","./src/app/pages/portal/expansion-panel/expansion-panel.component.ts","./src/app/pages/portal/expansion-panel/expansion-panel.component.html","./src/app/pages/portal/toast-panel/toast-panel.component.html","./src/app/pages/portal/toast-panel/toast-panel.component.ts","./src/app/pages/portal/toast-panel-for-expansion/toast-panel-for-expansion.animations.ts","./src/app/pages/portal/toast-panel-for-expansion/toast-panel-for-expansion.component.ts","./src/app/pages/portal/toast-panel-for-expansion/toast-panel-for-expansion.component.html","./src/app/pages/portal/sidenav/sidenav.component.html","./src/app/pages/portal/sidenav/sidenav.component.ts","./src/app/pages/portal/map-overlay/map-overlay.component.html","./src/app/pages/portal/map-overlay/map-overlay.component.ts","./src/app/pages/portal/portal.component.html","./src/app/pages/portal/portal.component.ts","./src/app/pages/header/header.component.ts","./src/app/pages/header/header.component.html","./src/app/pages/footer/footer.component.ts","./src/app/pages/footer/footer.component.html","./src/app/app.component.html","./src/app/app.component.ts","./src/app/pages/header/header.module.ts","./src/app/pages/footer/footer.module.ts","./src/app/app.module.ts","./src/main.ts","./node_modules/moment/locale/ sync ^\\.\\/.*$"],"sourcesContent":["import { LanguageOptions } from '@igo2/core';\r\nimport {\r\n  SearchSourceOptions,\r\n  ImportExportServiceOptions,\r\n  CatalogServiceOptions,\r\n  Projection,\r\n  CommonVectorStyleOptions\r\n} from '@igo2/geo';\r\n\r\nimport {\r\n  AppOptions,\r\n  InteractiveTourConfigOptions\r\n} from './environnement.interface';\r\ninterface Environment {\r\n  production: boolean;\r\n  igo: {\r\n    app: AppOptions;\r\n    catalog?: CatalogServiceOptions;\r\n    importExport?: ImportExportServiceOptions;\r\n    language?: LanguageOptions;\r\n    searchSources?: { [key: string]: SearchSourceOptions };\r\n    projections?: Projection[];\r\n    interactiveTour?: InteractiveTourConfigOptions;\r\n    depot?: { url: string; trainingGuides?: string[] };\r\n    queryOverlayStyle?: {\r\n      base?: CommonVectorStyleOptions;\r\n      selection?: CommonVectorStyleOptions;\r\n      focus?: CommonVectorStyleOptions;\r\n    };\r\n    searchOverlayStyle?: {\r\n      base?: CommonVectorStyleOptions;\r\n      selection?: CommonVectorStyleOptions;\r\n      focus?: CommonVectorStyleOptions;\r\n    };\r\n  };\r\n}\r\n\r\nexport const environment: Environment = {\r\n  production: true,\r\n  igo: {\r\n    app: {\r\n      forceCoordsNA: false,\r\n      install: {\r\n        enabled: true,\r\n        promote: true,\r\n        manifestPath: './config/github.webmanifest'\r\n      },\r\n      pwa: {\r\n        enabled: false\r\n      }\r\n    },\r\n    catalog: {\r\n      sources: [\r\n        {\r\n          id: 'Gououvert',\r\n          title: 'Gouvouvert',\r\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi'\r\n        },\r\n        {\r\n          id: 'glace',\r\n          title: 'Carte de glace',\r\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/radarsat.fcgi',\r\n          showLegend: true\r\n        }\r\n      ]\r\n    },\r\n    depot: {\r\n      url: '/apis/depot'\r\n    },\r\n    importExport: {\r\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/ogre',\r\n      configFileToGeoDBService: './data/geoDataToIDB.json',\r\n      clientSideFileSizeMaxMb: 30,\r\n      allowToStoreLayer: true\r\n    },\r\n    language: {\r\n      prefix: './locale/'\r\n    },\r\n    interactiveTour: {\r\n      tourInMobile: true,\r\n      pathToConfigFile: './config/interactiveTour.json'\r\n    },\r\n    searchSources: {\r\n      nominatim: {\r\n        available: false\r\n      },\r\n      storedqueries: {\r\n        available: false\r\n      },\r\n      icherche: {\r\n        searchUrl: 'https://geoegl.msp.gouv.qc.ca/apis/icherche',\r\n        order: 2,\r\n        params: {\r\n          limit: '8'\r\n        }\r\n      },\r\n      coordinatesreverse: {\r\n        showInPointerSummary: true\r\n      },\r\n      icherchereverse: {\r\n        showInPointerSummary: true,\r\n        searchUrl: 'https://geoegl.msp.gouv.qc.ca/apis/terrapi',\r\n        order: 3,\r\n        enabled: true\r\n      },\r\n      ilayer: {\r\n        searchUrl: 'https://geoegl.msp.gouv.qc.ca/apis/icherche/layers',\r\n        order: 4,\r\n        params: {\r\n          limit: '5'\r\n        }\r\n      },\r\n      cadastre: {\r\n        enabled: false\r\n      }\r\n    },\r\n    projections: [\r\n      {\r\n        code: 'EPSG:32198',\r\n        alias: 'Quebec Lambert',\r\n        def: '+proj=lcc +lat_1=60 +lat_2=46 +lat_0=44 +lon_0=-68.5 +x_0=0 +y_0=0 \\\r\n          +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs',\r\n        extent: [-799574, 45802, 891595.4, 1849567.5]\r\n      },\r\n      {\r\n        code: 'EPSG:3798',\r\n        alias: 'MTQ Lambert',\r\n        def: '+proj=lcc +lat_1=50 +lat_2=46 +lat_0=44 +lon_0=-70 +x_0=800000 +y_0=0 \\\r\n          +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs',\r\n        extent: [31796.5834, 158846.2231, 1813323.4284, 2141241.0978]\r\n      }\r\n    ],\r\n    searchOverlayStyle: {\r\n      base: {\r\n        markerColor: '#5ed0fb', // marker fill\r\n        markerOpacity: 0.8, // marker opacity not applied if a rgba markerColor is provided\r\n        markerOutlineColor: '#a7e7ff', // marker contour\r\n        fillColor: '#5ed0fb', // poly\r\n        fillOpacity: 0.2, // poly fill opacity not applied if a rgba fillColor is provided\r\n        strokeColor: '#5ed0fb', // line and poly\r\n        strokeOpacity: 0.7, // line and poly not applied if a rgba strokeColor is provided\r\n        strokeWidth: 2 // line and poly\r\n      },\r\n      focus: {\r\n        markerColor: '#5ed0fb', // marker fill\r\n        markerOpacity: 1, // marker opacity not applied if a rgba markerColor is provided\r\n        markerOutlineColor: '#DFF7FF', // marker contour\r\n        fillColor: '#5ed0fb', // poly\r\n        fillOpacity: 0.3, // poly fill opacity not applied if a rgba fillColor is provided\r\n        strokeColor: '#DFF7FF', // line and poly\r\n        strokeOpacity: 1, // line and poly not applied if a rgba strokeColor is provided\r\n        strokeWidth: 2 // line and poly\r\n      },\r\n      selection: {\r\n        markerColor: '#00a1de', // marker fill\r\n        markerOpacity: 1, // marker opacity not applied if a rgba markerColor is provided\r\n        markerOutlineColor: '#ffffff', // marker contour\r\n        fillColor: '#00a1de', // poly\r\n        fillOpacity: 0.3, // poly fill opacity not applied if a rgba fillColor is provided\r\n        strokeColor: '#00A1DE', // line and poly\r\n        strokeOpacity: 1, // line and poly not applied if a rgba strokeColor is provided\r\n        strokeWidth: 2 // line and poly\r\n      }\r\n    },\r\n    queryOverlayStyle: {\r\n      base: {\r\n        markerColor: '#5ed0fb', // marker fill\r\n        markerOpacity: 0.8, // marker opacity not applied if a rgba markerColor is provided\r\n        markerOutlineColor: '#a7e7ff', // marker contour\r\n        fillColor: '#5ed0fb', // poly\r\n        fillOpacity: 0.2, // poly fill opacity not applied if a rgba fillColor is provided\r\n        strokeColor: '#5ed0fb', // line and poly\r\n        strokeOpacity: 0.7, // line and poly not applied if a rgba strokeColor is provided\r\n        strokeWidth: 2 // line and poly\r\n      },\r\n      focus: {\r\n        markerColor: '#5ed0fb', // marker fill\r\n        markerOpacity: 1, // marker opacity not applied if a rgba markerColor is provided\r\n        markerOutlineColor: '#DFF7FF', // marker contour\r\n        fillColor: '#5ed0fb', // poly\r\n        fillOpacity: 0.3, // poly fill opacity not applied if a rgba fillColor is provided\r\n        strokeColor: '#DFF7FF', // line and poly\r\n        strokeOpacity: 1, // line and poly not applied if a rgba strokeColor is provided\r\n        strokeWidth: 2 // line and poly\r\n      },\r\n      selection: {\r\n        markerColor: '#00a1de', // marker fill\r\n        markerOpacity: 1, // marker opacity not applied if a rgba markerColor is provided\r\n        markerOutlineColor: '#ffffff', // marker contour\r\n        fillColor: '#00a1de', // poly\r\n        fillOpacity: 0.3, // poly fill opacity not applied if a rgba fillColor is provided\r\n        strokeColor: '#00A1DE', // line and poly\r\n        strokeOpacity: 1, // line and poly not applied if a rgba strokeColor is provided\r\n        strokeWidth: 2 // line and poly\r\n      }\r\n    }\r\n  }\r\n};\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { MapOverlayComponent } from './map-overlay.component';\r\n\r\n@NgModule({\r\n  imports: [CommonModule],\r\n  exports: [MapOverlayComponent],\r\n  declarations: [MapOverlayComponent]\r\n})\r\nexport class MapOverlayModule {}\r\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatListModule } from '@angular/material/list';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatSelectModule } from '@angular/material/select';\n\nimport { IgoLanguageModule } from '@igo2/core';\nimport { IgoBackdropModule } from '@igo2/common';\n\nimport { ExpansionPanelComponent } from './expansion-panel.component';\nimport { ExpansionPanelHeaderComponent } from './expansion-panel-header.component';\nimport { MatTooltipModule } from '@angular/material/tooltip';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    MatButtonModule,\n    MatIconModule,\n    MatMenuModule,\n    MatListModule,\n    MatSelectModule,\n    MatTooltipModule,\n    IgoLanguageModule,\n    IgoBackdropModule\n  ],\n  exports: [ExpansionPanelComponent],\n  declarations: [ExpansionPanelComponent, ExpansionPanelHeaderComponent]\n})\nexport class AppExpansionPanelModule {}\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatMenuModule } from '@angular/material/menu';\r\nimport { MatTooltipModule } from '@angular/material/tooltip';\r\n\r\nimport {\r\n  IgoPanelModule,\r\n  IgoStopPropagationModule,\r\n  IgoActionModule\r\n} from '@igo2/common';\r\nimport { IgoLanguageModule } from '@igo2/core';\r\nimport { IgoFeatureModule, IgoSearchResultsModule } from '@igo2/geo';\r\n\r\nimport { ToastPanelComponent } from './toast-panel.component';\r\nimport { MatBadgeModule } from '@angular/material/badge';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    MatBadgeModule,\r\n    MatIconModule,\r\n    MatButtonModule,\r\n    MatTooltipModule,\r\n    MatMenuModule,\r\n    IgoLanguageModule,\r\n    IgoPanelModule,\r\n    IgoStopPropagationModule,\r\n    IgoActionModule,\r\n    IgoFeatureModule,\r\n    IgoSearchResultsModule\r\n  ],\r\n  exports: [ToastPanelComponent],\r\n  declarations: [ToastPanelComponent]\r\n})\r\nexport class AppToastPanelModule {}\r\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatSidenavModule } from '@angular/material/sidenav';\nimport { MatTooltipModule } from '@angular/material/tooltip';\n\nimport { IgoLanguageModule } from '@igo2/core';\nimport {\n  IgoPanelModule,\n  IgoFlexibleModule,\n  IgoToolModule,\n  IgoInteractiveTourModule,\n  IgoHomeButtonModule\n} from '@igo2/common';\nimport { IgoFeatureModule } from '@igo2/geo';\nimport { IgoContextManagerModule } from '@igo2/context';\n\nimport { SidenavComponent } from './sidenav.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    MatIconModule,\n    MatButtonModule,\n    MatSidenavModule,\n    MatTooltipModule,\n    IgoLanguageModule,\n    IgoPanelModule,\n    IgoFlexibleModule,\n    IgoContextManagerModule,\n    IgoToolModule,\n    IgoFeatureModule,\n    IgoInteractiveTourModule,\n    IgoHomeButtonModule\n  ],\n  exports: [SidenavComponent],\n  declarations: [SidenavComponent]\n})\nexport class AppSidenavModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\n\nimport { IgoPanelModule, IgoStopPropagationModule } from '@igo2/common';\nimport { IgoLanguageModule } from '@igo2/core';\n\nimport { ToastPanelForExpansionComponent } from './toast-panel-for-expansion.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    MatIconModule,\n    MatButtonModule,\n    IgoLanguageModule,\n    IgoPanelModule,\n    IgoStopPropagationModule\n  ],\n  exports: [ToastPanelForExpansionComponent],\n  declarations: [ToastPanelForExpansionComponent]\n})\nexport class AppToastPanelForExpansionModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { MatDialogModule } from '@angular/material/dialog';\n\nimport { WelcomeWindowComponent } from './welcome-window.component';\nimport { IgoLanguageModule } from '@igo2/core';\nimport { IgoInteractiveTourModule, IgoCustomHtmlModule } from '@igo2/common';\n\n@NgModule({\n  imports: [\n    IgoLanguageModule,\n    CommonModule,\n    FormsModule,\n    MatDialogModule,\n    IgoInteractiveTourModule,\n    IgoCustomHtmlModule,\n    MatButtonModule,\n    MatTooltipModule,\n    MatIconModule,\n    MatToolbarModule\n  ],\n  declarations: [WelcomeWindowComponent],\n  exports: [WelcomeWindowComponent]\n})\nexport class IgoWelcomeWindowModule {}\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatSidenavModule } from '@angular/material/sidenav';\r\nimport { MatTooltipModule } from '@angular/material/tooltip';\r\nimport { MatDialogModule } from '@angular/material/dialog';\r\n\r\nimport { IgoCoreModule } from '@igo2/core';\r\nimport {\r\n  IgoActionModule,\r\n  IgoWorkspaceModule,\r\n  IgoEntityModule,\r\n  IgoPanelModule,\r\n  IgoBackdropModule,\r\n  IgoFlexibleModule,\r\n  IgoContextMenuModule,\r\n  IgoToolModule,\r\n  IgoEntityTableModule,\r\n  IgoEntityTablePaginatorModule,\r\n  IgoInteractiveTourModule\r\n} from '@igo2/common';\r\n\r\nimport {\r\n  IgoGeoWorkspaceModule,\r\n  IgoFeatureModule,\r\n  IgoImportExportModule,\r\n  IgoMapModule,\r\n  IgoQueryModule,\r\n  IgoSearchModule\r\n} from '@igo2/geo';\r\nimport {\r\n  IgoContextManagerModule,\r\n  IgoContextMapButtonModule\r\n} from '@igo2/context';\r\n\r\nimport { IgoIntegrationModule } from '@igo2/integration';\r\n\r\nimport { MapOverlayModule } from './map-overlay/map-overlay.module';\r\nimport { AppExpansionPanelModule } from './expansion-panel/expansion-panel.module';\r\nimport { AppToastPanelModule } from './toast-panel/toast-panel.module';\r\nimport { AppSidenavModule } from './sidenav/sidenav.module';\r\n\r\nimport { PortalComponent } from './portal.component';\r\nimport { AppToastPanelForExpansionModule } from './toast-panel-for-expansion/toast-panel-for-expansion.module';\r\n\r\nimport { IgoWelcomeWindowModule } from './welcome-window/welcome-window.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    MatTooltipModule,\r\n    MatButtonModule,\r\n    MatIconModule,\r\n    MatSidenavModule,\r\n    MatDialogModule,\r\n    IgoCoreModule,\r\n    IgoFeatureModule,\r\n    IgoImportExportModule,\r\n    IgoMapModule,\r\n    IgoQueryModule.forRoot(),\r\n    IgoSearchModule.forRoot(),\r\n    IgoActionModule,\r\n    IgoWorkspaceModule,\r\n    IgoEntityModule,\r\n    IgoGeoWorkspaceModule,\r\n    IgoPanelModule,\r\n    IgoToolModule,\r\n    IgoContextMenuModule,\r\n    IgoBackdropModule,\r\n    IgoFlexibleModule,\r\n    IgoIntegrationModule,\r\n    AppExpansionPanelModule,\r\n    AppToastPanelModule,\r\n    AppToastPanelForExpansionModule,\r\n    AppSidenavModule,\r\n    MapOverlayModule,\r\n    IgoContextManagerModule,\r\n    IgoContextMapButtonModule,\r\n    IgoEntityTableModule,\r\n    IgoEntityTablePaginatorModule,\r\n    IgoInteractiveTourModule,\r\n    IgoWelcomeWindowModule\r\n  ],\r\n  exports: [PortalComponent],\r\n  declarations: [PortalComponent]\r\n})\r\nexport class PortalModule {}\r\n","import { Injectable } from '@angular/core';\r\nimport { LanguageService } from '@igo2/core';\r\nimport { SwUpdate } from '@angular/service-worker';\r\nimport { interval } from 'rxjs';\r\nimport { ConfirmDialogService } from '@igo2/common';\r\nimport { skip, tap } from 'rxjs/operators';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class PwaService {\r\n  private confirmOpened: boolean = false;\r\n  constructor(\r\n    private updates: SwUpdate,\r\n    private languageService: LanguageService,\r\n    private confirmDialogService: ConfirmDialogService\r\n  ) {\r\n    if (updates.isEnabled) {\r\n      this.handleVersionUpdates();\r\n    }\r\n  }\r\n\r\n  checkForUpdates() {\r\n    if (this.updates.isEnabled) {\r\n      interval(60 * 1000 * 2)\r\n        .pipe(skip(1))\r\n        .subscribe(async () => {\r\n          try {\r\n            const updateFound = await this.updates.checkForUpdate();\r\n            console.log(\r\n              updateFound\r\n                ? 'A new version is available.'\r\n                : 'Already on the latest version.'\r\n            );\r\n          } catch (err) {\r\n            console.error('Failed to check for updates:', err);\r\n          }\r\n        });\r\n    }\r\n  }\r\n\r\n  private modalUpdatePWA() {\r\n    if (this.confirmOpened) {\r\n      return;\r\n    }\r\n    const title = this.languageService.translate.instant(\r\n      'pwa.new-version-title'\r\n    );\r\n    const body = this.languageService.translate.instant('pwa.new-version');\r\n    const message = `${title} ${body}`;\r\n    this.confirmDialogService\r\n      .open(message)\r\n      .pipe(tap(() => (this.confirmOpened = true)))\r\n      .subscribe((confirm) => {\r\n        if (confirm) {\r\n          this.confirmOpened = false;\r\n          if (window.navigator.onLine) {\r\n            document.location.reload();\r\n          } else {\r\n            alert(\r\n              `Hors-ligne / Offline. Vous devez être en ligne pour mettre à jour l\\'application. You must be online to update the application.`\r\n            );\r\n            setTimeout(() => {\r\n              this.modalUpdatePWA();\r\n            }, 900000);\r\n          }\r\n        }\r\n      });\r\n  }\r\n\r\n  private handleVersionUpdates(): void {\r\n    this.updates.versionUpdates.subscribe((evt) => {\r\n      switch (evt.type) {\r\n        case 'VERSION_DETECTED':\r\n          console.log(`Downloading new app version: ${evt.version.hash}`);\r\n          break;\r\n        case 'VERSION_READY':\r\n          console.log(`Current app version: ${evt.currentVersion.hash}`);\r\n          console.log(\r\n            `New app version ready for use: ${evt.latestVersion.hash}`\r\n          );\r\n          this.modalUpdatePWA();\r\n          break;\r\n        case 'VERSION_INSTALLATION_FAILED':\r\n          console.error(\r\n            `Failed to install app version '${evt.version.hash}': ${evt.error}`\r\n          );\r\n          break;\r\n      }\r\n    });\r\n  }\r\n}\r\n","import './portal.variables.scss';\r\n\r\nimport {\r\n  trigger,\r\n  state,\r\n  style,\r\n  transition,\r\n  animate,\r\n  AnimationTriggerMetadata\r\n} from '@angular/animations';\r\n\r\nexport function expansionPanelAnimation(): AnimationTriggerMetadata[] {\r\n  return [\r\n    trigger('expansionPanelSize', [\r\n      state(\r\n        'full',\r\n        style({\r\n          left: '5px',\r\n          'max-width': '100%'\r\n        })\r\n      ),\r\n      state(\r\n        'notTriggered',\r\n        style({\r\n          left: '5px',\r\n          bottom: '5px',\r\n          'max-width': '100%'\r\n        })\r\n      ),\r\n      state(\r\n        'notVisible',\r\n        style({\r\n          display: 'none'\r\n        })\r\n      ),\r\n      state(\r\n        'mobile',\r\n        style({\r\n          left: 'calc(100% - 40px)'\r\n        })\r\n      ),\r\n      state(\r\n        'reduced',\r\n        style({\r\n          left: '405px',\r\n          'max-width': 'calc(100% - 405px)'\r\n        })\r\n      ),\r\n      state(\r\n        'reducedNotTriggered',\r\n        style({\r\n          left: '405px',\r\n          bottom: '5px',\r\n          'max-width': 'calc(100% - 405px)'\r\n        })\r\n      ),\r\n      transition('* => *', animate('100ms'))\r\n    ]),\r\n    trigger('toastOffsetY', [\r\n      state(\r\n        'true',\r\n        style({\r\n          bottom: '50px'\r\n        })\r\n      ),\r\n      state(\r\n        'false',\r\n        style({\r\n          bottom: '5px'\r\n        })\r\n      )\r\n    ])\r\n  ];\r\n}\r\n\r\nexport function toastPanelAnimation(): AnimationTriggerMetadata[] {\r\n  return [\r\n    trigger('toastPanelMobileSidenav', [\r\n      state(\r\n        'true',\r\n        style({\r\n          display: 'none'\r\n        })\r\n      ),\r\n      transition('* => void', animate('0ms')),\r\n      transition('* => *', animate('200ms'))\r\n    ]),\r\n    trigger('toastPanelOffsetX', [\r\n      state(\r\n        'fullStandard',\r\n        style({\r\n          left: '45%'\r\n        })\r\n      ),\r\n      state(\r\n        'standard',\r\n        style({\r\n          left: '50%'\r\n        })\r\n      ),\r\n      state(\r\n        'htmlDisplay',\r\n        style({\r\n          left: '40%'\r\n        })\r\n      ),\r\n      state(\r\n        'fullOffsetX',\r\n        style({\r\n          left: 'calc(45% + 202px)'\r\n        })\r\n      ),\r\n      state(\r\n        'standardOffsetX',\r\n        style({\r\n          left: 'calc(50% + 202px)'\r\n        })\r\n      ),\r\n      state(\r\n        'htmlDisplayOffsetX',\r\n        style({\r\n          left: 'calc(40% + 160px)'\r\n        })\r\n      ),\r\n      transition('fullStandard => fullOffsetX', animate('200ms')),\r\n      transition('fullOffsetX => fullStandard', animate('200ms')),\r\n      transition('standard => standardOffsetX', animate('200ms')),\r\n      transition('standardOffsetX => standard', animate('200ms')),\r\n      transition('htmlDisplay => htmlDisplayOffsetX', animate('200ms')),\r\n      transition('htmlDisplayOffsetX => htmlDisplay', animate('200ms'))\r\n      // transition('standard => htmlDisplay', animate('200ms')),\r\n      // transition('htmlDisplay => standard', animate('200ms')),\r\n    ]),\r\n    trigger('toastPanelOffsetY', [\r\n      state(\r\n        'noExpansion',\r\n        style({\r\n          bottom: '0'\r\n        })\r\n      ),\r\n      state(\r\n        'expansionAndToastOpened',\r\n        style({\r\n          bottom: '285px',\r\n          zIndex: '999'\r\n        })\r\n      ),\r\n      state(\r\n        'expansionAndToastClosed',\r\n        style({\r\n          bottom: '285px',\r\n          zIndex: '5'\r\n        })\r\n      ),\r\n      state(\r\n        'expansionMaximizedAndToastOpened',\r\n        style({\r\n          bottom: '500px', // workspace full size\r\n          zIndex: '999'\r\n        })\r\n      ),\r\n      state(\r\n        'expansionMaximizedAndToastClosed',\r\n        style({\r\n          bottom: '500px', // workspace full size\r\n          zIndex: '5'\r\n        })\r\n      ),\r\n      transition('noExpansion => noExpansion', animate('10ms')),\r\n      transition(\r\n        'expansionAndToastOpened => expansionAndToastOpened',\r\n        animate('200ms')\r\n      ),\r\n      transition(\r\n        'expansionAndToastClosed => expansionAndToastClosed',\r\n        animate('200ms')\r\n      ),\r\n      transition(\r\n        'expansionMaximizedAndToastOpened => expansionMaximizedAndToastOpened',\r\n        animate('200ms')\r\n      ),\r\n      transition(\r\n        'expansionMaximizedAndToastClosed => expansionMaximizedAndToastClosed',\r\n        animate('200ms')\r\n      )\r\n    ])\r\n  ];\r\n}\r\n\r\nexport function controlsAnimations(): AnimationTriggerMetadata[] {\r\n  return [\r\n    trigger('controlsOffsetY', [\r\n      state('close', style({})),\r\n      state(\r\n        'firstRowFromBottom',\r\n        style({\r\n          bottom: '5px'\r\n        })\r\n      ),\r\n      state(\r\n        'firstRowFromBottom-expanded',\r\n        style({\r\n          bottom: '285px'\r\n        })\r\n      ),\r\n      state(\r\n        'firstRowFromBottom-expanded-maximized',\r\n        style({\r\n          bottom: '500px'\r\n        })\r\n      ),\r\n      state(\r\n        'secondRowFromBottom',\r\n        style({\r\n          bottom: '47px'\r\n        })\r\n      ),\r\n      state(\r\n        'thirdRowFromBottom',\r\n        style({\r\n          bottom: '104px'\r\n        })\r\n      ),\r\n      state(\r\n        '',\r\n        style({\r\n          bottom: 'calc(285px)'\r\n        })\r\n      ),\r\n      state(\r\n        'secondRowFromBottom-expanded',\r\n        style({\r\n          bottom: 'calc(285px + 52px)'\r\n        })\r\n      ),\r\n      state(\r\n        'thirdRowFromBottom-expanded',\r\n        style({\r\n          bottom: 'calc(285px + 104px)'\r\n        })\r\n      ),\r\n      transition('* => *', animate('200ms'))\r\n    ]),\r\n    trigger('mobileOffsetY', [\r\n      state(\r\n        'low',\r\n        style({\r\n          bottom: '50px'\r\n        })\r\n      ),\r\n      transition('* => *', animate('200ms'))\r\n    ])\r\n  ];\r\n}\r\n\r\nexport function controlSlideX(): AnimationTriggerMetadata {\r\n  return trigger('controlStateX', [\r\n    state(\r\n      'left',\r\n      style({\r\n        left: '60px'\r\n      })\r\n    ),\r\n    state(\r\n      'right',\r\n      style({\r\n        left: '465px'\r\n      })\r\n    ),\r\n    transition('* => *', animate('200ms'))\r\n  ]);\r\n}\r\n\r\nexport function controlSlideY(): AnimationTriggerMetadata {\r\n  return trigger('controlStateY', [\r\n    state('close', style({})),\r\n    state(\r\n      'firstRowFromBottom',\r\n      style({\r\n        bottom: '2px',\r\n        'margin-left': '0px'\r\n      })\r\n    ),\r\n    state(\r\n      'firstRowFromBottom-expanded',\r\n      style({\r\n        bottom: '285px',\r\n        'margin-left': '-55px'\r\n      })\r\n    ),\r\n    state(\r\n      'firstRowFromBottom-expanded-maximized',\r\n      style({\r\n        bottom: '500px', // workspace full size\r\n        'margin-left': '-55px'\r\n      })\r\n    ),\r\n    transition('* => *', animate('200ms'))\r\n  ]);\r\n}\r\n\r\nexport function mapSlideX(): AnimationTriggerMetadata {\r\n  return trigger('mapStateX', [\r\n    state(\r\n      'left',\r\n      style({\r\n        left: '0'\r\n      })\r\n    ),\r\n    state(\r\n      'right',\r\n      style({\r\n        left: '0'\r\n      })\r\n    ),\r\n    transition('* => *', animate('200ms'))\r\n  ]);\r\n}\r\nexport function mapSlideY(): AnimationTriggerMetadata {\r\n  return trigger('mapStateY', [\r\n    state(\r\n      '*',\r\n      style({\r\n        bottom: '0'\r\n      })\r\n    ),\r\n    transition('* => *', animate('200ms'))\r\n  ]);\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\nimport { ConfigService, StorageService } from '@igo2/core';\r\nimport { MatDialogConfig } from '@angular/material/dialog';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class WelcomeWindowService {\r\n  nbVisit: number;\r\n  showAgain: boolean;\r\n  igoVersionDifferentFromStorage = false;\r\n\r\n  constructor(\r\n    private configService: ConfigService,\r\n    private storageService: StorageService\r\n  ) {\r\n    this.igoVersionDifferentFromStorage = this.isVersionDifferentFromStorage();\r\n    this.setStorageConfig();\r\n  }\r\n\r\n  setStorageConfig() {\r\n    this.nbVisit = Number(this.storageService.get('welcomeWindow_nbVisit'));\r\n    if (!this.nbVisit) {\r\n      this.nbVisit = 0;\r\n    }\r\n\r\n    this.storageService.set('welcomeWindow_nbVisit', (this.nbVisit += 1));\r\n    this.storageService.set(\r\n      'version',\r\n      this.configService.getConfig('version.lib')\r\n    );\r\n  }\r\n\r\n  isVersionDifferentFromStorage(): boolean {\r\n    if (\r\n      this.storageService.get('version') &&\r\n      this.storageService.get('version') !==\r\n        this.configService.getConfig('version.lib')\r\n    ) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  hasWelcomeWindow(): boolean {\r\n    if (\r\n      this.storageService.get('welcomeWindow_showAgain') === false ||\r\n      this.storageService.get('welcomeWindow_showAgain') === 'false'\r\n    ) {\r\n      if (\r\n        this.nbVisit >=\r\n        this.configService.getConfig('welcomeWindow.nbVisitToShowAgain')\r\n      ) {\r\n        this.storageService.set('welcomeWindow_nbVisit', 0);\r\n        this.storageService.remove('welcomeWindow_showAgain');\r\n        return true;\r\n      } else if (\r\n        this.configService.getConfig('welcomeWindow.showAgainOnNewIGOVersion')\r\n      ) {\r\n        if (this.igoVersionDifferentFromStorage) {\r\n          this.storageService.set('welcomeWindow_nbVisit', 0);\r\n          this.storageService.remove('welcomeWindow_showAgain');\r\n          return true;\r\n        }\r\n      }\r\n      return false;\r\n    }\r\n\r\n    if (\r\n      typeof this.configService.getConfig('welcomeWindow.nbVisitToShow') !==\r\n      'undefined'\r\n    ) {\r\n      if (\r\n        this.nbVisit >\r\n        this.configService.getConfig('welcomeWindow.nbVisitToShow')\r\n      ) {\r\n        this.storageService.set('welcomeWindow_showAgain', false);\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return this.configService.getConfig('welcomeWindow');\r\n  }\r\n\r\n  getConfig(): MatDialogConfig {\r\n    const dialogConfig = new MatDialogConfig();\r\n\r\n    dialogConfig.disableClose = true;\r\n    dialogConfig.autoFocus = true;\r\n    dialogConfig.maxWidth = '500px';\r\n\r\n    return dialogConfig;\r\n  }\r\n\r\n  afterClosedWelcomeWindow() {\r\n    this.storageService.set('welcomeWindow_showAgain', this.showAgain);\r\n  }\r\n}\r\n","<div class=\"welcome-window\" *ngIf=\"html$ | async\">\r\n  <mat-toolbar color=\"primary\">\r\n    <h4>{{ 'welcomeWindow.title' | translate }}</h4>\r\n    <span class=\"spacer\"></span>\r\n\r\n    <label class=\"mat-body-2\">\r\n      <input\r\n        id=\"doNotShowCheck\"\r\n        type=\"checkbox\"\r\n        [(ngModel)]=\"showAgain\"\r\n        (click)=\"setShowAgain()\"\r\n      />\r\n      {{ 'welcomeWindow.notShowCheck' | translate }}\r\n    </label>\r\n  </mat-toolbar>\r\n\r\n  <div mat-dialog-content class=\"text\">\r\n    <igo-custom-html [html]=\"html$ | async\"></igo-custom-html>\r\n  </div>\r\n\r\n  <p></p>\r\n  <div class=\"button-container\">\r\n    <igo-interactive-tour\r\n      id=\"tour-button\"\r\n      styleButton=\"raised\"\r\n      [discoverTitleInLocale$]=\"discoverTitleInLocale$\"\r\n      (click)=\"closeWelcomeWindow()\"\r\n    >\r\n    </igo-interactive-tour>\r\n\r\n    <button\r\n      mat-raised-button\r\n      class=\"button-close\"\r\n      color=\"primary\"\r\n      mat-dialog-close\r\n    >\r\n      {{ 'welcomeWindow.closeButton' | translate }}\r\n    </button>\r\n  </div>\r\n</div>\r\n","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { ConfigService, LanguageService } from '@igo2/core';\r\nimport { BehaviorSubject, Observable, of, Subscription } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport { WelcomeWindowService } from './welcome-window.service';\r\n\r\n@Component({\r\n  selector: 'app-welcome-window',\r\n  templateUrl: './welcome-window.component.html',\r\n  styleUrls: ['./welcome-window.component.scss']\r\n})\r\nexport class WelcomeWindowComponent implements OnInit, OnDestroy {\r\n  // isVisible = true;\r\n  showAgain = false;\r\n  public discoverTitleInLocale$: Observable<string>;\r\n  private title$$: Subscription;\r\n  public html$: BehaviorSubject<string> = new BehaviorSubject(undefined);\r\n\r\n  constructor(\r\n    public dialog: MatDialog,\r\n    private welcomeWindowService: WelcomeWindowService,\r\n    private configService: ConfigService,\r\n    protected languageService: LanguageService\r\n  ) {\r\n    this.discoverTitleInLocale$ = of(\r\n      this.configService.getConfig('welcomeWindow.discoverTitleInLocale') ||\r\n        this.configService.getConfig('title')\r\n    );\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.computeHtml();\r\n  }\r\n\r\n  closeWelcomeWindow() {\r\n    this.dialog.closeAll();\r\n  }\r\n\r\n  private computeHtml() {\r\n    let deltaDay = 0;\r\n    let isDateParsable = true;\r\n    let releaseDate = new Date(\r\n      this.configService.getConfig('version.releaseDate')\r\n    );\r\n\r\n    const releaseDateAppConfig = this.configService.getConfig(\r\n      'version.releaseDateApp'\r\n    );\r\n\r\n    if (releaseDateAppConfig) {\r\n      const releaseDateApp = new Date(releaseDateAppConfig);\r\n      if (isNaN(releaseDateApp.getDate())) {\r\n        console.log('The releaseDateApp config is not a valid date format');\r\n        isDateParsable = false;\r\n      } else {\r\n        deltaDay = 1;\r\n        releaseDate = releaseDateApp;\r\n      }\r\n    }\r\n\r\n    let releaseDateString = '';\r\n\r\n    if (isDateParsable) {\r\n      let day: any = releaseDate.getDate() + deltaDay;\r\n      if (day < 10) {\r\n        day = '0' + day;\r\n      }\r\n      let month: any = releaseDate.getMonth() + 1;\r\n      if (month < 10) {\r\n        month = '0' + month;\r\n      }\r\n      const year = releaseDate.getFullYear();\r\n      releaseDateString = `${year}-${month}-${day}`;\r\n    } else {\r\n      releaseDateString = releaseDateAppConfig;\r\n    }\r\n\r\n    this.title$$ = this.languageService.translate\r\n      .get(this.configService.getConfig('title') || '')\r\n      .pipe(\r\n        map((title) => {\r\n          return this.languageService.translate.instant('welcomeWindow.html', {\r\n            title,\r\n            description: this.configService.getConfig('description') || '',\r\n            version:\r\n              this.configService.getConfig('version.app') ||\r\n              this.configService.getConfig('version.lib') ||\r\n              '',\r\n            releaseDate: releaseDateString || ''\r\n          });\r\n        })\r\n      )\r\n      .subscribe((r) => this.html$.next(r));\r\n\r\n    return this.html$;\r\n  }\r\n\r\n  setShowAgain() {\r\n    this.welcomeWindowService.showAgain = this.showAgain;\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    if (this.title$$) {\r\n      this.title$$.unsubscribe();\r\n    }\r\n  }\r\n}\r\n","import {\n  trigger,\n  state,\n  style,\n  transition,\n  animate,\n  AnimationTriggerMetadata\n} from '@angular/animations';\n\nexport function showContent(\n  duration = '150ms',\n  delay = '300ms',\n  easing = 'ease-in-out'\n): AnimationTriggerMetadata {\n  return trigger('showContent', [\n    state(\n      'true',\n      style({\n        opacity: 1\n      })\n    ),\n    state(\n      'false',\n      style({\n        opacity: 0\n      })\n    ),\n    transition('false => true', animate(`${duration} ${delay} ${easing}`)),\n    transition('true => false', animate('0ms'))\n  ]);\n}\n","<div class=\"app-expansion-panel-trigger-container mat-elevation-z2\">\n  <button\n    mat-icon-button\n    (click)=\"onToggleClick()\"\n    [matTooltip]=\"\n      (!expanded ? 'workspace.open' : 'workspace.close') | translate\n    \"\n    color=\"primary\"\n  >\n    <mat-icon *ngIf=\"!expanded\" svgIcon=\"launch\"></mat-icon>\n    <mat-icon\n      *ngIf=\"expanded\"\n      style=\"transform: rotate(180deg)\"\n      svgIcon=\"launch\"\n    ></mat-icon>\n  </button>\n</div>\n\n<div class=\"app-expansion-panel-content\">\n  <ng-content></ng-content>\n</div>\n","import {\n  Component,\n  Input,\n  Output,\n  EventEmitter,\n  HostBinding,\n  ChangeDetectionStrategy\n} from '@angular/core';\n\n@Component({\n  selector: 'app-expansion-panel-header',\n  templateUrl: './expansion-panel-header.component.html',\n  styleUrls: ['./expansion-panel-header.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExpansionPanelHeaderComponent {\n  @Input()\n  get expanded(): boolean {\n    return this._expanded;\n  }\n  set expanded(value: boolean) {\n    if (value === this._expanded) {\n      return;\n    }\n\n    this._expanded = value;\n    this.expandedChange.emit(this._expanded);\n  }\n  private _expanded: boolean;\n\n  @Output() expandedChange = new EventEmitter<boolean>();\n\n  @HostBinding('class.app-expansion-panel-header-expanded')\n  get hasExpandedClass() {\n    return this.expanded;\n  }\n\n  constructor() {}\n\n  onToggleClick() {\n    this.expanded = !this.expanded;\n  }\n}\n","import {\n  Component,\n  Input,\n  Output,\n  EventEmitter,\n  HostBinding,\n  ChangeDetectionStrategy\n} from '@angular/core';\n\nimport { showContent } from './expansion-panel.animations';\n\n@Component({\n  selector: 'app-expansion-panel',\n  templateUrl: './expansion-panel.component.html',\n  styleUrls: ['./expansion-panel.component.scss'],\n  animations: [showContent()],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ExpansionPanelComponent {\n  @Input()\n  get expanded(): boolean {\n    return this._expanded;\n  }\n  set expanded(value: boolean) {\n    if (value === this._expanded) {\n      return;\n    }\n\n    this._expanded = value;\n    this.expandedChange.emit(this._expanded);\n  }\n  private _expanded: boolean;\n\n  @Input() maximized: Boolean = false;\n\n  @Input()\n  get backdropShown(): boolean {\n    return this._backdropShown;\n  }\n  set backdropShown(value: boolean) {\n    this._backdropShown = value;\n  }\n  private _backdropShown: boolean;\n\n  @Output() expandedChange = new EventEmitter<boolean>();\n\n  @HostBinding('class.app-expansion-panel-expanded')\n  get hasExpandedClass() {\n    return this.expanded && !this.maximized;\n  }\n\n  @HostBinding('class.app-expansion-panel-expanded-maximized')\n  get hasExpandedFullClass() {\n    return this.expanded && this.maximized;\n  }\n\n  constructor() {}\n\n  onBackdropClick() {\n    this.expanded = false;\n    this.backdropShown = false;\n  }\n}\n","<div>\r\n  <div class=\"app-expansion-panel-container\">\r\n    <igo-backdrop [shown]=\"backdropShown\" (click)=\"onBackdropClick()\">\r\n    </igo-backdrop>\r\n\r\n    <app-expansion-panel-header [(expanded)]=\"expanded\">\r\n      <ng-content select=\"[expansionPanelHeader]\"></ng-content>\r\n    </app-expansion-panel-header>\r\n\r\n    <div\r\n      class=\"app-expansion-panel-content mat-elevation-z4\"\r\n      [@showContent]=\"expanded\"\r\n    >\r\n      <ng-content></ng-content>\r\n    </div>\r\n  </div>\r\n</div>\r\n","<ng-template #toast>\r\n  <igo-panel\r\n    *ngIf=\"store.entities$ | async\"\r\n    [ngClass]=\"getClassPanel()\"\r\n    [id]=\"setHeighPanelTabsMode()\"\r\n    [title]=\"\r\n      resultSelected$.value\r\n        ? getTitle(resultSelected$.value)\r\n        : ('toastPanel.title' | translate)\r\n    \"\r\n    (click)=\"onToggleClick($event)\"\r\n    tabindex=\"0\"\r\n    (keydown)=\"handleKeyboardEvent($event)\"\r\n  >\r\n    <igo-actionbar\r\n      id=\"igo-actionbar\"\r\n      panelLeftButton\r\n      [store]=\"actionStore\"\r\n      [withIcon]=\"true\"\r\n      [icon]=\"icon\"\r\n      [withTitle]=\"actionbarMode === 'overlay'\"\r\n      [horizontal]=\"true\"\r\n      [mode]=\"actionbarMode\"\r\n    >\r\n    </igo-actionbar>\r\n\r\n    <button\r\n      *ngIf=\"resultSelected$.value\"\r\n      mat-icon-button\r\n      igoStopPropagation\r\n      panelLeftButton\r\n      [matTooltip]=\"\r\n        ((isSelectedResultOutOfView$ | async)\r\n          ? 'toastPanel.zoomOnFeatureTooltipOutOfView'\r\n          : 'toastPanel.zoomOnFeatureTooltip'\r\n        ) | translate\r\n      \"\r\n      matTooltipShowDelay=\"500\"\r\n      (click)=\"zoomTo()\"\r\n    >\r\n      <mat-icon\r\n        aria-hidden=\"false\"\r\n        [matBadge]=\"(isSelectedResultOutOfView$ | async) ? '!' : ''\"\r\n        matBadgeColor=\"accent\"\r\n        matBadgeSize=\"small\"\r\n        [matBadgeHidden]=\"(isSelectedResultOutOfView$ | async) !== true\"\r\n        svgIcon=\"magnify-plus-outline\"\r\n      ></mat-icon>\r\n    </button>\r\n\r\n    <button\r\n      *ngIf=\"hasGeoService()\"\r\n      mat-icon-button\r\n      igoStopPropagation\r\n      panelLeftButton\r\n      tooltip-position=\"below\"\r\n      [matTooltip]=\"\r\n        ((potententialLayerisAdded$ | async)\r\n          ? 'toastPanel.removeLayer'\r\n          : 'toastPanel.addLayer'\r\n        ) | translate\r\n      \"\r\n      matTooltipShowDelay=\"500\"\r\n      [color]=\"(potententialLayerisAdded$ | async) ? 'warn' : ''\"\r\n      (click)=\"handleLayer()\"\r\n    >\r\n      <mat-icon\r\n        [svgIcon]=\"(potententialLayerisAdded$ | async) ? 'delete' : 'plus'\"\r\n      >\r\n      </mat-icon>\r\n    </button>\r\n\r\n    <button\r\n      *ngIf=\"resultSelected$.value\"\r\n      [disabled]=\"results[0].meta.id === resultSelected$.value.meta.id\"\r\n      mat-icon-button\r\n      igoStopPropagation\r\n      panelLeftButton\r\n      [matTooltip]=\"'toastPanel.previousFeatureTooltip' | translate\"\r\n      matTooltipShowDelay=\"500\"\r\n      (click)=\"previousResult()\"\r\n    >\r\n      <mat-icon svgIcon=\"chevron-left\"></mat-icon>\r\n    </button>\r\n\r\n    <button\r\n      *ngIf=\"resultSelected$.value\"\r\n      [disabled]=\"\r\n        results[results.length - 1].meta.id === resultSelected$.value.meta.id\r\n      \"\r\n      mat-icon-button\r\n      igoStopPropagation\r\n      panelRightButton\r\n      [matTooltip]=\"'toastPanel.nextFeatureTooltip' | translate\"\r\n      matTooltipShowDelay=\"500\"\r\n      (click)=\"nextResult()\"\r\n    >\r\n      <mat-icon svgIcon=\"chevron-right\"></mat-icon>\r\n    </button>\r\n\r\n    <button\r\n      *ngIf=\"opened && isDesktop()\"\r\n      mat-icon-button\r\n      igoStopPropagation\r\n      panelRightButton\r\n      (click)=\"resizeWindows()\"\r\n      [matTooltip]=\"\r\n        ((this.fullExtent$ | async)\r\n          ? 'toastPanel.standardExtentTooltip'\r\n          : 'toastPanel.fullExtentTooltip'\r\n        ) | translate\r\n      \"\r\n      matTooltipShowDelay=\"500\"\r\n    >\r\n      <mat-icon svgIcon=\"{{ iconResizeWindows }}\"></mat-icon>\r\n    </button>\r\n    <button\r\n      mat-icon-button\r\n      igoStopPropagation\r\n      panelRightButton\r\n      (click)=\"clear()\"\r\n    >\r\n      <mat-icon svgIcon=\"close\"></mat-icon>\r\n    </button>\r\n\r\n    <div #content class=\"toast-content\">\r\n      <igo-feature-details\r\n        [map]=\"map\"\r\n        *ngIf=\"resultSelected$.value\"\r\n        [feature]=\"resultSelected$.value.data\"\r\n        (htmlDisplayEvent)=\"setHtmlDisplay($event)\"\r\n      >\r\n      </igo-feature-details>\r\n\r\n      <igo-search-results\r\n        *ngIf=\"!resultSelected$.value\"\r\n        [map]=\"map\"\r\n        [store]=\"store\"\r\n        [showIcons]=\"true\"\r\n        [withZoomButton]=\"withZoomButton\"\r\n        (resultFocus)=\"focusResult($event)\"\r\n        (resultUnfocus)=\"unfocusResult($event, true)\"\r\n        (resultSelect)=\"selectResult($event)\"\r\n        [tabsMode]=\"tabsMode\"\r\n      >\r\n      </igo-search-results>\r\n    </div>\r\n  </igo-panel>\r\n</ng-template>\r\n\r\n<div\r\n  *ngIf=\"isMobile(); else toast\"\r\n  class=\"swipe-fix\"\r\n  (swipeleft)=\"swipe($event.type)\"\r\n  (swiperight)=\"swipe($event.type)\"\r\n  (swipeup)=\"swipe($event.type)\"\r\n  (swipedown)=\"swipe($event.type)\"\r\n>\r\n  <ng-template [ngTemplateOutlet]=\"toast\"></ng-template>\r\n</div>\r\n","import {\r\n  Component,\r\n  Input,\r\n  Output,\r\n  EventEmitter,\r\n  HostBinding,\r\n  HostListener,\r\n  ChangeDetectionStrategy,\r\n  OnInit,\r\n  OnDestroy\r\n} from '@angular/core';\r\nimport { BehaviorSubject, Observable, combineLatest, Subscription } from 'rxjs';\r\nimport { debounceTime, map, skipWhile, tap } from 'rxjs/operators';\r\nimport olFormatGeoJSON from 'ol/format/GeoJSON';\r\nimport olFeature from 'ol/Feature';\r\nimport olPoint from 'ol/geom/Point';\r\n\r\nimport {\r\n  getEntityTitle,\r\n  EntityStore,\r\n  ActionStore,\r\n  Action,\r\n  ActionbarMode\r\n} from '@igo2/common';\r\nimport {\r\n  Feature,\r\n  SearchResult,\r\n  IgoMap,\r\n  FeatureMotion,\r\n  moveToOlFeatures,\r\n  featureToOl,\r\n  featuresAreTooDeepInView,\r\n  featureFromOl,\r\n  getCommonVectorStyle,\r\n  getCommonVectorSelectedStyle,\r\n  featuresAreOutOfView,\r\n  computeOlFeaturesExtent,\r\n  PropertyTypeDetectorService,\r\n  generateIdFromSourceOptions,\r\n  LayerService,\r\n  Layer,\r\n  GeoServiceDefinition\r\n} from '@igo2/geo';\r\nimport {\r\n  Media,\r\n  MediaService,\r\n  LanguageService,\r\n  StorageService,\r\n  StorageScope,\r\n  StorageServiceEvent,\r\n  ConfigService\r\n} from '@igo2/core';\r\nimport { QueryState, StorageState, WorkspaceState } from '@igo2/integration';\r\nimport { ObjectUtils } from '@igo2/utils';\r\n\r\ninterface ExtendedGeoServiceDefinition extends GeoServiceDefinition {\r\n  propertyForUrl: string;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-toast-panel',\r\n  templateUrl: './toast-panel.component.html',\r\n  styleUrls: ['./toast-panel.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class ToastPanelComponent implements OnInit, OnDestroy {\r\n  static SWIPE_ACTION = {\r\n    RIGHT: 'swiperight',\r\n    LEFT: 'swipeleft',\r\n    UP: 'swipeup',\r\n    DOWN: 'swipedown'\r\n  };\r\n\r\n  public tabsMode = false;\r\n\r\n  get storageService(): StorageService {\r\n    return this.storageState.storageService;\r\n  }\r\n\r\n  @Input()\r\n  get map(): IgoMap {\r\n    return this._map;\r\n  }\r\n  set map(value: IgoMap) {\r\n    this._map = value;\r\n  }\r\n  private _map: IgoMap;\r\n\r\n  @Input()\r\n  get store(): EntityStore<SearchResult<Feature>> {\r\n    return this._store;\r\n  }\r\n  set store(value: EntityStore<SearchResult<Feature>>) {\r\n    this._store = value;\r\n    this.store.entities$.subscribe((_entities) => {\r\n      this.unselectResult();\r\n    });\r\n  }\r\n  private _store: EntityStore<SearchResult<Feature>>;\r\n\r\n  @Input()\r\n  get opened(): boolean {\r\n    return this._opened;\r\n  }\r\n  set opened(value: boolean) {\r\n    if (value !== !this._opened) {\r\n      return;\r\n    }\r\n    this._opened = value;\r\n    this.storageService.set('toastOpened', value, StorageScope.SESSION);\r\n    this.openedChange.emit(value);\r\n  }\r\n  private _opened = true;\r\n\r\n  @Input() hasFeatureEmphasisOnSelection: Boolean = false;\r\n\r\n  get zoomAuto(): boolean {\r\n    return this._zoomAuto;\r\n  }\r\n  set zoomAuto(value) {\r\n    if (value !== !this._zoomAuto) {\r\n      return;\r\n    }\r\n    this._zoomAuto = value;\r\n    this.zoomAuto$.next(value);\r\n    this.storageService.set('zoomAuto', value);\r\n  }\r\n  private _zoomAuto = false;\r\n\r\n  // To allow the toast to use much larger extent on the map\r\n  get fullExtent(): boolean {\r\n    return this._fullExtent;\r\n  }\r\n  set fullExtent(value) {\r\n    if (value !== !this._fullExtent) {\r\n      return;\r\n    }\r\n    this._fullExtent = value;\r\n    this.fullExtent$.next(value);\r\n    this.fullExtentEvent.emit(value);\r\n    this.storageService.set('fullExtent', value);\r\n  }\r\n  private _fullExtent = false;\r\n\r\n  public potententialLayerToAdd$: BehaviorSubject<any> = new BehaviorSubject(\r\n    undefined\r\n  );\r\n  public potententialLayerisAdded$: BehaviorSubject<boolean> =\r\n    new BehaviorSubject(false);\r\n\r\n  public fullExtent$: BehaviorSubject<boolean> = new BehaviorSubject(\r\n    this.fullExtent\r\n  );\r\n  public isHtmlDisplay = false;\r\n  public iconResizeWindows = '';\r\n\r\n  public icon = 'menu';\r\n\r\n  public actionStore = new ActionStore([]);\r\n  public actionbarMode = ActionbarMode.Overlay;\r\n\r\n  private multiple$ = new BehaviorSubject(false);\r\n  private isResultSelected$ = new BehaviorSubject(false);\r\n  public isSelectedResultOutOfView$ = new BehaviorSubject(false);\r\n  private isSelectedResultOutOfView$$: Subscription;\r\n  private storageChange$$: Subscription;\r\n  private initialized = true;\r\n\r\n  private format = new olFormatGeoJSON();\r\n\r\n  private resultOrResolution$$: Subscription;\r\n  private focusedResult$: BehaviorSubject<SearchResult<Feature>> =\r\n    new BehaviorSubject(undefined);\r\n  private abstractFocusedOrSelectedResult: Feature;\r\n\r\n  public withZoomButton = true;\r\n  zoomAuto$: BehaviorSubject<boolean> = new BehaviorSubject(false);\r\n\r\n  @Output() openedChange = new EventEmitter<boolean>();\r\n\r\n  @Output() fullExtentEvent = new EventEmitter<boolean>();\r\n  @Output() windowHtmlDisplayEvent = new EventEmitter<boolean>();\r\n\r\n  resultSelected$ = new BehaviorSubject<SearchResult<Feature>>(undefined);\r\n\r\n  // @HostBinding('class.app-toast-panel-opened')\r\n  // get hasOpenedClass() {\r\n  //   return this.opened;\r\n  // }\r\n\r\n  // @HostBinding('class.app-full-toast-panel-collapsed')\r\n  // get hasFullCollapsedClass() {\r\n  //   return !this.opened && this.fullExtent;\r\n  // }\r\n\r\n  getClassPanel() {\r\n    return {\r\n      'app-toast-panel-opened':\r\n        this.opened && !this.fullExtent && !this.isHtmlDisplay,\r\n      'app-full-toast-panel-opened':\r\n        this.opened && this.fullExtent && !this.isHtmlDisplay,\r\n\r\n      'app-toast-panel-html':\r\n        this.opened &&\r\n        !this.fullExtent &&\r\n        this.resultSelected$.value &&\r\n        this.isHtmlDisplay,\r\n\r\n      'app-toast-panel-html-large':\r\n        this.opened &&\r\n        this.fullExtent &&\r\n        this.resultSelected$.value &&\r\n        this.isHtmlDisplay,\r\n\r\n      'app-toast-panel-collapsed':\r\n        !this.opened && !this.fullExtent && !this.isHtmlDisplay,\r\n      'app-full-toast-panel-collapsed':\r\n        !this.opened && this.fullExtent && !this.isHtmlDisplay,\r\n      'app-toast-panel-html-collapsed': !this.opened && this.isHtmlDisplay\r\n    };\r\n  }\r\n\r\n  // if query tabs mode activated\r\n  // fix Heigh of igo-panel\r\n  setHeighPanelTabsMode() {\r\n    if (this.resultSelected$.value || !this.opened) {\r\n      return '';\r\n    }\r\n\r\n    if (this.tabsMode && !this.fullExtent && !this.isHtmlDisplay) {\r\n      return 'app-toast-panel-opened-max-height';\r\n    } else if (\r\n      this.tabsMode &&\r\n      this.opened &&\r\n      this.fullExtent &&\r\n      !this.isHtmlDisplay\r\n    ) {\r\n      return 'app-full-toast-panel-opened-max-height';\r\n    }\r\n  }\r\n\r\n  @HostBinding('style.visibility')\r\n  get displayStyle() {\r\n    if (this.results.length) {\r\n      if (this.results.length === 1 && this.initialized) {\r\n        this.selectResult(this.results[0]);\r\n      }\r\n      return 'visible';\r\n    }\r\n    return 'hidden';\r\n  }\r\n\r\n  // @HostBinding('class.app-full-toast-panel-opened')\r\n  // get hasFullOpenedClass() {\r\n  //   return this.opened && this.fullExtent;\r\n  // }\r\n\r\n  @HostListener('document:keydown.escape', ['$event']) onEscapeHandler(\r\n    event: KeyboardEvent\r\n  ) {\r\n    this.clear();\r\n  }\r\n\r\n  @HostListener('document:keydown.backspace', ['$event']) onBackHandler(\r\n    event: KeyboardEvent\r\n  ) {\r\n    this.unselectResult();\r\n  }\r\n\r\n  @HostListener('document:keydown.z', ['$event']) onZoomHandler(\r\n    event: KeyboardEvent\r\n  ) {\r\n    if (this.isResultSelected$.getValue() === true) {\r\n      const localOlFeature = this.format.readFeature(\r\n        this.resultSelected$.getValue().data,\r\n        {\r\n          dataProjection: this.resultSelected$.getValue().data.projection,\r\n          featureProjection: this.map.projection\r\n        }\r\n      );\r\n      moveToOlFeatures(\r\n        this.map.viewController,\r\n        [localOlFeature],\r\n        FeatureMotion.Default\r\n      );\r\n    }\r\n  }\r\n\r\n  get results(): SearchResult<Feature>[] {\r\n    // return this.store.view.filter((e) => e.meta.dataType === FEATURE).all();\r\n    return this.store.all();\r\n  }\r\n\r\n  get multiple(): Observable<boolean> {\r\n    this.results.length\r\n      ? this.multiple$.next(true)\r\n      : this.multiple$.next(false);\r\n    return this.multiple$;\r\n  }\r\n\r\n  constructor(\r\n    public mediaService: MediaService,\r\n    public languageService: LanguageService,\r\n    private storageState: StorageState,\r\n    private queryState: QueryState,\r\n    private workspaceState: WorkspaceState,\r\n    private configService: ConfigService,\r\n    private propertyTypeDetectorService: PropertyTypeDetectorService,\r\n    private layerService: LayerService\r\n  ) {\r\n    this.tabsMode = this.configService.getConfig('queryTabs')\r\n      ? this.configService.getConfig('queryTabs')\r\n      : false;\r\n    this.opened = this.storageService.get('toastOpened') as boolean;\r\n    this.zoomAuto = this.storageService.get('zoomAuto') as boolean;\r\n    this.fullExtent = this.storageService.get('fullExtent') as boolean;\r\n    this.setResizeWindowIcon();\r\n  }\r\n\r\n  private monitorResultOutOfView() {\r\n    this.isSelectedResultOutOfView$$ = combineLatest([\r\n      this.map.viewController.state$,\r\n      this.resultSelected$\r\n    ])\r\n      .pipe(debounceTime(100))\r\n      .subscribe((bunch) => {\r\n        const selectedResult = bunch[1];\r\n        if (!selectedResult) {\r\n          this.isSelectedResultOutOfView$.next(false);\r\n          return;\r\n        }\r\n        const selectedOlFeature = featureToOl(\r\n          selectedResult.data,\r\n          this.map.projection\r\n        );\r\n        const selectedOlFeatureExtent = computeOlFeaturesExtent(\r\n          [selectedOlFeature],\r\n          this.map.viewProjection\r\n        );\r\n        this.isSelectedResultOutOfView$.next(\r\n          featuresAreOutOfView(this.map.getExtent(), selectedOlFeatureExtent)\r\n        );\r\n      });\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.store.entities$.subscribe(() => {\r\n      this.initialized = true;\r\n    });\r\n    this.monitorResultOutOfView();\r\n\r\n    let latestResult;\r\n    let trigger;\r\n    if (this.hasFeatureEmphasisOnSelection) {\r\n      this.resultOrResolution$$ = combineLatest([\r\n        this.focusedResult$.pipe(\r\n          tap((res) => {\r\n            latestResult = res;\r\n            trigger = 'focused';\r\n          })\r\n        ),\r\n        this.resultSelected$.pipe(\r\n          tap((res) => {\r\n            latestResult = res;\r\n            trigger = 'selected';\r\n          })\r\n        ),\r\n        this.map.viewController.resolution$,\r\n        this.store.entities$\r\n      ]).subscribe(() => this.buildResultEmphasis(latestResult, trigger));\r\n    }\r\n\r\n    this.storageChange$$ = this.storageService.storageChange$\r\n      .pipe(\r\n        skipWhile(\r\n          (storageChange: StorageServiceEvent) =>\r\n            storageChange.key !== 'zoomAuto'\r\n        )\r\n      )\r\n      .subscribe((change) => {\r\n        this.zoomAuto = change.currentValue;\r\n      });\r\n\r\n    this.actionStore.load([\r\n      {\r\n        id: 'list',\r\n        title: this.languageService.translate.instant('toastPanel.backToList'),\r\n        icon: 'format-list-bulleted-square',\r\n        tooltip: this.languageService.translate.instant(\r\n          'toastPanel.listButton'\r\n        ),\r\n        display: () => {\r\n          return this.isResultSelected$;\r\n        },\r\n        handler: () => {\r\n          this.unselectResult();\r\n        }\r\n      },\r\n      {\r\n        id: 'zoomFeature',\r\n        title: this.languageService.translate.instant(\r\n          'toastPanel.zoomOnFeature'\r\n        ),\r\n        icon: 'magnify-plus-outline',\r\n        tooltip: this.languageService.translate.instant(\r\n          'toastPanel.zoomOnFeatureTooltip'\r\n        ),\r\n        display: () => {\r\n          return this.isResultSelected$;\r\n        },\r\n        handler: () => {\r\n          const localOlFeature = this.format.readFeature(\r\n            this.resultSelected$.getValue().data,\r\n            {\r\n              dataProjection: this.resultSelected$.getValue().data.projection,\r\n              featureProjection: this.map.projection\r\n            }\r\n          );\r\n          moveToOlFeatures(\r\n            this.map.viewController,\r\n            [localOlFeature],\r\n            FeatureMotion.Zoom\r\n          );\r\n        }\r\n      },\r\n      {\r\n        id: 'zoomResults',\r\n        title: this.languageService.translate.instant(\r\n          'toastPanel.zoomOnFeatures'\r\n        ),\r\n        tooltip: this.languageService.translate.instant(\r\n          'toastPanel.zoomOnFeaturesTooltip'\r\n        ),\r\n        icon: 'magnify-scan',\r\n        availability: () => {\r\n          return this.multiple;\r\n        },\r\n        handler: () => {\r\n          const olFeatures = [];\r\n          for (const result of this.store.all()) {\r\n            const localOlFeature = this.format.readFeature(result.data, {\r\n              dataProjection: result.data.projection,\r\n              featureProjection: this.map.projection\r\n            });\r\n            olFeatures.push(localOlFeature);\r\n          }\r\n          moveToOlFeatures(\r\n            this.map.viewController,\r\n            olFeatures,\r\n            FeatureMotion.Zoom\r\n          );\r\n        }\r\n      },\r\n      {\r\n        id: 'zoomAuto',\r\n        title: this.languageService.translate.instant('toastPanel.zoomAuto'),\r\n        tooltip: this.languageService.translate.instant(\r\n          'toastPanel.zoomAutoTooltip'\r\n        ),\r\n        checkbox: true,\r\n        checkCondition: this.zoomAuto$,\r\n        handler: () => {\r\n          this.zoomAuto = !this.zoomAuto;\r\n          if (this.zoomAuto && this.isResultSelected$.value === true) {\r\n            this.selectResult(this.resultSelected$.getValue());\r\n          }\r\n        }\r\n      },\r\n      {\r\n        id: 'fullExtent',\r\n        title: this.languageService.translate.instant('toastPanel.fullExtent'),\r\n        tooltip: this.languageService.translate.instant(\r\n          'toastPanel.fullExtentTooltip'\r\n        ),\r\n        icon: 'arrow-expand',\r\n        display: () => {\r\n          return this.fullExtent$.pipe(map((v) => !v && !this.isDesktop()));\r\n        },\r\n        handler: () => {\r\n          this.fullExtent = true;\r\n        }\r\n      },\r\n      {\r\n        id: 'standardExtent',\r\n        title: this.languageService.translate.instant(\r\n          'toastPanel.standardExtent'\r\n        ),\r\n        tooltip: this.languageService.translate.instant(\r\n          'toastPanel.standardExtentTooltip'\r\n        ),\r\n        icon: 'arrow-collapse',\r\n        display: () => {\r\n          return this.fullExtent$.pipe(map((v) => v && !this.isDesktop()));\r\n        },\r\n        handler: () => {\r\n          this.fullExtent = false;\r\n        }\r\n      }\r\n    ]);\r\n    this.computeFeatureGeoServiceStatus();\r\n    combineLatest([\r\n      this.resultSelected$,\r\n      this.map.layers$ as BehaviorSubject<Layer[]>\r\n    ]).subscribe(() => {\r\n      this.computeFeatureGeoServiceStatus();\r\n    });\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    if (this.resultOrResolution$$) {\r\n      this.resultOrResolution$$.unsubscribe();\r\n    }\r\n    if (this.isSelectedResultOutOfView$$) {\r\n      this.isSelectedResultOutOfView$$.unsubscribe();\r\n    }\r\n    if (this.storageChange$$) {\r\n      this.storageChange$$.unsubscribe();\r\n    }\r\n  }\r\n\r\n  private buildResultEmphasis(\r\n    result: SearchResult<Feature>,\r\n    trigger: 'selected' | 'focused' | undefined\r\n  ) {\r\n    this.clearFeatureEmphasis();\r\n    if (!result || (trigger === 'selected' && this.zoomAuto)) {\r\n      return;\r\n    }\r\n    const myOlFeature = featureToOl(result.data, this.map.projection);\r\n    const olGeometry = myOlFeature.getGeometry();\r\n    if (\r\n      featuresAreTooDeepInView(\r\n        this.map.viewController,\r\n        olGeometry.getExtent() as [number, number, number, number],\r\n        0.0025\r\n      )\r\n    ) {\r\n      const extent = olGeometry.getExtent();\r\n      const x = extent[0] + (extent[2] - extent[0]) / 2;\r\n      const y = extent[1] + (extent[3] - extent[1]) / 2;\r\n      const feature1 = new olFeature({\r\n        name: 'abstractFocusedOrSelectedResult',\r\n        geometry: new olPoint([x, y])\r\n      });\r\n      this.abstractFocusedOrSelectedResult = featureFromOl(\r\n        feature1,\r\n        this.map.projection\r\n      );\r\n      this.abstractFocusedOrSelectedResult.meta.style =\r\n        getCommonVectorSelectedStyle(\r\n          Object.assign(\r\n            {},\r\n            { feature: this.abstractFocusedOrSelectedResult },\r\n            trigger === 'selected'\r\n              ? this.queryState.queryOverlayStyleSelection\r\n              : this.queryState.queryOverlayStyleFocus\r\n          )\r\n        );\r\n      this.abstractFocusedOrSelectedResult.meta.style.setZIndex(2000);\r\n      this.map.queryResultsOverlay.addFeature(\r\n        this.abstractFocusedOrSelectedResult,\r\n        FeatureMotion.None\r\n      );\r\n    }\r\n  }\r\n\r\n  private clearFeatureEmphasis() {\r\n    if (this.abstractFocusedOrSelectedResult) {\r\n      this.map.queryResultsOverlay.removeFeature(\r\n        this.abstractFocusedOrSelectedResult\r\n      );\r\n      this.abstractFocusedOrSelectedResult = undefined;\r\n    }\r\n  }\r\n\r\n  getTitle(result: SearchResult) {\r\n    return getEntityTitle(result);\r\n  }\r\n\r\n  focusResult(result: SearchResult<Feature>) {\r\n    this.focusedResult$.next(result);\r\n    this.map.queryResultsOverlay.removeFeature(result.data);\r\n\r\n    result.data.meta.style = getCommonVectorSelectedStyle(\r\n      Object.assign(\r\n        {},\r\n        { feature: result.data },\r\n        this.queryState.queryOverlayStyleFocus\r\n      )\r\n    );\r\n    result.data.meta.style.setZIndex(2000);\r\n    this.map.queryResultsOverlay.addFeature(result.data, FeatureMotion.None);\r\n  }\r\n\r\n  unfocusResult(result: SearchResult<Feature>, force?) {\r\n    this.focusedResult$.next(undefined);\r\n    if (!force && this.store.state.get(result).focused) {\r\n      return;\r\n    }\r\n    this.map.queryResultsOverlay.removeFeature(result.data);\r\n\r\n    result.data.meta.style = getCommonVectorStyle(\r\n      Object.assign(\r\n        {},\r\n        { feature: result.data },\r\n        this.queryState.queryOverlayStyle\r\n      )\r\n    );\r\n    result.data.meta.style.setZIndex(undefined);\r\n    this.map.queryResultsOverlay.addFeature(result.data, FeatureMotion.None);\r\n  }\r\n\r\n  selectResult(result: SearchResult<Feature>) {\r\n    this.store.state.update(\r\n      result,\r\n      {\r\n        focused: true,\r\n        selected: true\r\n      },\r\n      true\r\n    );\r\n    this.resultSelected$.next(result);\r\n    if (result.data.properties && result.data.properties.target === 'iframe') {\r\n      this.setHtmlDisplay(true);\r\n    } else {\r\n      this.setHtmlDisplay(false);\r\n    }\r\n\r\n    const features = [];\r\n    for (const feature of this.store.all()) {\r\n      if (feature.meta.id === result.meta.id) {\r\n        feature.data.meta.style = getCommonVectorSelectedStyle(\r\n          Object.assign(\r\n            {},\r\n            { feature: feature.data },\r\n            this.queryState.queryOverlayStyleSelection\r\n          )\r\n        );\r\n        feature.data.meta.style.setZIndex(2000);\r\n      } else {\r\n        feature.data.meta.style = getCommonVectorStyle(\r\n          Object.assign(\r\n            {},\r\n            { feature: feature.data },\r\n            this.queryState.queryOverlayStyle\r\n          )\r\n        );\r\n      }\r\n      features.push(feature.data);\r\n    }\r\n    this.map.queryResultsOverlay.removeFeatures(features);\r\n    this.map.queryResultsOverlay.addFeatures(features, FeatureMotion.None);\r\n\r\n    if (this.zoomAuto) {\r\n      const localOlFeature = this.format.readFeature(\r\n        this.resultSelected$.getValue().data,\r\n        {\r\n          dataProjection: this.resultSelected$.getValue().data.projection,\r\n          featureProjection: this.map.projection\r\n        }\r\n      );\r\n      moveToOlFeatures(\r\n        this.map.viewController,\r\n        [localOlFeature],\r\n        FeatureMotion.Default\r\n      );\r\n    }\r\n\r\n    this.isResultSelected$.next(true);\r\n    this.initialized = false;\r\n  }\r\n\r\n  unselectResult() {\r\n    this.resultSelected$.next(undefined);\r\n    this.isResultSelected$.next(false);\r\n    this.setHtmlDisplay(false);\r\n    this.store.state.clear();\r\n\r\n    const features = [];\r\n    for (const feature of this.store.all()) {\r\n      feature.data.meta.style = getCommonVectorStyle(\r\n        Object.assign(\r\n          {},\r\n          { feature: feature.data },\r\n          this.queryState.queryOverlayStyle\r\n        )\r\n      );\r\n      features.push(feature.data);\r\n    }\r\n    this.map.queryResultsOverlay.setFeatures(\r\n      features,\r\n      FeatureMotion.None,\r\n      'map'\r\n    );\r\n  }\r\n\r\n  handleWksSelection() {\r\n    const entities = this.store.entities$.getValue();\r\n    const layersTitle = [...new Set(entities.map((e) => e.source.title))];\r\n    const workspaces = this.workspaceState.store.entities$.getValue();\r\n    if (workspaces.length) {\r\n      const wksToHandle = workspaces.filter((wks) =>\r\n        layersTitle.includes(wks.title)\r\n      );\r\n      wksToHandle.map((ws) => {\r\n        ws.entityStore.state.updateMany(ws.entityStore.view.all(), {\r\n          selected: false\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  clear() {\r\n    this.handleWksSelection();\r\n    this.clearFeatureEmphasis();\r\n    this.map.queryResultsOverlay.clear();\r\n    this.store.clear();\r\n    this.unselectResult();\r\n    this.setHtmlDisplay(false);\r\n  }\r\n\r\n  isMobile(): boolean {\r\n    return this.mediaService.getMedia() === Media.Mobile;\r\n  }\r\n  isDesktop(): boolean {\r\n    return this.mediaService.isDesktop();\r\n  }\r\n\r\n  handleKeyboardEvent(event) {\r\n    if (event.keyCode === 37) {\r\n      this.previousResult();\r\n    } else if (event.keyCode === 39) {\r\n      this.nextResult();\r\n    }\r\n  }\r\n\r\n  previousResult() {\r\n    if (!this.resultSelected$.value) {\r\n      return;\r\n    }\r\n    let i = this.results.indexOf(this.resultSelected$.value);\r\n    const previousResult = this.results[--i];\r\n    if (previousResult) {\r\n      this.selectResult(previousResult);\r\n    }\r\n  }\r\n\r\n  nextResult() {\r\n    if (!this.resultSelected$.value) {\r\n      return;\r\n    }\r\n    let i = this.results.indexOf(this.resultSelected$.value);\r\n    const nextResult = this.results[++i];\r\n    if (nextResult) {\r\n      this.selectResult(nextResult);\r\n    }\r\n  }\r\n\r\n  hasGeoService() {\r\n    return this.getGeoServices().length;\r\n  }\r\n\r\n  private getGeoServices(): ExtendedGeoServiceDefinition[] {\r\n    const resultSelected = this.resultSelected$.getValue();\r\n    if (!resultSelected) {\r\n      return [];\r\n    }\r\n    const hasGeoServiceProperties: ExtendedGeoServiceDefinition[] = [];\r\n    const keys = Object.keys(resultSelected.data.properties);\r\n    Object.entries(resultSelected.data.properties).forEach((entry) => {\r\n      const [key, value] = entry;\r\n      const geoService = this.propertyTypeDetectorService.getGeoService(\r\n        value,\r\n        keys\r\n      );\r\n      const extendedGeoService: ExtendedGeoServiceDefinition = Object.assign(\r\n        {},\r\n        geoService,\r\n        { propertyForUrl: undefined }\r\n      );\r\n      if (geoService) {\r\n        extendedGeoService.propertyForUrl = key;\r\n        hasGeoServiceProperties.push(extendedGeoService);\r\n      }\r\n    });\r\n    return hasGeoServiceProperties;\r\n  }\r\n\r\n  handleLayer() {\r\n    const layersIds = this.map.layers.map((layer) => layer.id);\r\n    let potententialLayerToAdd = this.potententialLayerToAdd$.getValue();\r\n    if (!potententialLayerToAdd) {\r\n      this.computeFeatureGeoServiceStatus();\r\n    }\r\n    potententialLayerToAdd = this.potententialLayerToAdd$.getValue();\r\n\r\n    if (layersIds.includes(potententialLayerToAdd.id)) {\r\n      const layerToRemove = this.map.getLayerById(potententialLayerToAdd.id);\r\n      if (layerToRemove) {\r\n        this.map.removeLayer(layerToRemove);\r\n        this.potententialLayerisAdded$.next(false);\r\n      }\r\n    } else {\r\n      this.layerService\r\n        .createAsyncLayer(potententialLayerToAdd.sourceOptions)\r\n        .subscribe((layer) => {\r\n          this.map.layersAddedByClick$.next([layer]);\r\n          this.map.addLayer(layer);\r\n          this.potententialLayerisAdded$.next(true);\r\n        });\r\n    }\r\n  }\r\n\r\n  private computeFeatureGeoServiceStatus() {\r\n    const resultSelected = this.resultSelected$.getValue();\r\n    if (!resultSelected) {\r\n      return;\r\n    }\r\n    const geoServices = this.getGeoServices();\r\n    if (geoServices.length) {\r\n      const firstGeoService = geoServices[0];\r\n      const so = this.computeSourceOptionsFromProperties(\r\n        resultSelected.data.properties,\r\n        firstGeoService\r\n      );\r\n      const soId = generateIdFromSourceOptions(so.sourceOptions);\r\n      this.potententialLayerToAdd$.next({ id: soId, sourceOptions: so });\r\n      const layersIds = this.map.layers.map((l) => l.id);\r\n      this.potententialLayerisAdded$.next(\r\n        layersIds.includes(soId) ? true : false\r\n      );\r\n    }\r\n  }\r\n\r\n  private computeSourceOptionsFromProperties(\r\n    properties: {},\r\n    geoService: ExtendedGeoServiceDefinition\r\n  ) {\r\n    const keys = Object.keys(properties);\r\n    const propertiesForLayerName = keys.filter((p) =>\r\n      geoService.propertiesForLayerName.includes(p)\r\n    );\r\n    // providing the the first matching regex;\r\n    let layerName = properties[propertiesForLayerName[0]];\r\n    const url = properties[geoService.propertyForUrl];\r\n    let appliedLayerName = layerName;\r\n    let arcgisLayerName = undefined;\r\n    if (\r\n      ['arcgisrest', 'imagearcgisrest', 'tilearcgisrest'].includes(\r\n        geoService.type\r\n      )\r\n    ) {\r\n      arcgisLayerName = layerName;\r\n      appliedLayerName = undefined;\r\n    }\r\n    const so = ObjectUtils.removeUndefined({\r\n      sourceOptions: {\r\n        type: geoService.type || 'wms',\r\n        url,\r\n        optionsFromCapabilities: true,\r\n        optionsFromApi: true,\r\n        params: {\r\n          LAYERS: appliedLayerName,\r\n          LAYER: arcgisLayerName\r\n        }\r\n      }\r\n    });\r\n    return so;\r\n  }\r\n\r\n  zoomTo() {\r\n    const localOlFeature = this.format.readFeature(\r\n      this.resultSelected$.getValue().data,\r\n      {\r\n        dataProjection: this.resultSelected$.getValue().data.projection,\r\n        featureProjection: this.map.projection\r\n      }\r\n    );\r\n    moveToOlFeatures(\r\n      this.map.viewController,\r\n      [localOlFeature],\r\n      FeatureMotion.Zoom\r\n    );\r\n  }\r\n\r\n  swipe(action: string) {\r\n    if (action === ToastPanelComponent.SWIPE_ACTION.RIGHT) {\r\n      this.previousResult();\r\n    } else if (action === ToastPanelComponent.SWIPE_ACTION.LEFT) {\r\n      this.nextResult();\r\n    } else if (action === ToastPanelComponent.SWIPE_ACTION.UP) {\r\n      this.opened = true;\r\n    } else if (action === ToastPanelComponent.SWIPE_ACTION.DOWN) {\r\n      this.opened = false;\r\n    }\r\n  }\r\n\r\n  onToggleClick(e: MouseEvent) {\r\n    if ((e.target as any).className !== 'igo-panel-title') {\r\n      return;\r\n    }\r\n    this.opened = !this.opened;\r\n  }\r\n\r\n  /**\r\n   * Invoke the action handler\r\n   * @internal\r\n   */\r\n  onTriggerAction(action: Action) {\r\n    const args = action.args || [];\r\n    action.handler(...args);\r\n  }\r\n\r\n  setHtmlDisplay(value: boolean) {\r\n    if (value === true) {\r\n      this.isHtmlDisplay = true;\r\n      this.windowHtmlDisplayEvent.emit(true);\r\n    } else {\r\n      this.isHtmlDisplay = false;\r\n      this.windowHtmlDisplayEvent.emit(false);\r\n    }\r\n  }\r\n\r\n  isHtmlAndDesktop(): boolean {\r\n    if (this.isHtmlDisplay && this.isDesktop()) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  setResizeWindowIcon() {\r\n    if (this.fullExtent) {\r\n      this.iconResizeWindows = 'arrow-collapse';\r\n      // this.iconResizeWindows = 'vector-arrange-below';\r\n    } else {\r\n      this.iconResizeWindows = 'arrow-expand';\r\n      // this.iconResizeWindows = 'crop-square';\r\n    }\r\n  }\r\n\r\n  resizeWindows() {\r\n    this.storageService.set('fullExtent', !this.fullExtent);\r\n\r\n    if (this.fullExtent) {\r\n      this.reduceWindow();\r\n    } else {\r\n      this.enlargeWindows();\r\n    }\r\n  }\r\n\r\n  reduceWindow() {\r\n    this.fullExtent = false;\r\n    this.setResizeWindowIcon();\r\n  }\r\n\r\n  enlargeWindows() {\r\n    this.fullExtent = true;\r\n    this.setResizeWindowIcon();\r\n  }\r\n}\r\n","import {\r\n  trigger,\r\n  state,\r\n  style,\r\n  transition,\r\n  animate,\r\n  AnimationTriggerMetadata\r\n} from '@angular/animations';\r\n\r\nexport function showContent(\r\n  duration = '50ms',\r\n  delay = '280ms',\r\n  easing = 'ease-in-out'\r\n): AnimationTriggerMetadata {\r\n  return trigger('showContent', [\r\n    state(\r\n      'true',\r\n      style({\r\n        opacity: 1,\r\n        display: 'block'\r\n      })\r\n    ),\r\n    state(\r\n      'false',\r\n      style({\r\n        opacity: 0,\r\n        display: 'none'\r\n      })\r\n    ),\r\n    transition('false => true', animate(`${duration} ${delay} ${easing}`)),\r\n    transition('true => false', animate('0ms'))\r\n  ]);\r\n}\r\n","import {\r\n  Component,\r\n  Input,\r\n  Output,\r\n  EventEmitter,\r\n  HostBinding,\r\n  ChangeDetectionStrategy\r\n} from '@angular/core';\r\nimport { showContent } from './toast-panel-for-expansion.animations';\r\n\r\n@Component({\r\n  selector: 'app-toast-panel-for-expansion',\r\n  templateUrl: './toast-panel-for-expansion.component.html',\r\n  styleUrls: ['./toast-panel-for-expansion.component.scss'],\r\n  animations: [showContent()],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class ToastPanelForExpansionComponent {\r\n  @Input()\r\n  set opened(value: boolean) {\r\n    if (value === this._opened) {\r\n      return;\r\n    }\r\n    this._opened = value;\r\n    this.openedChange.emit(this._opened);\r\n  }\r\n  get opened(): boolean {\r\n    return this._opened;\r\n  }\r\n  private _opened: boolean;\r\n\r\n  @Input() title: string;\r\n\r\n  @Input() withHeader: boolean;\r\n\r\n  @Output() openedChange = new EventEmitter<boolean>();\r\n\r\n  @HostBinding('class.toast-panel-for-expansion-opened')\r\n  get hasOpenedClass() {\r\n    return this.opened;\r\n  }\r\n\r\n  @HostBinding('style.visibility')\r\n  get displayStyle() {\r\n    return this.withHeader || this.opened ? 'visible' : 'hidden';\r\n  }\r\n\r\n  constructor() {}\r\n}\r\n","<igo-panel [title]=\"title\" [withHeader]=\"withHeader\">\r\n  <div #content [@showContent]=\"opened\">\r\n    <ng-content></ng-content>\r\n  </div>\r\n</igo-panel>\r\n","<mat-sidenav\r\n  class=\"mat-elevation-z3\"\r\n  mode=\"side\"\r\n  [autoFocus]=\"false\"\r\n  [(opened)]=\"opened\"\r\n>\r\n  <div class=\"app-sidenav-content\">\r\n    <div\r\n      #content\r\n      class=\"app-content\"\r\n      [ngClass]=\"{ toolActivated: toolbox.activeTool$ | async }\"\r\n    >\r\n      <igo-home-button\r\n        *ngIf=\"toolbox.activeTool$ | async\"\r\n        (unselectButton)=\"onUnselectButtonClick()\"\r\n      >\r\n      </igo-home-button>\r\n\r\n      <igo-panel [title]=\"title$ | async | translate\">\r\n        <button\r\n          *ngIf=\"toolbox.activeTool$ | async\"\r\n          mat-icon-button\r\n          panelLeftButton\r\n          tooltip-position=\"below\"\r\n          matTooltipShowDelay=\"500\"\r\n          [matTooltip]=\"'igo.context.sidenav.goBack' | translate\"\r\n          (click)=\"onPreviousButtonClick()\"\r\n        >\r\n          <mat-icon svgIcon=\"arrow-left\"></mat-icon>\r\n        </button>\r\n\r\n        <igo-interactive-tour panelRightButton styleButton=\"icon\">\r\n        </igo-interactive-tour>\r\n\r\n        <igo-toolbox\r\n          class=\"igo-toolbox\"\r\n          color=\"primary\"\r\n          [animate]=\"true\"\r\n          [toolbox]=\"toolbox\"\r\n        >\r\n        </igo-toolbox>\r\n      </igo-panel>\r\n    </div>\r\n  </div>\r\n</mat-sidenav>\r\n","import {\r\n  Component,\r\n  Input,\r\n  Output,\r\n  OnInit,\r\n  OnDestroy,\r\n  EventEmitter,\r\n  ChangeDetectionStrategy\r\n} from '@angular/core';\r\n\r\nimport { BehaviorSubject, Subscription } from 'rxjs';\r\n\r\nimport { Tool, Toolbox } from '@igo2/common';\r\nimport { IgoMap } from '@igo2/geo';\r\nimport { ToolState, CatalogState } from '@igo2/integration';\r\nimport { ConfigService } from '@igo2/core';\r\n\r\n@Component({\r\n  selector: 'app-sidenav',\r\n  templateUrl: './sidenav.component.html',\r\n  styleUrls: ['./sidenav.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class SidenavComponent implements OnInit, OnDestroy {\r\n  title$: BehaviorSubject<string> = new BehaviorSubject<string>(undefined);\r\n\r\n  private activeTool$$: Subscription;\r\n\r\n  @Input()\r\n  get map(): IgoMap {\r\n    return this._map;\r\n  }\r\n  set map(value: IgoMap) {\r\n    this._map = value;\r\n  }\r\n  private _map: IgoMap;\r\n\r\n  @Input()\r\n  get opened(): boolean {\r\n    return this._opened;\r\n  }\r\n  set opened(value: boolean) {\r\n    if (value === this._opened) {\r\n      return;\r\n    }\r\n\r\n    this._opened = value;\r\n    this.openedChange.emit(this._opened);\r\n  }\r\n  private _opened: boolean;\r\n\r\n  @Output() openedChange = new EventEmitter<boolean>();\r\n  @Output() toolChange = new EventEmitter<Tool>();\r\n\r\n  get toolbox(): Toolbox {\r\n    return this.toolState.toolbox;\r\n  }\r\n\r\n  constructor(\r\n    private toolState: ToolState,\r\n    private configService: ConfigService,\r\n    private catalogState: CatalogState\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.activeTool$$ = this.toolbox.activeTool$.subscribe((tool: Tool) => {\r\n      const sidenavTitle =\r\n        this.configService.getConfig('sidenavTitle') || 'IGO';\r\n      if (tool) {\r\n        if (tool.name === 'catalogBrowser') {\r\n          for (const catalog of this.catalogState.catalogStore.all()) {\r\n            if (\r\n              this.catalogState.catalogStore.state.get(catalog).selected ===\r\n              true\r\n            ) {\r\n              this.title$.next(catalog.title);\r\n            }\r\n          }\r\n        } else if (\r\n          tool.name === 'activeTimeFilter' ||\r\n          tool.name === 'activeOgcFilter'\r\n        ) {\r\n          for (const layer of this.map.layers) {\r\n            if (layer.options.active === true) {\r\n              this.title$.next(layer.title);\r\n            }\r\n          }\r\n        } else {\r\n          this.title$.next(tool.title);\r\n        }\r\n      } else {\r\n        this.title$.next(sidenavTitle);\r\n      }\r\n      this.toolChange.emit(tool);\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.activeTool$$.unsubscribe();\r\n  }\r\n\r\n  onPreviousButtonClick() {\r\n    this.toolbox.activatePreviousTool();\r\n  }\r\n\r\n  onUnselectButtonClick() {\r\n    this.toolbox.deactivateTool();\r\n  }\r\n}\r\n","<ng-container *ngFor=\"let element of mapOverlay; let i = index\">\r\n  <div\r\n    class=\"mapOverlayDefault\"\r\n    [ngClass]=\"element.cssClass\"\r\n    [style.position]=\"element.fixed ? 'fixed' : 'absolute'\"\r\n    [style.marginLeft]=\"element.marginLeft\"\r\n    [style.marginRight]=\"element.marginRight\"\r\n    [style.marginTop]=\"element.marginTop\"\r\n    [style.marginBottom]=\"element.marginBottom\"\r\n    [style.fontSize]=\"element.fontSize\"\r\n  >\r\n    <a\r\n      *ngIf=\"element.link; else templateNoLink\"\r\n      target=\"_blank\"\r\n      [href]=\"element.link\"\r\n    >\r\n      {{ element.text }}\r\n      <ng-container *ngIf=\"element.imgSrc\">\r\n        <img\r\n          [src]=\"element.imgSrc\"\r\n          [alt]=\"element.alt\"\r\n          [ngStyle]=\"{ width: element.imgSize }\"\r\n        />\r\n      </ng-container>\r\n    </a>\r\n\r\n    <ng-template #templateNoLink>\r\n      {{ element.text }}\r\n      <ng-container *ngIf=\"element.imgSrc\">\r\n        <img\r\n          [src]=\"element.imgSrc\"\r\n          [alt]=\"element.alt\"\r\n          [ngStyle]=\"{ width: element.imgSize }\"\r\n        />\r\n      </ng-container>\r\n    </ng-template>\r\n  </div>\r\n</ng-container>\r\n","import { Component, AfterViewInit, OnDestroy } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { Context, ContextService } from '@igo2/context';\r\nimport { MediaService, ConfigService } from '@igo2/core';\r\nimport { MapOverlay } from './map-overlay.interface';\r\n\r\n@Component({\r\n  selector: 'app-map-overlay',\r\n  templateUrl: './map-overlay.component.html',\r\n  styleUrls: ['./map-overlay.component.scss']\r\n})\r\nexport class MapOverlayComponent implements AfterViewInit, OnDestroy {\r\n  public mapOverlay: MapOverlay[] = [];\r\n  private context$$: Subscription;\r\n  private media$$: Subscription;\r\n  private context: Context;\r\n\r\n  constructor(\r\n    private contextService: ContextService,\r\n    private mediaService: MediaService,\r\n    private configService: ConfigService\r\n  ) {}\r\n\r\n  ngAfterViewInit() {\r\n    this.context$$ = this.contextService.context$.subscribe((context) => {\r\n      this.handleContextChange(context);\r\n      this.context = context;\r\n    });\r\n    this.media$$ = this.mediaService.media$.subscribe((media) =>\r\n      this.handleContextChange(this.context)\r\n    );\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.context$$.unsubscribe();\r\n    this.media$$.unsubscribe();\r\n  }\r\n\r\n  private handleContextChange(context: Context) {\r\n    let mapOverlay = [];\r\n    if (context !== undefined) {\r\n      this.mapOverlay = [];\r\n\r\n      if (context['mapOverlay']) {\r\n        mapOverlay = context['mapOverlay'];\r\n      } else if (this.configService.getConfig('mapOverlay')) {\r\n        mapOverlay = this.configService.getConfig('mapOverlay');\r\n      }\r\n      for (const overlay of mapOverlay) {\r\n        // If no media define use default to desktop, display only if current media is on context definition\r\n        if (\r\n          (!overlay.media && this.mediaService.getMedia() === 'desktop') ||\r\n          (overlay.media &&\r\n            overlay.media.includes(this.mediaService.getMedia()))\r\n        ) {\r\n          this.mapOverlay.push(overlay);\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","<mat-sidenav-container class=\"app-main-container\">\r\n  <mat-sidenav-content>\r\n    <igo-backdrop [shown]=\"backdropShown\" (click)=\"onBackdropClick()\">\r\n    </igo-backdrop>\r\n\r\n    <div class=\"navbar-container\" [class.navbar-fixed]=\"sidenavOpened\">\r\n      <igo-menu-button\r\n        *ngIf=\"showMenuButton\"\r\n        [class.mat-elevation-z2]=\"!sidenavOpened\"\r\n        [sidenavOpened]=\"sidenavOpened\"\r\n        (openSidenav)=\"onToggleSidenavClick()\"\r\n      >\r\n      </igo-menu-button>\r\n\r\n      <igo-search-bar\r\n        *ngIf=\"showSearchBar\"\r\n        #searchBar\r\n        [class.mat-elevation-z2]=\"!sidenavOpened\"\r\n        [term]=\"searchBarTerm\"\r\n        [termSplitter]=\"termSplitter\"\r\n        [minLength]=\"minSearchTermLength\"\r\n        [searchSettings]=\"true\"\r\n        [forceNA]=\"forceCoordsNA\"\r\n        [store]=\"searchStore\"\r\n        (searchTermChange)=\"onSearchTermChange($event)\"\r\n        [pointerSummaryEnabled]=\"igoSearchPointerSummaryEnabled\"\r\n        (pointerSummaryStatus)=\"onPointerSummaryStatusChange($event)\"\r\n        [searchResultsGeometryEnabled]=\"searchResultsGeometryEnabled\"\r\n        (searchResultsGeometryStatus)=\"\r\n          onSearchResultsGeometryStatusChange($event)\r\n        \"\r\n        [reverseSearchCoordsFormatEnabled]=\"igoReverseSearchCoordsFormatEnabled\"\r\n        (reverseSearchCoordsFormatStatus)=\"\r\n          onReverseCoordsFormatStatusChange($event)\r\n        \"\r\n        (search)=\"onSearch($event)\"\r\n        (clearFeature)=\"onClearSearch()\"\r\n        (searchSettingsChange)=\"onSearchSettingsChange()\"\r\n      >\r\n      </igo-search-bar>\r\n    </div>\r\n\r\n    <app-sidenav\r\n      [map]=\"map\"\r\n      [(opened)]=\"sidenavOpened\"\r\n      (toolChange)=\"toolChanged($event)\"\r\n    >\r\n    </app-sidenav>\r\n\r\n    <igo-map-browser\r\n      igoMapOffline\r\n      igoWorkspaceUpdator\r\n      [workspaceStore]=\"workspaceStore\"\r\n      igoLongPress\r\n      igoSearchPointerSummary\r\n      [igoSearchPointerSummaryDelay]=\"500\"\r\n      [igoSearchPointerSummaryEnabled]=\"igoSearchPointerSummaryEnabled\"\r\n      igoHoverFeature\r\n      [igoHoverFeatureDelay]=\"250\"\r\n      [igoHoverFeatureEnabled]=\"true\"\r\n      #mapBrowser\r\n      igoQuery\r\n      [waitForAllQueries]=\"true\"\r\n      [queryFeatures]=\"true\"\r\n      [queryFeaturesHitTolerance]=\"15\"\r\n      igoMapContext\r\n      igoLayerContext\r\n      igoDropGeoFile\r\n      [contextUri]=\"contextUri\"\r\n      (query)=\"onMapQuery($event)\"\r\n      [map]=\"map\"\r\n      [igoContextMenu]=\"contextMenu\"\r\n      (menuPosition)=\"onContextMenuOpen($event)\"\r\n      [ngClass]=\"{ 'igo-attribution-offset': map.getBaseLayers().length > 1 }\"\r\n      [@mapStateX]=\"sidenavOpened ? 'right' : 'left'\"\r\n      (@mapStateX.start)=\"updateMapBrowserClass()\"\r\n      [@mapStateY]=\"getControlsOffsetY()\"\r\n      (@mapStateY.start)=\"updateMapBrowserClass()\"\r\n    >\r\n      <igo-zoom-button\r\n        [map]=\"map\"\r\n        color=\"primary\"\r\n        [@controlsOffsetY]=\"getControlsOffsetY()\"\r\n      >\r\n      </igo-zoom-button>\r\n      <igo-swipe-control\r\n        class=\"mat-elevation-z2\"\r\n        [map]=\"map\"\r\n      ></igo-swipe-control>\r\n      <igo-map-center class=\"mat-elevation-z2\" [map]=\"map\"></igo-map-center>\r\n      <igo-wake-lock-button\r\n        *ngIf=\"showWakeLockButton\"\r\n        class=\"mat-elevation-z2\"\r\n      ></igo-wake-lock-button>\r\n      <igo-offline-button\r\n        [map]=\"map\"\r\n        color=\"primary\"\r\n        *ngIf=\"showOfflineButton\"\r\n        class=\"mat-elevation-z2\"\r\n        [@controlsOffsetY]=\"getControlsOffsetY()\"\r\n        [@mobileOffsetY]=\"getToastPanelStatus()\"\r\n      >\r\n      </igo-offline-button>\r\n      <igo-geolocate-button\r\n        *ngIf=\"hasGeolocateButton\"\r\n        class=\"mat-elevation-z2\"\r\n        [map]=\"map\"\r\n        color=\"primary\"\r\n        [@controlsOffsetY]=\"getControlsOffsetY()\"\r\n        [@mobileOffsetY]=\"getToastPanelStatus()\"\r\n      >\r\n      </igo-geolocate-button>\r\n      <igo-rotation-button\r\n        class=\"mat-elevation-z2\"\r\n        [showIfNoRotation]=\"showRotationButtonIfNoRotation\"\r\n        [map]=\"map\"\r\n        color=\"primary\"\r\n      ></igo-rotation-button>\r\n      <igo-home-extent-button\r\n        *ngIf=\"hasHomeExtentButton\"\r\n        class=\"mat-elevation-z2\"\r\n        [map]=\"map\"\r\n        [extentOverride]=\"homeExtent\"\r\n        [centerOverride]=\"homeCenter\"\r\n        [zoomOverride]=\"homeZoom\"\r\n        color=\"primary\"\r\n      >\r\n      </igo-home-extent-button>\r\n      <igo-user-button\r\n        *ngIf=\"auth.url\"\r\n        class=\"mat-elevation-z2\"\r\n        [map]=\"map\"\r\n        color=\"primary\"\r\n        [@controlsOffsetY]=\"getControlsOffsetY()\"\r\n        [@mobileOffsetY]=\"getToastPanelStatus()\"\r\n      >\r\n      </igo-user-button>\r\n      <igo-baselayers-switcher\r\n        class=\"mat-elevation-z2\"\r\n        [map]=\"map\"\r\n        [@controlsOffsetY]=\"getBaselayersSwitcherStatus()\"\r\n        [useStaticIcon]=\"true\"\r\n      >\r\n      </igo-baselayers-switcher>\r\n    </igo-map-browser>\r\n\r\n    <app-map-overlay\r\n      [@controlStateY]=\"getControlsOffsetY()\"\r\n      [@controlStateX]=\"\r\n        (mediaService.media$ | async) !== 'mobile' && sidenavOpened\r\n          ? 'right'\r\n          : 'left'\r\n      \"\r\n    >\r\n    </app-map-overlay>\r\n  </mat-sidenav-content>\r\n</mat-sidenav-container>\r\n\r\n<app-expansion-panel\r\n  *ngIf=\"hasExpansionPanel && (workspaceState.workspaceEnabled$ | async)\"\r\n  [backdropShown]=\"expansionPanelBackdropShown\"\r\n  [(expanded)]=\"expansionPanelExpanded\"\r\n  [maximized]=\"workspaceMaximize$ | async\"\r\n  [@expansionPanelSize]=\"getExpansionPanelStatus()\"\r\n  [@toastOffsetY]=\"\r\n    isMobile() &&\r\n    !toastPanelOpened &&\r\n    queryState.store.entities$.value.length > 0 &&\r\n    !expansionPanelExpanded\r\n      ? 'true'\r\n      : 'false'\r\n  \"\r\n>\r\n  <ng-container expansionPanelHeader>\r\n    <igo-workspace-selector\r\n      igoWorkspaceSelector\r\n      (changeWorkspace)=\"workspaceState.setActiveWorkspaceByTitle($event)\"\r\n      (disableSwitch)=\"workspaceSwitchDisabled = $event\"\r\n      (relationLayers)=\"refreshRelationsWorkspace($event)\"\r\n      (rowsInMapExtentCheckCondition)=\"\r\n        workspaceState.rowsInMapExtentCheckCondition$.next($event)\r\n      \"\r\n      [store]=\"workspaceStore\"\r\n      [disabled]=\"workspaceSwitchDisabled\"\r\n      [map]=\"map\"\r\n    >\r\n    </igo-workspace-selector>\r\n\r\n    <ng-container *ngIf=\"selectedWorkspace$ | async as workspace\">\r\n      <div class=\"workspace-container\">\r\n        <div class=\"workspace-actions\">\r\n          <button\r\n            class=\"eye-workspace\"\r\n            mat-icon-button\r\n            [color]=\"workspace.layer.visible ? 'primary' : 'default'\"\r\n            collapsibleButton\r\n            tooltip-position=\"below\"\r\n            matTooltipShowDelay=\"500\"\r\n            [matTooltip]=\"\r\n              workspace.layer.visible\r\n                ? ('igo.geo.layer.hideLayer' | translate)\r\n                : ('igo.geo.layer.showLayer' | translate)\r\n            \"\r\n            (click)=\"workspace.layer.visible = !workspace.layer.visible\"\r\n          >\r\n            <mat-icon\r\n              [ngClass]=\"{\r\n                disabled: (workspace.inResolutionRange$ | async) !== true\r\n              }\"\r\n              [svgIcon]=\"workspace.layer.visible ? 'eye' : 'eye-off'\"\r\n            >\r\n            </mat-icon>\r\n          </button>\r\n          <button\r\n            *ngIf=\"isEditionWorkspace(workspace)\"\r\n            class=\"add-feature\"\r\n            mat-icon-button\r\n            color=\"primary\"\r\n            collapsibleButton\r\n            tooltip-position=\"below\"\r\n            matTooltipShowDelay=\"500\"\r\n            [disabled]=\"\r\n              workspace.layer.options.sourceOptions.edition.addButton === false\r\n                ? true\r\n                : false\r\n            \"\r\n            [matTooltip]=\"'workspace.addFeature' | translate\"\r\n            (click)=\"addFeature(workspace)\"\r\n          >\r\n            <mat-icon svgIcon=\"plus\"> </mat-icon>\r\n          </button>\r\n          <igo-actionbar\r\n            class=\"actionbar-workspace\"\r\n            *ngIf=\"workspace.actionStore\"\r\n            [store]=\"workspace.actionStore\"\r\n            [withIcon]=\"true\"\r\n            [withTitle]=\"actionbarWithTitle\"\r\n            [horizontal]=\"true\"\r\n            [withToggleButton]=\"actionbarMode === 'overlay'\"\r\n            [iconColor]=\"'primary'\"\r\n            [color]=\"'primary'\"\r\n            [mode]=\"actionbarMode\"\r\n            [overlayClass]=\"workspaceMenuClass\"\r\n          >\r\n          </igo-actionbar>\r\n          <button\r\n            class=\"zoom-workspace\"\r\n            *ngIf=\"workspaceVisibility()\"\r\n            [disabled]=\"\r\n              (workspaceState.workspaceSelection$ | async).length === 0\r\n                ? true\r\n                : false\r\n            \"\r\n            mat-icon-button\r\n            color=\"primary\"\r\n            collapsibleButton\r\n            tooltip-position=\"below\"\r\n            matTooltipShowDelay=\"500\"\r\n            [matTooltip]=\"'toastPanel.zoomOnFeaturesTooltip' | translate\"\r\n            (click)=\"zoomToSelectedFeatureWks()\"\r\n          >\r\n            <mat-icon\r\n              svgIcon=\"{{\r\n                (workspaceState.workspaceSelection$ | async).length > 1\r\n                  ? 'magnify-scan'\r\n                  : 'magnify-plus-outline'\r\n              }}\"\r\n            >\r\n            </mat-icon>\r\n          </button>\r\n        </div>\r\n        <igo-entity-table-paginator\r\n          *ngIf=\"workspaceVisibility()\"\r\n          [store]=\"workspace.entityStore\"\r\n          [entitySortChange$]=\"workspaceEntitySortChange$\"\r\n          [paginatorOptions]=\"paginatorOptions\"\r\n          (paginatorChange)=\"paginatorChange($event)\"\r\n        >\r\n        </igo-entity-table-paginator>\r\n      </div>\r\n    </ng-container>\r\n  </ng-container>\r\n\r\n  <ng-container *ngIf=\"selectedWorkspace$ | async as workspace\">\r\n    <igo-entity-table\r\n      [class]=\"isEditionWorkspace(workspace) ? 'edition-table' : ''\"\r\n      [paginator]=\"workspacePaginator\"\r\n      *ngIf=\"\r\n        workspace.entityStore &&\r\n        workspace.meta &&\r\n        workspace.meta.tableTemplate &&\r\n        workspaceVisibility()\r\n      \"\r\n      [store]=\"workspace.entityStore\"\r\n      (entitySortChange)=\"entitySortChange()\"\r\n      (entitySelectChange)=\"entitySelectChange($event)\"\r\n      [template]=\"workspace.meta.tableTemplate\"\r\n    >\r\n    </igo-entity-table>\r\n    <span>{{ workspaceNotAvailableMessage | translate }}</span>\r\n  </ng-container>\r\n</app-expansion-panel>\r\n\r\n<app-toast-panel-for-expansion\r\n  [withHeader]=\"false\"\r\n  [(opened)]=\"toastPanelForExpansionOpened\"\r\n>\r\n  <div class=\"toast-panel-for-expansion-close-button-container\">\r\n    <button\r\n      mat-icon-button\r\n      color=\"warn\"\r\n      (click)=\"toastPanelForExpansionOpened = false\"\r\n    >\r\n      <mat-icon svgIcon=\"close\"></mat-icon>\r\n    </button>\r\n  </div>\r\n\r\n  <igo-workspace-widget-outlet\r\n    *ngIf=\"selectedWorkspace$ | async as workspace\"\r\n    [workspace]=\"workspace\"\r\n    (deactivateWidget)=\"onDeactivateWorkspaceWidget()\"\r\n  >\r\n  </igo-workspace-widget-outlet>\r\n</app-toast-panel-for-expansion>\r\n\r\n<app-toast-panel\r\n  *ngIf=\"(queryStore.empty$ | async) !== true\"\r\n  [map]=\"map\"\r\n  [store]=\"queryStore\"\r\n  [hasFeatureEmphasisOnSelection]=\"hasFeatureEmphasisOnSelection\"\r\n  [@toastPanelOffsetX]=\"toastPanelOffsetX$ | async\"\r\n  [@toastPanelOffsetY]=\"getToastPanelOffsetY()\"\r\n  [@toastPanelMobileSidenav]=\"\r\n    (isMobile() && sidenavOpened) ||\r\n    (isTablet() && isPortrait() && sidenavOpened)\r\n  \"\r\n  [opened]=\"toastPanelOpened\"\r\n  (openedChange)=\"toastOpenedChange($event)\"\r\n  (fullExtentEvent)=\"fullExtent = $event\"\r\n  (windowHtmlDisplayEvent)=\"setToastPanelHtmlDisplay($event)\"\r\n>\r\n</app-toast-panel>\r\n\r\n<ng-template #contextMenu>\r\n  <igo-actionbar\r\n    [store]=\"contextMenuStore\"\r\n    [withIcon]=\"false\"\r\n    [horizontal]=\"true\"\r\n    mode=\"context\"\r\n  >\r\n  </igo-actionbar>\r\n</ng-template>\r\n","import {\r\n  Component,\r\n  OnInit,\r\n  OnDestroy,\r\n  ChangeDetectorRef,\r\n  ViewChild,\r\n  ElementRef\r\n} from '@angular/core';\r\nimport { ActivatedRoute, Params } from '@angular/router';\r\nimport { Subscription, of, BehaviorSubject, combineLatest } from 'rxjs';\r\nimport { debounceTime, take, pairwise, skipWhile, first } from 'rxjs/operators';\r\nimport {\r\n  MatDialog,\r\n  MatDialogConfig,\r\n  MatDialogRef\r\n} from '@angular/material/dialog';\r\nimport MapBrowserEvent from 'ol/MapBrowserEvent';\r\nimport * as olProj from 'ol/proj';\r\nimport olFeature from 'ol/Feature';\r\nimport type { default as OlGeometry } from 'ol/geom/Geometry';\r\n\r\nimport {\r\n  MediaService,\r\n  Media,\r\n  MediaOrientation,\r\n  ConfigService,\r\n  LanguageService,\r\n  MessageService,\r\n  StorageService\r\n} from '@igo2/core';\r\nimport {\r\n  ActionbarMode,\r\n  Workspace,\r\n  WorkspaceStore,\r\n  ActionStore,\r\n  EntityStore,\r\n  // getEntityTitle,\r\n  Toolbox,\r\n  Tool,\r\n  Widget,\r\n  EntityTablePaginatorOptions,\r\n  EntityRecord\r\n} from '@igo2/common';\r\nimport { AuthOptions, AuthService } from '@igo2/auth';\r\nimport { DetailedContext } from '@igo2/context';\r\nimport {\r\n  DataSourceService,\r\n  Feature,\r\n  FEATURE,\r\n  featureToSearchResult,\r\n  GoogleLinks,\r\n  IgoMap,\r\n  LayerService,\r\n  QuerySearchSource,\r\n  Research,\r\n  SearchResult,\r\n  SearchSource,\r\n  SearchSourceService,\r\n  CapabilitiesService,\r\n  sourceCanSearch,\r\n  sourceCanReverseSearch,\r\n  ImportService,\r\n  handleFileImportError,\r\n  handleFileImportSuccess,\r\n  featureFromOl,\r\n  QueryService,\r\n  WfsWorkspace,\r\n  FeatureWorkspace,\r\n  EditionWorkspace,\r\n  EditionWorkspaceService,\r\n  generateIdFromSourceOptions,\r\n  computeOlFeaturesExtent,\r\n  addStopToStore,\r\n  ImageLayer,\r\n  VectorLayer,\r\n  MapExtent,\r\n  moveToOlFeatures,\r\n  FeatureMotion,\r\n  ConfigFileToGeoDBService\r\n} from '@igo2/geo';\r\n\r\nimport {\r\n  ToolState,\r\n  MapState,\r\n  SearchState,\r\n  QueryState,\r\n  ContextState,\r\n  WorkspaceState,\r\n  DirectionState\r\n} from '@igo2/integration';\r\n\r\nimport {\r\n  expansionPanelAnimation,\r\n  toastPanelAnimation,\r\n  controlsAnimations,\r\n  controlSlideX,\r\n  controlSlideY,\r\n  mapSlideX,\r\n  mapSlideY\r\n} from './portal.animation';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\n\r\nimport { WelcomeWindowComponent } from './welcome-window/welcome-window.component';\r\nimport { WelcomeWindowService } from './welcome-window/welcome-window.service';\r\nimport { MatPaginator } from '@angular/material/paginator';\r\nimport { ObjectUtils } from '@igo2/utils';\r\nimport olFormatGeoJSON from 'ol/format/GeoJSON';\r\n\r\n@Component({\r\n  selector: 'app-portal',\r\n  templateUrl: './portal.component.html',\r\n  styleUrls: ['./portal.component.scss'],\r\n  animations: [\r\n    expansionPanelAnimation(),\r\n    toastPanelAnimation(),\r\n    controlsAnimations(),\r\n    controlSlideX(),\r\n    controlSlideY(),\r\n    mapSlideX(),\r\n    mapSlideY()\r\n  ]\r\n})\r\nexport class PortalComponent implements OnInit, OnDestroy {\r\n  public toastPanelOffsetX$: BehaviorSubject<string> = new BehaviorSubject(\r\n    undefined\r\n  );\r\n  public sidenavOpened$: BehaviorSubject<boolean> = new BehaviorSubject(false);\r\n  public minSearchTermLength = 2;\r\n  public hasExpansionPanel = false;\r\n  public hasGeolocateButton = true;\r\n  public hasHomeExtentButton = false;\r\n  public showMenuButton = true;\r\n  public showSearchBar = true;\r\n  public showOfflineButton = false;\r\n  public showWakeLockButton = false;\r\n  public showRotationButtonIfNoRotation = false;\r\n  public hasFeatureEmphasisOnSelection: Boolean = false;\r\n  public workspaceNotAvailableMessage: string = 'workspace.disabled.resolution';\r\n  public workspacePaginator: MatPaginator;\r\n  public workspaceEntitySortChange$: BehaviorSubject<boolean> =\r\n    new BehaviorSubject(false);\r\n  public workspaceSwitchDisabled = false;\r\n  public paginatorOptions: EntityTablePaginatorOptions = {\r\n    pageSize: 50, // Number of items to display on a page.\r\n    pageSizeOptions: [1, 5, 10, 20, 50, 100, 500] // The set of provided page size options to display to the user.\r\n  };\r\n  public workspaceMenuClass = 'workspace-menu';\r\n\r\n  public fullExtent: boolean;\r\n  private workspaceMaximize$$: Subscription[] = [];\r\n  readonly workspaceMaximize$: BehaviorSubject<boolean>;\r\n\r\n  public matDialogRef$ = new BehaviorSubject<MatDialogRef<any>>(undefined);\r\n  public searchBarTerm = '';\r\n  public onSettingsChange$ = new BehaviorSubject<boolean>(undefined);\r\n  public termDefinedInUrl = false;\r\n  public termSplitter = '|';\r\n  public termDefinedInUrlTriggered = false;\r\n  private addedLayers$$: Subscription[] = [];\r\n  public forceCoordsNA = false;\r\n\r\n  public contextMenuStore = new ActionStore([]);\r\n  private contextMenuCoord: [number, number];\r\n\r\n  private contextLoaded = false;\r\n\r\n  private context$$: Subscription;\r\n  private openSidenav$$: Subscription;\r\n  private sidenavMediaAndOrientation$$: Subscription;\r\n\r\n  public igoSearchPointerSummaryEnabled: boolean;\r\n  public igoReverseSearchCoordsFormatEnabled: boolean;\r\n\r\n  public toastPanelForExpansionOpened = true;\r\n  private activeWidget$$: Subscription;\r\n  public showToastPanelForExpansionToggle = false;\r\n  public selectedWorkspace$: BehaviorSubject<Workspace> = new BehaviorSubject(\r\n    undefined\r\n  );\r\n  private routeParams: Params;\r\n  public toastPanelHtmlDisplay = false;\r\n\r\n  public homeExtent: MapExtent;\r\n  public homeCenter: [number, number];\r\n  public homeZoom: number;\r\n  @ViewChild('mapBrowser', { read: ElementRef, static: true })\r\n  mapBrowser: ElementRef;\r\n  @ViewChild('searchBar', { read: ElementRef, static: true })\r\n  searchBar: ElementRef;\r\n\r\n  get map(): IgoMap {\r\n    return this.mapState.map;\r\n  }\r\n\r\n  get sidenavOpened(): boolean {\r\n    return this.sidenavOpened$.value;\r\n  }\r\n\r\n  set sidenavOpened(value: boolean) {\r\n    this.sidenavOpened$.next(value);\r\n  }\r\n\r\n  get auth(): AuthOptions {\r\n    return this.configService.getConfig('auth') || [];\r\n  }\r\n\r\n  get toastPanelOpened(): boolean {\r\n    return this._toastPanelOpened;\r\n  }\r\n  set toastPanelOpened(value: boolean) {\r\n    if (value !== !this._toastPanelOpened) {\r\n      return;\r\n    }\r\n    this._toastPanelOpened = value;\r\n    this.cdRef.detectChanges();\r\n  }\r\n  private _toastPanelOpened: boolean;\r\n\r\n  isMobile(): boolean {\r\n    return this.mediaService.getMedia() === Media.Mobile;\r\n  }\r\n\r\n  isTablet(): boolean {\r\n    return this.mediaService.getMedia() === Media.Tablet;\r\n  }\r\n\r\n  isLandscape(): boolean {\r\n    return this.mediaService.getOrientation() === MediaOrientation.Landscape;\r\n  }\r\n\r\n  isPortrait(): boolean {\r\n    return this.mediaService.getOrientation() === MediaOrientation.Portrait;\r\n  }\r\n\r\n  get backdropShown(): boolean {\r\n    return (\r\n      (this.isMobile() || (this.isTablet() && this.isPortrait())) &&\r\n      this.sidenavOpened\r\n    );\r\n  }\r\n\r\n  get expansionPanelExpanded(): boolean {\r\n    return this.workspaceState.workspacePanelExpanded;\r\n  }\r\n  set expansionPanelExpanded(value: boolean) {\r\n    this.workspaceState.workspacePanelExpanded = value;\r\n    if (value === true) {\r\n      this.map.viewController.setPadding({ bottom: 280 });\r\n    } else {\r\n      this.map.viewController.setPadding({ bottom: 0 });\r\n    }\r\n  }\r\n\r\n  get contextUri(): string {\r\n    return this.contextState.context$?.getValue()\r\n      ? this.contextState.context$.getValue().uri\r\n      : undefined;\r\n  }\r\n\r\n  get toastPanelShown(): boolean {\r\n    return true;\r\n  }\r\n\r\n  get expansionPanelBackdropShown(): boolean {\r\n    return this.expansionPanelExpanded && this.toastPanelForExpansionOpened;\r\n  }\r\n\r\n  get actionbarMode(): ActionbarMode {\r\n    return ActionbarMode.Overlay;\r\n  }\r\n\r\n  get actionbarWithTitle(): boolean {\r\n    return this.actionbarMode === ActionbarMode.Overlay;\r\n  }\r\n\r\n  get searchStore(): EntityStore<SearchResult> {\r\n    return this.searchState.store;\r\n  }\r\n\r\n  get searchResultsGeometryEnabled(): boolean {\r\n    return this.searchState.searchResultsGeometryEnabled$.value;\r\n  }\r\n\r\n  get queryStore(): EntityStore<SearchResult> {\r\n    return this.queryState.store;\r\n  }\r\n\r\n  get toolbox(): Toolbox {\r\n    return this.toolState.toolbox;\r\n  }\r\n\r\n  get toastPanelContent(): string {\r\n    let content;\r\n    if (this.workspace !== undefined && this.workspace.hasWidget) {\r\n      content = 'workspace';\r\n    } /*else if (this.searchResult !== undefined) {\r\n      content = this.searchResult.meta.dataType.toLowerCase();\r\n    }*/\r\n    return content;\r\n  }\r\n\r\n  // get toastPanelTitle(): string {\r\n  //   let title;\r\n  //   if (\r\n  //     this.toastPanelContent !== 'workspace' &&\r\n  //     this.searchResult !== undefined\r\n  //   ) {\r\n  //     title = getEntityTitle(this.searchResult);\r\n  //   }\r\n  //   return title;\r\n  // }\r\n\r\n  get workspaceStore(): WorkspaceStore {\r\n    return this.workspaceState.store;\r\n  }\r\n\r\n  get workspace(): Workspace {\r\n    return this.workspaceState.workspace$.value;\r\n  }\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    public workspaceState: WorkspaceState,\r\n    public authService: AuthService,\r\n    public mediaService: MediaService,\r\n    public layerService: LayerService,\r\n    public dataSourceService: DataSourceService,\r\n    public cdRef: ChangeDetectorRef,\r\n    public capabilitiesService: CapabilitiesService,\r\n    private contextState: ContextState,\r\n    private mapState: MapState,\r\n    private searchState: SearchState,\r\n    public queryState: QueryState,\r\n    private toolState: ToolState,\r\n    private searchSourceService: SearchSourceService,\r\n    private configService: ConfigService,\r\n    private importService: ImportService,\r\n    private http: HttpClient,\r\n    private languageService: LanguageService,\r\n    private messageService: MessageService,\r\n    private welcomeWindowService: WelcomeWindowService,\r\n    public dialogWindow: MatDialog,\r\n    private queryService: QueryService,\r\n    private storageService: StorageService,\r\n    private editionWorkspaceService: EditionWorkspaceService,\r\n    private directionState: DirectionState,\r\n    private configFileToGeoDBService: ConfigFileToGeoDBService\r\n  ) {\r\n    this.fullExtent = this.storageService.get('fullExtent') as boolean;\r\n    this.workspaceMaximize$ = new BehaviorSubject(\r\n      this.storageService.get('workspaceMaximize') as boolean\r\n    );\r\n    this._toastPanelOpened =\r\n      (this.storageService.get('toastOpened') as boolean) !== false;\r\n    this.hasExpansionPanel = this.configService.getConfig('hasExpansionPanel');\r\n    this.hasHomeExtentButton =\r\n      this.configService.getConfig('homeExtentButton') === undefined\r\n        ? false\r\n        : true;\r\n    this.hasGeolocateButton =\r\n      this.configService.getConfig('hasGeolocateButton') === undefined\r\n        ? true\r\n        : this.configService.getConfig('hasGeolocateButton');\r\n    this.showRotationButtonIfNoRotation =\r\n      this.configService.getConfig('showRotationButtonIfNoRotation') ===\r\n      undefined\r\n        ? false\r\n        : this.configService.getConfig('showRotationButtonIfNoRotation');\r\n    this.showMenuButton =\r\n      this.configService.getConfig('showMenuButton') === undefined\r\n        ? true\r\n        : this.configService.getConfig('showMenuButton');\r\n    this.showSearchBar =\r\n      this.configService.getConfig('searchBar.showSearchBar') === undefined\r\n        ? true\r\n        : this.configService.getConfig('searchBar.showSearchBar');\r\n    this.showOfflineButton =\r\n      this.configService.getConfig('offlineButton') === undefined\r\n        ? false\r\n        : this.configService.getConfig('offlineButton');\r\n    this.showWakeLockButton =\r\n      this.configService.getConfig('wakeLockApiButton') === undefined\r\n        ? false\r\n        : this.configService.getConfig('wakeLockApiButton');\r\n\r\n    this.forceCoordsNA = this.configService.getConfig('app.forceCoordsNA');\r\n    this.hasFeatureEmphasisOnSelection = this.configService.getConfig(\r\n      'hasFeatureEmphasisOnSelection'\r\n    );\r\n\r\n    this.igoSearchPointerSummaryEnabled = this.configService.getConfig(\r\n      'hasSearchPointerSummary'\r\n    );\r\n    if (this.igoSearchPointerSummaryEnabled === undefined) {\r\n      this.igoSearchPointerSummaryEnabled =\r\n        (this.storageService.get('searchPointerSummaryEnabled') as boolean) ||\r\n        false;\r\n    }\r\n\r\n    this.igoReverseSearchCoordsFormatEnabled =\r\n      (this.storageService.get(\r\n        'reverseSearchCoordsFormatEnabled'\r\n      ) as boolean) || false;\r\n  }\r\n\r\n  ngOnInit() {\r\n    window['IGO'] = this;\r\n    this.searchState.searchTermSplitter$.next(this.termSplitter);\r\n\r\n    this.initWelcomeWindow();\r\n\r\n    this.route.queryParams.subscribe((params) => {\r\n      this.readLanguageParam(params);\r\n    });\r\n\r\n    this.authService.authenticate$.subscribe((authenticated) => {\r\n      this.contextLoaded = false;\r\n    });\r\n\r\n    this.context$$ = this.contextState.context$.subscribe(\r\n      (context: DetailedContext) => this.onChangeContext(context)\r\n    );\r\n\r\n    const contextActions = [\r\n      {\r\n        id: 'coordinates',\r\n        title: 'coordinates',\r\n        handler: () => this.searchCoordinate(this.contextMenuCoord)\r\n      },\r\n      {\r\n        id: 'googleMaps',\r\n        title: 'googleMap',\r\n        handler: () => this.openGoogleMaps(this.contextMenuCoord)\r\n      },\r\n      {\r\n        id: 'googleStreetView',\r\n        title: 'googleStreetView',\r\n        handler: () => this.openGoogleStreetView(this.contextMenuCoord)\r\n      }\r\n    ];\r\n\r\n    this.contextMenuStore.load(contextActions);\r\n\r\n    this.queryStore.count$\r\n      .pipe(pairwise())\r\n      .subscribe(([prevCnt, currentCnt]) => {\r\n        this.map.viewController.padding[2] = currentCnt ? 280 : 0;\r\n        // on mobile. Close the toast if workspace is opened, on new query\r\n        if (\r\n          prevCnt === 0 &&\r\n          currentCnt !== prevCnt &&\r\n          this.isMobile() &&\r\n          this.hasExpansionPanel &&\r\n          this.expansionPanelExpanded &&\r\n          this.toastPanelOpened\r\n        ) {\r\n          this.toastPanelOpened = false;\r\n        }\r\n      });\r\n    this.map.ol.once('rendercomplete', () => {\r\n      this.readQueryParams();\r\n      if (\r\n        this.configService.getConfig('geolocate.activateDefault') !== undefined\r\n      ) {\r\n        this.map.geolocationController.tracking = this.configService.getConfig(\r\n          'geolocate.activateDefault'\r\n        );\r\n      }\r\n    });\r\n\r\n    this.onSettingsChange$.subscribe(() => {\r\n      this.searchState.setSearchSettingsChange();\r\n    });\r\n\r\n    this.searchState.selectedResult$.subscribe((result) => {\r\n      if (result && this.isMobile()) {\r\n        this.closeSidenav();\r\n      }\r\n    });\r\n\r\n    this.workspaceState.workspaceEnabled$.next(this.hasExpansionPanel);\r\n    this.workspaceState.store.empty$.subscribe((workspaceEmpty) => {\r\n      if (!this.hasExpansionPanel) {\r\n        return;\r\n      }\r\n      this.workspaceState.workspaceEnabled$.next(workspaceEmpty ? false : true);\r\n      if (workspaceEmpty) {\r\n        this.expansionPanelExpanded = false;\r\n      }\r\n      this.updateMapBrowserClass();\r\n    });\r\n\r\n    this.workspaceMaximize$$.push(\r\n      this.workspaceState.workspaceMaximize$.subscribe((workspaceMaximize) => {\r\n        this.workspaceMaximize$.next(workspaceMaximize);\r\n        this.updateMapBrowserClass();\r\n      })\r\n    );\r\n    this.workspaceMaximize$$.push(\r\n      this.workspaceMaximize$.subscribe(() => this.updateMapBrowserClass())\r\n    );\r\n\r\n    this.workspaceState.workspace$.subscribe(\r\n      (activeWks: WfsWorkspace | FeatureWorkspace | EditionWorkspace) => {\r\n        if (activeWks) {\r\n          this.selectedWorkspace$.next(activeWks);\r\n          this.expansionPanelExpanded = true;\r\n\r\n          if (\r\n            activeWks.layer.options.workspace?.pageSize &&\r\n            activeWks.layer.options.workspace?.pageSizeOptions\r\n          ) {\r\n            this.paginatorOptions = {\r\n              pageSize: activeWks.layer.options.workspace?.pageSize,\r\n              pageSizeOptions:\r\n                activeWks.layer.options.workspace?.pageSizeOptions\r\n            };\r\n          } else {\r\n            this.paginatorOptions = {\r\n              pageSize: 50,\r\n              pageSizeOptions: [1, 5, 10, 20, 50, 100, 500]\r\n            };\r\n          }\r\n        } else {\r\n          this.expansionPanelExpanded = false;\r\n        }\r\n      }\r\n    );\r\n\r\n    this.activeWidget$$ = this.workspaceState.activeWorkspaceWidget$.subscribe(\r\n      (widget: Widget) => {\r\n        if (widget !== undefined) {\r\n          this.openToastPanelForExpansion();\r\n          this.showToastPanelForExpansionToggle = true;\r\n        } else {\r\n          this.closeToastPanelForExpansion();\r\n          this.showToastPanelForExpansionToggle = false;\r\n        }\r\n      }\r\n    );\r\n\r\n    this.openSidenav$$ = this.toolState.openSidenav$.subscribe(\r\n      (openSidenav: boolean) => {\r\n        if (openSidenav) {\r\n          this.openSidenav();\r\n          this.toolState.openSidenav$.next(false);\r\n        }\r\n      }\r\n    );\r\n\r\n    this.sidenavMediaAndOrientation$$ = combineLatest([\r\n      this.sidenavOpened$,\r\n      this.mediaService.media$,\r\n      this.mediaService.orientation$\r\n    ])\r\n      .pipe(debounceTime(50))\r\n      .subscribe((sidenavMediaAndOrientation: [boolean, string, string]) => {\r\n        this.computeToastPanelOffsetX();\r\n      });\r\n\r\n    if (this.configService.getConfig('importExport')) {\r\n      const configFileToGeoDBService = this.configService.getConfig(\r\n        'importExport.configFileToGeoDBService'\r\n      );\r\n      if (configFileToGeoDBService) {\r\n        this.configFileToGeoDBService.load(configFileToGeoDBService);\r\n      }\r\n    }\r\n  }\r\n\r\n  setToastPanelHtmlDisplay(value) {\r\n    this.toastPanelHtmlDisplay = value;\r\n    this.computeToastPanelOffsetX();\r\n  }\r\n\r\n  computeToastPanelOffsetX() {\r\n    if (this.isMobile() || !this.isLandscape()) {\r\n      Promise.resolve().then(() => this.toastPanelOffsetX$.next(undefined));\r\n    } else {\r\n      Promise.resolve().then(() =>\r\n        this.toastPanelOffsetX$.next(this.getToastPanelExtent())\r\n      );\r\n    }\r\n  }\r\n\r\n  workspaceVisibility(): boolean {\r\n    const wks = this.selectedWorkspace$.value as\r\n      | WfsWorkspace\r\n      | FeatureWorkspace\r\n      | EditionWorkspace;\r\n    if (wks.inResolutionRange$.value) {\r\n      if (wks.entityStore.empty$.value && !wks.layer.visible) {\r\n        this.workspaceNotAvailableMessage = 'workspace.disabled.visible';\r\n      } else {\r\n        this.workspaceNotAvailableMessage = '';\r\n      }\r\n    } else {\r\n      this.workspaceNotAvailableMessage = 'workspace.disabled.resolution';\r\n    }\r\n    return wks.inResolutionRange$.value;\r\n  }\r\n\r\n  isEditionWorkspace(workspace) {\r\n    if (workspace instanceof EditionWorkspace) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  addFeature(workspace: EditionWorkspace) {\r\n    let feature = {\r\n      type: 'Feature',\r\n      properties: {}\r\n    };\r\n    feature.properties = this.createFeatureProperties(workspace.layer);\r\n    this.workspaceState.rowsInMapExtentCheckCondition$.next(false);\r\n    workspace.editFeature(feature, workspace);\r\n  }\r\n\r\n  createFeatureProperties(layer: ImageLayer | VectorLayer) {\r\n    let properties = {};\r\n    layer.options.sourceOptions.sourceFields.forEach((field) => {\r\n      if (!field.primary && field.visible) {\r\n        properties[field.name] = '';\r\n      }\r\n    });\r\n    return properties;\r\n  }\r\n\r\n  paginatorChange(matPaginator: MatPaginator) {\r\n    this.workspacePaginator = matPaginator;\r\n  }\r\n\r\n  entitySortChange() {\r\n    this.workspaceEntitySortChange$.next(true);\r\n  }\r\n\r\n  entitySelectChange(result: { added: Feature[] }) {\r\n    const baseQuerySearchSource = this.getQuerySearchSource();\r\n    const querySearchSourceArray: QuerySearchSource[] = [];\r\n\r\n    if (\r\n      this.selectedWorkspace$.value instanceof WfsWorkspace ||\r\n      this.selectedWorkspace$.value instanceof FeatureWorkspace\r\n    ) {\r\n      if (!this.selectedWorkspace$.value.getLayerWksOptionTabQuery()) {\r\n        return;\r\n      }\r\n    }\r\n    if (result && result.added) {\r\n      const results = result.added.map((res) => {\r\n        if (\r\n          res &&\r\n          res.ol &&\r\n          res.ol.getProperties()._featureStore.layer &&\r\n          res.ol.getProperties()._featureStore.layer.visible\r\n        ) {\r\n          const ol = res.ol as olFeature<OlGeometry>;\r\n          const featureStoreLayer = res.ol.getProperties()._featureStore.layer;\r\n          const feature = featureFromOl(\r\n            ol,\r\n            featureStoreLayer.map.projection,\r\n            featureStoreLayer.ol\r\n          );\r\n\r\n          feature.meta.alias =\r\n            this.queryService.getAllowedFieldsAndAlias(featureStoreLayer);\r\n          feature.meta.title =\r\n            this.queryService.getQueryTitle(feature, featureStoreLayer) ||\r\n            feature.meta.title;\r\n          let querySearchSource = querySearchSourceArray.find(\r\n            (s) => s.title === feature.meta.sourceTitle\r\n          );\r\n          if (!querySearchSource) {\r\n            querySearchSource = new QuerySearchSource({\r\n              title: feature.meta.sourceTitle\r\n            });\r\n            querySearchSourceArray.push(querySearchSource);\r\n          }\r\n          return featureToSearchResult(feature, querySearchSource);\r\n        }\r\n      });\r\n\r\n      const research = {\r\n        request: of(results),\r\n        reverse: false,\r\n        source: baseQuerySearchSource\r\n      };\r\n      research.request.subscribe((queryResults: SearchResult<Feature>[]) => {\r\n        this.queryStore.load(queryResults);\r\n      });\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.context$$.unsubscribe();\r\n    this.activeWidget$$.unsubscribe();\r\n    this.openSidenav$$.unsubscribe();\r\n    this.workspaceMaximize$$.map((f) => f.unsubscribe());\r\n    this.sidenavMediaAndOrientation$$.unsubscribe();\r\n  }\r\n\r\n  /**\r\n   * Cancel ongoing add layer, if any\r\n   */\r\n  private cancelOngoingAddLayer() {\r\n    this.addedLayers$$.forEach((sub: Subscription) => sub.unsubscribe());\r\n    this.addedLayers$$ = [];\r\n  }\r\n\r\n  onBackdropClick() {\r\n    this.closeSidenav();\r\n  }\r\n\r\n  onToggleSidenavClick() {\r\n    this.toggleSidenav();\r\n  }\r\n\r\n  onDeactivateWorkspaceWidget() {\r\n    this.closeToastPanelForExpansion();\r\n  }\r\n\r\n  closeToastPanelForExpansion() {\r\n    this.toastPanelForExpansionOpened = false;\r\n  }\r\n\r\n  openToastPanelForExpansion() {\r\n    this.toastPanelForExpansionOpened = true;\r\n  }\r\n\r\n  onMapQuery(event: { features: Feature[]; event: MapBrowserEvent<any> }) {\r\n    const baseQuerySearchSource = this.getQuerySearchSource();\r\n    const querySearchSourceArray: QuerySearchSource[] = [];\r\n    const results = event.features.map((feature: Feature) => {\r\n      let querySearchSource = querySearchSourceArray.find(\r\n        (s) => s.title === feature.meta.sourceTitle\r\n      );\r\n      if (this.getFeatureIsSameActiveWks(feature)) {\r\n        if (\r\n          this.getWksActiveOpenInResolution() &&\r\n          !(this.workspace as WfsWorkspace).getLayerWksOptionMapQuery()\r\n        ) {\r\n          return;\r\n        }\r\n      }\r\n      if (!querySearchSource) {\r\n        querySearchSource = new QuerySearchSource({\r\n          title: feature.meta.sourceTitle\r\n        });\r\n        querySearchSourceArray.push(querySearchSource);\r\n      }\r\n      return featureToSearchResult(feature, querySearchSource);\r\n    });\r\n    const filteredResults = results.filter((x) => x !== undefined);\r\n    const research = {\r\n      request: of(filteredResults),\r\n      reverse: false,\r\n      source: baseQuerySearchSource\r\n    };\r\n    research.request.subscribe((queryResults: SearchResult<Feature>[]) => {\r\n      this.queryStore.load(queryResults);\r\n    });\r\n  }\r\n\r\n  onSearchTermChange(term?: string) {\r\n    if (this.routeParams?.search && term !== this.routeParams.search) {\r\n      this.searchState.deactivateCustomFilterTermStrategy();\r\n    }\r\n    this.searchBarTerm = term;\r\n    this.searchState.setSearchTerm(term);\r\n    const termWithoutHashtag = term.replace(/(#[^\\s]*)/g, '').trim();\r\n    if (termWithoutHashtag.length < 2) {\r\n      this.onClearSearch();\r\n      return;\r\n    }\r\n    this.onBeforeSearch();\r\n  }\r\n\r\n  onSearch(event: { research: Research; results: SearchResult[] }) {\r\n    const results = event.results;\r\n\r\n    const isReverseSearch = !sourceCanSearch(event.research.source);\r\n\r\n    let enabledSources;\r\n    if (isReverseSearch) {\r\n      enabledSources = this.searchSourceService\r\n        .getEnabledSources()\r\n        .filter(sourceCanReverseSearch);\r\n    } else {\r\n      enabledSources = this.searchSourceService\r\n        .getEnabledSources()\r\n        .filter(sourceCanSearch);\r\n    }\r\n\r\n    const newResults = this.searchStore.entities$.value\r\n      .filter(\r\n        (result: SearchResult) =>\r\n          result.source !== event.research.source &&\r\n          enabledSources.includes(result.source)\r\n      )\r\n      .concat(results);\r\n    this.searchStore.updateMany(newResults);\r\n  }\r\n\r\n  onSearchResultsGeometryStatusChange(value) {\r\n    this.searchState.setSearchResultsGeometryStatus(value);\r\n  }\r\n\r\n  onReverseCoordsFormatStatusChange(value) {\r\n    this.storageService.set('reverseSearchCoordsFormatEnabled', value);\r\n    this.igoReverseSearchCoordsFormatEnabled = value;\r\n  }\r\n\r\n  onSearchSettingsChange() {\r\n    this.onSettingsChange$.next(true);\r\n  }\r\n\r\n  private closeSidenav() {\r\n    this.sidenavOpened = false;\r\n    this.map.viewController.padding[3] = 0;\r\n  }\r\n\r\n  private openSidenav() {\r\n    this.sidenavOpened = true;\r\n    this.map.viewController.padding[3] = this.isMobile() ? 0 : 400;\r\n  }\r\n\r\n  private toggleSidenav() {\r\n    this.sidenavOpened ? this.closeSidenav() : this.openSidenav();\r\n    this.computeToastPanelOffsetX();\r\n  }\r\n\r\n  public toolChanged(tool: Tool) {\r\n    if (tool && tool.name === 'searchResults' && this.searchBar) {\r\n      this.searchBar.nativeElement.getElementsByTagName('input')[0].focus();\r\n    }\r\n  }\r\n\r\n  private computeHomeExtentValues(context: DetailedContext) {\r\n    if (context?.map?.view?.homeExtent) {\r\n      this.homeExtent = context.map.view.homeExtent.extent;\r\n      this.homeCenter = context.map.view.homeExtent.center;\r\n      this.homeZoom = context.map.view.homeExtent.zoom;\r\n    } else {\r\n      this.homeExtent = undefined;\r\n      this.homeCenter = undefined;\r\n      this.homeZoom = undefined;\r\n    }\r\n  }\r\n\r\n  private onChangeContext(context: DetailedContext) {\r\n    this.cancelOngoingAddLayer();\r\n    if (context === undefined) {\r\n      return;\r\n    }\r\n    if (this.workspace && !this.workspace.entityStore.empty) {\r\n      this.workspace.entityStore.clear();\r\n    }\r\n    if (!this.queryState.store.empty) {\r\n      this.queryState.store.softClear();\r\n    }\r\n\r\n    this.computeHomeExtentValues(context);\r\n\r\n    this.route.queryParams.pipe(debounceTime(250)).subscribe((qParams) => {\r\n      if (!qParams['context'] || qParams['context'] === context.uri) {\r\n        this.readLayersQueryParams(qParams);\r\n      }\r\n    });\r\n\r\n    if (this.contextLoaded) {\r\n      const contextManager = this.toolbox.getTool('contextManager');\r\n      const contextManagerOptions = contextManager\r\n        ? contextManager.options\r\n        : {};\r\n      let toolToOpen = contextManagerOptions.toolToOpenOnContextChange;\r\n\r\n      if (!toolToOpen) {\r\n        const toolOrderToOpen = ['mapTools', 'map', 'mapDetails', 'mapLegend'];\r\n        for (const toolName of toolOrderToOpen) {\r\n          if (this.toolbox.getTool(toolName)) {\r\n            toolToOpen = toolName;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n      if (toolToOpen) {\r\n        this.toolbox.activateTool(toolToOpen);\r\n      }\r\n    }\r\n\r\n    this.contextLoaded = true;\r\n  }\r\n\r\n  private onBeforeSearch() {\r\n    if (\r\n      !this.toolbox.activeTool$.value ||\r\n      this.toolbox.activeTool$.value.name !== 'searchResults'\r\n    ) {\r\n      this.toolbox.activateTool('searchResults');\r\n    }\r\n    this.openSidenav();\r\n  }\r\n\r\n  toastOpenedChange(opened: boolean) {\r\n    this.map.viewController.padding[2] = opened ? 280 : 0;\r\n    this.handleExpansionAndToastOnMobile();\r\n    this.toastPanelOpened = opened;\r\n  }\r\n\r\n  private handleExpansionAndToastOnMobile() {\r\n    if (\r\n      this.isMobile() &&\r\n      this.hasExpansionPanel &&\r\n      this.expansionPanelExpanded &&\r\n      this.toastPanelOpened\r\n    ) {\r\n      this.expansionPanelExpanded = false;\r\n    }\r\n  }\r\n\r\n  public onClearSearch() {\r\n    this.map.searchResultsOverlay.clear();\r\n    this.searchStore.clear();\r\n    this.searchState.setSelectedResult(undefined);\r\n    this.searchState.deactivateCustomFilterTermStrategy();\r\n  }\r\n\r\n  private getQuerySearchSource(): SearchSource {\r\n    return this.searchSourceService\r\n      .getSources()\r\n      .find(\r\n        (searchSource: SearchSource) =>\r\n          searchSource instanceof QuerySearchSource\r\n      );\r\n  }\r\n\r\n  onContextMenuOpen(event: { x: number; y: number }) {\r\n    this.contextMenuCoord = this.getClickCoordinate(event) as [number, number];\r\n  }\r\n\r\n  private getClickCoordinate(event: { x: number; y: number }) {\r\n    const contextmenuPoint = event;\r\n    const boundingMapBrowser =\r\n      this.mapBrowser.nativeElement.getBoundingClientRect();\r\n    contextmenuPoint.y =\r\n      contextmenuPoint.y -\r\n      boundingMapBrowser.top +\r\n      (window.scrollY || window.pageYOffset);\r\n    contextmenuPoint.x =\r\n      contextmenuPoint.x -\r\n      boundingMapBrowser.left +\r\n      (window.scrollX || window.pageXOffset);\r\n    const pixel = [contextmenuPoint.x, contextmenuPoint.y];\r\n\r\n    const coord = this.map.ol.getCoordinateFromPixel(pixel);\r\n    const proj = this.map.projection;\r\n    return olProj.transform(coord, proj, 'EPSG:4326');\r\n  }\r\n\r\n  private openGoogleMaps(coord: [number, number]) {\r\n    window.open(GoogleLinks.getGoogleMapsCoordLink(coord[0], coord[1]));\r\n  }\r\n\r\n  private openGoogleStreetView(coord: [number, number]) {\r\n    window.open(GoogleLinks.getGoogleStreetViewLink(coord[0], coord[1]));\r\n  }\r\n\r\n  searchCoordinate(coord: [number, number]) {\r\n    this.searchBarTerm = !this.igoReverseSearchCoordsFormatEnabled\r\n      ? coord.map((c) => c.toFixed(6)).join(', ')\r\n      : coord\r\n          .reverse()\r\n          .map((c) => c.toFixed(6))\r\n          .join(', ');\r\n  }\r\n\r\n  updateMapBrowserClass() {\r\n    const header = this.queryState.store.entities$.value.length > 0;\r\n    if (this.hasExpansionPanel && this.workspaceState.workspaceEnabled$.value) {\r\n      this.mapBrowser.nativeElement.classList.add('has-expansion-panel');\r\n    } else {\r\n      this.mapBrowser.nativeElement.classList.remove('has-expansion-panel');\r\n    }\r\n\r\n    if (this.hasExpansionPanel && this.expansionPanelExpanded) {\r\n      if (this.workspaceMaximize$.value) {\r\n        this.mapBrowser.nativeElement.classList.add(\r\n          'expansion-offset-maximized'\r\n        );\r\n        this.mapBrowser.nativeElement.classList.remove('expansion-offset');\r\n      } else {\r\n        this.mapBrowser.nativeElement.classList.add('expansion-offset');\r\n        this.mapBrowser.nativeElement.classList.remove(\r\n          'expansion-offset-maximized'\r\n        );\r\n      }\r\n    } else {\r\n      if (this.workspaceMaximize$.value) {\r\n        this.mapBrowser.nativeElement.classList.remove(\r\n          'expansion-offset-maximized'\r\n        );\r\n      } else {\r\n        this.mapBrowser.nativeElement.classList.remove('expansion-offset');\r\n      }\r\n    }\r\n\r\n    if (this.sidenavOpened) {\r\n      this.mapBrowser.nativeElement.classList.add('sidenav-offset');\r\n    } else {\r\n      this.mapBrowser.nativeElement.classList.remove('sidenav-offset');\r\n    }\r\n\r\n    if (this.sidenavOpened && !this.isMobile()) {\r\n      this.mapBrowser.nativeElement.classList.add('sidenav-offset-baselayers');\r\n    } else {\r\n      this.mapBrowser.nativeElement.classList.remove(\r\n        'sidenav-offset-baselayers'\r\n      );\r\n    }\r\n\r\n    if (!this.toastPanelOpened && header && !this.expansionPanelExpanded) {\r\n      this.mapBrowser.nativeElement.classList.add('toast-offset-scale-line');\r\n    } else {\r\n      this.mapBrowser.nativeElement.classList.remove('toast-offset-scale-line');\r\n    }\r\n\r\n    if (\r\n      !this.toastPanelOpened &&\r\n      header &&\r\n      (this.isMobile() || this.isTablet() || this.sidenavOpened) &&\r\n      !this.expansionPanelExpanded\r\n    ) {\r\n      this.mapBrowser.nativeElement.classList.add('toast-offset-attribution');\r\n    } else {\r\n      this.mapBrowser.nativeElement.classList.remove(\r\n        'toast-offset-attribution'\r\n      );\r\n    }\r\n  }\r\n\r\n  getToastPanelExtent() {\r\n    if (!this.sidenavOpened) {\r\n      if (this.toastPanelHtmlDisplay && this.mediaService.isDesktop()) {\r\n        return 'htmlDisplay';\r\n      }\r\n      if (this.fullExtent) {\r\n        return 'fullStandard';\r\n      } else {\r\n        return 'standard';\r\n      }\r\n    } else if (this.sidenavOpened) {\r\n      if (this.toastPanelHtmlDisplay && this.mediaService.isDesktop()) {\r\n        return 'htmlDisplayOffsetX';\r\n      }\r\n      if (this.fullExtent) {\r\n        return 'fullOffsetX';\r\n      } else {\r\n        return 'standardOffsetX';\r\n      }\r\n    }\r\n  }\r\n\r\n  onPointerSummaryStatusChange(value) {\r\n    this.storageService.set('searchPointerSummaryEnabled', value);\r\n    this.igoSearchPointerSummaryEnabled = value;\r\n  }\r\n\r\n  getExpansionPanelStatus() {\r\n    if (this.sidenavOpened === false) {\r\n      if (this.expansionPanelExpanded === true) {\r\n        return 'full';\r\n      }\r\n      return 'notTriggered';\r\n    }\r\n    if (this.sidenavOpened === true && this.isMobile() === false) {\r\n      if (this.expansionPanelExpanded === true) {\r\n        return 'reduced';\r\n      }\r\n      return 'reducedNotTriggered';\r\n    }\r\n    if (this.sidenavOpened === true && this.isMobile() === true) {\r\n      if (this.expansionPanelExpanded === true) {\r\n        return 'mobile';\r\n      } else {\r\n        return 'notVisible';\r\n      }\r\n    }\r\n  }\r\n\r\n  getToastPanelOffsetY() {\r\n    let status = 'noExpansion';\r\n    if (this.expansionPanelExpanded) {\r\n      if (this.workspaceMaximize$.value) {\r\n        if (this.toastPanelOpened) {\r\n          status = 'expansionMaximizedAndToastOpened';\r\n        } else {\r\n          status = 'expansionMaximizedAndToastClosed';\r\n        }\r\n      } else {\r\n        if (this.toastPanelOpened) {\r\n          status = 'expansionAndToastOpened';\r\n        } else {\r\n          status = 'expansionAndToastClosed';\r\n        }\r\n      }\r\n    } else {\r\n      status = 'noExpansion';\r\n    }\r\n    return status;\r\n  }\r\n\r\n  getToastPanelStatus() {\r\n    if (this.isMobile() === true && this.toastPanelOpened === false) {\r\n      if (this.sidenavOpened === false) {\r\n        if (this.expansionPanelExpanded === false) {\r\n          if (this.queryState.store.entities$.value.length > 0) {\r\n            return 'low';\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  getControlsOffsetY() {\r\n    return this.expansionPanelExpanded\r\n      ? this.workspaceMaximize$.value\r\n        ? 'firstRowFromBottom-expanded-maximized'\r\n        : 'firstRowFromBottom-expanded'\r\n      : 'firstRowFromBottom';\r\n  }\r\n\r\n  getBaselayersSwitcherStatus() {\r\n    let status;\r\n    if (this.isMobile()) {\r\n      if (this.workspaceState.workspaceEnabled$.value) {\r\n        if (this.expansionPanelExpanded === false) {\r\n          if (this.queryState.store.entities$.value.length === 0) {\r\n            status = 'secondRowFromBottom';\r\n          } else {\r\n            status = 'thirdRowFromBottom';\r\n          }\r\n        } else {\r\n          if (this.queryState.store.entities$.value.length === 0) {\r\n            status = 'firstRowFromBottom-expanded';\r\n          } else {\r\n            status = 'secondRowFromBottom-expanded';\r\n          }\r\n        }\r\n      } else {\r\n        if (this.queryState.store.entities$.value.length === 0) {\r\n          status = 'firstRowFromBottom';\r\n        } else {\r\n          status = 'secondRowFromBottom';\r\n        }\r\n      }\r\n    } else {\r\n      if (this.workspaceState.workspaceEnabled$.value) {\r\n        if (this.expansionPanelExpanded) {\r\n          if (this.workspaceMaximize$.value) {\r\n            status = 'firstRowFromBottom-expanded-maximized';\r\n          } else {\r\n            status = 'firstRowFromBottom-expanded';\r\n          }\r\n        } else {\r\n          status = 'secondRowFromBottom';\r\n        }\r\n      } else {\r\n        status = 'firstRowFromBottom';\r\n      }\r\n    }\r\n    return status;\r\n  }\r\n\r\n  private readQueryParams() {\r\n    this.route.queryParams.subscribe((params) => {\r\n      this.routeParams = params;\r\n      this.readToolParams();\r\n      this.readSearchParams();\r\n      this.readFocusFirst();\r\n      this.computeZoomToExtent();\r\n    });\r\n  }\r\n\r\n  private readLanguageParam(params) {\r\n    if (params['lang']) {\r\n      this.authService.languageForce = true;\r\n      this.languageService.setLanguage(params['lang']);\r\n    }\r\n  }\r\n\r\n  private computeZoomToExtent() {\r\n    if (this.routeParams['zoomExtent']) {\r\n      const extentParams = this.routeParams['zoomExtent'].split(',');\r\n      const olExtent = olProj.transformExtent(\r\n        extentParams,\r\n        'EPSG:4326',\r\n        this.map.projection\r\n      );\r\n      this.map.viewController.zoomToExtent(\r\n        olExtent as [number, number, number, number]\r\n      );\r\n    }\r\n  }\r\n\r\n  private computeFocusFirst() {\r\n    setTimeout(() => {\r\n      const resultItem: any = document\r\n        .getElementsByTagName('igo-search-results-item')\r\n        .item(0);\r\n      if (resultItem) {\r\n        resultItem.click();\r\n      }\r\n    }, 1);\r\n  }\r\n\r\n  private readFocusFirst() {\r\n    if (this.routeParams['sf'] === '1' && this.termDefinedInUrl) {\r\n      const entities$$ = this.searchStore.stateView\r\n        .all$()\r\n        .pipe(\r\n          skipWhile((entities) => entities.length === 0),\r\n          debounceTime(1000),\r\n          take(1)\r\n        )\r\n        .subscribe((entities) => {\r\n          entities$$.unsubscribe();\r\n          if (entities.length && !this.termDefinedInUrlTriggered) {\r\n            this.computeFocusFirst();\r\n            this.termDefinedInUrlTriggered = true;\r\n          }\r\n        });\r\n    }\r\n  }\r\n\r\n  private readSearchParams() {\r\n    if (this.routeParams['search']) {\r\n      this.termDefinedInUrl = true;\r\n      if (this.routeParams['exactMatch'] === '1') {\r\n        this.searchState.activateCustomFilterTermStrategy();\r\n      }\r\n      if (\r\n        this.routeParams['search'] &&\r\n        !this.routeParams['zoom'] &&\r\n        this.routeParams['sf'] !== '1'\r\n      ) {\r\n        const entities$$ = this.searchStore.stateView\r\n          .all$()\r\n          .pipe(\r\n            skipWhile((entities) => entities.length === 0),\r\n            debounceTime(500),\r\n            take(1)\r\n          )\r\n          .subscribe((entities) => {\r\n            entities$$.unsubscribe();\r\n            const searchResultsOlFeatures = entities\r\n              .filter((e) => e.entity.meta.dataType === FEATURE)\r\n              .map((entity: EntityRecord<SearchResult>) =>\r\n                new olFormatGeoJSON().readFeature(entity.entity.data, {\r\n                  dataProjection: entity.entity.data.projection,\r\n                  featureProjection: this.map.projection\r\n                })\r\n              );\r\n            const totalExtent = computeOlFeaturesExtent(\r\n              searchResultsOlFeatures,\r\n              this.map.viewProjection\r\n            );\r\n            this.map.viewController.zoomToExtent(totalExtent);\r\n          });\r\n      }\r\n      this.searchBarTerm = this.routeParams['search'];\r\n    }\r\n    if (this.routeParams['searchGeom'] === '1') {\r\n      this.searchState.searchResultsGeometryEnabled$.next(true);\r\n    }\r\n  }\r\n\r\n  private readToolParams() {\r\n    if (this.routeParams['tool']) {\r\n      this.matDialogRef$\r\n        .pipe(\r\n          skipWhile((r) => r !== undefined),\r\n          first()\r\n        )\r\n        .subscribe((matDialogOpened) => {\r\n          if (!matDialogOpened) {\r\n            this.toolbox.activateTool(this.routeParams['tool']);\r\n          }\r\n        });\r\n    }\r\n\r\n    if (this.routeParams['sidenav'] === '1') {\r\n      setTimeout(() => {\r\n        this.openSidenav();\r\n      }, 250);\r\n    }\r\n\r\n    if (this.routeParams['routing']) {\r\n      let routingCoordLoaded = false;\r\n      const stopCoords = this.routeParams['routing'].split(';');\r\n      const routingOptions = this.routeParams['routingOptions'];\r\n      let resultSelection: number;\r\n      if (routingOptions) {\r\n        resultSelection = parseInt(routingOptions.split('result:')[1], 10);\r\n      }\r\n      this.directionState.stopsStore.storeInitialized$\r\n        .pipe(\r\n          skipWhile((init) => !init),\r\n          first()\r\n        )\r\n        .subscribe((init: boolean) => {\r\n          if (init && !routingCoordLoaded) {\r\n            routingCoordLoaded = true;\r\n            stopCoords.map((coord, i) => {\r\n              if (i > 1) {\r\n                addStopToStore(this.directionState.stopsStore);\r\n              }\r\n            });\r\n            setTimeout(() => {\r\n              stopCoords.map((coord, i) => {\r\n                const stop = this.directionState.stopsStore\r\n                  .all()\r\n                  .find((e) => e.position === i);\r\n                stop.text = coord;\r\n                stop.coordinates = coord.split(',');\r\n                this.directionState.stopsStore.update(stop);\r\n              });\r\n            }, this.directionState.debounceTime * 1.25); // this delay is due to the default component debounce time\r\n          }\r\n        });\r\n      // zoom to active route\r\n      this.directionState.routesFeatureStore.count$\r\n        .pipe(\r\n          skipWhile((c) => c < 1),\r\n          first()\r\n        )\r\n        .subscribe((c) => {\r\n          if (c >= 1) {\r\n            this.directionState.zoomToActiveRoute$.next();\r\n          }\r\n        });\r\n      // select the active route by url controls\r\n      this.directionState.routesFeatureStore.count$\r\n        .pipe(\r\n          skipWhile((c) => c < 2),\r\n          first()\r\n        )\r\n        .subscribe(() => {\r\n          if (resultSelection) {\r\n            this.directionState.routesFeatureStore.entities$.value.map(\r\n              (d) => (d.properties.active = false)\r\n            );\r\n            this.directionState.routesFeatureStore.entities$.value[\r\n              resultSelection\r\n            ].properties.active = true;\r\n            this.directionState.zoomToActiveRoute$.next();\r\n          }\r\n        });\r\n    }\r\n  }\r\n\r\n  private readLayersQueryParams(params: Params) {\r\n    this.readLayersQueryParamsByType(params, 'wms');\r\n    this.readLayersQueryParamsByType(params, 'wmts');\r\n    this.readLayersQueryParamsByType(params, 'arcgisrest');\r\n    this.readLayersQueryParamsByType(params, 'imagearcgisrest');\r\n    this.readLayersQueryParamsByType(params, 'tilearcgisrest');\r\n    this.readVectorQueryParams(params);\r\n  }\r\n\r\n  getQueryParam(name, url) {\r\n    let paramValue;\r\n    if (url.includes('?')) {\r\n      const httpParams = new HttpParams({ fromString: url.split('?')[1] });\r\n      paramValue = httpParams.get(name);\r\n    }\r\n    return paramValue;\r\n  }\r\n\r\n  private readLayersQueryParamsByType(params: Params, type) {\r\n    let nameParamLayersKey;\r\n    let urlsKey;\r\n    switch (type) {\r\n      case 'wms':\r\n        if ((params['layers'] || params['wmsLayers']) && params['wmsUrl']) {\r\n          urlsKey = 'wmsUrl';\r\n          nameParamLayersKey = params['wmsLayers'] ? 'wmsLayers' : 'layers'; // for maintain compatibility\r\n        }\r\n        break;\r\n      case 'wmts':\r\n        if (params['wmtsLayers'] && params['wmtsUrl']) {\r\n          urlsKey = 'wmtsUrl';\r\n          nameParamLayersKey = 'wmtsLayers';\r\n        }\r\n        break;\r\n      case 'arcgisrest':\r\n        if (params['arcgisLayers'] && params['arcgisUrl']) {\r\n          urlsKey = 'arcgisUrl';\r\n          nameParamLayersKey = 'arcgisLayers';\r\n        }\r\n        break;\r\n      case 'imagearcgisrest':\r\n        if (params['iarcgisLayers'] && params['iarcgisUrl']) {\r\n          urlsKey = 'iarcgisUrl';\r\n          nameParamLayersKey = 'iarcgisLayers';\r\n        }\r\n        break;\r\n      case 'tilearcgisrest':\r\n        if (params['tarcgisLayers'] && params['tarcgisUrl']) {\r\n          urlsKey = 'tarcgisUrl';\r\n          nameParamLayersKey = 'tarcgisLayers';\r\n        }\r\n        break;\r\n    }\r\n    if (!nameParamLayersKey || !urlsKey) {\r\n      return;\r\n    }\r\n    const layersByService = params[nameParamLayersKey].split('),(');\r\n    const urls = params[urlsKey].split(',');\r\n\r\n    let cnt = 0;\r\n    urls.forEach((urlSrc) => {\r\n      let url = urlSrc;\r\n      const version =\r\n        this.getQueryParam('VERSION', url) ||\r\n        this.getQueryParam('version', url) ||\r\n        undefined;\r\n      if (version) {\r\n        url = url\r\n          .replace('VERSION=' + version, '')\r\n          .replace('version=' + version, '');\r\n      }\r\n      if (url.endsWith('?')) {\r\n        url = url.substring(0, url.length - 1);\r\n      }\r\n\r\n      const currentLayersByService = this.extractLayersByService(\r\n        layersByService[cnt]\r\n      );\r\n      currentLayersByService.forEach((layer) => {\r\n        const layerFromUrl = layer.split(':igoz');\r\n        const layerOptions = ObjectUtils.removeUndefined({\r\n          type,\r\n          url: url,\r\n          layer: layerFromUrl[0],\r\n          params: type === 'wms' ? { LAYERS: layerFromUrl[0] } : undefined\r\n        });\r\n        const id = generateIdFromSourceOptions(layerOptions);\r\n        const visibility = this.computeLayerVisibilityFromUrl(params, id);\r\n        this.addLayerFromURL(\r\n          url,\r\n          layerFromUrl[0],\r\n          type,\r\n          version,\r\n          visibility,\r\n          layerFromUrl[1] ? parseInt(layerFromUrl[1], 10) : undefined\r\n        );\r\n      });\r\n      cnt += 1;\r\n    });\r\n  }\r\n\r\n  private readVectorQueryParams(params: Params) {\r\n    if (params['vector']) {\r\n      const url = params['vector'] as string;\r\n      const lastIndex = url.lastIndexOf('/');\r\n      const fileName = url.slice(lastIndex + 1, url.length);\r\n\r\n      this.http.get(`${url}`, { responseType: 'blob' }).subscribe((data) => {\r\n        const file = new File([data], fileName, {\r\n          type: data.type,\r\n          lastModified: Date.now()\r\n        });\r\n        this.importService.import(file).subscribe(\r\n          (features: Feature[]) => this.onFileImportSuccess(file, features),\r\n          (error: Error) => this.onFileImportError(file, error)\r\n        );\r\n      });\r\n    }\r\n  }\r\n\r\n  private onFileImportSuccess(file: File, features: Feature[]) {\r\n    handleFileImportSuccess(\r\n      file,\r\n      features,\r\n      this.map,\r\n      this.contextState.context$.value.uri,\r\n      this.messageService,\r\n      this.layerService\r\n    );\r\n  }\r\n\r\n  private onFileImportError(file: File, error: Error) {\r\n    handleFileImportError(file, error, this.messageService);\r\n  }\r\n\r\n  private extractLayersByService(layersByService: string): any[] {\r\n    let outLayersByService = layersByService;\r\n    outLayersByService = outLayersByService.startsWith('(')\r\n      ? outLayersByService.substr(1)\r\n      : outLayersByService;\r\n    outLayersByService = outLayersByService.endsWith(')')\r\n      ? outLayersByService.slice(0, -1)\r\n      : outLayersByService;\r\n    return outLayersByService.split(',');\r\n  }\r\n  private addLayerFromURL(\r\n    url: string,\r\n    name: string,\r\n    type: 'wms' | 'wmts' | 'arcgisrest' | 'imagearcgisrest' | 'tilearcgisrest',\r\n    version: string,\r\n    visibility: boolean = true,\r\n    zIndex: number\r\n  ) {\r\n    if (!this.contextLoaded) {\r\n      return;\r\n    }\r\n    const commonSourceOptions = {\r\n      optionsFromCapabilities: true,\r\n      optionsFromApi: true,\r\n      crossOrigin: true,\r\n      type,\r\n      url\r\n    };\r\n    const arcgisClause =\r\n      type === 'arcgisrest' ||\r\n      type === 'imagearcgisrest' ||\r\n      type === 'tilearcgisrest';\r\n    let sourceOptions = {\r\n      version: type === 'wmts' ? '1.0.0' : undefined,\r\n      queryable: arcgisClause ? true : false,\r\n      queryFormat: arcgisClause ? 'esrijson' : undefined,\r\n      layer: name\r\n    };\r\n    if (type === 'wms') {\r\n      sourceOptions = { params: { LAYERS: name, VERSION: version } } as any;\r\n    }\r\n\r\n    sourceOptions = ObjectUtils.removeUndefined(\r\n      Object.assign({}, sourceOptions, commonSourceOptions)\r\n    );\r\n\r\n    this.addedLayers$$.push(\r\n      this.layerService\r\n        .createAsyncLayer({\r\n          zIndex: zIndex,\r\n          visible: visibility,\r\n          sourceOptions\r\n        })\r\n        .subscribe((l) => {\r\n          this.map.addLayer(l);\r\n        })\r\n    );\r\n  }\r\n\r\n  private computeLayerVisibilityFromUrl(\r\n    params: Params,\r\n    currentLayerid: string\r\n  ): boolean {\r\n    const queryParams = params;\r\n    let visible = true;\r\n    if (!queryParams || !currentLayerid) {\r\n      return visible;\r\n    }\r\n    let visibleOnLayersParams = '';\r\n    let visibleOffLayersParams = '';\r\n    let visiblelayers: string[] = [];\r\n    let invisiblelayers: string[] = [];\r\n    if (queryParams['visiblelayers']) {\r\n      visibleOnLayersParams = queryParams['visiblelayers'];\r\n    }\r\n    if (queryParams['invisiblelayers']) {\r\n      visibleOffLayersParams = queryParams['invisiblelayers'];\r\n    }\r\n\r\n    /* This order is important because to control whichever\r\n     the order of * param. First whe open and close everything.*/\r\n    if (visibleOnLayersParams === '*') {\r\n      visible = true;\r\n    }\r\n    if (visibleOffLayersParams === '*') {\r\n      visible = false;\r\n    }\r\n\r\n    // After, managing named layer by id (context.json OR id from datasource)\r\n    visiblelayers = visibleOnLayersParams.split(',');\r\n    invisiblelayers = visibleOffLayersParams.split(',');\r\n    if (\r\n      visiblelayers.indexOf(currentLayerid) > -1 ||\r\n      visiblelayers.indexOf(currentLayerid.toString()) > -1\r\n    ) {\r\n      visible = true;\r\n    }\r\n    if (\r\n      invisiblelayers.indexOf(currentLayerid) > -1 ||\r\n      invisiblelayers.indexOf(currentLayerid.toString()) > -1\r\n    ) {\r\n      visible = false;\r\n    }\r\n    return visible;\r\n  }\r\n\r\n  private initWelcomeWindow(): void {\r\n    if (this.auth?.url) {\r\n      this.authService.logged$.subscribe((logged) => {\r\n        if (logged) {\r\n          this.createWelcomeWindow();\r\n        }\r\n      });\r\n    } else {\r\n      this.createWelcomeWindow();\r\n    }\r\n  }\r\n\r\n  private createWelcomeWindow(): void {\r\n    if (this.welcomeWindowService.hasWelcomeWindow()) {\r\n      const welcomWindowConfig: MatDialogConfig =\r\n        this.welcomeWindowService.getConfig();\r\n\r\n      this.matDialogRef$.next(\r\n        this.dialogWindow.open(WelcomeWindowComponent, welcomWindowConfig)\r\n      );\r\n\r\n      this.matDialogRef$.value.afterClosed().subscribe((result) => {\r\n        this.welcomeWindowService.afterClosedWelcomeWindow();\r\n        this.matDialogRef$.next(undefined);\r\n      });\r\n    }\r\n  }\r\n\r\n  private getFeatureIsSameActiveWks(feature: Feature): boolean {\r\n    if (this.workspace) {\r\n      const featureTitle = feature.meta.sourceTitle;\r\n      const wksTitle = this.workspace.title;\r\n      if (wksTitle === featureTitle) {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private getWksActiveOpenInResolution(): boolean {\r\n    if (this.workspace) {\r\n      const activeWks = this.workspace as WfsWorkspace;\r\n      if (\r\n        activeWks.active &&\r\n        activeWks.inResolutionRange$.value &&\r\n        this.workspaceState.workspacePanelExpanded\r\n      ) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  refreshRelationsWorkspace(relationLayers: ImageLayer[] | VectorLayer[]) {\r\n    if (relationLayers?.length) {\r\n      for (const layer of relationLayers) {\r\n        const relationWorkspace = this.workspaceStore\r\n          .all()\r\n          .find((workspace) =>\r\n            layer.options.workspace.workspaceId.includes(workspace.id)\r\n          );\r\n        relationWorkspace?.meta.tableTemplate.columns.forEach((col) => {\r\n          // Update domain list\r\n          if (col.type === 'list' || col.type === 'autocomplete') {\r\n            this.editionWorkspaceService\r\n              .getDomainValues(col.relation)\r\n              .subscribe((result) => {\r\n                col.domainValues = result;\r\n              });\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  zoomToSelectedFeatureWks() {\r\n    let format = new olFormatGeoJSON();\r\n    const featuresSelected = this.workspaceState.workspaceSelection.map(\r\n      (rec) => rec.entity as Feature\r\n    );\r\n    if (featuresSelected.length === 0) {\r\n      return;\r\n    }\r\n    const olFeaturesSelected = [];\r\n    for (const feat of featuresSelected) {\r\n      let localOlFeature = format.readFeature(feat, {\r\n        dataProjection: feat.projection,\r\n        featureProjection: this.map.projection\r\n      });\r\n      olFeaturesSelected.push(localOlFeature);\r\n    }\r\n    moveToOlFeatures(\r\n      this.map.viewController,\r\n      olFeaturesSelected,\r\n      FeatureMotion.Zoom\r\n    );\r\n  }\r\n}\r\n","import { Component } from '@angular/core';\r\nimport { ConfigService, LanguageService } from '@igo2/core';\r\n\r\n@Component({\r\n  selector: 'app-header',\r\n  templateUrl: './header.component.html',\r\n  styleUrls: ['./header.component.scss']\r\n})\r\nexport class HeaderComponent {\r\n  public headerLogo: string;\r\n  public headerLogoPrint: string;\r\n\r\n  constructor(\r\n    private configService: ConfigService,\r\n    protected languageService: LanguageService\r\n  ) {\r\n    this.computeHeader();\r\n  }\r\n\r\n  computeHeader() {\r\n    this.headerLogo = this.configService.getConfig('header.logo');\r\n    this.headerLogoPrint = this.configService.getConfig('header.logoPrint');\r\n  }\r\n\r\n  // Future translation system\r\n  /*changeLanguage() {\r\n    if (this.languageService.getLanguage() === 'fr'){\r\n      this.languageService.setLanguage('en');\r\n    } else {\r\n      this.languageService.setLanguage('fr');\r\n    }\r\n  }*/\r\n}\r\n","<mat-toolbar class=\"banner\" role=\"banner\" color=\"primary\">\r\n  <div class=\"container\">\r\n    <div class=\"row\">\r\n      <div\r\n        class=\"col-6 col-md-10 d-flex flex-wrap align-items-center zone-logo-title\"\r\n      >\r\n        <a class=\"logo\" tabindex=\"5\" routerLink=\"\">\r\n          <img id=\"header-logo\" alt=\"Logo\" src=\"{{ headerLogo }}\" />\r\n        </a>\r\n        <img\r\n          id=\"header-logo-print\"\r\n          alt=\"Logo\"\r\n          src=\"{{ headerLogoPrint }}\"\r\n          width=\"199\"\r\n          height=\"60\"\r\n        />\r\n        <p lang=\"fr\" id=\"title-desktop\" class=\"zone-title d-none d-md-block\">\r\n          {{ 'header.title' | translate }}\r\n        </p>\r\n      </div>\r\n      <div class=\"col-6 col-md-2 d-flex justify-content-end zone-links\">\r\n        <ul class=\"nav flex-column\">\r\n          <!--<li><button class=\"buttonLanguage\" disabled (click)=\"changeLanguage()\">{{'header.language'}}</button></li>-->\r\n          <li>\r\n            <a\r\n              rel=\"noopener noreferrer\"\r\n              alt=\"('header.contactUsUrl' | translate)\"\r\n              href=\"{{ 'header.contactUsUrl' | translate }}\"\r\n              target=\"_blank\"\r\n              >{{ 'header.contactUs' | translate }}</a\r\n            >\r\n          </li>\r\n        </ul>\r\n      </div>\r\n      <p lang=\"fr\" id=\"title-mobile\" class=\"zone-title d-md-none col-12\">\r\n        <a>{{ 'header.title' | translate }}</a>\r\n      </p>\r\n    </div>\r\n  </div>\r\n</mat-toolbar>\r\n","import { Component } from '@angular/core';\r\nimport { LanguageService } from '@igo2/core';\r\n\r\n@Component({\r\n  selector: 'app-footer',\r\n  templateUrl: './footer.component.html',\r\n  styleUrls: ['./footer.component.scss']\r\n})\r\nexport class FooterComponent {\r\n  constructor(protected languageService: LanguageService) {}\r\n}\r\n","<div class=\"footer-right\" id=\"footer-id\">\r\n  <span class=\"order2\">\r\n    <span class=\"footer-text\">\r\n      <a\r\n        rel=\"noopener noreferrer\"\r\n        alt=\"('externallinks' | translate)\"\r\n        href=\"{{ 'footer.url-conditions' | translate }}\"\r\n        target=\"_blank\"\r\n        >{{ 'footer.conditions' | translate }}</a\r\n      >\r\n    </span>\r\n    <span class=\"footer-text\"> | </span>\r\n    <span class=\"footer-text\">\r\n      <a\r\n        rel=\"noopener noreferrer\"\r\n        alt=\"('externallinks' | translate)\"\r\n        href=\"{{ 'footer.url-ministry' | translate }}\"\r\n        target=\"_blank\"\r\n        >{{ 'footer.ministry' | translate }}</a\r\n      >\r\n    </span>\r\n    <span class=\"footer-text\"> | </span>\r\n    <span class=\"footer-text\">\r\n      <a\r\n        rel=\"noopener noreferrer\"\r\n        alt=\"('externallinks' | translate)\"\r\n        href=\"{{ 'footer.url-gov' | translate }}\"\r\n        target=\"_blank\"\r\n        >{{ 'footer.gov' | translate }}</a\r\n      >\r\n    </span>\r\n  </span>\r\n</div>\r\n","<igo-spinner igoSpinnerActivity></igo-spinner>\r\n\r\n<igo-auth-form *ngIf=\"authConfig && authConfig.url\"></igo-auth-form>\r\n\r\n<app-header *ngIf=\"hasHeader\" #header></app-header>\r\n\r\n<app-portal\r\n  [ngClass]=\"\r\n    hasHeader\r\n      ? hasFooter\r\n        ? 'portal-with-header-footer'\r\n        : 'portal-with-header'\r\n      : hasFooter\r\n      ? 'portal-with-footer'\r\n      : 'portal'\r\n  \"\r\n  igoStopDropPropagation\r\n></app-portal>\r\n\r\n<app-footer *ngIf=\"hasFooter\"></app-footer>\r\n","import { Component, Inject, OnInit } from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\nimport { Title, Meta } from '@angular/platform-browser';\nimport { DomUtils, userAgent } from '@igo2/utils';\nimport { LanguageService, ConfigService, MessageService } from '@igo2/core';\nimport { AuthOptions } from '@igo2/auth';\nimport { AnalyticsListenerService } from '@igo2/integration';\nimport { PwaService } from './services/pwa.service';\nimport { NavigationEnd, Router } from '@angular/router';\nimport { delay, first } from 'rxjs';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent implements OnInit {\n  public authConfig: AuthOptions;\n  public hasHeader = true;\n  public hasFooter = true;\n  private promptEvent: any;\n\n  constructor(\n    @Inject(DOCUMENT) private document: Document,\n    protected languageService: LanguageService,\n    private configService: ConfigService,\n    private analyticsListenerService: AnalyticsListenerService,\n    private titleService: Title,\n    private metaService: Meta,\n    private messageService: MessageService,\n    private pwaService: PwaService,\n    private router: Router\n  ) {\n    this.authConfig = this.configService.getConfig('auth');\n\n    this.readTitleConfig();\n    this.readDescriptionConfig();\n\n    this.analyticsListenerService.listen();\n\n    this.detectOldBrowser();\n\n    this.hasHeader =\n      this.configService.getConfig('header.hasHeader') === undefined\n        ? false\n        : this.configService.getConfig('header.hasHeader');\n\n    this.hasFooter =\n      this.configService.getConfig('hasFooter') === undefined\n        ? false\n        : this.configService.getConfig('hasFooter');\n\n    this.setManifest();\n    this.installPrompt();\n    this.pwaService.checkForUpdates();\n  }\n\n  ngOnInit(): void {\n    this.handleSplashScreen();\n  }\n\n  private handleSplashScreen(): void {\n    this.router.events\n      .pipe(\n        first((events) => events instanceof NavigationEnd),\n        delay(500)\n      )\n      .subscribe(() => {\n        this._removeSplashScreen();\n      });\n  }\n\n  private _removeSplashScreen(): void {\n    const intro = this.document.getElementById('splash-screen');\n    if (!intro) {\n      return;\n    }\n    intro.classList.add('is-destroying');\n\n    const destroyingAnimationTime = 300;\n    const stylesheet = this.document.getElementById('splash-screen-stylesheet');\n\n    setTimeout(() => {\n      DomUtils.remove(intro);\n      DomUtils.remove(stylesheet);\n    }, destroyingAnimationTime);\n  }\n\n  private readTitleConfig() {\n    this.languageService.translate\n      .get(this.configService.getConfig('title'))\n      .subscribe((title) => {\n        if (title) {\n          this.titleService.setTitle(title);\n          this.metaService.addTag({ name: 'title', content: title });\n        }\n      });\n  }\n\n  private setManifest() {\n    const appConfig = this.configService.getConfig('app');\n    if (appConfig?.install?.enabled) {\n      const manifestPath =\n        appConfig.install.manifestPath || 'manifest.webmanifest';\n      document\n        .querySelector('#igoManifestByConfig')\n        .setAttribute('href', manifestPath);\n    }\n  }\n\n  private installPrompt() {\n    const appConfig = this.configService.getConfig('app');\n    if (appConfig?.install?.enabled && appConfig?.install?.promote) {\n      if (userAgent.getOSName() !== 'iOS') {\n        window.addEventListener(\n          'beforeinstallprompt',\n          (event: any) => {\n            event.preventDefault();\n            this.promptEvent = event;\n            window.addEventListener(\n              'click',\n              () => {\n                setTimeout(() => {\n                  this.promptEvent.prompt();\n                  this.promptEvent = undefined;\n                }, 750);\n              },\n              { once: true }\n            );\n          },\n          { once: true }\n        );\n      }\n    }\n  }\n\n  private readDescriptionConfig() {\n    const description = this.configService.getConfig('description');\n    if (description) {\n      this.metaService.addTag({ name: 'description', content: description });\n    }\n  }\n\n  private detectOldBrowser() {\n    const oldBrowser = userAgent.satisfies({\n      ie: '<=11',\n      chrome: '<64',\n      firefox: '<60',\n      safari: '<=11'\n    });\n\n    if (oldBrowser) {\n      this.messageService.alert('oldBrowser.message', 'oldBrowser.title', {\n        timeOut: 15000\n      });\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { HeaderComponent } from './header.component';\r\nimport { IgoLanguageModule } from '@igo2/core';\r\nimport { MatToolbarModule } from '@angular/material/toolbar';\r\n\r\n@NgModule({\r\n  declarations: [HeaderComponent],\r\n  imports: [CommonModule, IgoLanguageModule, MatToolbarModule],\r\n  exports: [HeaderComponent]\r\n})\r\nexport class HeaderModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FooterComponent } from './footer.component';\r\nimport { IgoLanguageModule } from '@igo2/core';\r\n\r\n@NgModule({\r\n  declarations: [FooterComponent],\r\n  imports: [CommonModule, IgoLanguageModule],\r\n  exports: [FooterComponent]\r\n})\r\nexport class FooterModule {}\r\n","import { BrowserModule } from '@angular/platform-browser';\nimport {\n  APP_INITIALIZER,\n  ApplicationRef,\n  Injector,\n  NgModule\n} from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport {\n  provideConfigOptions,\n  IgoMessageModule,\n  IgoGestureModule,\n  RouteService,\n  LanguageService,\n  ConfigService\n} from '@igo2/core';\nimport { IgoSpinnerModule, IgoStopPropagationModule } from '@igo2/common';\nimport { IgoAuthModule } from '@igo2/auth';\nimport {\n  provideWorkspaceSearchSource,\n  provideIChercheSearchSource,\n  provideIChercheReverseSearchSource,\n  provideNominatimSearchSource,\n  provideCoordinatesReverseSearchSource,\n  provideILayerSearchSource,\n  provideStoredQueriesSearchSource,\n  provideOsrmDirectionsSource,\n  provideOptionsApi,\n  provideCadastreSearchSource,\n  provideStyleListOptions\n} from '@igo2/geo';\n\nimport { environment } from '../environments/environment';\nimport { PortalModule } from './pages';\nimport { AppComponent } from './app.component';\nimport { HeaderModule } from './pages/header/header.module';\nimport { FooterModule } from './pages/footer/footer.module';\nimport { ServiceWorkerModule } from '@angular/service-worker';\n\nimport {\n  MAT_TOOLTIP_DEFAULT_OPTIONS,\n  MatTooltipDefaultOptions\n} from '@angular/material/tooltip';\nimport { MAT_FORM_FIELD_DEFAULT_OPTIONS } from '@angular/material/form-field';\nimport { concatMap, first } from 'rxjs';\nimport { loadTheme } from '@igo2/utils';\nimport { DOCUMENT } from '@angular/common';\n\nconst DEFAULT_THEME: string = 'blue-theme';\n\nexport const defaultTooltipOptions: MatTooltipDefaultOptions = {\n  showDelay: 500,\n  hideDelay: 0,\n  touchendHideDelay: 0,\n  disableTooltipInteractivity: true\n};\n\n@NgModule({\n  declarations: [AppComponent],\n  imports: [\n    BrowserModule,\n    BrowserAnimationsModule,\n    RouterModule.forRoot([]),\n    IgoAuthModule.forRoot(),\n    IgoGestureModule.forRoot(),\n    IgoMessageModule,\n    IgoSpinnerModule,\n    IgoStopPropagationModule,\n    PortalModule,\n    HeaderModule,\n    FooterModule,\n    ServiceWorkerModule.register('ngsw-worker.js', {\n      enabled: environment.igo.app.pwa.enabled,\n      registrationStrategy: 'registerWithDelay:5000'\n    })\n  ],\n  providers: [\n    provideConfigOptions({\n      default: environment.igo,\n      path: './config/config.json'\n    }),\n    RouteService,\n    provideNominatimSearchSource(),\n    provideIChercheSearchSource(),\n    provideWorkspaceSearchSource(),\n    provideIChercheReverseSearchSource(),\n    provideCoordinatesReverseSearchSource(),\n    provideILayerSearchSource(),\n    provideStoredQueriesSearchSource(),\n    provideOsrmDirectionsSource(),\n    provideOptionsApi(),\n    provideCadastreSearchSource(),\n    {\n      provide: APP_INITIALIZER,\n      useFactory: appInitializerFactory,\n      deps: [Injector, ApplicationRef, DOCUMENT],\n      multi: true\n    },\n    provideStyleListOptions({\n      path: './assets/list-style.json'\n    }),\n    { provide: MAT_TOOLTIP_DEFAULT_OPTIONS, useValue: defaultTooltipOptions },\n    {\n      provide: MAT_FORM_FIELD_DEFAULT_OPTIONS,\n      useValue: { appearance: 'fill' }\n    }\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule {}\n\nfunction appInitializerFactory(\n  injector: Injector,\n  applicationRef: ApplicationRef,\n  document: Document\n) {\n  // ensure to have the proper translations loaded once, when the app is stable.\n  return () =>\n    new Promise<any>((resolve: any) => {\n      applicationRef.isStable\n        .pipe(\n          first((isStable) => isStable === true),\n          concatMap(() => {\n            const languageService = injector.get(LanguageService);\n            const lang = languageService.getLanguage();\n            return languageService.translate.getTranslation(lang);\n          })\n        )\n        .subscribe((translations) => {\n          const languageService = injector.get(LanguageService);\n          const lang = languageService.getLanguage();\n          languageService.translate.setTranslation(lang, translations);\n\n          const configService = injector.get(ConfigService);\n          const theme = configService.getConfig('theme') || DEFAULT_THEME;\n          loadTheme(document, theme);\n\n          const titleKey = configService.getConfig('title');\n          languageService.translate.get(titleKey).subscribe((title) => {\n            handleSplashScreenTitle(document, title);\n            resolve();\n          });\n        });\n    });\n}\n\nfunction handleSplashScreenTitle(document: Document, title: string): void {\n  const splashScreenTitle = document.getElementById('splash-screen-title');\n  if (splashScreenTitle) {\n    splashScreenTitle.innerText = title;\n  }\n}\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nimport 'hammerjs';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic()\r\n  .bootstrapModule(AppModule)\r\n  .catch((err) => console.log(err));\r\n","var map = {\n\t\"./af\": 35528,\n\t\"./af.js\": 35528,\n\t\"./ar\": 1036,\n\t\"./ar-dz\": 17579,\n\t\"./ar-dz.js\": 17579,\n\t\"./ar-kw\": 69588,\n\t\"./ar-kw.js\": 69588,\n\t\"./ar-ly\": 11650,\n\t\"./ar-ly.js\": 11650,\n\t\"./ar-ma\": 93258,\n\t\"./ar-ma.js\": 93258,\n\t\"./ar-sa\": 54085,\n\t\"./ar-sa.js\": 54085,\n\t\"./ar-tn\": 90287,\n\t\"./ar-tn.js\": 90287,\n\t\"./ar.js\": 1036,\n\t\"./az\": 89757,\n\t\"./az.js\": 89757,\n\t\"./be\": 59620,\n\t\"./be.js\": 59620,\n\t\"./bg\": 31139,\n\t\"./bg.js\": 31139,\n\t\"./bm\": 4042,\n\t\"./bm.js\": 4042,\n\t\"./bn\": 19641,\n\t\"./bn-bd\": 19126,\n\t\"./bn-bd.js\": 19126,\n\t\"./bn.js\": 19641,\n\t\"./bo\": 494,\n\t\"./bo.js\": 494,\n\t\"./br\": 20934,\n\t\"./br.js\": 20934,\n\t\"./bs\": 26274,\n\t\"./bs.js\": 26274,\n\t\"./ca\": 45831,\n\t\"./ca.js\": 45831,\n\t\"./cs\": 92354,\n\t\"./cs.js\": 92354,\n\t\"./cv\": 79692,\n\t\"./cv.js\": 79692,\n\t\"./cy\": 58774,\n\t\"./cy.js\": 58774,\n\t\"./da\": 38955,\n\t\"./da.js\": 38955,\n\t\"./de\": 21557,\n\t\"./de-at\": 24954,\n\t\"./de-at.js\": 24954,\n\t\"./de-ch\": 81881,\n\t\"./de-ch.js\": 81881,\n\t\"./de.js\": 21557,\n\t\"./dv\": 16475,\n\t\"./dv.js\": 16475,\n\t\"./el\": 38877,\n\t\"./el.js\": 38877,\n\t\"./en-au\": 70454,\n\t\"./en-au.js\": 70454,\n\t\"./en-ca\": 67356,\n\t\"./en-ca.js\": 67356,\n\t\"./en-gb\": 10456,\n\t\"./en-gb.js\": 10456,\n\t\"./en-ie\": 28789,\n\t\"./en-ie.js\": 28789,\n\t\"./en-il\": 85471,\n\t\"./en-il.js\": 85471,\n\t\"./en-in\": 39664,\n\t\"./en-in.js\": 39664,\n\t\"./en-nz\": 97672,\n\t\"./en-nz.js\": 97672,\n\t\"./en-sg\": 80805,\n\t\"./en-sg.js\": 80805,\n\t\"./eo\": 87390,\n\t\"./eo.js\": 87390,\n\t\"./es\": 1564,\n\t\"./es-do\": 51473,\n\t\"./es-do.js\": 51473,\n\t\"./es-mx\": 92089,\n\t\"./es-mx.js\": 92089,\n\t\"./es-us\": 84156,\n\t\"./es-us.js\": 84156,\n\t\"./es.js\": 1564,\n\t\"./et\": 6513,\n\t\"./et.js\": 6513,\n\t\"./eu\": 7856,\n\t\"./eu.js\": 7856,\n\t\"./fa\": 2378,\n\t\"./fa.js\": 2378,\n\t\"./fi\": 22687,\n\t\"./fi.js\": 22687,\n\t\"./fil\": 80032,\n\t\"./fil.js\": 80032,\n\t\"./fo\": 46845,\n\t\"./fo.js\": 46845,\n\t\"./fr\": 8875,\n\t\"./fr-ca\": 56425,\n\t\"./fr-ca.js\": 56425,\n\t\"./fr-ch\": 41746,\n\t\"./fr-ch.js\": 41746,\n\t\"./fr.js\": 8875,\n\t\"./fy\": 67037,\n\t\"./fy.js\": 67037,\n\t\"./ga\": 11217,\n\t\"./ga.js\": 11217,\n\t\"./gd\": 37010,\n\t\"./gd.js\": 37010,\n\t\"./gl\": 51931,\n\t\"./gl.js\": 51931,\n\t\"./gom-deva\": 64488,\n\t\"./gom-deva.js\": 64488,\n\t\"./gom-latn\": 8032,\n\t\"./gom-latn.js\": 8032,\n\t\"./gu\": 34984,\n\t\"./gu.js\": 34984,\n\t\"./he\": 69090,\n\t\"./he.js\": 69090,\n\t\"./hi\": 42085,\n\t\"./hi.js\": 42085,\n\t\"./hr\": 38787,\n\t\"./hr.js\": 38787,\n\t\"./hu\": 2901,\n\t\"./hu.js\": 2901,\n\t\"./hy-am\": 59819,\n\t\"./hy-am.js\": 59819,\n\t\"./id\": 44074,\n\t\"./id.js\": 44074,\n\t\"./is\": 70715,\n\t\"./is.js\": 70715,\n\t\"./it\": 31746,\n\t\"./it-ch\": 77040,\n\t\"./it-ch.js\": 77040,\n\t\"./it.js\": 31746,\n\t\"./ja\": 3180,\n\t\"./ja.js\": 3180,\n\t\"./jv\": 34346,\n\t\"./jv.js\": 34346,\n\t\"./ka\": 65538,\n\t\"./ka.js\": 65538,\n\t\"./kk\": 79772,\n\t\"./kk.js\": 79772,\n\t\"./km\": 87905,\n\t\"./km.js\": 87905,\n\t\"./kn\": 79125,\n\t\"./kn.js\": 79125,\n\t\"./ko\": 69140,\n\t\"./ko.js\": 69140,\n\t\"./ku\": 2354,\n\t\"./ku.js\": 2354,\n\t\"./ky\": 63768,\n\t\"./ky.js\": 63768,\n\t\"./lb\": 14016,\n\t\"./lb.js\": 14016,\n\t\"./lo\": 83169,\n\t\"./lo.js\": 83169,\n\t\"./lt\": 62353,\n\t\"./lt.js\": 62353,\n\t\"./lv\": 83243,\n\t\"./lv.js\": 83243,\n\t\"./me\": 52338,\n\t\"./me.js\": 52338,\n\t\"./mi\": 35555,\n\t\"./mi.js\": 35555,\n\t\"./mk\": 85794,\n\t\"./mk.js\": 85794,\n\t\"./ml\": 53151,\n\t\"./ml.js\": 53151,\n\t\"./mn\": 46458,\n\t\"./mn.js\": 46458,\n\t\"./mr\": 69165,\n\t\"./mr.js\": 69165,\n\t\"./ms\": 8680,\n\t\"./ms-my\": 87477,\n\t\"./ms-my.js\": 87477,\n\t\"./ms.js\": 8680,\n\t\"./mt\": 79684,\n\t\"./mt.js\": 79684,\n\t\"./my\": 40285,\n\t\"./my.js\": 40285,\n\t\"./nb\": 45922,\n\t\"./nb.js\": 45922,\n\t\"./ne\": 29040,\n\t\"./ne.js\": 29040,\n\t\"./nl\": 5066,\n\t\"./nl-be\": 74460,\n\t\"./nl-be.js\": 74460,\n\t\"./nl.js\": 5066,\n\t\"./nn\": 53693,\n\t\"./nn.js\": 53693,\n\t\"./oc-lnc\": 88676,\n\t\"./oc-lnc.js\": 88676,\n\t\"./pa-in\": 92341,\n\t\"./pa-in.js\": 92341,\n\t\"./pl\": 57416,\n\t\"./pl.js\": 57416,\n\t\"./pt\": 84344,\n\t\"./pt-br\": 30113,\n\t\"./pt-br.js\": 30113,\n\t\"./pt.js\": 84344,\n\t\"./ro\": 72643,\n\t\"./ro.js\": 72643,\n\t\"./ru\": 61305,\n\t\"./ru.js\": 61305,\n\t\"./sd\": 96095,\n\t\"./sd.js\": 96095,\n\t\"./se\": 74486,\n\t\"./se.js\": 74486,\n\t\"./si\": 58742,\n\t\"./si.js\": 58742,\n\t\"./sk\": 96722,\n\t\"./sk.js\": 96722,\n\t\"./sl\": 3345,\n\t\"./sl.js\": 3345,\n\t\"./sq\": 52416,\n\t\"./sq.js\": 52416,\n\t\"./sr\": 39450,\n\t\"./sr-cyrl\": 50501,\n\t\"./sr-cyrl.js\": 50501,\n\t\"./sr.js\": 39450,\n\t\"./ss\": 32222,\n\t\"./ss.js\": 32222,\n\t\"./sv\": 9454,\n\t\"./sv.js\": 9454,\n\t\"./sw\": 19638,\n\t\"./sw.js\": 19638,\n\t\"./ta\": 96494,\n\t\"./ta.js\": 96494,\n\t\"./te\": 94435,\n\t\"./te.js\": 94435,\n\t\"./tet\": 25003,\n\t\"./tet.js\": 25003,\n\t\"./tg\": 13706,\n\t\"./tg.js\": 13706,\n\t\"./th\": 16025,\n\t\"./th.js\": 16025,\n\t\"./tk\": 59780,\n\t\"./tk.js\": 59780,\n\t\"./tl-ph\": 22068,\n\t\"./tl-ph.js\": 22068,\n\t\"./tlh\": 39167,\n\t\"./tlh.js\": 39167,\n\t\"./tr\": 32494,\n\t\"./tr.js\": 32494,\n\t\"./tzl\": 58707,\n\t\"./tzl.js\": 58707,\n\t\"./tzm\": 91296,\n\t\"./tzm-latn\": 34532,\n\t\"./tzm-latn.js\": 34532,\n\t\"./tzm.js\": 91296,\n\t\"./ug-cn\": 12086,\n\t\"./ug-cn.js\": 12086,\n\t\"./uk\": 85069,\n\t\"./uk.js\": 85069,\n\t\"./ur\": 29304,\n\t\"./ur.js\": 29304,\n\t\"./uz\": 95115,\n\t\"./uz-latn\": 97609,\n\t\"./uz-latn.js\": 97609,\n\t\"./uz.js\": 95115,\n\t\"./vi\": 34802,\n\t\"./vi.js\": 34802,\n\t\"./x-pseudo\": 65605,\n\t\"./x-pseudo.js\": 65605,\n\t\"./yo\": 88456,\n\t\"./yo.js\": 88456,\n\t\"./zh-cn\": 23272,\n\t\"./zh-cn.js\": 23272,\n\t\"./zh-hk\": 9402,\n\t\"./zh-hk.js\": 9402,\n\t\"./zh-mo\": 48101,\n\t\"./zh-mo.js\": 48101,\n\t\"./zh-tw\": 40262,\n\t\"./zh-tw.js\": 40262\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 46700;"],"x_google_ignoreList":[39]}