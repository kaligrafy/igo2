(self.webpackChunkigo2=self.webpackChunkigo2||[]).push([[179],{28851:(M,pe,d)=>{"use strict";var S=d(36480),e=d(61699),T=d(14447),b=d(22868),g=d(38732),c=d(85393),ce=d(56700),l=d(98655);const de={production:!0,igo:{app:{forceCoordsNA:!1,install:{enabled:!0,promote:!0,manifestPath:"./config/github.webmanifest"},pwa:{enabled:!1}},catalog:{sources:[{id:"Gououvert",title:"Gouvouvert",url:"https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi"},{id:"glace",title:"Carte de glace",url:"https://geoegl.msp.gouv.qc.ca/apis/ws/radarsat.fcgi",showLegend:!0}]},depot:{url:"/apis/depot"},importExport:{url:"https://geoegl.msp.gouv.qc.ca/apis/ogre",configFileToGeoDBService:"./data/geoDataToIDB.json",clientSideFileSizeMaxMb:30,allowToStoreLayer:!0},language:{prefix:"./locale/"},interactiveTour:{tourInMobile:!0,pathToConfigFile:"./config/interactiveTour.json"},searchSources:{nominatim:{available:!1},storedqueries:{available:!1},icherche:{searchUrl:"https://geoegl.msp.gouv.qc.ca/apis/icherche",order:2,params:{limit:"8"}},coordinatesreverse:{showInPointerSummary:!0},icherchereverse:{showInPointerSummary:!0,searchUrl:"https://geoegl.msp.gouv.qc.ca/apis/terrapi",order:3,enabled:!0},ilayer:{searchUrl:"https://geoegl.msp.gouv.qc.ca/apis/icherche/layers",order:4,params:{limit:"5"}},cadastre:{enabled:!1}},projections:[{code:"EPSG:32198",alias:"Quebec Lambert",def:"+proj=lcc +lat_1=60 +lat_2=46 +lat_0=44 +lon_0=-68.5 +x_0=0 +y_0=0           +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",extent:[-799574,45802,891595.4,1849567.5]},{code:"EPSG:3798",alias:"MTQ Lambert",def:"+proj=lcc +lat_1=50 +lat_2=46 +lat_0=44 +lon_0=-70 +x_0=800000 +y_0=0           +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",extent:[31796.5834,158846.2231,1813323.4284,2141241.0978]}],searchOverlayStyle:{base:{markerColor:"#5ed0fb",markerOpacity:.8,markerOutlineColor:"#a7e7ff",fillColor:"#5ed0fb",fillOpacity:.2,strokeColor:"#5ed0fb",strokeOpacity:.7,strokeWidth:2},focus:{markerColor:"#5ed0fb",markerOpacity:1,markerOutlineColor:"#DFF7FF",fillColor:"#5ed0fb",fillOpacity:.3,strokeColor:"#DFF7FF",strokeOpacity:1,strokeWidth:2},selection:{markerColor:"#00a1de",markerOpacity:1,markerOutlineColor:"#ffffff",fillColor:"#00a1de",fillOpacity:.3,strokeColor:"#00A1DE",strokeOpacity:1,strokeWidth:2}},queryOverlayStyle:{base:{markerColor:"#5ed0fb",markerOpacity:.8,markerOutlineColor:"#a7e7ff",fillColor:"#5ed0fb",fillOpacity:.2,strokeColor:"#5ed0fb",strokeOpacity:.7,strokeWidth:2},focus:{markerColor:"#5ed0fb",markerOpacity:1,markerOutlineColor:"#DFF7FF",fillColor:"#5ed0fb",fillOpacity:.3,strokeColor:"#DFF7FF",strokeOpacity:1,strokeWidth:2},selection:{markerColor:"#00a1de",markerOpacity:1,markerOutlineColor:"#ffffff",fillColor:"#00a1de",fillOpacity:.3,strokeColor:"#00A1DE",strokeOpacity:1,strokeWidth:2}}}};var f=d(26575),v=d(90895),y=d(86515),z=d(31465),C=d(60702),k=d(66861),E=d(48286),w=d(92234);class L{static \u0275fac=function(t){return new(t||L)};static \u0275mod=e.oAB({type:L});static \u0275inj=e.cJS({imports:[f.ez]})}var Te=d(13228),ve=d(78128),ke=d(96355);class I{static \u0275fac=function(t){return new(t||I)};static \u0275mod=e.oAB({type:I});static \u0275inj=e.cJS({imports:[f.ez,v.ot,y.Ps,ve.Tx,Te.ie,ke.LD,C.AV,g.yR,c.BQ]})}var Se=d(75392);class D{static \u0275fac=function(t){return new(t||D)};static \u0275mod=e.oAB({type:D});static \u0275inj=e.cJS({imports:[f.ez,Se.g,y.Ps,v.ot,C.AV,ve.Tx,g.yR,c.Am,c.Po,c.AP,l.Ud7,l.tnH]})}class H{static \u0275fac=function(t){return new(t||H)};static \u0275mod=e.oAB({type:H});static \u0275inj=e.cJS({imports:[f.ez,y.Ps,v.ot,z.SJ,C.AV,g.yR,c.Am,c.O4,E.Zy,c.HL,l.Ud7,c.Gh,c.cQ]})}class W{static \u0275fac=function(t){return new(t||W)};static \u0275mod=e.oAB({type:W});static \u0275inj=e.cJS({imports:[f.ez,y.Ps,v.ot,g.yR,c.Am,c.Po]})}var J=d(28849),N=d(52484);class Y{static \u0275fac=function(t){return new(t||Y)};static \u0275mod=e.oAB({type:Y});static \u0275inj=e.cJS({imports:[g.yR,f.ez,J.u5,k.Is,c.Gh,c.k_,v.ot,C.AV,y.Ps,N.g0]})}class Q{static \u0275fac=function(t){return new(t||Q)};static \u0275mod=e.oAB({type:Q});static \u0275inj=e.cJS({imports:[f.ez,C.AV,v.ot,y.Ps,z.SJ,k.Is,g.PV,l.Ud7,l.ybB,l.FIR,l.y1m.forRoot(),l.TxX.forRoot(),c.AP,c.h5,c.mD,l.Jpu,c.Am,c.HL,c.qL,c.BQ,c.O4,w.fZ,I,D,W,H,L,E.Zy,E.jm,c.gr,c.t3,c.Gh,Y]})}var O=d(91594),Ee=d(71670),$e=d(13379),Fe=d(35357),he=d(13738),ye=d(55866);class R{updates;languageService;confirmDialogService;confirmOpened=!1;constructor(n,t,o){this.updates=n,this.languageService=t,this.confirmDialogService=o,n.isEnabled&&this.handleVersionUpdates()}checkForUpdates(){var n=this;this.updates.isEnabled&&(0,$e.F)(12e4).pipe((0,Fe.T)(1)).subscribe((0,Ee.Z)(function*(){try{const t=yield n.updates.checkForUpdate();console.log(t?"A new version is available.":"Already on the latest version.")}catch(t){console.error("Failed to check for updates:",t)}}))}modalUpdatePWA(){if(this.confirmOpened)return;const o=`${this.languageService.translate.instant("pwa.new-version-title")} ${this.languageService.translate.instant("pwa.new-version")}`;this.confirmDialogService.open(o).pipe((0,he.b)(()=>this.confirmOpened=!0)).subscribe(a=>{a&&(this.confirmOpened=!1,window.navigator.onLine?document.location.reload():(alert("Hors-ligne / Offline. Vous devez \xeatre en ligne pour mettre \xe0 jour l'application. You must be online to update the application."),setTimeout(()=>{this.modalUpdatePWA()},9e5)))})}handleVersionUpdates(){this.updates.versionUpdates.subscribe(n=>{switch(n.type){case"VERSION_DETECTED":console.log(`Downloading new app version: ${n.version.hash}`);break;case"VERSION_READY":console.log(`Current app version: ${n.currentVersion.hash}`),console.log(`New app version ready for use: ${n.latestVersion.hash}`),this.modalUpdatePWA();break;case"VERSION_INSTALLATION_FAILED":console.error(`Failed to install app version '${n.version.hash}': ${n.error}`)}})}static \u0275fac=function(t){return new(t||R)(e.LFG(ye.yO),e.LFG(g.TS),e.LFG(c.DN))};static \u0275prov=e.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"})}var A=d(25267),Be=d(22775),x=d(58071),U=d(33839),ge=d(84980),Ae=d(99422),Z=d(50655),$=d(46367),Ce=d(81527),be=d(73462),s=d(12501);function je(){return[(0,s.X$)("expansionPanelSize",[(0,s.SB)("full",(0,s.oB)({left:"5px","max-width":"100%"})),(0,s.SB)("notTriggered",(0,s.oB)({left:"5px",bottom:"5px","max-width":"100%"})),(0,s.SB)("notVisible",(0,s.oB)({display:"none"})),(0,s.SB)("mobile",(0,s.oB)({left:"calc(100% - 40px)"})),(0,s.SB)("reduced",(0,s.oB)({left:"405px","max-width":"calc(100% - 405px)"})),(0,s.SB)("reducedNotTriggered",(0,s.oB)({left:"405px",bottom:"5px","max-width":"calc(100% - 405px)"})),(0,s.eR)("* => *",(0,s.jt)("100ms"))]),(0,s.X$)("toastOffsetY",[(0,s.SB)("true",(0,s.oB)({bottom:"50px"})),(0,s.SB)("false",(0,s.oB)({bottom:"5px"}))])]}function ze(){return[(0,s.X$)("toastPanelMobileSidenav",[(0,s.SB)("true",(0,s.oB)({display:"none"})),(0,s.eR)("* => void",(0,s.jt)("0ms")),(0,s.eR)("* => *",(0,s.jt)("200ms"))]),(0,s.X$)("toastPanelOffsetX",[(0,s.SB)("fullStandard",(0,s.oB)({left:"45%"})),(0,s.SB)("standard",(0,s.oB)({left:"50%"})),(0,s.SB)("htmlDisplay",(0,s.oB)({left:"40%"})),(0,s.SB)("fullOffsetX",(0,s.oB)({left:"calc(45% + 202px)"})),(0,s.SB)("standardOffsetX",(0,s.oB)({left:"calc(50% + 202px)"})),(0,s.SB)("htmlDisplayOffsetX",(0,s.oB)({left:"calc(40% + 160px)"})),(0,s.eR)("fullStandard => fullOffsetX",(0,s.jt)("200ms")),(0,s.eR)("fullOffsetX => fullStandard",(0,s.jt)("200ms")),(0,s.eR)("standard => standardOffsetX",(0,s.jt)("200ms")),(0,s.eR)("standardOffsetX => standard",(0,s.jt)("200ms")),(0,s.eR)("htmlDisplay => htmlDisplayOffsetX",(0,s.jt)("200ms")),(0,s.eR)("htmlDisplayOffsetX => htmlDisplay",(0,s.jt)("200ms"))]),(0,s.X$)("toastPanelOffsetY",[(0,s.SB)("noExpansion",(0,s.oB)({bottom:"0"})),(0,s.SB)("expansionAndToastOpened",(0,s.oB)({bottom:"285px",zIndex:"999"})),(0,s.SB)("expansionAndToastClosed",(0,s.oB)({bottom:"285px",zIndex:"5"})),(0,s.SB)("expansionMaximizedAndToastOpened",(0,s.oB)({bottom:"500px",zIndex:"999"})),(0,s.SB)("expansionMaximizedAndToastClosed",(0,s.oB)({bottom:"500px",zIndex:"5"})),(0,s.eR)("noExpansion => noExpansion",(0,s.jt)("10ms")),(0,s.eR)("expansionAndToastOpened => expansionAndToastOpened",(0,s.jt)("200ms")),(0,s.eR)("expansionAndToastClosed => expansionAndToastClosed",(0,s.jt)("200ms")),(0,s.eR)("expansionMaximizedAndToastOpened => expansionMaximizedAndToastOpened",(0,s.jt)("200ms")),(0,s.eR)("expansionMaximizedAndToastClosed => expansionMaximizedAndToastClosed",(0,s.jt)("200ms"))])]}function Re(){return[(0,s.X$)("controlsOffsetY",[(0,s.SB)("close",(0,s.oB)({})),(0,s.SB)("firstRowFromBottom",(0,s.oB)({bottom:"5px"})),(0,s.SB)("firstRowFromBottom-expanded",(0,s.oB)({bottom:"285px"})),(0,s.SB)("firstRowFromBottom-expanded-maximized",(0,s.oB)({bottom:"500px"})),(0,s.SB)("secondRowFromBottom",(0,s.oB)({bottom:"47px"})),(0,s.SB)("thirdRowFromBottom",(0,s.oB)({bottom:"104px"})),(0,s.SB)("",(0,s.oB)({bottom:"calc(285px)"})),(0,s.SB)("secondRowFromBottom-expanded",(0,s.oB)({bottom:"calc(285px + 52px)"})),(0,s.SB)("thirdRowFromBottom-expanded",(0,s.oB)({bottom:"calc(285px + 104px)"})),(0,s.eR)("* => *",(0,s.jt)("200ms"))]),(0,s.X$)("mobileOffsetY",[(0,s.SB)("low",(0,s.oB)({bottom:"50px"})),(0,s.eR)("* => *",(0,s.jt)("200ms"))])]}function Ze(){return(0,s.X$)("controlStateX",[(0,s.SB)("left",(0,s.oB)({left:"60px"})),(0,s.SB)("right",(0,s.oB)({left:"465px"})),(0,s.eR)("* => *",(0,s.jt)("200ms"))])}function Le(){return(0,s.X$)("controlStateY",[(0,s.SB)("close",(0,s.oB)({})),(0,s.SB)("firstRowFromBottom",(0,s.oB)({bottom:"2px","margin-left":"0px"})),(0,s.SB)("firstRowFromBottom-expanded",(0,s.oB)({bottom:"285px","margin-left":"-55px"})),(0,s.SB)("firstRowFromBottom-expanded-maximized",(0,s.oB)({bottom:"500px","margin-left":"-55px"})),(0,s.eR)("* => *",(0,s.jt)("200ms"))])}function Ie(){return(0,s.X$)("mapStateX",[(0,s.SB)("left",(0,s.oB)({left:"0"})),(0,s.SB)("right",(0,s.oB)({left:"0"})),(0,s.eR)("* => *",(0,s.jt)("200ms"))])}function De(){return(0,s.X$)("mapStateY",[(0,s.SB)("*",(0,s.oB)({bottom:"0"})),(0,s.eR)("* => *",(0,s.jt)("200ms"))])}var Oe=d(54860),me=d(79736);class j{configService;storageService;nbVisit;showAgain;igoVersionDifferentFromStorage=!1;constructor(n,t){this.configService=n,this.storageService=t,this.igoVersionDifferentFromStorage=this.isVersionDifferentFromStorage(),this.setStorageConfig()}setStorageConfig(){this.nbVisit=Number(this.storageService.get("welcomeWindow_nbVisit")),this.nbVisit||(this.nbVisit=0),this.storageService.set("welcomeWindow_nbVisit",this.nbVisit+=1),this.storageService.set("version",this.configService.getConfig("version.lib"))}isVersionDifferentFromStorage(){return!(!this.storageService.get("version")||this.storageService.get("version")===this.configService.getConfig("version.lib"))}hasWelcomeWindow(){return!1===this.storageService.get("welcomeWindow_showAgain")||"false"===this.storageService.get("welcomeWindow_showAgain")?(this.nbVisit>=this.configService.getConfig("welcomeWindow.nbVisitToShowAgain")||!(!this.configService.getConfig("welcomeWindow.showAgainOnNewIGOVersion")||!this.igoVersionDifferentFromStorage))&&(this.storageService.set("welcomeWindow_nbVisit",0),this.storageService.remove("welcomeWindow_showAgain"),!0):typeof this.configService.getConfig("welcomeWindow.nbVisitToShow")<"u"&&this.nbVisit>this.configService.getConfig("welcomeWindow.nbVisitToShow")?(this.storageService.set("welcomeWindow_showAgain",!1),!1):this.configService.getConfig("welcomeWindow")}getConfig(){const n=new k.vA;return n.disableClose=!0,n.autoFocus=!0,n.maxWidth="500px",n}afterClosedWelcomeWindow(){this.storageService.set("welcomeWindow_showAgain",this.showAgain)}static \u0275fac=function(t){return new(t||j)(e.LFG(g.M$),e.LFG(g.V1))};static \u0275prov=e.Yz7({token:j,factory:j.\u0275fac,providedIn:"root"})}var F=d(5939);function He(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div",1)(1,"mat-toolbar",2)(2,"h4"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"span",3),e.TgZ(6,"label",4)(7,"input",5),e.NdJ("ngModelChange",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.showAgain=a)})("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.setShowAgain())}),e.qZA(),e._uU(8),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"div",6),e._UZ(11,"igo-custom-html",7),e.ALo(12,"async"),e.qZA(),e._UZ(13,"p"),e.TgZ(14,"div",8)(15,"igo-interactive-tour",9),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.closeWelcomeWindow())}),e.qZA(),e.TgZ(16,"button",10),e._uU(17),e.ALo(18,"translate"),e.qZA()()()}if(2&r){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,6,"welcomeWindow.title")),e.xp6(4),e.Q6J("ngModel",t.showAgain),e.xp6(1),e.hij(" ",e.lcZ(9,8,"welcomeWindow.notShowCheck")," "),e.xp6(3),e.Q6J("html",e.lcZ(12,10,t.html$)),e.xp6(4),e.Q6J("discoverTitleInLocale$",t.discoverTitleInLocale$),e.xp6(2),e.hij(" ",e.lcZ(18,12,"welcomeWindow.closeButton")," ")}}class G{dialog;welcomeWindowService;configService;languageService;showAgain=!1;discoverTitleInLocale$;title$$;html$=new x.X(void 0);constructor(n,t,o,a){this.dialog=n,this.welcomeWindowService=t,this.configService=o,this.languageService=a,this.discoverTitleInLocale$=(0,ge.of)(this.configService.getConfig("welcomeWindow.discoverTitleInLocale")||this.configService.getConfig("title"))}ngOnInit(){this.computeHtml()}closeWelcomeWindow(){this.dialog.closeAll()}computeHtml(){let n=0,t=!0,o=new Date(this.configService.getConfig("version.releaseDate"));const a=this.configService.getConfig("version.releaseDateApp");if(a){const p=new Date(a);isNaN(p.getDate())?(console.log("The releaseDateApp config is not a valid date format"),t=!1):(n=1,o=p)}let i="";if(t){let p=o.getDate()+n;p<10&&(p="0"+p);let h=o.getMonth()+1;h<10&&(h="0"+h),i=`${o.getFullYear()}-${h}-${p}`}else i=a;return this.title$$=this.languageService.translate.get(this.configService.getConfig("title")||"").pipe((0,me.U)(p=>this.languageService.translate.instant("welcomeWindow.html",{title:p,description:this.configService.getConfig("description")||"",version:this.configService.getConfig("version.app")||this.configService.getConfig("version.lib")||"",releaseDate:i||""}))).subscribe(p=>this.html$.next(p)),this.html$}setShowAgain(){this.welcomeWindowService.showAgain=this.showAgain}ngOnDestroy(){this.title$$&&this.title$$.unsubscribe()}static \u0275fac=function(t){return new(t||G)(e.Y36(k.uw),e.Y36(j),e.Y36(g.M$),e.Y36(g.TS))};static \u0275cmp=e.Xpm({type:G,selectors:[["app-welcome-window"]],decls:2,vars:3,consts:[["class","welcome-window",4,"ngIf"],[1,"welcome-window"],["color","primary"],[1,"spacer"],[1,"mat-body-2"],["id","doNotShowCheck","type","checkbox",3,"ngModel","ngModelChange","click"],["mat-dialog-content","",1,"text"],[3,"html"],[1,"button-container"],["id","tour-button","styleButton","raised",3,"discoverTitleInLocale$","click"],["mat-raised-button","","color","primary","mat-dialog-close","",1,"button-close"]],template:function(t,o){1&t&&(e.YNc(0,He,19,14,"div",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,o.html$))},dependencies:[f.O5,J.Wl,J.JJ,J.On,k.ZT,k.xY,c.bB,c.n_,v.lW,N.Ye,F.X$,f.Ov],styles:["[_nghost-%COMP%]{display:block;padding:16px}[_nghost-%COMP%]   .spacer[_ngcontent-%COMP%]{flex:1 1 auto}[_nghost-%COMP%]   .button-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around}[_nghost-%COMP%]   #doNotShowCheck[_ngcontent-%COMP%]{margin-right:5px}[_nghost-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:revert}[_nghost-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:0}[_nghost-%COMP%]   .mat-mdc-dialog-container[_ngcontent-%COMP%]{z-index:1000;box-shadow:0 0 0 1000em #0009;transform:translate(-50%)}[_nghost-%COMP%]     .custom-html{padding:0!important}"]})}var ue=d(18625);function We(r="150ms",n="300ms",t="ease-in-out"){return(0,s.X$)("showContent",[(0,s.SB)("true",(0,s.oB)({opacity:1})),(0,s.SB)("false",(0,s.oB)({opacity:0})),(0,s.eR)("false => true",(0,s.jt)(`${r} ${n} ${t}`)),(0,s.eR)("true => false",(0,s.jt)("0ms"))])}function Je(r,n){1&r&&e._UZ(0,"mat-icon",5)}function Ne(r,n){1&r&&e._UZ(0,"mat-icon",6)}const Ye=["*"];class q{get expanded(){return this._expanded}set expanded(n){n!==this._expanded&&(this._expanded=n,this.expandedChange.emit(this._expanded))}_expanded;expandedChange=new e.vpe;get hasExpandedClass(){return this.expanded}constructor(){}onToggleClick(){this.expanded=!this.expanded}static \u0275fac=function(t){return new(t||q)};static \u0275cmp=e.Xpm({type:q,selectors:[["app-expansion-panel-header"]],hostVars:2,hostBindings:function(t,o){2&t&&e.ekj("app-expansion-panel-header-expanded",o.hasExpandedClass)},inputs:{expanded:"expanded"},outputs:{expandedChange:"expandedChange"},ngContentSelectors:Ye,decls:7,vars:5,consts:[[1,"app-expansion-panel-trigger-container","mat-elevation-z2"],["mat-icon-button","","color","primary",3,"matTooltip","click"],["svgIcon","launch",4,"ngIf"],["style","transform: rotate(180deg)","svgIcon","launch",4,"ngIf"],[1,"app-expansion-panel-content"],["svgIcon","launch"],["svgIcon","launch",2,"transform","rotate(180deg)"]],template:function(t,o){1&t&&(e.F$t(),e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return o.onToggleClick()}),e.ALo(2,"translate"),e.YNc(3,Je,1,0,"mat-icon",2),e.YNc(4,Ne,1,0,"mat-icon",3),e.qZA()(),e.TgZ(5,"div",4),e.Hsn(6),e.qZA()),2&t&&(e.xp6(1),e.Q6J("matTooltip",e.lcZ(2,3,o.expanded?"workspace.close":"workspace.open")),e.xp6(2),e.Q6J("ngIf",!o.expanded),e.xp6(1),e.Q6J("ngIf",o.expanded))},dependencies:[f.O5,v.RK,y.Hw,C.gM,F.X$],styles:["[_nghost-%COMP%]{border-bottom:2px solid aliceblue;display:flex;align-items:center}[_nghost-%COMP%]   button[_ngcontent-%COMP%]{width:40px;height:40px;padding:8px}.app-expansion-panel-trigger-container[_ngcontent-%COMP%]{display:flex}.app-expansion-panel-content[_ngcontent-%COMP%]{display:flex;height:100%}"],changeDetection:0})}const Qe=[[["","expansionPanelHeader",""]],"*"],Ue=["[expansionPanelHeader]","*"];class V{get expanded(){return this._expanded}set expanded(n){n!==this._expanded&&(this._expanded=n,this.expandedChange.emit(this._expanded))}_expanded;maximized=!1;get backdropShown(){return this._backdropShown}set backdropShown(n){this._backdropShown=n}_backdropShown;expandedChange=new e.vpe;get hasExpandedClass(){return this.expanded}get hasExpandedFullClass(){return this.expanded&&this.maximized}constructor(){}onBackdropClick(){this.expanded=!1,this.backdropShown=!1}static \u0275fac=function(t){return new(t||V)};static \u0275cmp=e.Xpm({type:V,selectors:[["app-expansion-panel"]],hostVars:4,hostBindings:function(t,o){2&t&&e.ekj("app-expansion-panel-expanded",o.hasExpandedClass)("app-expansion-panel-expanded-maximized",o.hasExpandedFullClass)},inputs:{expanded:"expanded",maximized:"maximized",backdropShown:"backdropShown"},outputs:{expandedChange:"expandedChange"},ngContentSelectors:Ue,decls:7,vars:3,consts:[[1,"app-expansion-panel-container"],[3,"shown","click"],[3,"expanded","expandedChange"],[1,"app-expansion-panel-content","mat-elevation-z4"]],template:function(t,o){1&t&&(e.F$t(Qe),e.TgZ(0,"div")(1,"div",0)(2,"igo-backdrop",1),e.NdJ("click",function(){return o.onBackdropClick()}),e.qZA(),e.TgZ(3,"app-expansion-panel-header",2),e.NdJ("expandedChange",function(i){return o.expanded=i}),e.Hsn(4),e.qZA(),e.TgZ(5,"div",3),e.Hsn(6,1),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("shown",o.backdropShown),e.xp6(1),e.Q6J("expanded",o.expanded),e.xp6(2),e.Q6J("@showContent",o.expanded))},dependencies:[c.qv,q],styles:["[_nghost-%COMP%]{-o-box-shadow:0px 0px 2px 0px #dddddd;box-shadow:0 0 2px #ddd}[_nghost-%COMP%]{display:block;background-color:#fff;height:40px;width:40px;transition:height .2s cubic-bezier(.4,0,.2,1),width .2s cubic-bezier(.4,0,.2,1)}[_nghost-%COMP%]:not(.app-expansion-panel-expanded)     .app-expansion-panel-content{display:none}.app-expansion-panel-expanded[_nghost-%COMP%]{height:281px;width:100%;z-index:6}.app-expansion-panel-expanded[_nghost-%COMP%]     .app-expansion-panel-trigger-container{box-shadow:none}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){.app-expansion-panel-expanded.footer[_nghost-%COMP%]{margin-bottom:48px}}.app-expansion-panel-container[_ngcontent-%COMP%]{height:100%;width:100%}.app-expansion-panel-expanded-maximized[_nghost-%COMP%]{height:496px;width:100%;z-index:6}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){.app-expansion-panel-expanded-maximized.footer[_nghost-%COMP%]{margin-bottom:48px}}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{height:100%;width:100%}.app-expansion-panel-content[_ngcontent-%COMP%]{height:calc(100% - 50px);overflow:auto;padding:5px}igo-backdrop[_ngcontent-%COMP%]    >div{z-index:120!important}.app-expansion-panel-content[_ngcontent-%COMP%]     .igo-entity-table-with-selection{width:100%}"],data:{animation:[We()]},changeDetection:0})}var Ge=d(52148),qe=d(28746);function Ve(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"button",16),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.zoomTo())}),e.ALo(1,"translate"),e.ALo(2,"async"),e._UZ(3,"mat-icon",17),e.ALo(4,"async"),e.ALo(5,"async"),e.qZA()}if(2&r){const t=e.oxw(3);e.Q6J("matTooltip",e.lcZ(1,3,e.lcZ(2,5,t.isSelectedResultOutOfView$)?"toastPanel.zoomOnFeatureTooltipOutOfView":"toastPanel.zoomOnFeatureTooltip")),e.xp6(3),e.Q6J("matBadge",e.lcZ(4,7,t.isSelectedResultOutOfView$)?"!":"")("matBadgeHidden",!0!==e.lcZ(5,9,t.isSelectedResultOutOfView$))}}function Xe(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.handleLayer())}),e.ALo(1,"translate"),e.ALo(2,"async"),e.ALo(3,"async"),e._UZ(4,"mat-icon",19),e.ALo(5,"async"),e.qZA()}if(2&r){const t=e.oxw(3);e.Q6J("matTooltip",e.lcZ(1,3,e.lcZ(2,5,t.potententialLayerisAdded$)?"toastPanel.removeLayer":"toastPanel.addLayer"))("color",e.lcZ(3,7,t.potententialLayerisAdded$)?"warn":""),e.xp6(4),e.Q6J("svgIcon",e.lcZ(5,9,t.potententialLayerisAdded$)?"delete":"plus")}}function Ke(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.previousResult())}),e.ALo(1,"translate"),e._UZ(2,"mat-icon",21),e.qZA()}if(2&r){const t=e.oxw(3);e.Q6J("disabled",t.results[0].meta.id===t.resultSelected$.value.meta.id)("matTooltip",e.lcZ(1,2,"toastPanel.previousFeatureTooltip"))}}function et(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.nextResult())}),e.ALo(1,"translate"),e._UZ(2,"mat-icon",23),e.qZA()}if(2&r){const t=e.oxw(3);e.Q6J("disabled",t.results[t.results.length-1].meta.id===t.resultSelected$.value.meta.id)("matTooltip",e.lcZ(1,2,"toastPanel.nextFeatureTooltip"))}}function tt(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.resizeWindows())}),e.ALo(1,"translate"),e.ALo(2,"async"),e._UZ(3,"mat-icon",19),e.qZA()}if(2&r){const t=e.oxw(3);e.Q6J("matTooltip",e.lcZ(1,2,e.lcZ(2,4,t.fullExtent$)?"toastPanel.standardExtentTooltip":"toastPanel.fullExtentTooltip")),e.xp6(3),e.s9C("svgIcon",t.iconResizeWindows)}}function nt(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"igo-feature-details",25),e.NdJ("htmlDisplayEvent",function(a){e.CHM(t);const i=e.oxw(3);return e.KtG(i.setHtmlDisplay(a))}),e.qZA()}if(2&r){const t=e.oxw(3);e.Q6J("map",t.map)("feature",t.resultSelected$.value.data)}}function ot(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"igo-search-results",26),e.NdJ("resultFocus",function(a){e.CHM(t);const i=e.oxw(3);return e.KtG(i.focusResult(a))})("resultUnfocus",function(a){e.CHM(t);const i=e.oxw(3);return e.KtG(i.unfocusResult(a,!0))})("resultSelect",function(a){e.CHM(t);const i=e.oxw(3);return e.KtG(i.selectResult(a))}),e.qZA()}if(2&r){const t=e.oxw(3);e.Q6J("map",t.map)("store",t.store)("showIcons",!0)("withZoomButton",t.withZoomButton)("tabsMode",t.tabsMode)}}function at(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"igo-panel",3),e.NdJ("click",function(a){e.CHM(t);const i=e.oxw(2);return e.KtG(i.onToggleClick(a))})("keydown",function(a){e.CHM(t);const i=e.oxw(2);return e.KtG(i.handleKeyboardEvent(a))}),e.ALo(1,"translate"),e._UZ(2,"igo-actionbar",4),e.YNc(3,Ve,6,11,"button",5),e.YNc(4,Xe,6,11,"button",6),e.YNc(5,Ke,3,4,"button",7),e.YNc(6,et,3,4,"button",8),e.YNc(7,tt,4,6,"button",9),e.TgZ(8,"button",10),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.clear())}),e._UZ(9,"mat-icon",11),e.qZA(),e.TgZ(10,"div",12,13),e.YNc(12,nt,1,2,"igo-feature-details",14),e.YNc(13,ot,1,5,"igo-search-results",15),e.qZA()()}if(2&r){const t=e.oxw(2);e.Q6J("ngClass",t.getClassPanel())("id",t.setHeighPanelTabsMode())("title",t.resultSelected$.value?t.getTitle(t.resultSelected$.value):e.lcZ(1,16,"toastPanel.title")),e.xp6(2),e.Q6J("store",t.actionStore)("withIcon",!0)("icon",t.icon)("withTitle","overlay"===t.actionbarMode)("horizontal",!0)("mode",t.actionbarMode),e.xp6(1),e.Q6J("ngIf",t.resultSelected$.value),e.xp6(1),e.Q6J("ngIf",t.hasGeoService()),e.xp6(1),e.Q6J("ngIf",t.resultSelected$.value),e.xp6(1),e.Q6J("ngIf",t.resultSelected$.value),e.xp6(1),e.Q6J("ngIf",t.opened&&t.isDesktop()),e.xp6(5),e.Q6J("ngIf",t.resultSelected$.value),e.xp6(1),e.Q6J("ngIf",!t.resultSelected$.value)}}function it(r,n){if(1&r&&(e.YNc(0,at,14,18,"igo-panel",2),e.ALo(1,"async")),2&r){const t=e.oxw();e.Q6J("ngIf",e.lcZ(1,1,t.store.entities$))}}function st(r,n){}function rt(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div",27),e.NdJ("swipeleft",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.swipe(a.type))})("swiperight",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.swipe(a.type))})("swipeup",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.swipe(a.type))})("swipedown",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.swipe(a.type))}),e.YNc(1,st,0,0,"ng-template",28),e.qZA()}if(2&r){e.oxw();const t=e.MAs(1);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}class P{mediaService;languageService;storageState;queryState;workspaceState;configService;propertyTypeDetectorService;layerService;static SWIPE_ACTION={RIGHT:"swiperight",LEFT:"swipeleft",UP:"swipeup",DOWN:"swipedown"};tabsMode=!1;get storageService(){return this.storageState.storageService}get map(){return this._map}set map(n){this._map=n}_map;get store(){return this._store}set store(n){this._store=n,this.store.entities$.subscribe(t=>{this.unselectResult()})}_store;get opened(){return this._opened}set opened(n){n===!this._opened&&(this._opened=n,this.storageService.set("toastOpened",n,g.fO.SESSION),this.openedChange.emit(n))}_opened=!0;hasFeatureEmphasisOnSelection=!1;get zoomAuto(){return this._zoomAuto}set zoomAuto(n){n===!this._zoomAuto&&(this._zoomAuto=n,this.zoomAuto$.next(n),this.storageService.set("zoomAuto",n))}_zoomAuto=!1;get fullExtent(){return this._fullExtent}set fullExtent(n){n===!this._fullExtent&&(this._fullExtent=n,this.fullExtent$.next(n),this.fullExtentEvent.emit(n),this.storageService.set("fullExtent",n))}_fullExtent=!1;potententialLayerToAdd$=new x.X(void 0);potententialLayerisAdded$=new x.X(!1);fullExtent$=new x.X(this.fullExtent);isHtmlDisplay=!1;iconResizeWindows="";icon="menu";actionStore=new c.Dn([]);actionbarMode=c.rO.Overlay;multiple$=new x.X(!1);isResultSelected$=new x.X(!1);isSelectedResultOutOfView$=new x.X(!1);isSelectedResultOutOfView$$;storageChange$$;initialized=!0;format=new ue.Z;resultOrResolution$$;focusedResult$=new x.X(void 0);abstractFocusedOrSelectedResult;withZoomButton=!0;zoomAuto$=new x.X(!1);openedChange=new e.vpe;fullExtentEvent=new e.vpe;windowHtmlDisplayEvent=new e.vpe;resultSelected$=new x.X(void 0);getClassPanel(){return{"app-toast-panel-opened":this.opened&&!this.fullExtent&&!this.isHtmlDisplay,"app-full-toast-panel-opened":this.opened&&this.fullExtent&&!this.isHtmlDisplay,"app-toast-panel-html":this.opened&&!this.fullExtent&&this.resultSelected$.value&&this.isHtmlDisplay,"app-toast-panel-html-large":this.opened&&this.fullExtent&&this.resultSelected$.value&&this.isHtmlDisplay,"app-toast-panel-collapsed":!this.opened&&!this.fullExtent&&!this.isHtmlDisplay,"app-full-toast-panel-collapsed":!this.opened&&this.fullExtent&&!this.isHtmlDisplay,"app-toast-panel-html-collapsed":!this.opened&&this.isHtmlDisplay}}setHeighPanelTabsMode(){return this.resultSelected$.value||!this.opened?"":!this.tabsMode||this.fullExtent||this.isHtmlDisplay?this.tabsMode&&this.opened&&this.fullExtent&&!this.isHtmlDisplay?"app-full-toast-panel-opened-max-height":void 0:"app-toast-panel-opened-max-height"}get displayStyle(){return this.results.length?(1===this.results.length&&this.initialized&&this.selectResult(this.results[0]),"visible"):"hidden"}onEscapeHandler(n){this.clear()}onBackHandler(n){this.unselectResult()}onZoomHandler(n){if(!0===this.isResultSelected$.getValue()){const t=this.format.readFeature(this.resultSelected$.getValue().data,{dataProjection:this.resultSelected$.getValue().data.projection,featureProjection:this.map.projection});(0,l.ybU)(this.map.viewController,[t],l.bAZ.Default)}}get results(){return this.store.all()}get multiple(){return this.results.length?this.multiple$.next(!0):this.multiple$.next(!1),this.multiple$}constructor(n,t,o,a,i,p,h,m){this.mediaService=n,this.languageService=t,this.storageState=o,this.queryState=a,this.workspaceState=i,this.configService=p,this.propertyTypeDetectorService=h,this.layerService=m,this.tabsMode=!!this.configService.getConfig("queryTabs")&&this.configService.getConfig("queryTabs"),this.opened=this.storageService.get("toastOpened"),this.zoomAuto=this.storageService.get("zoomAuto"),this.fullExtent=this.storageService.get("fullExtent"),this.setResizeWindowIcon()}monitorResultOutOfView(){this.isSelectedResultOutOfView$$=(0,U.a)([this.map.viewController.state$,this.resultSelected$]).pipe((0,Z.b)(100)).subscribe(n=>{const t=n[1];if(!t)return void this.isSelectedResultOutOfView$.next(!1);const o=(0,l.zMd)(t.data,this.map.projection),a=(0,l.HgW)([o],this.map.viewProjection);this.isSelectedResultOutOfView$.next((0,l.brJ)(this.map.getExtent(),a))})}ngOnInit(){let n,t;this.store.entities$.subscribe(()=>{this.initialized=!0}),this.monitorResultOutOfView(),this.hasFeatureEmphasisOnSelection&&(this.resultOrResolution$$=(0,U.a)([this.focusedResult$.pipe((0,he.b)(o=>{n=o,t="focused"})),this.resultSelected$.pipe((0,he.b)(o=>{n=o,t="selected"})),this.map.viewController.resolution$,this.store.entities$]).subscribe(()=>this.buildResultEmphasis(n,t))),this.storageChange$$=this.storageService.storageChange$.pipe((0,$.n)(o=>"zoomAuto"!==o.key)).subscribe(o=>{this.zoomAuto=o.currentValue}),this.actionStore.load([{id:"list",title:this.languageService.translate.instant("toastPanel.backToList"),icon:"format-list-bulleted-square",tooltip:this.languageService.translate.instant("toastPanel.listButton"),display:()=>this.isResultSelected$,handler:()=>{this.unselectResult()}},{id:"zoomFeature",title:this.languageService.translate.instant("toastPanel.zoomOnFeature"),icon:"magnify-plus-outline",tooltip:this.languageService.translate.instant("toastPanel.zoomOnFeatureTooltip"),display:()=>this.isResultSelected$,handler:()=>{const o=this.format.readFeature(this.resultSelected$.getValue().data,{dataProjection:this.resultSelected$.getValue().data.projection,featureProjection:this.map.projection});(0,l.ybU)(this.map.viewController,[o],l.bAZ.Zoom)}},{id:"zoomResults",title:this.languageService.translate.instant("toastPanel.zoomOnFeatures"),tooltip:this.languageService.translate.instant("toastPanel.zoomOnFeaturesTooltip"),icon:"magnify-scan",availability:()=>this.multiple,handler:()=>{const o=[];for(const a of this.store.all()){const i=this.format.readFeature(a.data,{dataProjection:a.data.projection,featureProjection:this.map.projection});o.push(i)}(0,l.ybU)(this.map.viewController,o,l.bAZ.Zoom)}},{id:"zoomAuto",title:this.languageService.translate.instant("toastPanel.zoomAuto"),tooltip:this.languageService.translate.instant("toastPanel.zoomAutoTooltip"),checkbox:!0,checkCondition:this.zoomAuto$,handler:()=>{this.zoomAuto=!this.zoomAuto,this.zoomAuto&&!0===this.isResultSelected$.value&&this.selectResult(this.resultSelected$.getValue())}},{id:"fullExtent",title:this.languageService.translate.instant("toastPanel.fullExtent"),tooltip:this.languageService.translate.instant("toastPanel.fullExtentTooltip"),icon:"arrow-expand",display:()=>this.fullExtent$.pipe((0,me.U)(o=>!o&&!this.isDesktop())),handler:()=>{this.fullExtent=!0}},{id:"standardExtent",title:this.languageService.translate.instant("toastPanel.standardExtent"),tooltip:this.languageService.translate.instant("toastPanel.standardExtentTooltip"),icon:"arrow-collapse",display:()=>this.fullExtent$.pipe((0,me.U)(o=>o&&!this.isDesktop())),handler:()=>{this.fullExtent=!1}}]),this.computeFeatureGeoServiceStatus(),(0,U.a)([this.resultSelected$,this.map.layers$]).subscribe(()=>{this.computeFeatureGeoServiceStatus()})}ngOnDestroy(){this.resultOrResolution$$&&this.resultOrResolution$$.unsubscribe(),this.isSelectedResultOutOfView$$&&this.isSelectedResultOutOfView$$.unsubscribe(),this.storageChange$$&&this.storageChange$$.unsubscribe()}buildResultEmphasis(n,t){if(this.clearFeatureEmphasis(),!n||"selected"===t&&this.zoomAuto)return;const a=(0,l.zMd)(n.data,this.map.projection).getGeometry();if((0,l.fle)(this.map.viewController,a.getExtent(),.0025)){const i=a.getExtent(),p=i[0]+(i[2]-i[0])/2,h=i[1]+(i[3]-i[1])/2,m=new Ge.Z({name:"abstractFocusedOrSelectedResult",geometry:new qe.Z([p,h])});this.abstractFocusedOrSelectedResult=(0,l.ve2)(m,this.map.projection),this.abstractFocusedOrSelectedResult.meta.style=(0,l.DQ6)(Object.assign({},{feature:this.abstractFocusedOrSelectedResult},"selected"===t?this.queryState.queryOverlayStyleSelection:this.queryState.queryOverlayStyleFocus)),this.abstractFocusedOrSelectedResult.meta.style.setZIndex(2e3),this.map.queryResultsOverlay.addFeature(this.abstractFocusedOrSelectedResult,l.bAZ.None)}}clearFeatureEmphasis(){this.abstractFocusedOrSelectedResult&&(this.map.queryResultsOverlay.removeFeature(this.abstractFocusedOrSelectedResult),this.abstractFocusedOrSelectedResult=void 0)}getTitle(n){return(0,c.TF)(n)}focusResult(n){this.focusedResult$.next(n),this.map.queryResultsOverlay.removeFeature(n.data),n.data.meta.style=(0,l.DQ6)(Object.assign({},{feature:n.data},this.queryState.queryOverlayStyleFocus)),n.data.meta.style.setZIndex(2e3),this.map.queryResultsOverlay.addFeature(n.data,l.bAZ.None)}unfocusResult(n,t){this.focusedResult$.next(void 0),(t||!this.store.state.get(n).focused)&&(this.map.queryResultsOverlay.removeFeature(n.data),n.data.meta.style=(0,l.eU6)(Object.assign({},{feature:n.data},this.queryState.queryOverlayStyle)),n.data.meta.style.setZIndex(void 0),this.map.queryResultsOverlay.addFeature(n.data,l.bAZ.None))}selectResult(n){this.store.state.update(n,{focused:!0,selected:!0},!0),this.resultSelected$.next(n),n.data.properties&&"iframe"===n.data.properties.target?this.setHtmlDisplay(!0):this.setHtmlDisplay(!1);const t=[];for(const o of this.store.all())o.meta.id===n.meta.id?(o.data.meta.style=(0,l.DQ6)(Object.assign({},{feature:o.data},this.queryState.queryOverlayStyleSelection)),o.data.meta.style.setZIndex(2e3)):o.data.meta.style=(0,l.eU6)(Object.assign({},{feature:o.data},this.queryState.queryOverlayStyle)),t.push(o.data);if(this.map.queryResultsOverlay.removeFeatures(t),this.map.queryResultsOverlay.addFeatures(t,l.bAZ.None),this.zoomAuto){const o=this.format.readFeature(this.resultSelected$.getValue().data,{dataProjection:this.resultSelected$.getValue().data.projection,featureProjection:this.map.projection});(0,l.ybU)(this.map.viewController,[o],l.bAZ.Default)}this.isResultSelected$.next(!0),this.initialized=!1}unselectResult(){this.resultSelected$.next(void 0),this.isResultSelected$.next(!1),this.setHtmlDisplay(!1),this.store.state.clear();const n=[];for(const t of this.store.all())t.data.meta.style=(0,l.eU6)(Object.assign({},{feature:t.data},this.queryState.queryOverlayStyle)),n.push(t.data);this.map.queryResultsOverlay.setFeatures(n,l.bAZ.None,"map")}handleWksSelection(){const n=this.store.entities$.getValue(),t=[...new Set(n.map(a=>a.source.title))],o=this.workspaceState.store.entities$.getValue();o.length&&o.filter(i=>t.includes(i.title)).map(i=>{i.entityStore.state.updateMany(i.entityStore.view.all(),{selected:!1})})}clear(){this.handleWksSelection(),this.clearFeatureEmphasis(),this.map.queryResultsOverlay.clear(),this.store.clear(),this.unselectResult(),this.setHtmlDisplay(!1)}isMobile(){return this.mediaService.getMedia()===g.pU.Mobile}isDesktop(){return this.mediaService.isDesktop()}handleKeyboardEvent(n){37===n.keyCode?this.previousResult():39===n.keyCode&&this.nextResult()}previousResult(){if(!this.resultSelected$.value)return;let n=this.results.indexOf(this.resultSelected$.value);const t=this.results[--n];t&&this.selectResult(t)}nextResult(){if(!this.resultSelected$.value)return;let n=this.results.indexOf(this.resultSelected$.value);const t=this.results[++n];t&&this.selectResult(t)}hasGeoService(){return this.getGeoServices().length}getGeoServices(){const n=this.resultSelected$.getValue();if(!n)return[];const t=[],o=Object.keys(n.data.properties);return Object.entries(n.data.properties).forEach(a=>{const[i,p]=a,h=this.propertyTypeDetectorService.getGeoService(p,o),m=Object.assign({},h,{propertyForUrl:void 0});h&&(m.propertyForUrl=i,t.push(m))}),t}handleLayer(){const n=this.map.layers.map(o=>o.id);let t=this.potententialLayerToAdd$.getValue();if(t||this.computeFeatureGeoServiceStatus(),t=this.potententialLayerToAdd$.getValue(),n.includes(t.id)){const o=this.map.getLayerById(t.id);o&&(this.map.removeLayer(o),this.potententialLayerisAdded$.next(!1))}else this.layerService.createAsyncLayer(t.sourceOptions).subscribe(o=>{this.map.layersAddedByClick$.next([o]),this.map.addLayer(o),this.potententialLayerisAdded$.next(!0)})}computeFeatureGeoServiceStatus(){const n=this.resultSelected$.getValue();if(!n)return;const t=this.getGeoServices();if(t.length){const o=t[0],a=this.computeSourceOptionsFromProperties(n.data.properties,o),i=(0,l.lZj)(a.sourceOptions);this.potententialLayerToAdd$.next({id:i,sourceOptions:a});const p=this.map.layers.map(h=>h.id);this.potententialLayerisAdded$.next(!!p.includes(i))}}computeSourceOptionsFromProperties(n,t){let i=n[Object.keys(n).filter(_=>t.propertiesForLayerName.includes(_))[0]];const p=n[t.propertyForUrl];let m,h=i;return["arcgisrest","imagearcgisrest","tilearcgisrest"].includes(t.type)&&(m=i,h=void 0),O.gb.removeUndefined({sourceOptions:{type:t.type||"wms",url:p,optionsFromCapabilities:!0,optionsFromApi:!0,params:{LAYERS:h,LAYER:m}}})}zoomTo(){const n=this.format.readFeature(this.resultSelected$.getValue().data,{dataProjection:this.resultSelected$.getValue().data.projection,featureProjection:this.map.projection});(0,l.ybU)(this.map.viewController,[n],l.bAZ.Zoom)}swipe(n){n===P.SWIPE_ACTION.RIGHT?this.previousResult():n===P.SWIPE_ACTION.LEFT?this.nextResult():n===P.SWIPE_ACTION.UP?this.opened=!0:n===P.SWIPE_ACTION.DOWN&&(this.opened=!1)}onToggleClick(n){"igo-panel-title"===n.target.className&&(this.opened=!this.opened)}onTriggerAction(n){const t=n.args||[];n.handler(...t)}setHtmlDisplay(n){!0===n?(this.isHtmlDisplay=!0,this.windowHtmlDisplayEvent.emit(!0)):(this.isHtmlDisplay=!1,this.windowHtmlDisplayEvent.emit(!1))}isHtmlAndDesktop(){return!(!this.isHtmlDisplay||!this.isDesktop())}setResizeWindowIcon(){this.fullExtent?this.iconResizeWindows="arrow-collapse":this.iconResizeWindows="arrow-expand"}resizeWindows(){this.storageService.set("fullExtent",!this.fullExtent),this.fullExtent?this.reduceWindow():this.enlargeWindows()}reduceWindow(){this.fullExtent=!1,this.setResizeWindowIcon()}enlargeWindows(){this.fullExtent=!0,this.setResizeWindowIcon()}static \u0275fac=function(t){return new(t||P)(e.Y36(g.yJ),e.Y36(g.TS),e.Y36(w.I2),e.Y36(w.Tb),e.Y36(w.gV),e.Y36(g.M$),e.Y36(l.jhH),e.Y36(l.ITu))};static \u0275cmp=e.Xpm({type:P,selectors:[["app-toast-panel"]],hostVars:2,hostBindings:function(t,o){1&t&&e.NdJ("keydown.escape",function(i){return o.onEscapeHandler(i)},!1,e.evT)("keydown.backspace",function(i){return o.onBackHandler(i)},!1,e.evT)("keydown.z",function(i){return o.onZoomHandler(i)},!1,e.evT),2&t&&e.Udp("visibility",o.displayStyle)},inputs:{map:"map",store:"store",opened:"opened",hasFeatureEmphasisOnSelection:"hasFeatureEmphasisOnSelection"},outputs:{openedChange:"openedChange",fullExtentEvent:"fullExtentEvent",windowHtmlDisplayEvent:"windowHtmlDisplayEvent"},decls:3,vars:2,consts:[["toast",""],["class","swipe-fix",3,"swipeleft","swiperight","swipeup","swipedown",4,"ngIf","ngIfElse"],["tabindex","0",3,"ngClass","id","title","click","keydown",4,"ngIf"],["tabindex","0",3,"ngClass","id","title","click","keydown"],["id","igo-actionbar","panelLeftButton","",3,"store","withIcon","icon","withTitle","horizontal","mode"],["mat-icon-button","","igoStopPropagation","","panelLeftButton","","matTooltipShowDelay","500",3,"matTooltip","click",4,"ngIf"],["mat-icon-button","","igoStopPropagation","","panelLeftButton","","tooltip-position","below","matTooltipShowDelay","500",3,"matTooltip","color","click",4,"ngIf"],["mat-icon-button","","igoStopPropagation","","panelLeftButton","","matTooltipShowDelay","500",3,"disabled","matTooltip","click",4,"ngIf"],["mat-icon-button","","igoStopPropagation","","panelRightButton","","matTooltipShowDelay","500",3,"disabled","matTooltip","click",4,"ngIf"],["mat-icon-button","","igoStopPropagation","","panelRightButton","","matTooltipShowDelay","500",3,"matTooltip","click",4,"ngIf"],["mat-icon-button","","igoStopPropagation","","panelRightButton","",3,"click"],["svgIcon","close"],[1,"toast-content"],["content",""],[3,"map","feature","htmlDisplayEvent",4,"ngIf"],[3,"map","store","showIcons","withZoomButton","tabsMode","resultFocus","resultUnfocus","resultSelect",4,"ngIf"],["mat-icon-button","","igoStopPropagation","","panelLeftButton","","matTooltipShowDelay","500",3,"matTooltip","click"],["aria-hidden","false","matBadgeColor","accent","matBadgeSize","small","svgIcon","magnify-plus-outline",3,"matBadge","matBadgeHidden"],["mat-icon-button","","igoStopPropagation","","panelLeftButton","","tooltip-position","below","matTooltipShowDelay","500",3,"matTooltip","color","click"],[3,"svgIcon"],["mat-icon-button","","igoStopPropagation","","panelLeftButton","","matTooltipShowDelay","500",3,"disabled","matTooltip","click"],["svgIcon","chevron-left"],["mat-icon-button","","igoStopPropagation","","panelRightButton","","matTooltipShowDelay","500",3,"disabled","matTooltip","click"],["svgIcon","chevron-right"],["mat-icon-button","","igoStopPropagation","","panelRightButton","","matTooltipShowDelay","500",3,"matTooltip","click"],[3,"map","feature","htmlDisplayEvent"],[3,"map","store","showIcons","withZoomButton","tabsMode","resultFocus","resultUnfocus","resultSelect"],[1,"swipe-fix",3,"swipeleft","swiperight","swipeup","swipedown"],[3,"ngTemplateOutlet"]],template:function(t,o){if(1&t&&(e.YNc(0,it,2,3,"ng-template",null,0,e.W1O),e.YNc(2,rt,2,1,"div",1)),2&t){const a=e.MAs(1);e.xp6(2),e.Q6J("ngIf",o.isMobile())("ngIfElse",a)}},dependencies:[f.mk,f.O5,f.tP,Se.k,y.Hw,v.RK,C.gM,c.yX,c._u,c.nv,l.C6c,l.GYD,f.Ov,F.X$],styles:["[_nghost-%COMP%]{-o-box-shadow:0px 0px 2px 0px #dddddd;box-shadow:0 0 2px #ddd}[_nghost-%COMP%]{background-color:#fff;transition:height .28s cubic-bezier(.4,0,.2,1);padding:5px}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){[_nghost-%COMP%]{width:100%;min-width:100%}}[_nghost-%COMP%]   igo-panel[_ngcontent-%COMP%]     .igo-panel-header:hover{cursor:pointer}[_nghost-%COMP%]   igo-panel[_ngcontent-%COMP%]{height:100%;outline:none}[_nghost-%COMP%]   igo-panel[_ngcontent-%COMP%]     .igo-panel-header   [panelleftbutton], [_nghost-%COMP%]   igo-panel[_ngcontent-%COMP%]     .igo-panel-header   [panelrightbutton]{margin:0}[_nghost-%COMP%]   igo-panel[_ngcontent-%COMP%]     .igo-panel-content{-webkit-user-select:auto!important;user-select:auto!important}[_nghost-%COMP%]   igo-feature-details[_ngcontent-%COMP%]     iframe{min-height:24vh}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){[_nghost-%COMP%]   igo-feature-details[_ngcontent-%COMP%]     iframe{min-height:30vh}}[_nghost-%COMP%]   app-full-toast-panel-opened[_ngcontent-%COMP%]   igo-feature-details[_ngcontent-fiq-c23][_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{min-height:450px}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){[_nghost-%COMP%]   app-full-toast-panel-opened[_ngcontent-%COMP%]   igo-feature-details[_ngcontent-fiq-c23][_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{min-height:350px}}[_nghost-%COMP%]   .swipe-fix[_ngcontent-%COMP%]{touch-action:pinch-zoom!important}.app-toast-panel-html[_ngcontent-%COMP%]{height:30vh;max-height:-moz-fit-content;max-height:fit-content;width:60vw}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){.app-toast-panel-html[_ngcontent-%COMP%]{width:100%;min-width:100%;height:34vh}}@media only screen and (orientation:portrait) and (min-width: 600px) and (max-width: 839px),only screen and (orientation:landscape) and (min-width: 960px) and (max-width: 1279px){.app-toast-panel-html[_ngcontent-%COMP%]{width:500px}}.app-toast-panel-html-large[_ngcontent-%COMP%]{height:55vh;width:60vw}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){.app-toast-panel-html-large[_ngcontent-%COMP%]{width:100%;min-width:100%;max-height:65vh;height:55vh}}@media only screen and (orientation:portrait) and (min-width: 600px) and (max-width: 839px),only screen and (orientation:landscape) and (min-width: 960px) and (max-width: 1279px){.app-toast-panel-html-large[_ngcontent-%COMP%]{width:500px}}.app-toast-panel-html-large[_ngcontent-%COMP%]   .toast-content[_ngcontent-%COMP%]{height:100%;width:100%}.app-toast-panel-opened[_ngcontent-%COMP%]{height:auto;max-height:30vh;width:42vw;max-width:600px;margin-bottom:7px}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){.app-toast-panel-opened[_ngcontent-%COMP%]{max-height:34vh;width:100%;min-width:100%}}@media only screen and (orientation:portrait) and (min-width: 600px) and (max-width: 839px),only screen and (orientation:landscape) and (min-width: 960px) and (max-width: 1279px){.app-toast-panel-opened[_ngcontent-%COMP%]{width:500px}}.app-toast-panel-opened[_ngcontent-%COMP%]   .toast-content[_ngcontent-%COMP%]{height:100%;width:100%;max-height:calc(30vh - 34px)}.app-full-toast-panel-opened[_ngcontent-%COMP%]{height:auto;max-height:65vh;width:45vw}.app-full-toast-panel-opened[_ngcontent-%COMP%]   .toast-content[_ngcontent-%COMP%]{height:100%;width:100%;max-height:calc(65vh - 41px)}@media only screen and (orientation:portrait) and (min-width: 600px) and (max-width: 839px),only screen and (orientation:landscape) and (min-width: 960px) and (max-width: 1279px){.app-full-toast-panel-opened[_ngcontent-%COMP%]{width:500px;max-height:500px}.app-full-toast-panel-opened[_ngcontent-%COMP%]   .toast-content[_ngcontent-%COMP%]{max-height:44vh}}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){.app-full-toast-panel-opened[_ngcontent-%COMP%]{width:100%;min-width:100%;max-height:65vh}}.app-toast-panel-collapsed[_ngcontent-%COMP%]{height:46px!important;width:42vw;max-width:600px}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){.app-toast-panel-collapsed[_ngcontent-%COMP%]{width:100%;min-width:100%;height:35px!important}}@media only screen and (orientation:portrait) and (min-width: 600px) and (max-width: 839px),only screen and (orientation:landscape) and (min-width: 960px) and (max-width: 1279px){.app-toast-panel-collapsed[_ngcontent-%COMP%]{width:500px}}.app-full-toast-panel-collapsed[_ngcontent-%COMP%]{height:46px!important;width:45vw}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){.app-full-toast-panel-collapsed[_ngcontent-%COMP%]{width:100%;min-width:100%;height:35px!important}}@media only screen and (orientation:portrait) and (min-width: 600px) and (max-width: 839px),only screen and (orientation:landscape) and (min-width: 960px) and (max-width: 1279px){.app-full-toast-panel-collapsed[_ngcontent-%COMP%]{width:500px}}.app-toast-panel-html-collapsed[_ngcontent-%COMP%]{height:46px!important;width:60vw}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){.app-toast-panel-html-collapsed[_ngcontent-%COMP%]{width:100%;min-width:100%;height:35px!important}}@media only screen and (orientation:portrait) and (min-width: 600px) and (max-width: 839px),only screen and (orientation:landscape) and (min-width: 960px) and (max-width: 1279px){.app-toast-panel-html-collapsed[_ngcontent-%COMP%]{width:500px}}#app-toast-panel-opened-max-height[_ngcontent-%COMP%]{height:30vh!important}#app-full-toast-panel-opened-max-height[_ngcontent-%COMP%]{height:65vh!important}"],changeDetection:0})}function lt(r="50ms",n="280ms",t="ease-in-out"){return(0,s.X$)("showContent",[(0,s.SB)("true",(0,s.oB)({opacity:1,display:"block"})),(0,s.SB)("false",(0,s.oB)({opacity:0,display:"none"})),(0,s.eR)("false => true",(0,s.jt)(`${r} ${n} ${t}`)),(0,s.eR)("true => false",(0,s.jt)("0ms"))])}const pt=["*"];class X{set opened(n){n!==this._opened&&(this._opened=n,this.openedChange.emit(this._opened))}get opened(){return this._opened}_opened;title;withHeader;openedChange=new e.vpe;get hasOpenedClass(){return this.opened}get displayStyle(){return this.withHeader||this.opened?"visible":"hidden"}constructor(){}static \u0275fac=function(t){return new(t||X)};static \u0275cmp=e.Xpm({type:X,selectors:[["app-toast-panel-for-expansion"]],hostVars:4,hostBindings:function(t,o){2&t&&(e.Udp("visibility",o.displayStyle),e.ekj("toast-panel-for-expansion-opened",o.hasOpenedClass))},inputs:{opened:"opened",title:"title",withHeader:"withHeader"},outputs:{openedChange:"openedChange"},ngContentSelectors:pt,decls:4,vars:3,consts:[[3,"title","withHeader"],["content",""]],template:function(t,o){1&t&&(e.F$t(),e.TgZ(0,"igo-panel",0)(1,"div",null,1),e.Hsn(3),e.qZA()()),2&t&&(e.Q6J("title",o.title)("withHeader",o.withHeader),e.xp6(1),e.Q6J("@showContent",o.opened))},dependencies:[c.yX],styles:["[_nghost-%COMP%]{-o-box-shadow:0px 0px 2px 0px #dddddd;box-shadow:0 0 2px #ddd}[_nghost-%COMP%]{background-color:#fff;height:48px;max-height:329px;transition:height .28s cubic-bezier(.4,0,.2,1);padding:5px}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){[_nghost-%COMP%]{max-height:40%}}.toast-panel-for-expansion-opened[_nghost-%COMP%]{height:329px}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){.toast-panel-for-expansion-opened[_nghost-%COMP%]{height:40%}}igo-panel[_ngcontent-%COMP%]{position:relative;height:100%}igo-panel[_ngcontent-%COMP%]     .igo-panel-header:hover{cursor:pointer}div[igostoppropagation][_ngcontent-%COMP%]{height:100%;width:100%}"],data:{animation:[lt()]},changeDetection:0})}function ct(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"igo-home-button",9),e.NdJ("unselectButton",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onUnselectButtonClick())}),e.qZA()}}function dt(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onPreviousButtonClick())}),e.ALo(1,"translate"),e._UZ(2,"mat-icon",11),e.qZA()}2&r&&e.Q6J("matTooltip",e.lcZ(1,1,"igo.context.sidenav.goBack"))}const ht=function(r){return{toolActivated:r}};class K{toolState;configService;catalogState;title$=new x.X(void 0);activeTool$$;get map(){return this._map}set map(n){this._map=n}_map;get opened(){return this._opened}set opened(n){n!==this._opened&&(this._opened=n,this.openedChange.emit(this._opened))}_opened;openedChange=new e.vpe;toolChange=new e.vpe;get toolbox(){return this.toolState.toolbox}constructor(n,t,o){this.toolState=n,this.configService=t,this.catalogState=o}ngOnInit(){this.activeTool$$=this.toolbox.activeTool$.subscribe(n=>{const t=this.configService.getConfig("sidenavTitle")||"IGO";if(n)if("catalogBrowser"===n.name)for(const o of this.catalogState.catalogStore.all())!0===this.catalogState.catalogStore.state.get(o).selected&&this.title$.next(o.title);else if("activeTimeFilter"===n.name||"activeOgcFilter"===n.name)for(const o of this.map.layers)!0===o.options.active&&this.title$.next(o.title);else this.title$.next(n.title);else this.title$.next(t);this.toolChange.emit(n)})}ngOnDestroy(){this.activeTool$$.unsubscribe()}onPreviousButtonClick(){this.toolbox.activatePreviousTool()}onUnselectButtonClick(){this.toolbox.deactivateTool()}static \u0275fac=function(t){return new(t||K)(e.Y36(w.EH),e.Y36(g.M$),e.Y36(w.Yy))};static \u0275cmp=e.Xpm({type:K,selectors:[["app-sidenav"]],inputs:{map:"map",opened:"opened"},outputs:{openedChange:"openedChange",toolChange:"toolChange"},decls:14,vars:20,consts:[["mode","side",1,"mat-elevation-z3",3,"autoFocus","opened","openedChange"],[1,"app-sidenav-content"],[1,"app-content",3,"ngClass"],["content",""],[3,"unselectButton",4,"ngIf"],[3,"title"],["mat-icon-button","","panelLeftButton","","tooltip-position","below","matTooltipShowDelay","500",3,"matTooltip","click",4,"ngIf"],["panelRightButton","","styleButton","icon"],["color","primary",1,"igo-toolbox",3,"animate","toolbox"],[3,"unselectButton"],["mat-icon-button","","panelLeftButton","","tooltip-position","below","matTooltipShowDelay","500",3,"matTooltip","click"],["svgIcon","arrow-left"]],template:function(t,o){1&t&&(e.TgZ(0,"mat-sidenav",0),e.NdJ("openedChange",function(i){return o.opened=i}),e.TgZ(1,"div",1)(2,"div",2,3),e.ALo(4,"async"),e.YNc(5,ct,1,0,"igo-home-button",4),e.ALo(6,"async"),e.TgZ(7,"igo-panel",5),e.ALo(8,"translate"),e.ALo(9,"async"),e.YNc(10,dt,3,3,"button",6),e.ALo(11,"async"),e._UZ(12,"igo-interactive-tour",7)(13,"igo-toolbox",8),e.qZA()()()()),2&t&&(e.Q6J("autoFocus",!1)("opened",o.opened),e.xp6(2),e.Q6J("ngClass",e.VKq(18,ht,e.lcZ(4,8,o.toolbox.activeTool$))),e.xp6(3),e.Q6J("ngIf",e.lcZ(6,10,o.toolbox.activeTool$)),e.xp6(2),e.Q6J("title",e.lcZ(8,12,e.lcZ(9,14,o.title$))),e.xp6(3),e.Q6J("ngIf",e.lcZ(11,16,o.toolbox.activeTool$)),e.xp6(3),e.Q6J("animate",!0)("toolbox",o.toolbox))},dependencies:[f.mk,f.O5,y.Hw,v.RK,z.JX,C.gM,c.yX,c.zv,c.bB,c.p1,f.Ov,F.X$],styles:["[_nghost-%COMP%]{background-color:#fff}[_nghost-%COMP%]     .igo-panel-header{position:relative}[_nghost-%COMP%]   mat-sidenav[_ngcontent-%COMP%]{z-index:3!important;height:100%;width:400px;box-sizing:content-box}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){[_nghost-%COMP%]   mat-sidenav[_ngcontent-%COMP%]{width:calc(100% - 53px);max-width:400px}}[_nghost-%COMP%]   igo-home-button[_ngcontent-%COMP%]{position:absolute;top:53px}[_nghost-%COMP%]   .app-content[_ngcontent-%COMP%], [_nghost-%COMP%]   igo-panel[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   .app-sidenav-content[_ngcontent-%COMP%]{margin-top:53px;height:calc(100% - 53px)}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){[_nghost-%COMP%]   .app-sidenav-content[_ngcontent-%COMP%]{height:calc(100% - 53px)}}[_nghost-%COMP%]   igo-panel[_ngcontent-%COMP%]     .igo-panel-content{position:relative}[_nghost-%COMP%]   div.toolActivated[_ngcontent-%COMP%] > igo-panel[_ngcontent-%COMP%]    >div.igo-panel-header{margin-left:50px;position:relative}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){[_nghost-%COMP%]   igo-toolbox[_ngcontent-%COMP%]{overflow:auto}}"],changeDetection:0})}const Pe=function(r){return{width:r}};function gt(r,n){if(1&r&&(e.ynx(0),e._UZ(1,"img",6),e.BQk()),2&r){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("src",t.imgSrc,e.LSH)("alt",t.alt)("ngStyle",e.VKq(3,Pe,t.imgSize))}}function mt(r,n){if(1&r&&(e.TgZ(0,"a",4),e._uU(1),e.YNc(2,gt,2,5,"ng-container",5),e.qZA()),2&r){const t=e.oxw().$implicit;e.Q6J("href",t.link,e.LSH),e.xp6(1),e.hij(" ",t.text," "),e.xp6(1),e.Q6J("ngIf",t.imgSrc)}}function ut(r,n){if(1&r&&(e.ynx(0),e._UZ(1,"img",6),e.BQk()),2&r){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("src",t.imgSrc,e.LSH)("alt",t.alt)("ngStyle",e.VKq(3,Pe,t.imgSize))}}function ft(r,n){if(1&r&&(e._uU(0),e.YNc(1,ut,2,5,"ng-container",5)),2&r){const t=e.oxw().$implicit;e.hij(" ",t.text," "),e.xp6(1),e.Q6J("ngIf",t.imgSrc)}}function xt(r,n){if(1&r&&(e.ynx(0),e.TgZ(1,"div",1),e.YNc(2,mt,3,3,"a",2),e.YNc(3,ft,2,2,"ng-template",null,3,e.W1O),e.qZA(),e.BQk()),2&r){const t=n.$implicit,o=e.MAs(4);e.xp6(1),e.Udp("position",t.fixed?"fixed":"absolute")("margin-left",t.marginLeft)("margin-right",t.marginRight)("margin-top",t.marginTop)("margin-bottom",t.marginBottom)("font-size",t.fontSize),e.Q6J("ngClass",t.cssClass),e.xp6(1),e.Q6J("ngIf",t.link)("ngIfElse",o)}}class ee{contextService;mediaService;configService;mapOverlay=[];context$$;media$$;context;constructor(n,t,o){this.contextService=n,this.mediaService=t,this.configService=o}ngAfterViewInit(){this.context$$=this.contextService.context$.subscribe(n=>{this.handleContextChange(n),this.context=n}),this.media$$=this.mediaService.media$.subscribe(n=>this.handleContextChange(this.context))}ngOnDestroy(){this.context$$.unsubscribe(),this.media$$.unsubscribe()}handleContextChange(n){let t=[];if(void 0!==n){this.mapOverlay=[],n.mapOverlay?t=n.mapOverlay:this.configService.getConfig("mapOverlay")&&(t=this.configService.getConfig("mapOverlay"));for(const o of t)(!o.media&&"desktop"===this.mediaService.getMedia()||o.media&&o.media.includes(this.mediaService.getMedia()))&&this.mapOverlay.push(o)}}static \u0275fac=function(t){return new(t||ee)(e.Y36(E.Ob),e.Y36(g.yJ),e.Y36(g.M$))};static \u0275cmp=e.Xpm({type:ee,selectors:[["app-map-overlay"]],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"mapOverlayDefault",3,"ngClass"],["target","_blank",3,"href",4,"ngIf","ngIfElse"],["templateNoLink",""],["target","_blank",3,"href"],[4,"ngIf"],[3,"src","alt","ngStyle"]],template:function(t,o){1&t&&e.YNc(0,xt,5,15,"ng-container",0),2&t&&e.Q6J("ngForOf",o.mapOverlay)},dependencies:[f.mk,f.sg,f.O5,f.PC],styles:["[_nghost-%COMP%]{height:100%;top:0;left:0;right:0;position:fixed;pointer-events:none}.mapOverlayDefault[_ngcontent-%COMP%]{position:absolute;white-space:nowrap;pointer-events:auto}.bottom-right[_ngcontent-%COMP%]{bottom:0;right:0}.top-right[_ngcontent-%COMP%]{top:0;right:0}.bottom-left[_ngcontent-%COMP%]{bottom:0;left:0}.top-left[_ngcontent-%COMP%]{top:0;left:0}.bottom-center[_ngcontent-%COMP%]{bottom:0;left:50%;transform:translate(-50%)}.top-center[_ngcontent-%COMP%]{top:0;left:50%;transform:translate(-50%)}.center-center[_ngcontent-%COMP%]{top:50%;left:50%;transform:translate(-50%)}.center-right[_ngcontent-%COMP%]{top:50%;right:0}.center-left[_ngcontent-%COMP%]{top:50%;left:0}"]})}const _t=["mapBrowser"],wt=["searchBar"];function vt(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"igo-menu-button",24),e.NdJ("openSidenav",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onToggleSidenavClick())}),e.qZA()}if(2&r){const t=e.oxw();e.ekj("mat-elevation-z2",!t.sidenavOpened),e.Q6J("sidenavOpened",t.sidenavOpened)}}function St(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"igo-search-bar",25,26),e.NdJ("searchTermChange",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.onSearchTermChange(a))})("pointerSummaryStatus",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.onPointerSummaryStatusChange(a))})("searchResultsGeometryStatus",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.onSearchResultsGeometryStatusChange(a))})("reverseSearchCoordsFormatStatus",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.onReverseCoordsFormatStatusChange(a))})("search",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.onSearch(a))})("clearFeature",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onClearSearch())})("searchSettingsChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onSearchSettingsChange())}),e.qZA()}if(2&r){const t=e.oxw();e.ekj("mat-elevation-z2",!t.sidenavOpened),e.Q6J("term",t.searchBarTerm)("termSplitter",t.termSplitter)("minLength",t.minSearchTermLength)("searchSettings",!0)("forceNA",t.forceCoordsNA)("store",t.searchStore)("pointerSummaryEnabled",t.igoSearchPointerSummaryEnabled)("searchResultsGeometryEnabled",t.searchResultsGeometryEnabled)("reverseSearchCoordsFormatEnabled",t.igoReverseSearchCoordsFormatEnabled)}}function yt(r,n){1&r&&e._UZ(0,"igo-wake-lock-button",27)}function Ct(r,n){if(1&r&&e._UZ(0,"igo-offline-button",28),2&r){const t=e.oxw();e.Q6J("map",t.map)("@controlsOffsetY",t.getControlsOffsetY())("@mobileOffsetY",t.getToastPanelStatus())}}function bt(r,n){if(1&r&&e._UZ(0,"igo-geolocate-button",28),2&r){const t=e.oxw();e.Q6J("map",t.map)("@controlsOffsetY",t.getControlsOffsetY())("@mobileOffsetY",t.getToastPanelStatus())}}function Ot(r,n){if(1&r&&e._UZ(0,"igo-home-extent-button",29),2&r){const t=e.oxw();e.Q6J("map",t.map)("extentOverride",t.homeExtent)("centerOverride",t.homeCenter)("zoomOverride",t.homeZoom)}}function Pt(r,n){if(1&r&&e._UZ(0,"igo-user-button",28),2&r){const t=e.oxw();e.Q6J("map",t.map)("@controlsOffsetY",t.getControlsOffsetY())("@mobileOffsetY",t.getToastPanelStatus())}}function Mt(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"button",42),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().ngIf,i=e.oxw(2);return e.KtG(i.addFeature(a))}),e.ALo(1,"translate"),e._UZ(2,"mat-icon",43),e.qZA()}if(2&r){const t=e.oxw().ngIf;e.Q6J("disabled",!1===t.layer.options.sourceOptions.edition.addButton)("matTooltip",e.lcZ(1,2,"workspace.addFeature"))}}function Tt(r,n){if(1&r&&e._UZ(0,"igo-actionbar",44),2&r){const t=e.oxw().ngIf,o=e.oxw(2);e.Q6J("store",t.actionStore)("withIcon",!0)("withTitle",o.actionbarWithTitle)("horizontal",!0)("withToggleButton","overlay"===o.actionbarMode)("iconColor","primary")("color","primary")("mode",o.actionbarMode)("overlayClass",o.workspaceMenuClass)}}function kt(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"button",45),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.zoomToSelectedFeatureWks())}),e.ALo(1,"async"),e.ALo(2,"translate"),e._UZ(3,"mat-icon",46),e.ALo(4,"async"),e.qZA()}if(2&r){const t=e.oxw(3);e.Q6J("disabled",0===e.lcZ(1,3,t.workspaceState.workspaceSelection$).length)("matTooltip",e.lcZ(2,5,"toastPanel.zoomOnFeaturesTooltip")),e.xp6(3),e.s9C("svgIcon",e.lcZ(4,7,t.workspaceState.workspaceSelection$).length>1?"magnify-scan":"magnify-plus-outline")}}function Et(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"igo-entity-table-paginator",47),e.NdJ("paginatorChange",function(a){e.CHM(t);const i=e.oxw(3);return e.KtG(i.paginatorChange(a))}),e.qZA()}if(2&r){const t=e.oxw().ngIf,o=e.oxw(2);e.Q6J("store",t.entityStore)("entitySortChange$",o.workspaceEntitySortChange$)("paginatorOptions",o.paginatorOptions)}}const $t=function(r){return{disabled:r}};function Ft(r,n){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",34)(2,"div",35)(3,"button",36),e.NdJ("click",function(){const i=e.CHM(t).ngIf;return e.KtG(i.layer.visible=!i.layer.visible)}),e.ALo(4,"translate"),e.ALo(5,"translate"),e._UZ(6,"mat-icon",37),e.ALo(7,"async"),e.qZA(),e.YNc(8,Mt,3,4,"button",38),e.YNc(9,Tt,1,9,"igo-actionbar",39),e.YNc(10,kt,5,9,"button",40),e.qZA(),e.YNc(11,Et,1,3,"igo-entity-table-paginator",41),e.qZA(),e.BQk()}if(2&r){const t=n.ngIf,o=e.oxw(2);e.xp6(3),e.Q6J("color",t.layer.visible?"primary":"default")("matTooltip",t.layer.visible?e.lcZ(4,8,"igo.geo.layer.hideLayer"):e.lcZ(5,10,"igo.geo.layer.showLayer")),e.xp6(3),e.Q6J("ngClass",e.VKq(14,$t,!0!==e.lcZ(7,12,t.inResolutionRange$)))("svgIcon",t.layer.visible?"eye":"eye-off"),e.xp6(2),e.Q6J("ngIf",o.isEditionWorkspace(t)),e.xp6(1),e.Q6J("ngIf",t.actionStore),e.xp6(1),e.Q6J("ngIf",o.workspaceVisibility()),e.xp6(1),e.Q6J("ngIf",o.workspaceVisibility())}}function Bt(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"igo-entity-table",49),e.NdJ("entitySortChange",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.entitySortChange())})("entitySelectChange",function(a){e.CHM(t);const i=e.oxw(3);return e.KtG(i.entitySelectChange(a))}),e.qZA()}if(2&r){const t=e.oxw().ngIf,o=e.oxw(2);e.Tol(o.isEditionWorkspace(t)?"edition-table":""),e.Q6J("paginator",o.workspacePaginator)("store",t.entityStore)("template",t.meta.tableTemplate)}}function At(r,n){if(1&r&&(e.ynx(0),e.YNc(1,Bt,1,5,"igo-entity-table",48),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.BQk()),2&r){const t=n.ngIf,o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.entityStore&&t.meta&&t.meta.tableTemplate&&o.workspaceVisibility()),e.xp6(2),e.Oqu(e.lcZ(4,2,o.workspaceNotAvailableMessage))}}function jt(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"app-expansion-panel",30),e.NdJ("expandedChange",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.expansionPanelExpanded=a)}),e.ALo(1,"async"),e.ynx(2,31),e.TgZ(3,"igo-workspace-selector",32),e.NdJ("changeWorkspace",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.workspaceState.setActiveWorkspaceByTitle(a))})("disableSwitch",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.workspaceSwitchDisabled=a)})("relationLayers",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.refreshRelationsWorkspace(a))})("rowsInMapExtentCheckCondition",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.workspaceState.rowsInMapExtentCheckCondition$.next(a))}),e.qZA(),e.YNc(4,Ft,12,16,"ng-container",33),e.ALo(5,"async"),e.BQk(),e.YNc(6,At,5,4,"ng-container",33),e.ALo(7,"async"),e.qZA()}if(2&r){const t=e.oxw();e.Q6J("backdropShown",t.expansionPanelBackdropShown)("expanded",t.expansionPanelExpanded)("maximized",e.lcZ(1,10,t.workspaceState.workspaceMaximize$))("@expansionPanelSize",t.getExpansionPanelStatus())("@toastOffsetY",t.isMobile()&&!t.toastPanelOpened&&t.queryState.store.entities$.value.length>0&&!t.expansionPanelExpanded?"true":"false"),e.xp6(3),e.Q6J("store",t.workspaceStore)("disabled",t.workspaceSwitchDisabled)("map",t.map),e.xp6(1),e.Q6J("ngIf",e.lcZ(5,12,t.selectedWorkspace$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(7,14,t.selectedWorkspace$))}}function zt(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"igo-workspace-widget-outlet",50),e.NdJ("deactivateWidget",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onDeactivateWorkspaceWidget())}),e.qZA()}if(2&r){const t=n.ngIf;e.Q6J("workspace",t)}}function Rt(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"app-toast-panel",51),e.NdJ("openedChange",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.toastOpenedChange(a))})("fullExtentEvent",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.fullExtent=a)})("windowHtmlDisplayEvent",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.setToastPanelHtmlDisplay(a))}),e.ALo(1,"async"),e.qZA()}if(2&r){const t=e.oxw();e.Q6J("map",t.map)("store",t.queryStore)("hasFeatureEmphasisOnSelection",t.hasFeatureEmphasisOnSelection)("@toastPanelOffsetX",e.lcZ(1,7,t.toastPanelOffsetX$))("@toastPanelOffsetY",t.getToastPanelOffsetY())("@toastPanelMobileSidenav",t.isMobile()&&t.sidenavOpened||t.isTablet()&&t.isPortrait()&&t.sidenavOpened)("opened",t.toastPanelOpened)}}function Zt(r,n){if(1&r&&e._UZ(0,"igo-actionbar",52),2&r){const t=e.oxw();e.Q6J("store",t.contextMenuStore)("withIcon",!1)("horizontal",!0)}}const Lt=function(r){return{"igo-attribution-offset":r}};class te{route;workspaceState;authService;mediaService;layerService;dataSourceService;cdRef;capabilitiesService;contextState;mapState;searchState;queryState;toolState;searchSourceService;configService;importService;http;languageService;messageService;welcomeWindowService;dialogWindow;queryService;storageService;editionWorkspaceService;directionState;configFileToGeoDBService;toastPanelOffsetX$=new x.X(void 0);sidenavOpened$=new x.X(!1);minSearchTermLength=2;hasExpansionPanel=!1;hasGeolocateButton=!0;hasHomeExtentButton=!1;showMenuButton=!0;showSearchBar=!0;showOfflineButton=!1;showWakeLockButton=!1;showRotationButtonIfNoRotation=!1;hasFeatureEmphasisOnSelection=!1;workspaceNotAvailableMessage="workspace.disabled.resolution";workspacePaginator;workspaceEntitySortChange$=new x.X(!1);workspaceSwitchDisabled=!1;paginatorOptions={pageSize:50,pageSizeOptions:[1,5,10,20,50,100,500]};workspaceMenuClass="workspace-menu";fullExtent;workspaceMaximize$$=[];matDialogRef$=new x.X(void 0);searchBarTerm="";onSettingsChange$=new x.X(void 0);termDefinedInUrl=!1;termSplitter="|";termDefinedInUrlTriggered=!1;addedLayers$$=[];forceCoordsNA=!1;contextMenuStore=new c.Dn([]);contextMenuCoord;contextLoaded=!1;context$$;openSidenav$$;sidenavMediaAndOrientation$$;igoSearchPointerSummaryEnabled;igoReverseSearchCoordsFormatEnabled;toastPanelForExpansionOpened=!0;activeWidget$$;showToastPanelForExpansionToggle=!1;selectedWorkspace$=new x.X(void 0);routeParams;toastPanelHtmlDisplay=!1;homeExtent;homeCenter;homeZoom;mapBrowser;searchBar;get map(){return this.mapState.map}get sidenavOpened(){return this.sidenavOpened$.value}set sidenavOpened(n){this.sidenavOpened$.next(n)}get auth(){return this.configService.getConfig("auth")||[]}get toastPanelOpened(){return this._toastPanelOpened}set toastPanelOpened(n){n===!this._toastPanelOpened&&(this._toastPanelOpened=n,this.cdRef.detectChanges())}_toastPanelOpened;isMobile(){return this.mediaService.getMedia()===g.pU.Mobile}isTablet(){return this.mediaService.getMedia()===g.pU.Tablet}isLandscape(){return this.mediaService.getOrientation()===g.pC.Landscape}isPortrait(){return this.mediaService.getOrientation()===g.pC.Portrait}get backdropShown(){return(this.isMobile()||this.isTablet()&&this.isPortrait())&&this.sidenavOpened}get expansionPanelExpanded(){return this.workspaceState.workspacePanelExpanded}set expansionPanelExpanded(n){this.workspaceState.workspacePanelExpanded=n,!0===n?this.map.viewController.setPadding({bottom:280}):this.map.viewController.setPadding({bottom:0})}get contextUri(){return this.contextState.context$?.getValue()?this.contextState.context$.getValue().uri:void 0}get toastPanelShown(){return!0}get expansionPanelBackdropShown(){return this.expansionPanelExpanded&&this.toastPanelForExpansionOpened}get actionbarMode(){return c.rO.Overlay}get actionbarWithTitle(){return this.actionbarMode===c.rO.Overlay}get searchStore(){return this.searchState.store}get searchResultsGeometryEnabled(){return this.searchState.searchResultsGeometryEnabled$.value}get queryStore(){return this.queryState.store}get toolbox(){return this.toolState.toolbox}get toastPanelContent(){let n;return void 0!==this.workspace&&this.workspace.hasWidget&&(n="workspace"),n}get workspaceStore(){return this.workspaceState.store}get workspace(){return this.workspaceState.workspace$.value}constructor(n,t,o,a,i,p,h,m,u,_,le,fe,B,xe,_e,we,Gt,qt,Vt,Xt,Kt,en,tn,nn,on,an){this.route=n,this.workspaceState=t,this.authService=o,this.mediaService=a,this.layerService=i,this.dataSourceService=p,this.cdRef=h,this.capabilitiesService=m,this.contextState=u,this.mapState=_,this.searchState=le,this.queryState=fe,this.toolState=B,this.searchSourceService=xe,this.configService=_e,this.importService=we,this.http=Gt,this.languageService=qt,this.messageService=Vt,this.welcomeWindowService=Xt,this.dialogWindow=Kt,this.queryService=en,this.storageService=tn,this.editionWorkspaceService=nn,this.directionState=on,this.configFileToGeoDBService=an,this.fullExtent=this.storageService.get("fullExtent"),this._toastPanelOpened=!1!==this.storageService.get("toastOpened"),this.hasExpansionPanel=this.configService.getConfig("hasExpansionPanel"),this.hasHomeExtentButton=void 0!==this.configService.getConfig("homeExtentButton"),this.hasGeolocateButton=void 0===this.configService.getConfig("hasGeolocateButton")||this.configService.getConfig("hasGeolocateButton"),this.showRotationButtonIfNoRotation=void 0!==this.configService.getConfig("showRotationButtonIfNoRotation")&&this.configService.getConfig("showRotationButtonIfNoRotation");const Me=this.configService.getConfig("menu.button.show");this.showMenuButton=void 0===Me||Me,this.showSearchBar=void 0===this.configService.getConfig("searchBar.showSearchBar")||this.configService.getConfig("searchBar.showSearchBar"),this.showOfflineButton=void 0!==this.configService.getConfig("offlineButton")&&this.configService.getConfig("offlineButton"),this.showWakeLockButton=void 0!==this.configService.getConfig("wakeLockApiButton")&&this.configService.getConfig("wakeLockApiButton"),this.forceCoordsNA=this.configService.getConfig("app.forceCoordsNA"),this.hasFeatureEmphasisOnSelection=this.configService.getConfig("hasFeatureEmphasisOnSelection"),this.igoSearchPointerSummaryEnabled=this.configService.getConfig("hasSearchPointerSummary"),void 0===this.igoSearchPointerSummaryEnabled&&(this.igoSearchPointerSummaryEnabled=this.storageService.get("searchPointerSummaryEnabled")||!1),this.igoReverseSearchCoordsFormatEnabled=this.storageService.get("reverseSearchCoordsFormatEnabled")||!1}ngOnInit(){window.IGO=this,this.searchState.searchTermSplitter$.next(this.termSplitter),this.initWelcomeWindow(),this.route.queryParams.subscribe(t=>{this.readLanguageParam(t)}),this.authService.authenticate$.subscribe(t=>{this.contextLoaded=!1}),this.context$$=this.contextState.context$.subscribe(t=>this.onChangeContext(t));const n=[{id:"coordinates",title:"coordinates",handler:()=>this.searchCoordinate(this.contextMenuCoord)},{id:"googleMaps",title:"googleMap",handler:()=>this.openGoogleMaps(this.contextMenuCoord)},{id:"googleStreetView",title:"googleStreetView",handler:()=>this.openGoogleStreetView(this.contextMenuCoord)}];if(this.contextMenuStore.load(n),this.queryStore.count$.pipe((0,Ae.G)()).subscribe(([t,o])=>{this.map.viewController.padding[2]=o?280:0,0===t&&o!==t&&this.isMobile()&&this.hasExpansionPanel&&this.expansionPanelExpanded&&this.toastPanelOpened&&(this.toastPanelOpened=!1)}),this.map.ol.once("rendercomplete",()=>{this.readQueryParams(),void 0!==this.configService.getConfig("geolocate.activateDefault")&&(this.map.geolocationController.tracking=this.configService.getConfig("geolocate.activateDefault"))}),this.onSettingsChange$.subscribe(()=>{this.searchState.setSearchSettingsChange()}),this.searchState.selectedResult$.subscribe(t=>{t&&this.isMobile()&&this.closeSidenav()}),this.workspaceState.workspaceEnabled$.next(this.hasExpansionPanel),this.workspaceState.store.empty$.subscribe(t=>{this.hasExpansionPanel&&(this.workspaceState.workspaceEnabled$.next(!t),t&&(this.expansionPanelExpanded=!1),this.updateMapBrowserClass())}),this.workspaceMaximize$$.push(this.workspaceState.workspaceMaximize$.subscribe(t=>{this.updateMapBrowserClass()})),this.workspaceState.workspace$.subscribe(t=>{t?(this.selectedWorkspace$.next(t),this.expansionPanelExpanded=!0,t.layer.options.workspace?.pageSize&&t.layer.options.workspace?.pageSizeOptions?this.paginatorOptions={pageSize:t.layer.options.workspace?.pageSize,pageSizeOptions:t.layer.options.workspace?.pageSizeOptions}:this.paginatorOptions={pageSize:50,pageSizeOptions:[1,5,10,20,50,100,500]}):this.expansionPanelExpanded=!1}),this.activeWidget$$=this.workspaceState.activeWorkspaceWidget$.subscribe(t=>{void 0!==t?(this.openToastPanelForExpansion(),this.showToastPanelForExpansionToggle=!0):(this.closeToastPanelForExpansion(),this.showToastPanelForExpansionToggle=!1)}),this.openSidenav$$=this.toolState.openSidenav$.subscribe(t=>{t&&(this.openSidenav(),this.toolState.openSidenav$.next(!1))}),this.sidenavMediaAndOrientation$$=(0,U.a)([this.sidenavOpened$,this.mediaService.media$,this.mediaService.orientation$]).pipe((0,Z.b)(50)).subscribe(t=>{this.computeToastPanelOffsetX()}),this.configService.getConfig("importExport")){const t=this.configService.getConfig("importExport.configFileToGeoDBService");t&&this.configFileToGeoDBService.load(t)}}setToastPanelHtmlDisplay(n){this.toastPanelHtmlDisplay=n,this.computeToastPanelOffsetX()}computeToastPanelOffsetX(){this.isMobile()||!this.isLandscape()?Promise.resolve().then(()=>this.toastPanelOffsetX$.next(void 0)):Promise.resolve().then(()=>this.toastPanelOffsetX$.next(this.getToastPanelExtent()))}workspaceVisibility(){const n=this.selectedWorkspace$.value;return n.inResolutionRange$.value?n.entityStore.empty$.value&&!n.layer.visible?this.workspaceNotAvailableMessage="workspace.disabled.visible":this.workspaceNotAvailableMessage="":this.workspaceNotAvailableMessage="workspace.disabled.resolution",n.inResolutionRange$.value}isEditionWorkspace(n){return n instanceof l.S42}addFeature(n){let t={type:"Feature",properties:{}};t.properties=this.createFeatureProperties(n.layer),this.workspaceState.rowsInMapExtentCheckCondition$.next(!1),n.editFeature(t,n)}createFeatureProperties(n){let t={};return n.options.sourceOptions.sourceFields.forEach(o=>{!o.primary&&o.visible&&(t[o.name]="")}),t}paginatorChange(n){this.workspacePaginator=n}entitySortChange(){this.workspaceEntitySortChange$.next(!0)}entitySelectChange(n){this.getQuerySearchSource();const o=[];if((!(this.selectedWorkspace$.value instanceof l.RhL||this.selectedWorkspace$.value instanceof l.RMI)||this.selectedWorkspace$.value.getLayerWksOptionTabQuery())&&n&&n.added){const a=n.added.map(p=>{if(p&&p.ol&&p.ol.getProperties()._featureStore.layer&&p.ol.getProperties()._featureStore.layer.visible){const h=p.ol,m=p.ol.getProperties()._featureStore.layer,u=(0,l.ve2)(h,m.map.projection,m.ol);u.meta.alias=this.queryService.getAllowedFieldsAndAlias(m),u.meta.title=this.queryService.getQueryTitle(u,m)||u.meta.title;let _=o.find(le=>le.title===u.meta.sourceTitle);return _||(_=new l.W2O({title:u.meta.sourceTitle}),o.push(_)),(0,l.$LA)(u,_)}});(0,ge.of)(a).subscribe(p=>{this.queryStore.load(p)})}}ngOnDestroy(){this.context$$.unsubscribe(),this.activeWidget$$.unsubscribe(),this.openSidenav$$.unsubscribe(),this.workspaceMaximize$$.map(n=>n.unsubscribe()),this.sidenavMediaAndOrientation$$.unsubscribe()}cancelOngoingAddLayer(){this.addedLayers$$.forEach(n=>n.unsubscribe()),this.addedLayers$$=[]}onBackdropClick(){this.closeSidenav()}onToggleSidenavClick(){this.toggleSidenav()}onDeactivateWorkspaceWidget(){this.closeToastPanelForExpansion()}closeToastPanelForExpansion(){this.toastPanelForExpansionOpened=!1}openToastPanelForExpansion(){this.toastPanelForExpansionOpened=!0}onMapQuery(n){this.getQuerySearchSource();const o=[],i=n.features.map(h=>{let m=o.find(u=>u.title===h.meta.sourceTitle);if(!this.getFeatureIsSameActiveWks(h)||!this.getWksActiveOpenInResolution()||this.workspace.getLayerWksOptionMapQuery())return m||(m=new l.W2O({title:h.meta.sourceTitle}),o.push(m)),(0,l.$LA)(h,m)}).filter(h=>void 0!==h);(0,ge.of)(i).subscribe(h=>{this.queryStore.load(h)})}onSearchTermChange(n){this.routeParams?.search&&n!==this.routeParams.search&&this.searchState.deactivateCustomFilterTermStrategy(),this.searchBarTerm=n,this.searchState.setSearchTerm(n),n.replace(/(#[^\s]*)/g,"").trim().length<2?this.onClearSearch():this.onBeforeSearch()}onSearch(n){const t=n.results,o=!(0,l.OcM)(n.research.source);let a;a=o?this.searchSourceService.getEnabledSources().filter(l._iF):this.searchSourceService.getEnabledSources().filter(l.OcM);const i=this.searchStore.entities$.value.filter(p=>p.source!==n.research.source&&a.includes(p.source)).concat(t);this.searchStore.updateMany(i)}onSearchResultsGeometryStatusChange(n){this.searchState.setSearchResultsGeometryStatus(n)}onReverseCoordsFormatStatusChange(n){this.storageService.set("reverseSearchCoordsFormatEnabled",n),this.igoReverseSearchCoordsFormatEnabled=n}onSearchSettingsChange(){this.onSettingsChange$.next(!0)}closeSidenav(){this.sidenavOpened=!1,this.map.viewController.padding[3]=0}openSidenav(){this.sidenavOpened=!0,this.map.viewController.padding[3]=this.isMobile()?0:400}toggleSidenav(){this.sidenavOpened?this.closeSidenav():this.openSidenav(),this.computeToastPanelOffsetX()}toolChanged(n){n&&"searchResults"===n.name&&this.searchBar&&this.searchBar.nativeElement.getElementsByTagName("input")[0].focus()}computeHomeExtentValues(n){n?.map?.view?.homeExtent?(this.homeExtent=n.map.view.homeExtent.extent,this.homeCenter=n.map.view.homeExtent.center,this.homeZoom=n.map.view.homeExtent.zoom):(this.homeExtent=void 0,this.homeCenter=void 0,this.homeZoom=void 0)}onChangeContext(n){if(this.cancelOngoingAddLayer(),void 0!==n){if(this.workspace&&!this.workspace.entityStore.empty&&this.workspace.entityStore.clear(),this.queryState.store.empty||this.queryState.store.softClear(),this.computeHomeExtentValues(n),this.route.queryParams.pipe((0,Z.b)(250)).subscribe(t=>{(!t.context||t.context===n.uri)&&this.readLayersQueryParams(t)}),this.contextLoaded){const t=this.toolbox.getTool("contextManager");let a=(t?t.options:{}).toolToOpenOnContextChange;if(!a){const i=["mapTools","map","mapDetails","mapLegend"];for(const p of i)if(this.toolbox.getTool(p)){a=p;break}}a&&this.toolbox.activateTool(a)}this.contextLoaded=!0}}onBeforeSearch(){(!this.toolbox.activeTool$.value||"searchResults"!==this.toolbox.activeTool$.value.name)&&this.toolbox.activateTool("searchResults"),this.openSidenav()}toastOpenedChange(n){this.map.viewController.padding[2]=n?280:0,this.handleExpansionAndToastOnMobile(),this.toastPanelOpened=n}handleExpansionAndToastOnMobile(){this.isMobile()&&this.hasExpansionPanel&&this.expansionPanelExpanded&&this.toastPanelOpened&&(this.expansionPanelExpanded=!1)}onClearSearch(){this.map.searchResultsOverlay.clear(),this.searchStore.clear(),this.searchState.setSelectedResult(void 0),this.searchState.deactivateCustomFilterTermStrategy()}getQuerySearchSource(){return this.searchSourceService.getSources().find(n=>n instanceof l.W2O)}onContextMenuOpen(n){this.contextMenuCoord=this.getClickCoordinate(n)}getClickCoordinate(n){const t=n,o=this.mapBrowser.nativeElement.getBoundingClientRect();t.y=t.y-o.top+(window.scrollY||window.pageYOffset),t.x=t.x-o.left+(window.scrollX||window.pageXOffset);const a=[t.x,t.y],i=this.map.ol.getCoordinateFromPixel(a),p=this.map.projection;return be.vs(i,p,"EPSG:4326")}openGoogleMaps(n){window.open(l.Gij.getGoogleMapsCoordLink(n[0],n[1]))}openGoogleStreetView(n){window.open(l.Gij.getGoogleStreetViewLink(n[0],n[1]))}searchCoordinate(n){this.searchBarTerm=this.igoReverseSearchCoordsFormatEnabled?n.reverse().map(t=>t.toFixed(6)).join(", "):n.map(t=>t.toFixed(6)).join(", ")}updateMapBrowserClass(){const n=this.queryState.store.entities$.value.length>0;this.hasExpansionPanel&&this.workspaceState.workspaceEnabled$.value?this.mapBrowser.nativeElement.classList.add("has-expansion-panel"):this.mapBrowser.nativeElement.classList.remove("has-expansion-panel"),this.hasExpansionPanel&&this.expansionPanelExpanded?this.workspaceState.workspaceMaximize$.value?(this.mapBrowser.nativeElement.classList.add("expansion-offset-maximized"),this.mapBrowser.nativeElement.classList.remove("expansion-offset")):(this.mapBrowser.nativeElement.classList.add("expansion-offset"),this.mapBrowser.nativeElement.classList.remove("expansion-offset-maximized")):this.workspaceState.workspaceMaximize$.value?this.mapBrowser.nativeElement.classList.remove("expansion-offset-maximized"):this.mapBrowser.nativeElement.classList.remove("expansion-offset"),this.sidenavOpened?this.mapBrowser.nativeElement.classList.add("sidenav-offset"):this.mapBrowser.nativeElement.classList.remove("sidenav-offset"),this.sidenavOpened&&!this.isMobile()?this.mapBrowser.nativeElement.classList.add("sidenav-offset-baselayers"):this.mapBrowser.nativeElement.classList.remove("sidenav-offset-baselayers"),this.toastPanelOpened||!n||this.expansionPanelExpanded?this.mapBrowser.nativeElement.classList.remove("toast-offset-scale-line"):this.mapBrowser.nativeElement.classList.add("toast-offset-scale-line"),!this.toastPanelOpened&&n&&(this.isMobile()||this.isTablet()||this.sidenavOpened)&&!this.expansionPanelExpanded?this.mapBrowser.nativeElement.classList.add("toast-offset-attribution"):this.mapBrowser.nativeElement.classList.remove("toast-offset-attribution")}getToastPanelExtent(){return this.sidenavOpened?this.sidenavOpened?this.toastPanelHtmlDisplay&&this.mediaService.isDesktop()?"htmlDisplayOffsetX":this.fullExtent?"fullOffsetX":"standardOffsetX":void 0:this.toastPanelHtmlDisplay&&this.mediaService.isDesktop()?"htmlDisplay":this.fullExtent?"fullStandard":"standard"}onPointerSummaryStatusChange(n){this.storageService.set("searchPointerSummaryEnabled",n),this.igoSearchPointerSummaryEnabled=n}getExpansionPanelStatus(){return!1===this.sidenavOpened?!0===this.expansionPanelExpanded?"full":"notTriggered":!0===this.sidenavOpened&&!1===this.isMobile()?!0===this.expansionPanelExpanded?"reduced":"reducedNotTriggered":!0===this.sidenavOpened&&!0===this.isMobile()?!0===this.expansionPanelExpanded?"mobile":"notVisible":void 0}getToastPanelOffsetY(){let n="noExpansion";return n=this.expansionPanelExpanded?this.workspaceState.workspaceMaximize$.value?this.toastPanelOpened?"expansionMaximizedAndToastOpened":"expansionMaximizedAndToastClosed":this.toastPanelOpened?"expansionAndToastOpened":"expansionAndToastClosed":"noExpansion",n}getToastPanelStatus(){if(!0===this.isMobile()&&!1===this.toastPanelOpened&&!1===this.sidenavOpened&&!1===this.expansionPanelExpanded&&this.queryState.store.entities$.value.length>0)return"low"}getControlsOffsetY(){return this.expansionPanelExpanded?this.workspaceState.workspaceMaximize$.value?"firstRowFromBottom-expanded-maximized":"firstRowFromBottom-expanded":"firstRowFromBottom"}getBaselayersSwitcherStatus(){let n;return n=this.isMobile()?this.workspaceState.workspaceEnabled$.value?!1===this.expansionPanelExpanded?0===this.queryState.store.entities$.value.length?"secondRowFromBottom":"thirdRowFromBottom":0===this.queryState.store.entities$.value.length?"firstRowFromBottom-expanded":"secondRowFromBottom-expanded":0===this.queryState.store.entities$.value.length?"firstRowFromBottom":"secondRowFromBottom":this.workspaceState.workspaceEnabled$.value?this.expansionPanelExpanded?this.workspaceState.workspaceMaximize$.value?"firstRowFromBottom-expanded-maximized":"firstRowFromBottom-expanded":"secondRowFromBottom":"firstRowFromBottom",n}readQueryParams(){this.route.queryParams.subscribe(n=>{this.routeParams=n,this.readToolParams(),this.readSearchParams(),this.readFocusFirst(),this.computeZoomToExtent()})}readLanguageParam(n){n.lang&&(this.authService.languageForce=!0,this.languageService.setLanguage(n.lang))}computeZoomToExtent(){if(this.routeParams.zoomExtent){const n=this.routeParams.zoomExtent.split(","),t=be.$A(n,"EPSG:4326",this.map.projection);this.map.viewController.zoomToExtent(t)}}computeFocusFirst(){setTimeout(()=>{const n=document.getElementsByTagName("igo-search-results-item").item(0);n&&n.click()},1)}readFocusFirst(){if("1"===this.routeParams.sf&&this.termDefinedInUrl){const n=this.searchStore.stateView.all$().pipe((0,$.n)(t=>0===t.length),(0,Z.b)(1e3),(0,Ce.q)(1)).subscribe(t=>{n.unsubscribe(),t.length&&!this.termDefinedInUrlTriggered&&(this.computeFocusFirst(),this.termDefinedInUrlTriggered=!0)})}}readSearchParams(){if(this.routeParams.search){if(this.termDefinedInUrl=!0,"1"===this.routeParams.exactMatch&&this.searchState.activateCustomFilterTermStrategy(),this.routeParams.search&&!this.routeParams.zoom&&"1"!==this.routeParams.sf){const n=this.searchStore.stateView.all$().pipe((0,$.n)(t=>0===t.length),(0,Z.b)(500),(0,Ce.q)(1)).subscribe(t=>{n.unsubscribe();const o=t.filter(i=>i.entity.meta.dataType===l.D97).map(i=>(new ue.Z).readFeature(i.entity.data,{dataProjection:i.entity.data.projection,featureProjection:this.map.projection})),a=(0,l.HgW)(o,this.map.viewProjection);this.map.viewController.zoomToExtent(a)})}this.searchBarTerm=this.routeParams.search}"1"===this.routeParams.searchGeom&&this.searchState.searchResultsGeometryEnabled$.next(!0)}readToolParams(){if(this.routeParams.tool&&this.matDialogRef$.pipe((0,$.n)(n=>void 0!==n),(0,A.P)()).subscribe(n=>{n||this.toolbox.activateTool(this.routeParams.tool)}),"1"===this.routeParams.sidenav&&setTimeout(()=>{this.openSidenav()},250),this.routeParams.routing){let n=!1;const t=this.routeParams.routing.split(";"),o=this.routeParams.routingOptions;let a;o&&(a=parseInt(o.split("result:")[1],10)),this.directionState.stopsStore.storeInitialized$.pipe((0,$.n)(i=>!i),(0,A.P)()).subscribe(i=>{i&&!n&&(n=!0,t.map((p,h)=>{h>1&&(0,l.yLv)(this.directionState.stopsStore)}),setTimeout(()=>{t.map((p,h)=>{const m=this.directionState.stopsStore.all().find(u=>u.position===h);m.text=p,m.coordinates=p.split(","),this.directionState.stopsStore.update(m)})},1.25*this.directionState.debounceTime))}),this.directionState.routesFeatureStore.count$.pipe((0,$.n)(i=>i<1),(0,A.P)()).subscribe(i=>{i>=1&&this.directionState.zoomToActiveRoute$.next()}),this.directionState.routesFeatureStore.count$.pipe((0,$.n)(i=>i<2),(0,A.P)()).subscribe(()=>{a&&(this.directionState.routesFeatureStore.entities$.value.map(i=>i.properties.active=!1),this.directionState.routesFeatureStore.entities$.value[a].properties.active=!0,this.directionState.zoomToActiveRoute$.next())})}}readLayersQueryParams(n){this.readLayersQueryParamsByType(n,"wms"),this.readLayersQueryParamsByType(n,"wmts"),this.readLayersQueryParamsByType(n,"arcgisrest"),this.readLayersQueryParamsByType(n,"imagearcgisrest"),this.readLayersQueryParamsByType(n,"tilearcgisrest"),this.readVectorQueryParams(n)}getQueryParam(n,t){let o;return t.includes("?")&&(o=new Oe.LE({fromString:t.split("?")[1]}).get(n)),o}readLayersQueryParamsByType(n,t){let o,a;switch(t){case"wms":(n.layers||n.wmsLayers)&&n.wmsUrl&&(a="wmsUrl",o=n.wmsLayers?"wmsLayers":"layers");break;case"wmts":n.wmtsLayers&&n.wmtsUrl&&(a="wmtsUrl",o="wmtsLayers");break;case"arcgisrest":n.arcgisLayers&&n.arcgisUrl&&(a="arcgisUrl",o="arcgisLayers");break;case"imagearcgisrest":n.iarcgisLayers&&n.iarcgisUrl&&(a="iarcgisUrl",o="iarcgisLayers");break;case"tilearcgisrest":n.tarcgisLayers&&n.tarcgisUrl&&(a="tarcgisUrl",o="tarcgisLayers")}if(!o||!a)return;const i=n[o].split("),("),p=n[a].split(",");let h=0;p.forEach(m=>{let u=m;const _=this.getQueryParam("VERSION",u)||this.getQueryParam("version",u)||void 0;_&&(u=u.replace("VERSION="+_,"").replace("version="+_,"")),u.endsWith("?")&&(u=u.substring(0,u.length-1)),this.extractLayersByService(i[h]).forEach(fe=>{const B=fe.split(":igoz"),xe=O.gb.removeUndefined({type:t,url:u,layer:B[0],params:"wms"===t?{LAYERS:B[0]}:void 0}),_e=(0,l.lZj)(xe),we=this.computeLayerVisibilityFromUrl(n,_e);this.addLayerFromURL(u,B[0],t,_,we,B[1]?parseInt(B[1],10):void 0)}),h+=1})}readVectorQueryParams(n){if(n.vector){const t=n.vector,o=t.lastIndexOf("/"),a=t.slice(o+1,t.length);this.http.get(`${t}`,{responseType:"blob"}).subscribe(i=>{const p=new File([i],a,{type:i.type,lastModified:Date.now()});this.importService.import(p).subscribe(h=>this.onFileImportSuccess(p,h),h=>this.onFileImportError(p,h))})}}onFileImportSuccess(n,t){(0,l.xrF)(n,t,this.map,this.contextState.context$.value.uri,this.messageService,this.layerService)}onFileImportError(n,t){(0,l.jDn)(n,t,this.messageService)}extractLayersByService(n){let t=n;return t=t.startsWith("(")?t.substr(1):t,t=t.endsWith(")")?t.slice(0,-1):t,t.split(",")}addLayerFromURL(n,t,o,a,i=!0,p){if(!this.contextLoaded)return;const h={optionsFromCapabilities:!0,optionsFromApi:!0,crossOrigin:!0,type:o,url:n},m="arcgisrest"===o||"imagearcgisrest"===o||"tilearcgisrest"===o;let u={version:"wmts"===o?"1.0.0":void 0,queryable:!!m,queryFormat:m?"esrijson":void 0,layer:t};"wms"===o&&(u={params:{LAYERS:t,VERSION:a}}),u=O.gb.removeUndefined(Object.assign({},u,h)),this.addedLayers$$.push(this.layerService.createAsyncLayer({zIndex:p,visible:i,sourceOptions:u}).subscribe(_=>{this.map.addLayer(_)}))}computeLayerVisibilityFromUrl(n,t){const o=n;let a=!0;if(!o||!t)return a;let i="",p="",h=[],m=[];return o.visiblelayers&&(i=o.visiblelayers),o.invisiblelayers&&(p=o.invisiblelayers),"*"===i&&(a=!0),"*"===p&&(a=!1),h=i.split(","),m=p.split(","),(h.indexOf(t)>-1||h.indexOf(t.toString())>-1)&&(a=!0),(m.indexOf(t)>-1||m.indexOf(t.toString())>-1)&&(a=!1),a}initWelcomeWindow(){this.auth?.url?this.authService.logged$.subscribe(n=>{n&&this.createWelcomeWindow()}):this.createWelcomeWindow()}createWelcomeWindow(){if(this.welcomeWindowService.hasWelcomeWindow()){const n=this.welcomeWindowService.getConfig();this.matDialogRef$.next(this.dialogWindow.open(G,n)),this.matDialogRef$.value.afterClosed().subscribe(t=>{this.welcomeWindowService.afterClosedWelcomeWindow(),this.matDialogRef$.next(void 0)})}}getFeatureIsSameActiveWks(n){if(this.workspace){const t=n.meta.sourceTitle;return this.workspace.title===t}return!1}getWksActiveOpenInResolution(){if(this.workspace){const n=this.workspace;if(n.active&&n.inResolutionRange$.value&&this.workspaceState.workspacePanelExpanded)return!0}return!1}refreshRelationsWorkspace(n){if(n?.length)for(const t of n)this.workspaceStore.all().find(a=>t.options.workspace.workspaceId.includes(a.id))?.meta.tableTemplate.columns.forEach(a=>{("list"===a.type||"autocomplete"===a.type)&&this.editionWorkspaceService.getDomainValues(a.relation).subscribe(i=>{a.domainValues=i})})}zoomToSelectedFeatureWks(){let n=new ue.Z;const t=this.workspaceState.workspaceSelection.map(a=>a.entity);if(0===t.length)return;const o=[];for(const a of t){let i=n.readFeature(a,{dataProjection:a.projection,featureProjection:this.map.projection});o.push(i)}(0,l.ybU)(this.map.viewController,o,l.bAZ.Zoom)}static \u0275fac=function(t){return new(t||te)(e.Y36(T.gz),e.Y36(w.gV),e.Y36(ce.e8),e.Y36(g.yJ),e.Y36(l.ITu),e.Y36(l.LvN),e.Y36(e.sBO),e.Y36(l.neU),e.Y36(w.sz),e.Y36(w.U5),e.Y36(w.po),e.Y36(w.Tb),e.Y36(w.EH),e.Y36(l.gS3),e.Y36(g.M$),e.Y36(l.Y5R),e.Y36(Oe.eN),e.Y36(g.TS),e.Y36(g.ez),e.Y36(j),e.Y36(k.uw),e.Y36(l._7J),e.Y36(g.V1),e.Y36(l.zNf),e.Y36(w.Nw),e.Y36(l.D4b))};static \u0275cmp=e.Xpm({type:te,selectors:[["app-portal"]],viewQuery:function(t,o){if(1&t&&(e.Gf(_t,7,e.SBq),e.Gf(wt,7,e.SBq)),2&t){let a;e.iGM(a=e.CRH())&&(o.mapBrowser=a.first),e.iGM(a=e.CRH())&&(o.searchBar=a.first)}},decls:33,vars:50,consts:[[1,"app-main-container"],[3,"shown","click"],[1,"navbar-container"],[3,"mat-elevation-z2","sidenavOpened","openSidenav",4,"ngIf"],[3,"mat-elevation-z2","term","termSplitter","minLength","searchSettings","forceNA","store","pointerSummaryEnabled","searchResultsGeometryEnabled","reverseSearchCoordsFormatEnabled","searchTermChange","pointerSummaryStatus","searchResultsGeometryStatus","reverseSearchCoordsFormatStatus","search","clearFeature","searchSettingsChange",4,"ngIf"],[3,"map","opened","openedChange","toolChange"],["igoMapOffline","","igoWorkspaceUpdator","","igoLongPress","","igoSearchPointerSummary","","igoHoverFeature","","igoQuery","","igoMapContext","","igoLayerContext","","igoDropGeoFile","",3,"workspaceStore","igoSearchPointerSummaryDelay","igoSearchPointerSummaryEnabled","igoHoverFeatureDelay","igoHoverFeatureEnabled","waitForAllQueries","queryFeatures","queryFeaturesHitTolerance","contextUri","map","igoContextMenu","ngClass","query","menuPosition"],["mapBrowser",""],["color","primary",3,"map"],[1,"mat-elevation-z2",3,"map"],["class","mat-elevation-z2",4,"ngIf"],["color","primary","class","mat-elevation-z2",3,"map",4,"ngIf"],["class","mat-elevation-z2","color","primary",3,"map",4,"ngIf"],["color","primary",1,"mat-elevation-z2",3,"showIfNoRotation","map"],["class","mat-elevation-z2","color","primary",3,"map","extentOverride","centerOverride","zoomOverride",4,"ngIf"],[1,"mat-elevation-z2",3,"map","useStaticIcon"],[3,"backdropShown","expanded","maximized","expandedChange",4,"ngIf"],[3,"withHeader","opened","openedChange"],[1,"toast-panel-for-expansion-close-button-container"],["mat-icon-button","","color","warn",3,"click"],["svgIcon","close"],[3,"workspace","deactivateWidget",4,"ngIf"],[3,"map","store","hasFeatureEmphasisOnSelection","opened","openedChange","fullExtentEvent","windowHtmlDisplayEvent",4,"ngIf"],["contextMenu",""],[3,"sidenavOpened","openSidenav"],[3,"term","termSplitter","minLength","searchSettings","forceNA","store","pointerSummaryEnabled","searchResultsGeometryEnabled","reverseSearchCoordsFormatEnabled","searchTermChange","pointerSummaryStatus","searchResultsGeometryStatus","reverseSearchCoordsFormatStatus","search","clearFeature","searchSettingsChange"],["searchBar",""],[1,"mat-elevation-z2"],["color","primary",1,"mat-elevation-z2",3,"map"],["color","primary",1,"mat-elevation-z2",3,"map","extentOverride","centerOverride","zoomOverride"],[3,"backdropShown","expanded","maximized","expandedChange"],["expansionPanelHeader",""],["igoWorkspaceSelector","",3,"store","disabled","map","changeWorkspace","disableSwitch","relationLayers","rowsInMapExtentCheckCondition"],[4,"ngIf"],[1,"workspace-container"],[1,"workspace-actions"],["mat-icon-button","","collapsibleButton","","tooltip-position","below","matTooltipShowDelay","500",1,"eye-workspace",3,"color","matTooltip","click"],[3,"ngClass","svgIcon"],["class","add-feature","mat-icon-button","","color","primary","collapsibleButton","","tooltip-position","below","matTooltipShowDelay","500",3,"disabled","matTooltip","click",4,"ngIf"],["class","actionbar-workspace",3,"store","withIcon","withTitle","horizontal","withToggleButton","iconColor","color","mode","overlayClass",4,"ngIf"],["class","zoom-workspace","mat-icon-button","","color","primary","collapsibleButton","","tooltip-position","below","matTooltipShowDelay","500",3,"disabled","matTooltip","click",4,"ngIf"],[3,"store","entitySortChange$","paginatorOptions","paginatorChange",4,"ngIf"],["mat-icon-button","","color","primary","collapsibleButton","","tooltip-position","below","matTooltipShowDelay","500",1,"add-feature",3,"disabled","matTooltip","click"],["svgIcon","plus"],[1,"actionbar-workspace",3,"store","withIcon","withTitle","horizontal","withToggleButton","iconColor","color","mode","overlayClass"],["mat-icon-button","","color","primary","collapsibleButton","","tooltip-position","below","matTooltipShowDelay","500",1,"zoom-workspace",3,"disabled","matTooltip","click"],[3,"svgIcon"],[3,"store","entitySortChange$","paginatorOptions","paginatorChange"],[3,"class","paginator","store","template","entitySortChange","entitySelectChange",4,"ngIf"],[3,"paginator","store","template","entitySortChange","entitySelectChange"],[3,"workspace","deactivateWidget"],[3,"map","store","hasFeatureEmphasisOnSelection","opened","openedChange","fullExtentEvent","windowHtmlDisplayEvent"],["mode","context",3,"store","withIcon","horizontal"]],template:function(t,o){if(1&t&&(e.TgZ(0,"mat-sidenav-container",0)(1,"mat-sidenav-content")(2,"igo-backdrop",1),e.NdJ("click",function(){return o.onBackdropClick()}),e.qZA(),e.TgZ(3,"div",2),e.YNc(4,vt,1,3,"igo-menu-button",3),e.YNc(5,St,2,11,"igo-search-bar",4),e.qZA(),e.TgZ(6,"app-sidenav",5),e.NdJ("openedChange",function(i){return o.sidenavOpened=i})("toolChange",function(i){return o.toolChanged(i)}),e.qZA(),e.TgZ(7,"igo-map-browser",6,7),e.NdJ("query",function(i){return o.onMapQuery(i)})("menuPosition",function(i){return o.onContextMenuOpen(i)})("@mapStateX.start",function(){return o.updateMapBrowserClass()})("@mapStateY.start",function(){return o.updateMapBrowserClass()}),e._UZ(9,"igo-zoom-button",8)(10,"igo-swipe-control",9)(11,"igo-map-center",9),e.YNc(12,yt,1,0,"igo-wake-lock-button",10),e.YNc(13,Ct,1,3,"igo-offline-button",11),e.YNc(14,bt,1,3,"igo-geolocate-button",12),e._UZ(15,"igo-rotation-button",13),e.YNc(16,Ot,1,4,"igo-home-extent-button",14),e.YNc(17,Pt,1,3,"igo-user-button",12),e._UZ(18,"igo-baselayers-switcher",15),e.qZA(),e._UZ(19,"app-map-overlay"),e.ALo(20,"async"),e.qZA()(),e.YNc(21,jt,8,16,"app-expansion-panel",16),e.ALo(22,"async"),e.TgZ(23,"app-toast-panel-for-expansion",17),e.NdJ("openedChange",function(i){return o.toastPanelForExpansionOpened=i}),e.TgZ(24,"div",18)(25,"button",19),e.NdJ("click",function(){return o.toastPanelForExpansionOpened=!1}),e._UZ(26,"mat-icon",20),e.qZA()(),e.YNc(27,zt,1,1,"igo-workspace-widget-outlet",21),e.ALo(28,"async"),e.qZA(),e.YNc(29,Rt,2,9,"app-toast-panel",22),e.ALo(30,"async"),e.YNc(31,Zt,1,3,"ng-template",null,23,e.W1O)),2&t){const a=e.MAs(32);e.xp6(2),e.Q6J("shown",o.backdropShown),e.xp6(2),e.Q6J("ngIf",o.showMenuButton),e.xp6(1),e.Q6J("ngIf",o.showSearchBar),e.xp6(1),e.Q6J("map",o.map)("opened",o.sidenavOpened),e.xp6(1),e.Q6J("workspaceStore",o.workspaceStore)("igoSearchPointerSummaryDelay",500)("igoSearchPointerSummaryEnabled",o.igoSearchPointerSummaryEnabled)("igoHoverFeatureDelay",250)("igoHoverFeatureEnabled",!0)("waitForAllQueries",!0)("queryFeatures",!0)("queryFeaturesHitTolerance",15)("contextUri",o.contextUri)("map",o.map)("igoContextMenu",a)("ngClass",e.VKq(48,Lt,o.map.getBaseLayers().length>1))("@mapStateX",o.sidenavOpened?"right":"left")("@mapStateY",o.getControlsOffsetY()),e.xp6(2),e.Q6J("map",o.map)("@controlsOffsetY",o.getControlsOffsetY()),e.xp6(1),e.Q6J("map",o.map),e.xp6(1),e.Q6J("map",o.map),e.xp6(1),e.Q6J("ngIf",o.showWakeLockButton),e.xp6(1),e.Q6J("ngIf",o.showOfflineButton),e.xp6(1),e.Q6J("ngIf",o.hasGeolocateButton),e.xp6(1),e.Q6J("showIfNoRotation",o.showRotationButtonIfNoRotation)("map",o.map),e.xp6(1),e.Q6J("ngIf",o.hasHomeExtentButton),e.xp6(1),e.Q6J("ngIf",o.auth.url),e.xp6(1),e.Q6J("map",o.map)("@controlsOffsetY",o.getBaselayersSwitcherStatus())("useStaticIcon",!0),e.xp6(1),e.Q6J("@controlStateY",o.getControlsOffsetY())("@controlStateX","mobile"!==e.lcZ(20,40,o.mediaService.media$)&&o.sidenavOpened?"right":"left"),e.xp6(2),e.Q6J("ngIf",o.hasExpansionPanel&&e.lcZ(22,42,o.workspaceState.workspaceEnabled$)),e.xp6(2),e.Q6J("withHeader",!1)("opened",o.toastPanelForExpansionOpened),e.xp6(4),e.Q6J("ngIf",e.lcZ(28,44,o.selectedWorkspace$)),e.xp6(2),e.Q6J("ngIf",!0!==e.lcZ(30,46,o.queryStore.empty$))}},dependencies:[f.mk,f.O5,C.gM,v.RK,y.Hw,z.TM,z.Rh,l.V$T,l.ExE,l.PUQ,l.u$Y,l.$BH,l.fwr,l.AIr,l.W4Y,l.y$j,l.gvi,l.Ej2,l.tk9,l.qt4,l.pyf,l.TEo,l.NBD,l.tt3,c.nv,c.i8,c.lk,c.Fh,c.$E,l.DpO,l.O91,c.lB,c.Te,c.qv,V,P,X,K,ee,E.b3,E.mH,E.qy,f.Ov,F.X$],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:block}[_nghost-%COMP%]   .navbar-container[_ngcontent-%COMP%]{position:absolute;left:4px;top:4px;display:flex;width:395px;max-width:395px;z-index:4}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){[_nghost-%COMP%]   .navbar-container[_ngcontent-%COMP%]{width:calc(100% - 58px);max-width:min(100% - 48px - (2 * 5px),350px)}}[_nghost-%COMP%]   .navbar-container[_ngcontent-%COMP%]   igo-search-bar[_ngcontent-%COMP%]{flex:1;background-color:#fff;font-size:16px;margin-left:5px}[_nghost-%COMP%]   .workspace-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}[_nghost-%COMP%]   .workspace-actions[_ngcontent-%COMP%]{display:flex;align-items:center}#tour-button[_ngcontent-%COMP%]{font-weight:700;position:absolute;left:5px;top:50px;z-index:4}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){.tour-button-title[_ngcontent-%COMP%]{display:none}}mat-icon.disabled[_ngcontent-%COMP%]{color:#00000061}igo-map-browser[_ngcontent-%COMP%]{width:100%;height:100%}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution{left:50px;bottom:5px;text-align:left;padding:0;margin-right:90px;background-color:#fff0;width:calc(100% - 500px)}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution.ol-logo-only{height:inherit}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution.ol-collapsed{background:none}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution.ol-collapsed button{transform:none}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution button{transform:rotate(180deg);background-color:#fff;cursor:pointer}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution.ol-uncollapsible{height:auto}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution ul{background-color:#fff9;padding:2px .5em}igo-map-browser.has-expansion-panel[_ngcontent-%COMP%]   igo-baselayers-switcher[_ngcontent-%COMP%]{bottom:47px}igo-map-browser.sidenav-offset-baselayers[_ngcontent-%COMP%]   igo-baselayers-switcher[_ngcontent-%COMP%]{left:405px}igo-map-browser[_ngcontent-%COMP%]     .ol-overlaycontainer-stopevent{position:absolute;width:100%;left:0;bottom:0}igo-map-browser.sidenav-offset[_ngcontent-%COMP%]     .ol-overlaycontainer-stopevent{left:400px;width:calc(100% - 380px)}igo-map-browser.sidenav-offset[_ngcontent-%COMP%]     .ol-overlaycontainer-stopevent .ol-scale-line{left:40%}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){igo-map-browser.sidenav-offset[_ngcontent-%COMP%]     .ol-overlaycontainer-stopevent{display:none}}igo-map-browser.expansion-offset[_ngcontent-%COMP%]     .ol-overlaycontainer-stopevent{bottom:281px}igo-map-browser.expansion-offset-maximized[_ngcontent-%COMP%]     .ol-overlaycontainer-stopevent{bottom:496px}igo-map-browser.toast-offset-scale-line[_ngcontent-%COMP%]     .ol-overlaycontainer-stopevent   .ol-scale-line{bottom:50px}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){igo-map-browser.toast-offset-attribution[_ngcontent-%COMP%]     .ol-overlaycontainer-stopevent   .ol-attribution{bottom:50px}}mat-sidenav-container[_ngcontent-%COMP%]{height:100%;width:100%;background-color:#efefef;z-index:5;display:unset}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){mat-sidenav-content[_ngcontent-%COMP%]{z-index:auto}}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){igo-workspace-selector[_ngcontent-%COMP%]{width:100px}}igo-entity-table-paginator[_ngcontent-%COMP%]{position:absolute;right:0}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){igo-entity-table-paginator[_ngcontent-%COMP%]{margin-left:-30px}}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){igo-entity-table-paginator[_ngcontent-%COMP%]     .mat-mdc-paginator-range-label{margin:10px 1px 0 20px}}igo-entity-table[_ngcontent-%COMP%]     td.mat-column-edition{display:flex;height:100%;align-items:center}app-expansion-panel[_ngcontent-%COMP%]{position:absolute;bottom:0;z-index:5}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){@supports (-webkit-appearance: none) and (not (overflow: -webkit-marquee)) and (not (-ms-ime-align: auto)) and (not (-moz-appearance: none)){app-expansion-panel[_ngcontent-%COMP%]{z-index:5}}}app-toast-panel[_ngcontent-%COMP%]{position:absolute;left:50%;margin-left:-300px;max-width:-moz-fit-content;max-width:fit-content;z-index:5;outline:none}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){app-toast-panel[_ngcontent-%COMP%]{left:49px;margin-left:0;min-width:100%}}@media only screen and (orientation:portrait) and (min-width: 600px) and (max-width: 839px),only screen and (orientation:landscape) and (min-width: 960px) and (max-width: 1279px){app-toast-panel[_ngcontent-%COMP%]{max-width:inherit;left:calc(50% + 60px)}}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){app-expansion-panel.app-expansion-panel-expanded[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]    >div   igo-panel.app-full-toast-panel-opened, app-expansion-panel.app-expansion-panel-expanded[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]    >div   igo-panel.app-toast-panel-html-large, app-expansion-panel.app-expansion-panel-expanded[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]     igo-panel.app-full-toast-panel-opened, app-expansion-panel.app-expansion-panel-expanded[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]     igo-panel.app-toast-panel-html-large{max-height:50vh}app-expansion-panel.app-expansion-panel-expanded[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]    >div   igo-panel.app-full-toast-panel-opened .toast-content, app-expansion-panel.app-expansion-panel-expanded[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]    >div   igo-panel.app-toast-panel-html-large .toast-content, app-expansion-panel.app-expansion-panel-expanded[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]     igo-panel.app-full-toast-panel-opened .toast-content, app-expansion-panel.app-expansion-panel-expanded[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]     igo-panel.app-toast-panel-html-large .toast-content{max-height:42vh}}app-expansion-panel.app-expansion-panel-expanded-maximized[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]    >igo-panel{max-height:45vh}app-expansion-panel.app-expansion-panel-expanded-maximized[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]    >igo-panel .toast-content{max-height:40vh}@media only screen and (orientation:portrait) and (min-width: 600px) and (max-width: 839px),only screen and (orientation:landscape) and (min-width: 960px) and (max-width: 1279px){app-expansion-panel.app-expansion-panel-expanded-maximized[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]    >igo-panel{max-height:30vh}app-expansion-panel.app-expansion-panel-expanded-maximized[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]    >igo-panel .toast-content{max-height:24vh}}app-expansion-panel.app-expansion-panel-expanded-maximized[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]    >igo-panel.app-toast-panel-html{height:30vh}app-expansion-panel.app-expansion-panel-expanded-maximized[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]    >igo-panel.app-toast-panel-opened{height:auto;max-height:30vh}app-expansion-panel.app-expansion-panel-expanded-maximized[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]    >igo-panel.app-toast-panel-opened .toast-content{max-height:25vh}app-toast-panel.expansion-panel-expanded[_ngcontent-%COMP%], app-toast-panel[_ngcontent-%COMP%]:not(.has-expansion-panel), app-toast-panel.app-toast-panel-opened[_ngcontent-%COMP%]{bottom:0}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){app-toast-panel.expansion-panel-expanded[_ngcontent-%COMP%], app-toast-panel[_ngcontent-%COMP%]:not(.has-expansion-panel), app-toast-panel.app-toast-panel-opened[_ngcontent-%COMP%]{left:0}}igo-offline-button[_ngcontent-%COMP%]{margin-bottom:128px}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){igo-offline-button[_ngcontent-%COMP%]{margin-bottom:45px}}@media only screen and (orientation:portrait) and (min-width: 600px) and (max-width: 839px),only screen and (orientation:landscape) and (min-width: 960px) and (max-width: 1279px){igo-offline-button[_ngcontent-%COMP%]{margin-bottom:45px}}igo-geolocate-button[_ngcontent-%COMP%]{margin-bottom:85px}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){igo-geolocate-button[_ngcontent-%COMP%]{margin-bottom:0}}@media only screen and (orientation:portrait) and (min-width: 600px) and (max-width: 839px),only screen and (orientation:landscape) and (min-width: 960px) and (max-width: 1279px){igo-geolocate-button[_ngcontent-%COMP%]{margin-bottom:0}}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){igo-home-extent-button[_ngcontent-%COMP%]{margin-bottom:0;right:100px}}@media only screen and (orientation:portrait) and (min-width: 600px) and (max-width: 839px),only screen and (orientation:landscape) and (min-width: 960px) and (max-width: 1279px){igo-home-extent-button[_ngcontent-%COMP%]{margin-bottom:0;right:100px}}igo-zoom-button[_ngcontent-%COMP%]     button{box-shadow:0 3px 1px -2px #0003,0 2px 2px #00000024,0 1px 5px #0000001f}@media only screen and (orientation:portrait) and (min-width: 600px) and (max-width: 839px),only screen and (orientation:landscape) and (min-width: 960px) and (max-width: 1279px){igo-zoom-button[_ngcontent-%COMP%]{display:none}}app-toast-panel-for-expansion[_ngcontent-%COMP%]{position:absolute;bottom:0;left:50%;margin-left:-300px;width:600px;z-index:6}@media only screen and (min-width: 960px) and (max-width: 1280px){app-toast-panel-for-expansion[_ngcontent-%COMP%]{width:480px;margin-left:-240px}}@media only screen and (min-width: 600px) and (max-width: 959px){app-toast-panel-for-expansion[_ngcontent-%COMP%]{width:480px;margin-left:-240px}}@media only screen and (orientation:portrait) and (min-width: 600px) and (max-width: 839px),only screen and (orientation:landscape) and (min-width: 960px) and (max-width: 1279px){app-toast-panel-for-expansion[_ngcontent-%COMP%]{width:calc(100% - 98px);left:49px;margin-left:0}}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){app-toast-panel-for-expansion[_ngcontent-%COMP%]{width:calc(100% - 98px);left:49px;margin-left:0}}@media only screen and (orientation:portrait) and (max-width: 599px),only screen and (orientation:landscape) and (max-width: 959px){toast-panel-for-expansion.toast-panel-for-expansion-opened[_ngcontent-%COMP%]{width:100%;left:0}}.mat-mdc-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   mat-header-row[_ngcontent-%COMP%]   .mat-mdc-table-sticky[_ngcontent-%COMP%]{background:none}app-toast-panel-for-expansion[_ngcontent-%COMP%]   .toast-panel-for-expansion-close-button-container[_ngcontent-%COMP%]{position:absolute;top:-10px;right:-15px;z-index:6;padding:5px}app-toast-panel-for-expansion[_ngcontent-%COMP%]   .toast-panel-for-expansion-close-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:24px;line-height:24px}.add-feature[_ngcontent-%COMP%]{margin-top:5px}.actionbar-workspace[_ngcontent-%COMP%]{padding-left:0}  div.workspace-menu{max-width:-moz-fit-content!important;max-width:fit-content!important}  div.workspace-menu div.mat-mdc-menu-content   span.mat-checkbox-label,   div.workspace-menu div.mat-mdc-menu-content   div.mdc-list-item__primary-text{font-size:12px}"],data:{animation:[je(),ze(),Re(),Ze(),Le(),Ie(),De()]}})}class ne{configService;languageService;headerLogo;headerLogoPrint;constructor(n,t){this.configService=n,this.languageService=t,this.computeHeader()}computeHeader(){this.headerLogo=this.configService.getConfig("header.logo"),this.headerLogoPrint=this.configService.getConfig("header.logoPrint")}static \u0275fac=function(t){return new(t||ne)(e.Y36(g.M$),e.Y36(g.TS))};static \u0275cmp=e.Xpm({type:ne,selectors:[["app-header"]],decls:21,vars:14,consts:[["role","banner","color","primary",1,"banner"],[1,"container"],[1,"row"],[1,"col-6","col-md-10","d-flex","flex-wrap","align-items-center","zone-logo-title"],["tabindex","5","routerLink","",1,"logo"],["id","header-logo","alt","Logo",3,"src"],["id","header-logo-print","alt","Logo","width","199","height","60",3,"src"],["lang","fr","id","title-desktop",1,"zone-title","d-none","d-md-block"],[1,"col-6","col-md-2","d-flex","justify-content-end","zone-links"],[1,"nav","flex-column"],["rel","noopener noreferrer","alt","('header.contactUsUrl' | translate)","target","_blank",3,"href"],["lang","fr","id","title-mobile",1,"zone-title","d-md-none","col-12"]],template:function(t,o){1&t&&(e.TgZ(0,"mat-toolbar",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4),e._UZ(5,"img",5),e.qZA(),e._UZ(6,"img",6),e.TgZ(7,"p",7),e._uU(8),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"div",8)(11,"ul",9)(12,"li")(13,"a",10),e.ALo(14,"translate"),e._uU(15),e.ALo(16,"translate"),e.qZA()()()(),e.TgZ(17,"p",11)(18,"a"),e._uU(19),e.ALo(20,"translate"),e.qZA()()()()()),2&t&&(e.xp6(5),e.s9C("src",o.headerLogo,e.LSH),e.xp6(1),e.s9C("src",o.headerLogoPrint,e.LSH),e.xp6(2),e.hij(" ",e.lcZ(9,6,"header.title")," "),e.xp6(5),e.s9C("href",e.lcZ(14,8,"header.contactUsUrl"),e.LSH),e.xp6(2),e.Oqu(e.lcZ(16,10,"header.contactUs")),e.xp6(4),e.Oqu(e.lcZ(20,12,"header.title")))},dependencies:[N.Ye,F.X$],styles:[".portal-with-header{height:calc(100% - 72px)!important}@media screen and (min-width: 824px){  .portal-with-header{height:calc(100% - 72px)!important}}[_ngcontent-%COMP%]:root{--breakpoint-pgu-sm: 403px;--breakpoint-sm: 576px;--breakpoint-md: 768px;--breakpoint-lg: 992px;--breakpoint-xl: 1200px}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{padding:0;margin:0!important;width:100%;font-size:16px;font-family:Open sans,sans-serif}@media (min-width: 1280px) and (orientation: landscape){body[_ngcontent-%COMP%]{margin:0!important}}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%], div[_ngcontent-%COMP%], span[_ngcontent-%COMP%], a[_ngcontent-%COMP%], header[_ngcontent-%COMP%], nav[_ngcontent-%COMP%]{margin:0;padding:0;border:0;vertical-align:baseline}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{font-family:Open sans,sans-serif}.col-6[_ngcontent-%COMP%], .col-md-2[_ngcontent-%COMP%], .col-md-10[_ngcontent-%COMP%]{position:relative;width:100%}.col-12[_ngcontent-%COMP%]{flex:0 0 100%;max-width:100%}.container[_ngcontent-%COMP%]{width:100%;margin-right:auto;margin-left:auto}.row[_ngcontent-%COMP%]{-ms-display:flex;display:flex;flex-wrap:wrap;height:100%;width:98%;align-content:center;margin:auto}.col-6[_ngcontent-%COMP%]{flex:0 0 50%;max-width:50%}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-weight:700;color:#095797!important}a[_ngcontent-%COMP%]{word-break:break-word;overflow-wrap:break-word}img[_ngcontent-%COMP%]{vertical-align:middle;border-style:none}*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}.d-none[_ngcontent-%COMP%]{display:none}.flex-column[_ngcontent-%COMP%]{display:flex;flex-direction:column!important}.flex-wrap[_ngcontent-%COMP%]{flex-wrap:wrap!important}.d-flex[_ngcontent-%COMP%]{display:flex!important}.align-items-center[_ngcontent-%COMP%]{align-items:center!important}.justify-content-end[_ngcontent-%COMP%]{justify-content:flex-end!important}d-md-none[_ngcontent-%COMP%]{display:none}.align-self-end[_ngcontent-%COMP%]{align-self:flex-end!important}.banner[_ngcontent-%COMP%]{display:flex;width:100%;height:72px;box-sizing:border-box;font-family:Roboto,sans-serif;margin:0;padding:0;border:0;font-size:100%;vertical-align:baseline}a[_ngcontent-%COMP%]{color:#fff;text-decoration:none}.zone-logo-title[_ngcontent-%COMP%]{padding:.5rem 1.1rem .5rem 0}.zone-title[_ngcontent-%COMP%]{font-size:1rem}.zone-links[_ngcontent-%COMP%]{padding-left:1.1rem;max-width:100%;margin:auto;list-style:none;display:block;color:#fff}#header-logo[_ngcontent-%COMP%]{width:100%;min-width:7rem;max-height:28px}#header-logo-print[_ngcontent-%COMP%]{display:none}.zone-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font: .8rem/1.2rem roboto,sans-serif;-webkit-font-smoothing:antialiased;text-align:left;flex-wrap:wrap;list-style:none;padding:0;margin:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{padding:0}.zone-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .zone-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{text-decoration:underline;cursor:pointer}.buttonLanguage[_ngcontent-%COMP%]{background:none;border-style:none;padding:0;font: .8rem/1rem roboto,sans-serif;color:unset}#title-mobile[_ngcontent-%COMP%]{margin:auto 0;display:block}#title-desktop[_ngcontent-%COMP%]{display:none;color:#fff;margin:auto 0;padding:0}  igo-spinner{position:absolute;top:76px!important;right:4px;z-index:100}@media screen and (min-width: 576px){.zone-logo-title[_ngcontent-%COMP%], .zone-links[_ngcontent-%COMP%]{flex:0 0 50%;max-width:50%}}@media screen and (min-width: 768px){.col-md-10[_ngcontent-%COMP%]{flex:0 0 83.33333%;max-width:83.33333%}.zone-links[_ngcontent-%COMP%]{flex:0 0 16.66667%;max-width:16.66667%}#header-logo[_ngcontent-%COMP%]{max-height:39px;padding-right:3.75rem}.banner[_ngcontent-%COMP%]{height:72px}.d-md-block[_ngcontent-%COMP%]{display:block!important}.d-md-none[_ngcontent-%COMP%]{display:none!important}.zone-logo-title[_ngcontent-%COMP%]{flex:0 0 83.33333%;max-width:83.33333%}  igo-spinner{top:76px!important;right:4px;z-index:100}}"]})}class oe{languageService;constructor(n){this.languageService=n}static \u0275fac=function(t){return new(t||oe)(e.Y36(g.TS))};static \u0275cmp=e.Xpm({type:oe,selectors:[["app-footer"]],decls:21,vars:18,consts:[["id","footer-id",1,"footer-right"],[1,"order2"],[1,"footer-text"],["rel","noopener noreferrer","alt","('externallinks' | translate)","target","_blank",3,"href"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"span",1)(2,"span",2)(3,"a",3),e.ALo(4,"translate"),e._uU(5),e.ALo(6,"translate"),e.qZA()(),e.TgZ(7,"span",2),e._uU(8," | "),e.qZA(),e.TgZ(9,"span",2)(10,"a",3),e.ALo(11,"translate"),e._uU(12),e.ALo(13,"translate"),e.qZA()(),e.TgZ(14,"span",2),e._uU(15," | "),e.qZA(),e.TgZ(16,"span",2)(17,"a",3),e.ALo(18,"translate"),e._uU(19),e.ALo(20,"translate"),e.qZA()()()()),2&t&&(e.xp6(3),e.s9C("href",e.lcZ(4,6,"footer.url-conditions"),e.LSH),e.xp6(2),e.Oqu(e.lcZ(6,8,"footer.conditions")),e.xp6(5),e.s9C("href",e.lcZ(11,10,"footer.url-ministry"),e.LSH),e.xp6(2),e.Oqu(e.lcZ(13,12,"footer.ministry")),e.xp6(5),e.s9C("href",e.lcZ(18,14,"footer.url-gov"),e.LSH),e.xp6(2),e.Oqu(e.lcZ(20,16,"footer.gov")))},dependencies:[F.X$],styles:[".order2[_ngcontent-%COMP%]{order:2;margin-right:.5%;display:block;right:0;margin-left:140px;text-align:right!important;width:100%}.footer-right[_ngcontent-%COMP%]{z-index:666;background:rgba(255,255,255,.6392156863);font-size:.7rem;display:flex;align-items:center;height:29px}span.footer-text[_ngcontent-%COMP%]{color:#095797;align-self:center;margin-left:.5rem}span.footer-text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#095797;text-decoration:none}  div.ol-scale-line{position:fixed!important;display:flex;flex-direction:row;margin-left:.5%;left:70px!important;bottom:3px!important}  .ol-scale-line-inner{border:1px solid black;color:#000;border-top:none;order:1}"]})}function It(r,n){1&r&&e._UZ(0,"igo-auth-form")}function Dt(r,n){1&r&&e._UZ(0,"app-header",null,3)}function Ht(r,n){1&r&&e._UZ(0,"app-footer")}class ae{document;languageService;configService;analyticsListenerService;titleService;metaService;messageService;pwaService;router;authConfig;hasHeader=!0;hasFooter=!0;promptEvent;constructor(n,t,o,a,i,p,h,m,u){this.document=n,this.languageService=t,this.configService=o,this.analyticsListenerService=a,this.titleService=i,this.metaService=p,this.messageService=h,this.pwaService=m,this.router=u,this.authConfig=this.configService.getConfig("auth"),this.readTitleConfig(),this.readDescriptionConfig(),this.analyticsListenerService.listen(),this.detectOldBrowser(),this.hasHeader=void 0!==this.configService.getConfig("header.hasHeader")&&this.configService.getConfig("header.hasHeader"),this.hasFooter=void 0!==this.configService.getConfig("hasFooter")&&this.configService.getConfig("hasFooter"),this.setManifest(),this.installPrompt(),this.pwaService.checkForUpdates()}ngOnInit(){this.handleSplashScreen()}handleSplashScreen(){this.router.events.pipe((0,A.P)(n=>n instanceof T.m2),(0,Be.g)(500)).subscribe(()=>{this._removeSplashScreen()})}_removeSplashScreen(){const n=this.document.getElementById("splash-screen");if(!n)return;n.classList.add("is-destroying");const o=this.document.getElementById("splash-screen-stylesheet");setTimeout(()=>{O.Ku.remove(n),O.Ku.remove(o)},300)}readTitleConfig(){this.languageService.translate.get(this.configService.getConfig("title")).subscribe(n=>{n&&(this.titleService.setTitle(n),this.metaService.addTag({name:"title",content:n}))})}setManifest(){const n=this.configService.getConfig("app");if(n?.install?.enabled){const t=n.install.manifestPath||"manifest.webmanifest";document.querySelector("#igoManifestByConfig").setAttribute("href",t)}}installPrompt(){const n=this.configService.getConfig("app");n?.install?.enabled&&n?.install?.promote&&"iOS"!==O.WE.getOSName()&&window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),this.promptEvent=t,window.addEventListener("click",()=>{setTimeout(()=>{this.promptEvent.prompt(),this.promptEvent=void 0},750)},{once:!0})},{once:!0})}readDescriptionConfig(){const n=this.configService.getConfig("description");n&&this.metaService.addTag({name:"description",content:n})}detectOldBrowser(){O.WE.satisfies({ie:"<=11",chrome:"<64",firefox:"<60",safari:"<=11"})&&this.messageService.alert("oldBrowser.message","oldBrowser.title",{timeOut:15e3})}static \u0275fac=function(t){return new(t||ae)(e.Y36(f.K0),e.Y36(g.TS),e.Y36(g.M$),e.Y36(w.jZ),e.Y36(S.Dx),e.Y36(S.h_),e.Y36(g.ez),e.Y36(R),e.Y36(T.F0))};static \u0275cmp=e.Xpm({type:ae,selectors:[["app-root"]],decls:5,vars:4,consts:[["igoSpinnerActivity",""],[4,"ngIf"],["igoStopDropPropagation","",3,"ngClass"],["header",""]],template:function(t,o){1&t&&(e._UZ(0,"igo-spinner",0),e.YNc(1,It,1,0,"igo-auth-form",1),e.YNc(2,Dt,2,0,"app-header",1),e._UZ(3,"app-portal",2),e.YNc(4,Ht,1,0,"app-footer",1)),2&t&&(e.xp6(1),e.Q6J("ngIf",o.authConfig&&o.authConfig.url),e.xp6(1),e.Q6J("ngIf",o.hasHeader),e.xp6(1),e.Q6J("ngClass",o.hasHeader?o.hasFooter?"portal-with-header-footer":"portal-with-header":o.hasFooter?"portal-with-footer":"portal"),e.xp6(1),e.Q6J("ngIf",o.hasFooter))},dependencies:[f.mk,f.O5,ce.cD,c.Ft,c.OR,c.k8,te,ne,oe],styles:["[_nghost-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}igo-spinner[_ngcontent-%COMP%]{position:absolute;top:5px;right:5px;z-index:100}igo-message-center[_ngcontent-%COMP%]     simple-notifications   div.simple-notification-wrapper{right:10px}  .portal-with-header{height:calc(100% - 72px)!important}  .portal-with-header-footer{height:calc(100% - 101px)!important}  .portal-with-footer{height:calc(100% - 29px)!important}@media screen and (min-width: 824px){  .portal-with-header{height:calc(100% - 72px)!important}  .portal-with-header-footer{height:calc(100% - 101px)!important}}  .mat-mdc-form-field-icon-suffix   mat-icon{width:auto!important;height:-webkit-fill-available!important}"]})}class ie{static \u0275fac=function(t){return new(t||ie)};static \u0275mod=e.oAB({type:ie});static \u0275inj=e.cJS({imports:[f.ez,g.yR,N.g0]})}class se{static \u0275fac=function(t){return new(t||se)};static \u0275mod=e.oAB({type:se});static \u0275inj=e.cJS({imports:[f.ez,g.yR]})}var Wt=d(71268),Jt=d(39877);const Yt={showDelay:500,hideDelay:0,touchendHideDelay:0,disableTooltipInteractivity:!0};class re{static \u0275fac=function(t){return new(t||re)};static \u0275mod=e.oAB({type:re,bootstrap:[ae]});static \u0275inj=e.cJS({providers:[(0,g.TQ)({default:de.igo,path:"./config/config.json"}),g.MZ,(0,l.ZsY)(),(0,l.cmn)(),(0,l.YVN)(),(0,l.PIH)(),(0,l.jxb)(),(0,l.c43)(),(0,l.eKy)(),(0,l.MG6)(),(0,l.HAL)(),(0,l.$hA)(),{provide:e.ip1,useFactory:Qt,deps:[e.zs3,e.z2F,f.K0],multi:!0},(0,l.rQG)({path:"./assets/list-style.json"}),{provide:C.Jm,useValue:Yt},{provide:Wt.o2,useValue:{appearance:"fill"}}],imports:[S.b2,b.PW,T.Bz.forRoot([]),ce._e.forRoot(),g.u4.forRoot(),g.zZ,c.d3,c.Po,Q,ie,se,ye.Wr.register("ngsw-worker.js",{enabled:de.igo.app.pwa.enabled,registrationStrategy:"registerWithDelay:5000"})]})}function Qt(r,n,t){return()=>new Promise(o=>{n.isStable.pipe((0,A.P)(a=>!0===a),(0,Jt.b)(()=>{const a=r.get(g.TS),i=a.getLanguage();return a.translate.getTranslation(i)})).subscribe(a=>{const i=r.get(g.TS),p=i.getLanguage();i.translate.setTranslation(p,a);const h=r.get(g.M$),m=h.getConfig("theme")||"blue-theme";(0,O.jz)(t,m);const u=h.getConfig("title");i.translate.get(u).subscribe(_=>{(function Ut(r,n){const t=r.getElementById("splash-screen-title");t&&(t.innerText=n)})(t,_),o()})})})}d(4700);de.production&&(0,e.G48)(),S.q6().bootstrapModule(re).catch(r=>console.log(r))},46700:(M,pe,d)=>{var S={"./af":35528,"./af.js":35528,"./ar":1036,"./ar-dz":17579,"./ar-dz.js":17579,"./ar-kw":69588,"./ar-kw.js":69588,"./ar-ly":11650,"./ar-ly.js":11650,"./ar-ma":93258,"./ar-ma.js":93258,"./ar-sa":54085,"./ar-sa.js":54085,"./ar-tn":90287,"./ar-tn.js":90287,"./ar.js":1036,"./az":89757,"./az.js":89757,"./be":59620,"./be.js":59620,"./bg":31139,"./bg.js":31139,"./bm":4042,"./bm.js":4042,"./bn":19641,"./bn-bd":19126,"./bn-bd.js":19126,"./bn.js":19641,"./bo":494,"./bo.js":494,"./br":20934,"./br.js":20934,"./bs":26274,"./bs.js":26274,"./ca":45831,"./ca.js":45831,"./cs":92354,"./cs.js":92354,"./cv":79692,"./cv.js":79692,"./cy":58774,"./cy.js":58774,"./da":38955,"./da.js":38955,"./de":21557,"./de-at":24954,"./de-at.js":24954,"./de-ch":81881,"./de-ch.js":81881,"./de.js":21557,"./dv":16475,"./dv.js":16475,"./el":38877,"./el.js":38877,"./en-au":70454,"./en-au.js":70454,"./en-ca":67356,"./en-ca.js":67356,"./en-gb":10456,"./en-gb.js":10456,"./en-ie":28789,"./en-ie.js":28789,"./en-il":85471,"./en-il.js":85471,"./en-in":39664,"./en-in.js":39664,"./en-nz":97672,"./en-nz.js":97672,"./en-sg":80805,"./en-sg.js":80805,"./eo":87390,"./eo.js":87390,"./es":1564,"./es-do":51473,"./es-do.js":51473,"./es-mx":92089,"./es-mx.js":92089,"./es-us":84156,"./es-us.js":84156,"./es.js":1564,"./et":6513,"./et.js":6513,"./eu":7856,"./eu.js":7856,"./fa":2378,"./fa.js":2378,"./fi":22687,"./fi.js":22687,"./fil":80032,"./fil.js":80032,"./fo":46845,"./fo.js":46845,"./fr":8875,"./fr-ca":56425,"./fr-ca.js":56425,"./fr-ch":41746,"./fr-ch.js":41746,"./fr.js":8875,"./fy":67037,"./fy.js":67037,"./ga":11217,"./ga.js":11217,"./gd":37010,"./gd.js":37010,"./gl":51931,"./gl.js":51931,"./gom-deva":64488,"./gom-deva.js":64488,"./gom-latn":8032,"./gom-latn.js":8032,"./gu":34984,"./gu.js":34984,"./he":69090,"./he.js":69090,"./hi":42085,"./hi.js":42085,"./hr":38787,"./hr.js":38787,"./hu":2901,"./hu.js":2901,"./hy-am":59819,"./hy-am.js":59819,"./id":44074,"./id.js":44074,"./is":70715,"./is.js":70715,"./it":31746,"./it-ch":77040,"./it-ch.js":77040,"./it.js":31746,"./ja":3180,"./ja.js":3180,"./jv":34346,"./jv.js":34346,"./ka":65538,"./ka.js":65538,"./kk":79772,"./kk.js":79772,"./km":87905,"./km.js":87905,"./kn":79125,"./kn.js":79125,"./ko":69140,"./ko.js":69140,"./ku":2354,"./ku.js":2354,"./ky":63768,"./ky.js":63768,"./lb":14016,"./lb.js":14016,"./lo":83169,"./lo.js":83169,"./lt":62353,"./lt.js":62353,"./lv":83243,"./lv.js":83243,"./me":52338,"./me.js":52338,"./mi":35555,"./mi.js":35555,"./mk":85794,"./mk.js":85794,"./ml":53151,"./ml.js":53151,"./mn":46458,"./mn.js":46458,"./mr":69165,"./mr.js":69165,"./ms":8680,"./ms-my":87477,"./ms-my.js":87477,"./ms.js":8680,"./mt":79684,"./mt.js":79684,"./my":40285,"./my.js":40285,"./nb":45922,"./nb.js":45922,"./ne":29040,"./ne.js":29040,"./nl":5066,"./nl-be":74460,"./nl-be.js":74460,"./nl.js":5066,"./nn":53693,"./nn.js":53693,"./oc-lnc":88676,"./oc-lnc.js":88676,"./pa-in":92341,"./pa-in.js":92341,"./pl":57416,"./pl.js":57416,"./pt":84344,"./pt-br":30113,"./pt-br.js":30113,"./pt.js":84344,"./ro":72643,"./ro.js":72643,"./ru":61305,"./ru.js":61305,"./sd":96095,"./sd.js":96095,"./se":74486,"./se.js":74486,"./si":58742,"./si.js":58742,"./sk":96722,"./sk.js":96722,"./sl":3345,"./sl.js":3345,"./sq":52416,"./sq.js":52416,"./sr":39450,"./sr-cyrl":50501,"./sr-cyrl.js":50501,"./sr.js":39450,"./ss":32222,"./ss.js":32222,"./sv":9454,"./sv.js":9454,"./sw":19638,"./sw.js":19638,"./ta":96494,"./ta.js":96494,"./te":94435,"./te.js":94435,"./tet":25003,"./tet.js":25003,"./tg":13706,"./tg.js":13706,"./th":16025,"./th.js":16025,"./tk":59780,"./tk.js":59780,"./tl-ph":22068,"./tl-ph.js":22068,"./tlh":39167,"./tlh.js":39167,"./tr":32494,"./tr.js":32494,"./tzl":58707,"./tzl.js":58707,"./tzm":91296,"./tzm-latn":34532,"./tzm-latn.js":34532,"./tzm.js":91296,"./ug-cn":12086,"./ug-cn.js":12086,"./uk":85069,"./uk.js":85069,"./ur":29304,"./ur.js":29304,"./uz":95115,"./uz-latn":97609,"./uz-latn.js":97609,"./uz.js":95115,"./vi":34802,"./vi.js":34802,"./x-pseudo":65605,"./x-pseudo.js":65605,"./yo":88456,"./yo.js":88456,"./zh-cn":23272,"./zh-cn.js":23272,"./zh-hk":9402,"./zh-hk.js":9402,"./zh-mo":48101,"./zh-mo.js":48101,"./zh-tw":40262,"./zh-tw.js":40262};function e(b){var g=T(b);return d(g)}function T(b){if(!d.o(S,b)){var g=new Error("Cannot find module '"+b+"'");throw g.code="MODULE_NOT_FOUND",g}return S[b]}e.keys=function(){return Object.keys(S)},e.resolve=T,M.exports=e,e.id=46700}},M=>{M.O(0,[736],()=>{return S=28851,M(M.s=S);var S});M.O()}]);
//# sourceMappingURL=main.1e38ea02f12f94ca.js.map